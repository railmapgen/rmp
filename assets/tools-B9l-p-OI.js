import{R as ae,j as s,h as L,v as r,aI as te,aJ as g,aK as S,B as m,aL as M,aM as v,O as ne,y as V,az as oe,aw as le,aN as ie,U as ce,aq as re}from"./chakra-BZH9ddpD.js";import{u as K,b as U}from"./react-CLIJjNOF.js";import{c as de,e as k,aE as xe,a2 as he,aF as p,aG as ue,aH as me,aI as pe,aJ as j,a3 as je,L as D,q as O,p as o,aK as E,aL as fe,t as be,aM as ge,b as Se}from"./index-D02JJVEe.js";import{b as u,s as F}from"./misc-nodes-Cha3-rp5.js";import{l as Me,a as ve}from"./localized-order-BEQhECIs.js";const d={justifyContent:"flex-start",p:0,w:"100%",h:10},C={p:2.5,h:10},P={p:0,display:"flex",flexDirection:"column"},Ce=s.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeDasharray:"2",fill:"none"})}),H=.3,Ae=()=>{var z,B;const{i18n:f,t:a}=K(),l=de(),{activeSubscriptions:x}=k(e=>e.account),{preference:{toolsPanel:{expand:h}}}=k(e=>e.app),{mode:i,lastTool:b,count:{masters:q}}=k(e=>e.runtime),W=ae("white","var(--chakra-colors-gray-800)"),J=U.useCallback(e=>{l(xe(e))},[]),{theme:X,requestThemeChange:G}=he({onThemeApplied:J}),[t,$]=U.useState(h),Q=()=>{h?$(!1):setTimeout(()=>$(!0),(H+.02)*1e3),l(fe(!h))},Y=e=>l(j("station-".concat(e))),y=(e,n)=>{const c=E[e],T=c.metadata.supportLinePathType.includes(n),A=!c.isPro||x.RMP_CLOUD;return T&&A},_=(e,n)=>{const c=O[e],T=E[n].metadata.supportLinePathType.includes(e),A=!c.isPro||x.RMP_CLOUD;return T&&A},Z=e=>{let{style:n}=p(i);!n&&b&&(n=p(b).style);const c=n&&y(n,e)?n:be.SingleColor;l(j("line-".concat(e,"/").concat(c)))},ee=e=>{let{path:n}=p(i);!n&&b&&(n=p(b).path);const c=n&&_(n,e)?n:D.Diagonal;l(j("line-".concat(c,"/").concat(e)))},I=e=>l(j("misc-node-".concat(e))),{path:w,style:N}=p(i),se=!x.RMP_CLOUD&&q+1>ue;return s.jsxs(L,{flexShrink:"0",direction:"column",width:h?450:10,maxWidth:"100%",height:"100%",bg:W,zIndex:"5",transition:"width ".concat(H,"s ease-in-out"),children:[s.jsx(r,{"aria-label":"Menu",leftIcon:t?s.jsx(me,{size:40,transform:"rotate(90)"}):s.jsx(pe,{size:40,transform:"rotate(90)"}),onClick:Q,sx:d,children:t?a("panel.tools.showLess"):void 0}),s.jsx(L,{className:"tools",overflow:"auto",children:s.jsxs(te,{width:"100%",allowMultiple:!0,defaultIndex:[0,2,3],children:[s.jsx(r,{"aria-label":"select",leftIcon:Ce,onClick:()=>l(j(i==="select"?"free":"select")),variant:i==="select"?"solid":"outline",sx:d,children:t?a("panel.tools.select"):void 0}),s.jsxs(g,{children:[s.jsxs(S,{sx:C,children:[t&&s.jsx(m,{as:"span",flex:"1",textAlign:"left",children:a("panel.tools.section.lineDrawing")}),s.jsx(M,{})]}),s.jsxs(v,{sx:P,children:[s.jsxs(L,{children:[s.jsx(je,{theme:X,onClick:G}),s.jsx(ne,{fontWeight:"600",pl:"1",alignSelf:"center",children:t?a("color"):void 0})]}),Object.values(D).filter(e=>e!==D.Simple||x.RMP_CLOUD).map(e=>s.jsx(r,{"aria-label":e,leftIcon:O[e].icon,onClick:()=>Z(e),variant:w===e?"solid":"outline",isDisabled:N?!_(e,N):!1,sx:d,children:t?a(O[e].metadata.displayName):void 0},e)),s.jsx(r,{"aria-label":o.Virtual,leftIcon:u[o.Virtual].icon,onClick:()=>I(o.Virtual),variant:i==="misc-node-".concat(o.Virtual)?"solid":"outline",sx:d,children:t?a(u[o.Virtual].metadata.displayName):void 0})]})]}),s.jsxs(g,{children:[s.jsxs(S,{sx:C,children:[t&&s.jsx(m,{as:"span",flex:"1",textAlign:"left",children:a("panel.tools.section.lineStyles")}),s.jsx(M,{})]}),s.jsxs(v,{sx:P,children:[Object.entries(E).map(([e,n])=>s.jsx(r,{"aria-label":e,leftIcon:s.jsx(m,{boxSize:"40px"}),onClick:()=>ee(e),variant:N===e?"solid":"outline",isDisabled:w?!y(e,w):!1,sx:d,children:t?a(n.metadata.displayName):void 0},e)),s.jsx(R,{type:"line-styles",expand:t})]})]}),s.jsxs(g,{children:[s.jsxs(S,{sx:C,children:[t&&s.jsx(m,{as:"span",flex:"1",textAlign:"left",children:a("panel.tools.section.stations")}),s.jsx(M,{})]}),s.jsxs(v,{sx:P,children:[(z=Me[f.language])==null?void 0:z.map(e=>s.jsx(r,{"aria-label":e,leftIcon:F[e].icon,onClick:()=>Y(e),variant:i==="station-".concat(e)?"solid":"outline",sx:d,children:t?a(F[e].metadata.displayName):void 0},e)),s.jsx(R,{type:"station",expand:t})]})]}),s.jsxs(g,{children:[s.jsxs(S,{sx:C,children:[t&&s.jsx(m,{as:"span",flex:"1",textAlign:"left",children:a("panel.tools.section.miscellaneousNodes")}),s.jsx(M,{})]}),s.jsxs(v,{sx:P,children:[s.jsxs(r,{"aria-label":o.Master,leftIcon:u[o.Master].icon,onClick:()=>I(o.Master),variant:i==="misc-node-".concat(o.Master)?"solid":"outline",isDisabled:se,sx:d,children:[t?a(u[o.Master].metadata.displayName):void 0,t?s.jsxs(s.Fragment,{children:[s.jsx(V,{ml:"1",colorScheme:"green",children:"New"}),s.jsx(oe,{label:a("header.settings.proWithTrial"),children:s.jsx(V,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})})]}):void 0]}),(B=ve[f.language])==null?void 0:B.filter(e=>e!==o.Virtual&&e!==o.I18nText&&e!==o.Master).map(e=>s.jsx(r,{"aria-label":e,leftIcon:u[e].icon,onClick:()=>I(e),variant:i==="misc-node-".concat(e)?"solid":"outline",sx:d,children:t?a(u[e].metadata.displayName):void 0},e)),s.jsx(R,{type:"misc-node",expand:t})]})]})]})})]})},R=f=>{const{type:a,expand:l}=f,{t:x}=K(),h=a==="misc-node"?"nodes":a;return s.jsxs(le,{children:[s.jsx(ie.Provider,{value:{style:{padding:5},size:"40px"},children:s.jsx(ge,{})}),l&&s.jsxs(s.Fragment,{children:[s.jsx(ce,{color:"teal.500",href:"https://github.com/railmapgen/rmp/blob/main/docs/".concat(h,".md"),isExternal:!0,children:x("panel.tools.learnHowToAdd.".concat(a))}),s.jsx(re,{as:Se,color:"teal.500",mr:"auto"})]})]})};export{Ae as default};
