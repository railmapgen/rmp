!function(){var e=["format"],n=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"],t=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"],r=["version"],i=["version"];function s(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=h(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw s}}}}function o(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return e};var e={},n=Object.prototype,t=n.hasOwnProperty,r=Object.defineProperty||function(e,n,t){e[n]=t.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{c({},"")}catch(H){c=function(e,n,t){return e[n]=t}}function u(e,n,t,i){var s=n&&n.prototype instanceof f?n:f,o=Object.create(s.prototype),a=new C(i||[]);return r(o,"_invoke",{value:k(e,t,a)}),o}function h(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(H){return{type:"throw",arg:H}}}e.wrap=u;var d={};function f(){}function m(){}function g(){}var x={};c(x,s,(function(){return this}));var j=Object.getPrototypeOf,v=j&&j(j(E([])));v&&v!==n&&t.call(v,s)&&(x=v);var y=g.prototype=f.prototype=Object.create(x);function b(e){["next","throw","return"].forEach((function(n){c(e,n,(function(e){return this._invoke(n,e)}))}))}function w(e,n){function i(r,s,o,a){var l=h(e[r],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==p(u)&&t.call(u,"__await")?n.resolve(u.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):n.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,t){function r(){return new n((function(n,r){i(e,t,n,r)}))}return s=s?s.then(r,r):r()}})}function k(e,n,t){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return _()}for(t.method=i,t.arg=s;;){var o=t.delegate;if(o){var a=S(o,t);if(a){if(a===d)continue;return a}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var l=h(e,n,t);if("normal"===l.type){if(r=t.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:t.done}}"throw"===l.type&&(r="completed",t.method="throw",t.arg=l.arg)}}}function S(e,n){var t=n.method,r=e.iterator[t];if(void 0===r)return n.delegate=null,"throw"===t&&e.iterator.return&&(n.method="return",n.arg=void 0,S(e,n),"throw"===n.method)||"return"!==t&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+t+"' method")),d;var i=h(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,d):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function z(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function O(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(z,this),this.reset(!0)}function E(e){if(e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(t.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return i.next=i}}return{next:_}}function _(){return{value:void 0,done:!0}}return m.prototype=g,r(y,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===m||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(n,t,r,i,s){void 0===s&&(s=Promise);var o=new w(u(n,t,r,i),s);return e.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(y),c(y,l,"Generator"),c(y,s,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var n=Object(e),t=[];for(var r in n)t.push(r);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&t.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=t.call(s,"catchLoc"),l=t.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&t.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=n,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),d},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),O(t),d}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var i=r.arg;O(t)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:E(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),d}},e}function a(e,n,t,r,i,s,o){try{var a=e[s](o),l=a.value}catch(c){return void t(c)}a.done?n(l):Promise.resolve(l).then(r,i)}function l(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function o(e){a(s,r,i,o,l,"next",e)}function l(e){a(s,r,i,o,l,"throw",e)}o(void 0)}))}}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==n);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,n)||h(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,n){if(e){if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,n):void 0}}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function f(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){x(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function x(e,n,t){return(n=function(e){var n=function(e,n){if("object"!==p(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===p(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}System.register(["./chakra-legacy-fe32153b.js","./react-legacy-9060605e.js","./index-legacy-a80aadbf.js","./stations-legacy-1ff199c9.js","./helpers-legacy-0644561d.js","./change-types-legacy-316f3109.js"],(function(a,h){"use strict";var d,m,j,v,y,b,w,k,S,z,O,C,E,_,H,N,A,P,T,M,R,I,L,B,D,G,W,F,U,V,J,K,Y,Z,q,$,Q,X,ee,ne,te,re,ie,se,oe,ae,le,ce,ue,he,de,fe,pe,me,ge,xe,je,ve,ye,be,we,ke,Se,ze,Oe,Ce,Ee,_e,He,Ne,Ae,Pe,Te,Me,Re,Ie,Le,Be,De,Ge,We,Fe,Ue,Ve,Je,Ke,Ye,Ze,qe,$e,Qe,Xe,en,nn,tn,rn,sn,on,an,ln,cn,un,hn,dn,fn,pn,mn,gn,xn,jn,vn,yn,bn,wn,kn,Sn,zn,On,Cn,En,_n,Hn,Nn,An;return{setters:[function(e){d=e.j,m=e.a8,j=e.Q,v=e.a9,y=e.aa,b=e.G,w=e.ab,k=e.ac,S=e.k,z=e.$,O=e.M,C=e.a0,E=e.p,_=e.s,H=e.q,N=e.r,A=e.I,P=e.h,T=e.t,M=e.ad,R=e.ae,I=e.g,L=e.w,B=e.a7,D=e.v,G=e.af,W=e.ag,F=e.F,U=e._,V=e.B,J=e.ah,K=e.a1,Y=e.ai,Z=e.aj,q=e.ak,$=e.c,Q=e.i,X=e.e,ee=e.f,ne=e.al,te=e.am,re=e.O,ie=e.an,se=e.ao,oe=e.ap,ae=e.aq,le=e.ar,ce=e.as,ue=e.at,he=e.au,de=e.av,fe=e.x,pe=e.y},function(e){me=e.g,ge=e.r,xe=e.b},function(e){je=e.w,ve=e.g,ye=e.a,be=e.b,we=e.I,ke=e.u,Se=e.r,ze=e.n,Oe=e.S,Ce=e.L,Ee=e.l,_e=e.c,He=e.R,Ne=e.d,Ae=e.e,Pe=e.s,Te=e.f,Me=e.h,Re=e.i,Ie=e.j,Le=e.M,Be=e.k,De=e.m,Ge=e.o,We=e.p,Fe=e.q,Ue=e.t,Ve=e.C,Je=e.v,Ke=e.x,Ye=e.y,Ze=e.z,qe=e.A,$e=e.B,Qe=e.D,Xe=e.E,en=e.F,nn=e.G,tn=e.H,rn=e.J,sn=e.K,on=e.T,an=e.N,ln=e.O,cn=e.P,un=e.Q,hn=e.U,dn=e.V,fn=e.W,pn=e.X,mn=e.Y,gn=e.Z,xn=e._,jn=e.$,vn=e.a0,yn=e.a1,bn=e.a2,wn=e.a3,kn=e.a4,Sn=e.a5,zn=e.a6},function(e){On=e.s},function(e){Cn=e.c,En=e.f,_n=e.F,Hn=e.g,Nn=e.i},function(e){An=e.c}],execute:function(){a("default",(function(){return d.jsxs(d.Fragment,{children:[d.jsx(cr,{}),d.jsx(ur,{})]})}));var h=me({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Pn=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Tn(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(h[t[1]]||"/"===e.charAt(e.length-2))&&(n.voidElement=!0),n.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var i=new RegExp(Pn),s=null;null!==(s=i.exec(e));)if(s[0].trim())if(s[1]){var o=s[1].trim(),a=[o,""];o.indexOf("=")>-1&&(a=o.split("=")),n.attrs[a[0]]=a[1],i.lastIndex--}else s[2]&&(n.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return n}var Mn=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Rn=/^\s*$/,In=Object.create(null);var Ln=function(e,n){n||(n={}),n.components||(n.components=In);var t,r=[],i=[],s=-1,o=!1;if(0!==e.indexOf("<")){var a=e.indexOf("<");r.push({type:"text",content:-1===a?e:e.substring(0,a)})}return e.replace(Mn,(function(a,l){if(o){if(a!=="</"+t.name+">")return;o=!1}var c,u="/"!==a.charAt(1),h=a.startsWith("\x3c!--"),d=l+a.length,f=e.charAt(d);if(h){var p=Tn(a);return s<0?(r.push(p),r):((c=i[s]).children.push(p),r)}if(u&&(s++,"tag"===(t=Tn(a)).type&&n.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!f||"<"===f||t.children.push({type:"text",content:e.slice(d,e.indexOf("<",d))}),0===s&&r.push(t),(c=i[s-1])&&c.children.push(t),i[s]=t),(!u||t.voidElement)&&(s>-1&&(t.voidElement||t.name===a.slice(2,-1))&&(s--,t=-1===s?r:i[s]),!o&&"<"!==f&&f)){c=-1===s?r:i[s].children;var m=e.indexOf("<",d),g=e.slice(d,-1===m?void 0:m);Rn.test(g)&&(g=" "),(m>-1&&s+c.length>=0||" "!==g)&&c.push({type:"text",content:g})}})),r};function Bn(e,n){if(!e)return!1;var t=e.props?e.props.children:e.children;return n?t.length>0:!!t}function Dn(e){return e?e.props?e.props.children:e.children:[]}function Gn(e){return Array.isArray(e)?e:[e]}function Wn(n,t){if(!n)return"";var r="",i=Gn(n),s=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return i.forEach((function(n,i){if("string"==typeof n)r+="".concat(n);else if(ge.isValidElement(n)){var o=Object.keys(n.props).length,a=s.indexOf(n.type)>-1,l=n.props.children;if(!l&&a&&0===o)r+="<".concat(n.type,"/>");else if(l||a&&0===o)if(n.props.i18nIsDynamicList)r+="<".concat(i,"></").concat(i,">");else if(a&&1===o&&"string"==typeof l)r+="<".concat(n.type,">").concat(l,"</").concat(n.type,">");else{var c=Wn(l,t);r+="<".concat(i,">").concat(c,"</").concat(i,">")}else r+="<".concat(i,"></").concat(i,">")}else if(null===n)ye("Trans: the passed in value is invalid - seems you passed in a null child.");else if("object"===p(n)){var u=n.format,h=f(n,e),d=Object.keys(h);if(1===d.length){var m=u?"".concat(d[0],", ").concat(u):d[0];r+="{{".concat(m,"}}")}else ye("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",n)}else ye("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",n)})),r}function Fn(e,n,t,r,i,s){if(""===n)return[];var o=r.transKeepBasicHtmlNodesFor||[],a=n&&new RegExp(o.join("|")).test(n);if(!e&&!a)return[n];var l={};!function e(n){Gn(n).forEach((function(n){"string"!=typeof n&&(Bn(n)?e(Dn(n)):"object"!==p(n)||ge.isValidElement(n)||Object.assign(l,n))}))}(e);var c=Ln("<0>".concat(n,"</0>")),u=g(g({},l),i);function h(e,n,t){var r=Dn(e),i=f(r,n.children,t);return function(e){return"[object Array]"===Object.prototype.toString.call(e)&&e.every((function(e){return ge.isValidElement(e)}))}(r)&&0===i.length?r:i}function d(e,n,t,r,i){e.dummy&&(e.children=n),t.push(ge.cloneElement(e,g(g({},e.props),{},{key:r}),i?void 0:n))}function f(n,i,l){var c=Gn(n);return Gn(i).reduce((function(n,i,m){var x,j,v,y=i.children&&i.children[0]&&i.children[0].content&&t.services.interpolator.interpolate(i.children[0].content,u,t.language);if("tag"===i.type){var b=c[parseInt(i.name,10)];!b&&1===l.length&&l[0][i.name]&&(b=l[0][i.name]),b||(b={});var w=0!==Object.keys(i.attrs).length?(x={props:i.attrs},(v=g({},j=b)).props=Object.assign(x.props,j.props),v):b,k=ge.isValidElement(w),S=k&&Bn(i,!0)&&!i.voidElement,z=a&&"object"===p(w)&&w.dummy&&!k,O="object"===p(e)&&null!==e&&Object.hasOwnProperty.call(e,i.name);if("string"==typeof w){var C=t.services.interpolator.interpolate(w,u,t.language);n.push(C)}else if(Bn(w)||S){d(w,h(w,i,l),n,m)}else if(z){var E=f(c,i.children,l);n.push(ge.cloneElement(w,g(g({},w.props),{},{key:m}),E))}else if(Number.isNaN(parseFloat(i.name))){if(O)d(w,h(w,i,l),n,m,i.voidElement);else if(r.transSupportBasicHtmlNodes&&o.indexOf(i.name)>-1)if(i.voidElement)n.push(ge.createElement(i.name,{key:"".concat(i.name,"-").concat(m)}));else{var _=f(c,i.children,l);n.push(ge.createElement(i.name,{key:"".concat(i.name,"-").concat(m)},_))}else if(i.voidElement)n.push("<".concat(i.name," />"));else{var H=f(c,i.children,l);n.push("<".concat(i.name,">").concat(H,"</").concat(i.name,">"))}}else if("object"!==p(w)||k)1===i.children.length&&y?n.push(ge.cloneElement(w,g(g({},w.props),{},{key:m}),y)):n.push(ge.cloneElement(w,g(g({},w.props),{},{key:m})));else{var N=i.children[0]?y:null;N&&n.push(N)}}else if("text"===i.type){var A=r.transWrapTextNodes,P=s?r.unescape(t.services.interpolator.interpolate(i.content,u,t.language)):t.services.interpolator.interpolate(i.content,u,t.language);A?n.push(ge.createElement(A,{key:"".concat(i.name,"-").concat(m)},P)):n.push(P)}return n}),[])}return Dn(f([{dummy:!0,children:e||[]}],c,Gn(e||[]))[0])}function Un(e){var t=e.children,r=e.count,i=e.parent,s=e.i18nKey,o=e.context,a=e.tOptions,l=void 0===a?{}:a,c=e.values,u=e.defaults,h=e.components,d=e.ns,p=e.i18n,m=e.t,x=e.shouldUnescape,j=f(e,n),v=p||be();if(!v)return je("You will need to pass in an i18next instance by using i18nextReactModule"),t;var y=m||v.t.bind(v)||function(e){return e};o&&(l.context=o);var b=g(g({},ve()),v.options&&v.options.react),w=d||y.ns||v.options&&v.options.defaultNS;w="string"==typeof w?[w]:w||["translation"];var k=u||Wn(t,b)||b.transEmptyNodeValue||s,S=b.hashTransKey,z=s||(S?S(k):k),O=c?l.interpolation:{interpolation:g(g({},l.interpolation),{},{prefix:"#$?",suffix:"?$#"})},C=g(g(g(g({},l),{},{count:r},c),O),{},{defaultValue:k,ns:w}),E=Fn(h||t,z?y(z,C):k,v,b,C,x),_=void 0!==i?i:b.defaultTransParent;return _?ge.createElement(_,j,E):E}function Vn(e){var n=e.children,r=e.count,i=e.parent,s=e.i18nKey,o=e.context,a=e.tOptions,l=void 0===a?{}:a,c=e.values,u=e.defaults,h=e.components,d=e.ns,p=e.i18n,m=e.t,x=e.shouldUnescape,j=f(e,t),v=ge.useContext(we)||{},y=v.i18n,b=v.defaultNS,w=p||y||be(),k=m||w&&w.t.bind(w);return Un(g({children:n,count:r,parent:i,i18nKey:s,context:o,tOptions:l,values:c,defaults:u,components:h,ns:d||k&&k.ns||b||w&&w.options&&w.options.defaultNS,i18n:w,t:m,shouldUnescape:x},j))}var Jn=function(e){return ke(Se.ready(),e)},Kn={ar:{ar:"العربية",en:"Arabic",ko:"아랍어","zh-Hans":"阿拉伯文","zh-Hant":"阿拉伯文"},az:{az:"Azərbaycanca",en:"Azerbaijani",ko:"아제르바이잔어","zh-Hans":"阿塞拜疆文","zh-Hant":"阿塞拜疆文"},ca:{ca:"Català",en:"Catalan",ko:"카탈루냐어","zh-Hans":"加泰罗尼亚文","zh-Hant":"加泰隆尼亞文"},da:{da:"Dansk",en:"Danish",ko:"덴마크어","zh-Hans":"丹麦文","zh-Hant":"丹麥文"},de:{de:"Deutsch",en:"German",ko:"독일어","zh-Hans":"德文","zh-Hant":"德文"},el:{el:"Ελληνικά",en:"Greek",ko:"그리스어","zh-Hans":"希腊文","zh-Hant":"希臘文"},en:{en:"English",ko:"영어","zh-Hans":"英文","zh-Hant":"英文"},es:{en:"Spanish",es:"Español",ko:"스페인어","zh-Hans":"西班牙文","zh-Hant":"西班牙文"},fa:{en:"Persian",fa:"فارسی",ko:"페르시아어","zh-Hans":"波斯文","zh-Hant":"波斯文"},fr:{en:"French",fr:"Français",ko:"프랑스어","zh-Hans":"法文","zh-Hant":"法文"},ga:{en:"Irish",ga:"Gaeilge",ko:"아일랜드어","zh-Hans":"爱尔兰文","zh-Hant":"愛爾蘭文"},gd:{en:"Scottish Gaelic",gd:"Gàidhlig",ko:"스코틀랜드 게일어","zh-Hans":"苏格兰盖尔文","zh-Hant":"蘇格蘭蓋爾文"},hi:{en:"Hindi",hi:"हिन्दी",ko:"힌디어","zh-Hans":"印地文","zh-Hant":"印地文"},hu:{en:"Hungarian",hu:"Magyar",ko:"헝가리어","zh-Hans":"匈牙利文","zh-Hant":"匈牙利文"},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"인도네시아어","zh-Hans":"印尼文","zh-Hant":"印尼文"},it:{en:"Italian",it:"Italiano",ko:"이탈리아어","zh-Hans":"意大利文","zh-Hant":"意大利文"},ja:{en:"Japanese",ja:"日本語",ko:"일본어","zh-Hans":"日文","zh-Hant":"日文"},kk:{en:"Kazakh",kk:"Қазақша",ko:"카자흐어","zh-Hans":"哈萨克文","zh-Hant":"哈薩克文"},ko:{en:"Korean",ko:"한국어","zh-Hans":"韩文","zh-Hant":"韓文"},ms:{en:"Malay",ko:"말레이어",ms:"Bahasa Melayu","zh-Hans":"马来文","zh-Hant":"馬來文"},no:{en:"Norwegian",ko:"노르웨이어",no:"Norsk","zh-Hans":"挪威文","zh-Hant":"挪威文"},pl:{en:"Polish",ko:"폴란드어",pl:"Polski","zh-Hans":"波兰文","zh-Hant":"波蘭文"},pt:{en:"Portuguese",ko:"포르투갈어",pt:"Português","zh-Hans":"葡萄牙文","zh-Hant":"葡萄牙文"},ro:{en:"Romanian",ko:"루마니아어",ro:"Română","zh-Hans":"罗马尼亚文","zh-Hant":"羅馬尼亞文"},ru:{en:"Russian",ko:"러시아어",ru:"Русский","zh-Hans":"俄文","zh-Hant":"俄文"},sv:{en:"Swedish",ko:"스웨덴어",sv:"Svenska","zh-Hans":"瑞典文","zh-Hant":"瑞典文"},th:{en:"Thai",ko:"태국어",th:"ภาษาไทย","zh-Hans":"泰文","zh-Hant":"泰文"},tr:{en:"Turkish",ko:"튀르키예어",tr:"Türkçe","zh-Hans":"土耳其文","zh-Hant":"土耳其文"},uk:{en:"Ukrainian",ko:"우크라이나어",uk:"Українська","zh-Hans":"乌克兰文","zh-Hant":"烏克蘭文"},ur:{en:"Urdo",ko:"우르두어",ur:"اردو","zh-Hans":"乌尔都文","zh-Hant":"烏爾都文"},uz:{en:"Uzbek",ko:"우즈베크어",uz:"Oʻzbekcha","zh-Hans":"乌兹别克文","zh-Hant":"烏茲別克文"},vi:{en:"Vietnamese",ko:"베트남어",vi:"Tiếng Việt","zh-Hans":"越南文","zh-Hant":"越南文"},"zh-Hans":{en:"Simplified Chinese",ko:"중국어 간체자","zh-Hans":"简体中文","zh-Hant":"簡體中文"},"zh-Hant":{en:"Traditional Chinese",ko:"중국어 정체자","zh-Hans":"繁体中文","zh-Hant":"繁體中文"}},Yn=function(e){return e.left="l",e.right="r",e}(Yn||{}),Zn=function(e){return e.through="through",e.nonThrough="nonthrough",e}(Zn||{}),qn=function(e){return e.local="local",e.express="express",e.direct="direct",e}(qn||{}),$n=function(e){return e.MTR="mtr",e.GZMTR="gzmtr",e.SHMetro="shmetro",e}($n||{}),Qn=function(e){return e.sh="sh",e.sh2020="sh2020",e}(Qn||{}),Xn={h:500,maxH:"70%","& iframe":{h:"100%",w:"100%"}};function et(e){var n=e.isOpen,t=e.onClose,r=e.onImport,i=u(ge.useState(crypto.randomUUID()),1)[0],s="/rmg/#/import?"+new URLSearchParams({parentComponent:Se.getAppName(),parentId:i});return ge.useEffect((function(){var e=new BroadcastChannel("rmg-bridge--"+i);return e.onmessage=function(e){var n=e.data,i=n.event,s=n.data;console.log("[rmp] Received event from RMG app clip:",i),"CLOSE"===i?t():"IMPORT"===i&&r(s)},function(){e.close()}}),[]),d.jsx(He,{isOpen:n,onClose:t,sx:Xn,children:d.jsx("iframe",{src:s,loading:"lazy"})})}var nt=new BroadcastChannel("RMP_GALLERY_CHANNEL"),tt={h:"80%",w:"80%","& iframe":{h:"100%",w:"100%"}};function rt(e){var n=e.isOpen,t=e.onClose,i=m(),s=Ne().t,a=Ae(),c=xe.useRef(window.graph),u=xe.useCallback((function(){a(Pe()),a(Te()),a(Me(c.current.export()))}),[a,Pe,Te,Me,c]),h=function(){var e=l(o().mark((function e(n){var t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,Re(JSON.stringify(n));case 3:e.t1=e.sent,t=e.t0.parse.call(e.t0,e.t1),t.version,i=f(t,r),a(Ie()),c.current.clear(),c.current.import(i.graph),u();case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=l(o().mark((function e(n){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([fetch("/rmp-gallery/resources/real_world/".concat(n,".json")),fetch("/rmp-gallery/resources/fantasy/".concat(n,".json"))]);case 2:if(e.t1=t=e.sent.filter((function(e){return"fulfilled"===e.status})).find((function(e){return 200===e.value.status})),e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.value.json();case 11:return e.next=13,e.t2;case 13:(r=e.sent)?(h(r),i({title:s("header.open.importFromRMPGallery",{id:n}),status:"success",duration:9e3,isClosable:!0})):i({title:s("header.open.failToImportFromRMPGallery",{id:n}),status:"error",duration:9e3,isClosable:!0});case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return xe.useEffect((function(){var e=window.location.href;if(e.includes("/s/")){history.replaceState({},s("about.rmp"),e.substring(0,e.indexOf("s/")));var n=e.substring(e.lastIndexOf("s/")+2);p(n)}}),[]),xe.useEffect((function(){nt.onmessage=function(e){var n=e.data,r=n.event,i=n.data;"OPEN_TEMPLATE"===r&&(p(i),t())}}),[]),d.jsx(d.Fragment,{children:d.jsxs(He,{isOpen:n,onClose:t,size:"full",sx:tt,children:[d.jsx("iframe",{src:"/rmp-gallery/",loading:"lazy"}),d.jsx(j,{onClick:t,position:"fixed",top:"5px",right:"15px"})]})})}function it(){var e=Ne().t,n=Ae(),t=xe.useRef(window.graph),r=xe.useRef(null),s=u(xe.useState(!1),2),a=s[0],h=s[1],p=u(xe.useState(!1),2),m=p[0],j=p[1],z=xe.useCallback((function(){n(Pe()),n(Te()),n(Me(t.current.export()))}),[n,Pe,Te,Me,t]),O=function(){var r=l(o().mark((function r(s){var a,l,c,u,h;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=null===(a=s.target.files)||void 0===a?void 0:a[0],console.log("OpenActions.handleUpload():: received file",l),"application/json"===(null==l?void 0:l.type)){r.next=7;break}n(Ue({status:"error",message:e("header.open.invalidType")})),console.error("OpenActions.handleUpload():: Invalid file type! Only file in JSON format is accepted."),r.next=28;break;case 7:return r.prev=7,r.next=10,st(l);case 10:return c=r.sent,r.t0=JSON,r.next=14,Re(c);case 14:r.t1=r.sent,u=r.t0.parse.call(r.t0,r.t1),u.version,h=f(u,i),n(Ie()),t.current.clear(),t.current.import(h.graph),z(),r.next=28;break;case 24:r.prev=24,r.t2=r.catch(7),n(Ue({status:"error",message:e("header.open.unknownError")})),console.error("OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file",r.t2);case 28:s.target.value="";case 29:case"end":return r.stop()}}),r,null,[[7,24]])})));return function(e){return r.apply(this,arguments)}}();return d.jsxs(v,{children:[d.jsx(y,{as:b,size:"sm",variant:"ghost",icon:d.jsx(Le,{})}),d.jsxs(w,{children:[d.jsx(k,{icon:d.jsx(Be,{}),onClick:function(){n(Ie()),t.current.clear(),n(We(100)),n(Fe({x:0,y:0})),z()},children:e("header.open.new")}),d.jsx("input",{id:"upload_project",ref:r,type:"file",accept:".json",hidden:!0,onChange:O,"data-testid":"file-upload"}),d.jsx(k,{icon:d.jsx(Le,{}),onClick:function(){var e;return null==r||null===(e=r.current)||void 0===e?void 0:e.click()},children:e("header.open.config")}),d.jsx(k,{icon:d.jsx(De,{}),onClick:function(){return h(!0)},children:e("header.open.projectRMG")}),d.jsxs(k,{icon:d.jsx(Ge,{}),onClick:function(){return j(!0)},children:[e("header.open.gallery"),d.jsx(S,{ml:"1",colorScheme:"green",children:"New"})]})]}),d.jsx(et,{isOpen:a,onClose:function(){return h(!1)},onImport:function(r){try{!function(e,n){var t=n.info_panel_type,r=n.line_num,i=n.stn_list,s=n.style,o=n.theme,a=Object.fromEntries(Object.keys(i).filter((function(e){return!["linestart","lineend"].includes(e)})).map((function(e){return[e,"stn_".concat(ze(10))]})));Object.entries(i).filter((function(e){var n=u(e,2),t=n[0];return n[1],!["linestart","lineend"].includes(t)})).forEach((function(n){var t=u(n,2),r=t[0],i=t[1],s=e.filterNodes((function(e,n){return Object.values(Oe).includes(n.type)&&n[n.type].names[0]===i.name[0]}));0!==s.length&&(a[r]=s[0])})),Object.entries(i).filter((function(e){var n=u(e,2),t=n[0];return n[1],!["linestart","lineend"].includes(t)})).filter((function(n){var t=u(n,2),r=(t[0],t[1]);return 0===e.filterNodes((function(e,n){return Object.values(Oe).includes(n.type)&&n[n.type].names[0]===r.name[0]})).length})).forEach((function(n,i){var l=u(n,2),h=l[0],d=l[1],f=Oe.ShmetroBasic,p=d.transfer.groups,m=p.map((function(e){return e.lines})).flat();s===$n.SHMetro?f=m.length>0?Oe.ShmetroInt:t===Qn.sh2020?Oe.ShmetroBasic2020:Oe.ShmetroBasic:s===$n.GZMTR?f=m.length>0?Oe.GzmtrInt:Oe.GzmtrBasic:s===$n.MTR&&(f=Oe.MTR);var j=g(g({},structuredClone(On[f].defaultAttrs)),{},{names:d.name});f===Oe.ShmetroBasic2020?j.color=o:f===Oe.GzmtrBasic?(j.color=o,j.lineCode=r,j.stationCode=d.num):f===Oe.GzmtrInt?j.transfer=p.map((function(e,n){var t=e.lines.map((function(e){var n;return[].concat(c(null!==(n=e.theme)&&void 0!==n?n:o),["1","01"])}));return 0===n?[[].concat(c(o),[r,d.num])].concat(c(t)):t})):f===Oe.MTR&&(p[0].lines.length?j.transfer=[[[].concat(c(o),["",""])].concat(c(p[0].lines.map((function(e){var n;return[].concat(c(null!==(n=e.theme)&&void 0!==n?n:o),["",""])}))))]:j.transfer=[[]]),e.addNode(a[h],x({visible:!0,zIndex:0,x:100+50*i,y:1e3,type:f},f,j))})),Object.entries(i).filter((function(e){var n=u(e,2),t=n[0];return n[1],!["linestart","lineend"].includes(t)})).forEach((function(n){var t=u(n,2),r=t[0];t[1].children.filter((function(e){return!["linestart","lineend"].includes(e)})).forEach((function(n){var t;e.addDirectedEdgeWithKey("line_".concat(ze(10)),a[r],a[n],(x(t={visible:!0,zIndex:0,type:Ce.Diagonal},Ce.Diagonal,structuredClone(Ee[Ce.Diagonal].defaultAttrs)),x(t,"style",_e.SingleColor),x(t,_e.SingleColor,{color:o}),x(t,"reconcileId",""),t))}))}))}(t.current,r),z()}catch(i){n(Ue({status:"error",message:e("header.open.unknownError")})),console.error("OpenActions.handleUploadRMG():: Unknown error occurred while parsing the RMG project",i)}finally{h(!1)}}}),d.jsx(rt,{isOpen:m,onClose:function(){return j(!1)}})]})}var st=function(e){return new Promise((function(n){var t=new FileReader;t.onloadend=function(){return n(t.result)},t.readAsText(e)}))};
/*!
       * canvas-size
       * v1.2.6
       * https://github.com/jhildenbiddle/canvas-size
       * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
       * MIT license
       */function ot(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function at(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ot(Object(t),!0).forEach((function(n){lt(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ot(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function lt(e,n,t){return(n=function(e){var n=function(e,n){if("object"!==p(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===p(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ct(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function ut(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==n);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,n)||dt(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e){return function(e){if(Array.isArray(e))return ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,n){if(e){if("string"==typeof e)return ft(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ft(e,n):void 0}}function ft(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function pt(e){var n,t,r=e.sizes.shift(),i=Math.max(Math.ceil(r[0]),1),s=Math.max(Math.ceil(r[1]),1),o=[i-1,s-1,1,1],a=Date.now(),l="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;l?(n=new OffscreenCanvas(1,1),t=new OffscreenCanvas(i,s)):((n=document.createElement("canvas")).width=1,n.height=1,(t=document.createElement("canvas")).width=i,t.height=s);var c=n.getContext("2d"),u=t.getContext("2d");u&&(u.fillRect.apply(u,o),c.drawImage(t,i-1,s-1,1,1,0,0,1,1));var h=c&&0!==c.getImageData(0,0,1,1).data[3],d=Date.now()-a;return[n,t].forEach((function(e){e.height=0,e.width=0})),l?(postMessage({width:i,height:s,benchmark:d,isTestPass:h}),!h&&e.sizes.length&&pt(e)):h?e.onSuccess(i,s,d):(e.onError(i,s,d),e.sizes.length&&pt(e)),h}var mt=[16384,14188,11402,11180,10836,8192,4096,1],gt=["onError","onSuccess"],xt={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},jt={};function vt(e){var n=e.width===e.height,t=1===e.height,r=1===e.width,i=[];if(e.width&&e.height)for(var s=e.min||xt.min,o=e.step||xt.step,a=Math.max(e.width,e.height);a>=s;){var l=n||t?a:1,c=n||r?a:1;i.push([l,c]),a-=o}else e.sizes.forEach((function(e){var s=n||t?e:1,o=n||r?e:1;i.push([s,o])}));return i}function yt(e){var n=window&&"HTMLCanvasElement"in window,t=window&&"OffscreenCanvas"in window,r=Date.now(),i=e.onError,s=e.onSuccess,o=ct(e,gt),a=null;if(!n)return!1;if(e.useWorker&&t){var l="\n            var canvasTest = ".concat(pt.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),c=new Blob([l],{type:"application/javascript"}),u=URL.createObjectURL(c);a=new Worker(u),URL.revokeObjectURL(u),a.onmessage=function(e){var n=e.data,t=n.width,i=n.height,s=n.benchmark;n.isTestPass?(jt[r].onSuccess(t,i,s),delete jt[r]):jt[r].onError(t,i,s)}}return e.usePromise?new Promise((function(n,t){var l=at(at({},e),{},{onError:function(n,r,s){var o;if(0===e.sizes.length)o=!0;else{var a=ut(e.sizes.slice(-1),1),l=ut(a[0],2),c=l[0],u=l[1];o=n===c&&r===u}i(n,r,s),o&&t({width:n,height:r,benchmark:s})},onSuccess:function(e,t,r){s(e,t,r),n({width:e,height:t,benchmark:r})}});if(a){var c=l.onError,u=l.onSuccess;jt[r]={onError:c,onSuccess:u},a.postMessage(o)}else pt(l)})):a?(jt[r]={onError:i,onSuccess:s},void a.postMessage(o)):pt(e)}var bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=vt({width:e.max,height:e.max,min:e.min,step:e.step,sizes:ht(mt)}),t=at(at(at({},xt),e),{},{sizes:n});return yt(t)},wt=function(e,n,t){var r=new Blob([t],{type:n});kt(e,r)},kt=function(e,n){var t=window.URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},St=new Set,zt=new Set,Ot=new Set,Ct=new Set,Et=new Map,_t=new Map,Ht=[],Nt=0,At=new Map,Pt=new Map,Tt=new Set,Mt={name:["LEFT END","LEFT END"],secondaryName:!1,num:"00",services:[qn.local],parents:[],children:["lineend"],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Yn.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},Rt={name:["RIGHT END","RIGHT END"],secondaryName:!1,num:"00",services:[qn.local],parents:[],children:[],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Yn.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},It={svgWidth:{destination:1500,runin:1500,railmap:1500,indoor:1500},svg_height:400,style:$n.SHMetro,y_pc:50,padding:10,branchSpacingPct:33,direction:Yn.right,platform_num:"1",theme:[Ve.Shanghai,"sh1","#E3002B",Je.white],line_name:["地鐵線","Metro Line"],current_stn_idx:"jlaMj2",stn_list:{},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:Qn.sh,notesGZMTR:[],direction_gz_x:40,direction_gz_y:70,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:0,bottom_factor:1}},Lt={name:["",""],secondaryName:!1,num:"",services:[qn.local],parents:[],children:[],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Yn.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},Bt=function(e){return"".concat(e[0],"/").concat(e[1],"=").concat(e[2]).concat(e[3])},Dt=function(e){return[_e.SingleColor,_e.MTRRaceDays].includes(e)},Gt=function(e,n){var t=u(e.extremities(n),2),r=t[0],i=t[1],s=e.getEdgeAttributes(n),o=s.style;if(r!=i&&Dt(o)){var a=function(e){if([_e.SingleColor,_e.MTRRaceDays].includes(e.style))return structuredClone(e[e.style].color)}(s);Ct.has(Bt(a))||(Ot.add(a),Ct.add(Bt(a)),Et.set(a,r)),_t.has(r)?Ht.push({target:i,next:_t.get(r),color:a}):Ht.push({target:i,next:-1,color:a}),_t.set(r,Nt),Nt++,_t.has(i)?Ht.push({target:r,next:_t.get(i),color:a}):Ht.push({target:r,next:-1,color:a}),_t.set(i,Nt),Nt++}},Wt=function e(n,t,r){if(!St.has(n)){St.add(n);for(var i=0,s=new Set,o=_t.get(n);-1!=o;o=Ht[o].next){var a=Ht[o].target,l=Ht[o].color;Bt(l)==Bt(r)&&(s.has(a)||(s.add(a),i++,a!=t&&e(a,n,r)))}At.set(n,i)}},Ft=function(e,n){var t=e.stn_list.lineend.parents;t.push(n),e.stn_list.lineend.parents=structuredClone(t).reverse(),2==e.stn_list.lineend.parents.length?e.stn_list.lineend.branch.left=[Zn.through,t[1]]:e.stn_list.lineend.branch.left=[]},Ut=function e(n,t,r){if(Tt.has(n))return[];Tt.add(n);for(var i=[],s=_t.get(n);-1!=s;s=Ht[s].next){var o=Ht[s].target,a=Ht[s].color;o!=t&&(Bt(a)==Bt(r)&&(o.startsWith("stn")?i.push(o):i.push.apply(i,c(e(o,n,r)))))}return i},Vt=function e(n,t,r,i,o,a,l){if(St.has(n)&&(!n.startsWith("misc_node_")&&null==l.stn_list[n]||n.startsWith("misc_node_")&&!zt.has(n)||l.loop))return[];if(St.has(n)&&null!=l.stn_list[n]&&function(e,n){for(var t=0,r=_t.get(e);-1!=r;r=Ht[r].next){Ht[r].target;var i=Ht[r].color;Bt(i)==Bt(n)&&t++}return t}(n,a)-1>=2){var u=[].concat(c(l.stn_list[n].parents),[t]);if(null==l.stn_list[u[1]]){var h=u[0];u[0]=u[1],u[1]=h}l.stn_list[n].parents=structuredClone(u).reverse(),l.stn_list[n].branch.left=[Zn.through,u[1]];var d,f=[],p=s(l.stn_list[n].children);try{for(p.s();!(d=p.n()).done;){var m=d.value;m!=t&&f.push(m)}}catch(U){p.e(U)}finally{p.f()}l.stn_list[n].children=structuredClone(f),l.stn_list[n].branch.right=[];var g,x=[],j=s(l.stn_list.lineend.parents);try{for(j.s();!(g=j.n()).done;){var v=g.value;v!=n&&x.push(v)}}catch(U){j.e(U)}finally{j.f()}return l.stn_list.lineend.parents=structuredClone(x).reverse(),2==l.stn_list.lineend.parents.length?l.stn_list.lineend.branch.left=[Zn.through,x[1]]:l.stn_list.lineend.branch.left=[],0==f.length&&(l.stn_list[n].children=["lineend"],Ft(l,n)),[n]}St.add(n);for(var y=[],b=[],w=[],k=new Set,S=new Set,z=_t.get(n);-1!=z;z=Ht[z].next){var O=Ht[z].target,C=Ht[z].color;if(O!=r){if(Bt(C)==Bt(a)){if(S.has(O))continue;if(S.add(O),n.startsWith("misc_node_")){var E=e(O,t,n,i+1,o,a,l);0!=E.length&&y.push.apply(y,c(E))}else{var _=e(O,n,n,i+1,o,a,l);0!=_.length&&y.push.apply(y,c(_))}}if(!k.has(Bt(C))&&Bt(C)!=Bt(a)){k.add(Bt(C));var H={theme:C,name:[C[1],C[1]]};w.push(H)}}}if(2==y.length){for(var N=0;N<2;N++)"lineend"==y[N]&&y.splice(N,1);if(l.stn_list[y[1]].parents.length>=2){var A=y[0];y[0]=y[1],y[1]=A}}if(St.has(n)&&null!=l.stn_list[n]){var P,T=[],M=s(l.stn_list.lineend.parents);try{for(M.s();!(P=M.n()).done;){var R=P.value;R!=n&&T.push(R)}}catch(U){M.e(U)}finally{M.f()}l.stn_list.lineend.parents=structuredClone(T).reverse(),2==l.stn_list.lineend.parents.length?l.stn_list.lineend.branch.left=[Zn.through,T[1]]:l.stn_list.lineend.branch.left=[],0==y.length&&(Tt.clear(),b.push.apply(b,c(Ut(n,t,a))))}if(n.startsWith("misc_node_"))return zt.add(n),y;var I=o.getNodeAttributes(n).type,L=o.getNodeAttributes(n)[I];if(l.stn_list[n]=structuredClone(Lt),l.stn_list[n].name=[L.names[0],L.names[1]],l.stn_list[n].num=String(i),o.getNodeAttributes(n).type==Oe.GzmtrBasic){var B=L;l.stn_list[n].num=B.stationCode,l.stn_list[n].secondaryName=B.secondaryNames}if(o.getNodeAttributes(n).type==Oe.GzmtrInt){var D,G=L,W=s(G.transfer[0]);try{for(W.s();!(D=W.n()).done;){var F=D.value;if(Bt(F)==Bt(a)){l.stn_list[n].num=String(F[5]);break}}}catch(U){W.e(U)}finally{W.f()}l.stn_list[n].secondaryName=G.secondaryNames}return 0!=y.length?(l.stn_list[n].children=structuredClone(y).reverse(),2==y.length&&(l.stn_list[n].branch.right=[Zn.through,y[1]])):(l.stn_list[n].children=["lineend"],Ft(l,n)),b.push(t),l.stn_list[n].parents=structuredClone(b).reverse(),2==b.length&&(l.stn_list[n].branch.left=[Zn.through,b[1]]),0!=w.length&&(l.stn_list[n].transfer.groups[0].lines=structuredClone(w)),[n]},Jt=function(e,n,t,r){var i,s=structuredClone(It);switch("LOOP"==r&&(s.loop=!0),e.getNodeAttributes(t).type){case Oe.GzmtrBasic:case Oe.GzmtrInt:i=$n.GZMTR;break;case Oe.MTR:i=$n.MTR;break;default:i=$n.SHMetro}s.theme=structuredClone(n),s.style=i,s.stn_list.linestart=structuredClone(Mt),s.stn_list.lineend=structuredClone(Rt),St.clear(),zt.clear();var o=Vt(t,"linestart","linestart",1,e,n,s);return s.current_stn_idx=o[0],s.stn_list.linestart.children=[o[0]],Object.keys(s.stn_list).length<=3||s.stn_list.lineend.parents.length>=3?void 0:structuredClone(s)},Kt=function(e,n,t){var r;e.line_name=n,e.line_num=String(t),console.log(e),wt("RMG_".concat(""!=(r=n)[0]&&""!=r[1]?r[0]+"_"+r[1]:""!=r[0]?r[0]:""!=r[1]?r[1]:"".concat((new Date).valueOf()),".json"),"application/json",JSON.stringify(e))},Yt={LINE:"#33ccff",BRANCH:"#007B61",LOOP:"#ff6666"},Zt=function(e){var n=e.isOpen,t=e.onClose,r=Ne().t,i=xe.useRef(window.graph),o=u(xe.useState(!1),2),a=o[0],l=o[1],c=u(xe.useState([[It,"",""]]),2),h=c[0],f=c[1],p=u(xe.useState(["","",""]),2),m=p[0],g=p[1],x=u(xe.useState([]),2),j=x[0],v=x[1];return xe.useEffect((function(){n&&v(function(e){St.clear(),Ot.clear(),Ct.clear(),Et.clear(),_t.clear(),Ht=[],Nt=0,At.clear(),Pt.clear(),e.filterEdges((function(e){return e.startsWith("line")})).forEach((function(n){Dt(e.getEdgeAttributes(n).style)&&Gt(e,n)}));var n=0;e.forEachNode((function(e){Pt.set(e,++n)})),Pt.set("lineend",++n);var t,r=[],i=s(Ot);try{for(i.s();!(t=i.n()).done;){var o=t.value;St.clear(),At.clear(),Wt(Et.get(o),"line_root",o);var a,l=!0,c="LINE",h=[],d=s(At);try{for(d.s();!(a=d.n()).done;){var f=u(a.value,2),p=f[0],m=f[1];1==m&&h.push(p),3==m&&(c="BRANCH"),m>3&&(l=!1)}}catch(b){d.e(b)}finally{d.f()}if(l){0==h.length&&(c="LOOP",h.push(Et.get(o)));for(var g=[],x=0,j=h;x<j.length;x++){var v=j[x],y=Jt(e,o,v,c);null!=y&&g.push([y,y.stn_list[y.current_stn_idx].name[0],y.stn_list[y.current_stn_idx].name[1]])}0!=g.length&&r.push({theme:o,param:structuredClone(g),type:c})}}}catch(b){i.e(b)}finally{i.f()}return r}(i.current))}),[n]),d.jsxs(z,{isOpen:n,onClose:t,size:"2xl",scrollBehavior:"inside",children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:d.jsx(_,{as:"b",fontSize:"xl",children:r("header.download.2rmg.title")})}),d.jsx(H,{}),d.jsxs(N,{children:[d.jsx(_,{fontSize:"sm",mt:"3",lineHeight:"100%",children:r("header.download.2rmg.info1")}),d.jsx(_,{fontSize:"sm",mt:"3",lineHeight:"100%",children:r("header.download.2rmg.info2")}),d.jsx("br",{}),0===j.length?d.jsx(_,{fontSize:"md",children:r("header.download.2rmg.noline")}):d.jsx("table",{children:j.map((function(e){var n=e.theme,t=e.param,i=e.type;return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx(Ke,{name:"other"==n[0]&&"other"==n[1]?n[2]:n[1],bg:n[2],fg:n[3]})}),d.jsx("td",{children:d.jsx(A,{placeholder:r("header.download.2rmg.placeholder.chinese"),id:"nameCh_"+JSON.stringify(n),size:"sm"})}),d.jsx("td",{children:d.jsx(A,{placeholder:r("header.download.2rmg.placeholder.english"),id:"nameEn_"+JSON.stringify(n),size:"sm"})}),d.jsx("td",{children:d.jsx(A,{placeholder:r("header.download.2rmg.placeholder.lineCode"),id:"lineNum_"+JSON.stringify(n),size:"sm"})}),d.jsx("td",{children:d.jsx(Ke,{name:r("header.download.2rmg.type.".concat(i.toLowerCase())),bg:Yt[i],fg:Je.white})}),d.jsx("td",{children:d.jsx(P,{colorScheme:"blue",variant:"ghost",mr:"1",onClick:function(){var e=document.getElementById("nameCh_"+JSON.stringify(n)),r=document.getElementById("nameEn_"+JSON.stringify(n)),i=document.getElementById("lineNum_"+JSON.stringify(n));f(t),g([e.value.trim(),r.value.trim(),i.value.trim()]),l(!0)},size:"sm",children:d.jsx(Ye,{})})})]},JSON.stringify(n))}))})]}),d.jsx(T,{children:d.jsx(P,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:r("close")})})]}),d.jsx(qt,{isOpen:a,onClose:function(){return l(!1)},param:h,nameList:m})]})},qt=function(e){var n=e.isOpen,t=e.onClose,r=e.param,i=e.nameList,s=Ne().t,o=u(xe.useState(""),2),a=o[0],l=o[1];return xe.useEffect((function(){""!=i[0]&&""!=i[1]?l(i[0]+"/"+i[1]):""!=i[0]?l(i[0]):""!=i[1]&&l(i[1])}),c(i)),d.jsxs(z,{isOpen:n,onClose:t,size:"md",scrollBehavior:"inside",children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:d.jsxs(_,{as:"b",fontSize:"xl",children:[s("header.download.2rmg.download")," ",a]})}),d.jsx(H,{}),d.jsx(N,{children:d.jsxs(M,{children:[d.jsx(_,{fontSize:"sm",mb:"2",lineHeight:"100%",children:s("header.download.2rmg.downloadInfo")}),r.map((function(e){var n=u(e,3),t=n[0],r=n[1],s=n[2];return d.jsxs(P,{onClick:function(){Kt(t,[i[0],i[1]],i[2])},children:[r,"/",s]},"".concat(r).concat(s))}))]})}),d.jsx(T,{children:d.jsx(P,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("close")})})]})]})},$t=function(e){var n=e.isOpen,t=e.onClose,r=Ne().t;return d.jsxs(z,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:r("header.download.termsAndConditions")}),d.jsx(H,{}),d.jsx(N,{children:d.jsxs(R,{children:[d.jsxs(I,{children:["The layout of the elements on the signage or rail map, is designed by"," ",d.jsxs(L,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",d.jsx(B,{as:Ge})]}),", ",d.jsxs(L,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",d.jsx(B,{as:Ge})]})," or ",d.jsxs(L,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",d.jsx(B,{as:Ge})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",d.jsx("br",{}),"标志版或路线图的元素或布局，基于你所选择的风格，为",d.jsxs(L,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["上海申通地铁集团 ",d.jsx(B,{as:Ge})]}),"，",d.jsxs(L,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["广州地铁集团公司 ",d.jsx(B,{as:Ge})]}),"或",d.jsxs(L,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["港铁公司 ",d.jsx(B,{as:Ge})]}),"所设计。在产生的图像用作商业用途前，你应向相关公司取得适当之许可证或授权。"]}),d.jsxs(I,{children:["The elements including shapes and lines on the image are drawn by"," ",d.jsxs(L,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",d.jsx(B,{as:Ge})]})," and ",d.jsxs(L,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",d.jsx(B,{as:Ge})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",d.jsx("br",{}),"图像的元素，包括图形及线条，均由",d.jsxs(L,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",d.jsx(B,{as:Ge})]}),"及",d.jsxs(L,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",d.jsx(B,{as:Ge})]}),"基于上述公司设计标准或准则绘制。你可将其用于任何目的，但我们建议你于使用同时附以我们的名字以及本网站地址。"]}),d.jsxs(I,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Painter uses"," ",d.jsxs(L,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",d.jsx(B,{as:Ge})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",d.jsx("br",{}),"由于著作权及其他法律限制，铁路路线图绘制器使用由",d.jsxs(L,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["ButTaiwan提供的源樣明體 ",d.jsx(B,{as:Ge})]}),"，以及Vegur，以代替港铁样式标志牌所使用的地铁宋及Myriad Pro。在产生之图像用作商业用途前，你应向字型生产厂商取得适当之许可证或授权。"]}),d.jsxs(I,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes except commercial use, under the conditions above.",d.jsx("br",{}),"输出的PNG或SVG图像可基于上述条款，在非商业使用时，用于修改、发行或其他用途。"]}),d.jsxs(I,{children:["All flag emojis shown on Windows platforms are designed by"," ",d.jsxs(L,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",d.jsx(B,{as:Ge})]})," ","– the open-source emoji and icon project. License:",d.jsxs(L,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",d.jsx(B,{as:Ge})]}),d.jsx("br",{}),"于Windows作业系统上显示的国旗Emoji为",d.jsxs(L,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",d.jsx(B,{as:Ge})]}),"所设计。许可证：",d.jsxs(L,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",d.jsx(B,{as:Ge})]})]}),d.jsxs(I,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",d.jsx("br",{}),"我们保留修改、新增或移除上述条款之权利，而无需另行通知。中文译本仅供参考，文义如与英文有歧异，概以英文本为准。"]})]})})]})]})};function Qt(){var e=D("white","gray.800"),n=Ae(),t=Ze((function(e){return e.app})).telemetry.project,r=Ze((function(e){return e.param})),i=Ne().t,s=xe.useRef(window.graph),a=u(xe.useState("png"),2),h=a[0],f=a[1],p={png:i("header.download.png"),svg:i("header.download.svg")},m=u(xe.useState({width:1,height:1,benchmark:.001}),2),g=m[0],x=m[1],j=u(xe.useState(100),2),A=j[0],M=j[1],R=[25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500,750,1e3],I=Object.fromEntries(R.map((function(e){return[e,"".concat(e,"%")]}))),F=u(xe.useState([]),2),U=F[0],V=F[1],J=u(xe.useState(!1),2),K=J[0],Y=J[1],Z=[{type:"select",label:i("header.download.format"),value:h,options:p,onChange:function(e){return f("png"===e?"png":"svg")}}],q=[{type:"select",label:i("header.download.scale"),value:A,options:I,disabledOptions:U,onChange:function(e){return M(e)}},{type:"switch",label:i("header.download.transparent"),isChecked:K,onChange:Y}],$=u(xe.useState(!1),2),Q=$[0],X=$[1],ee=u(xe.useState(!1),2),ne=ee[0],te=ee[1],re=u(xe.useState(!1),2),ie=re[0],se=re[1],oe=u(xe.useState(!1),2),ae=oe[0],le=oe[1],ce=u(xe.useState(!1),2),ue=ce[0],he=ce[1];xe.useEffect((function(){var e=function(){var e=l(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt({usePromise:!0,useWorker:!0});case 2:n=e.sent,x(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),xe.useEffect((function(){if(Q){var e=Cn(s.current),n=e.xMin,t=e.yMin,r=e.xMax,i=e.yMax,o=r-n,a=i-t,l=R.filter((function(e){return o*e/100>g.width&&a*e/100>g.height}));V(l)}}),[Q]);var de=function(){var r=l(o().mark((function r(){var a,l,d,f,p,m,g,x,j,v,y,b,w,k,S,z,O,C,E,_,H,N;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:X(!1),t&&Se.event(en.DOWNLOAD_IMAGES,{numberOfNodes:s.current.order,numberOfEdges:s.current.size}),a=Cn(s.current),l=a.xMin,d=a.yMin,f=a.xMax,p=a.yMax,m=f-l,g=p-d,c((x=document.getElementById("canvas").cloneNode(!0)).children).filter((function(e){return s.current.hasNode(e.id)&&s.current.getNodeAttribute(e.id,"type")===tn.Virtual})).forEach((function(e){return x.removeChild(e)})),ie||x.appendChild(Xt(f-400,p-60)),x.setAttribute("viewBox","".concat(l," ").concat(d," ").concat(m," ").concat(g)),x.setAttribute("width",m.toString()),x.setAttribute("height",g.toString()),Object.entries({".rmp-name__zh":["font-family"],".rmp-name__en":["font-family"],".rmp-name__mtr__zh":["font-family"],".rmp-name__mtr__en":["font-family"],".rmp-name__berlin":["font-family"],".rmp-name-station":["paint-order","stroke","stroke-width"]}).forEach((function(e){var n=u(e,2),t=n[0],r=n[1],i=document.querySelector(t);if(null!==i){var s=window.getComputedStyle(i);x.querySelectorAll(t).forEach((function(e){r.forEach((function(n){e.setAttribute(n,s.getPropertyValue(n))})),e.classList.remove(t)}))}})),j=En(s.current),r.t0=o().keys(_n);case 13:if((r.t1=r.t0()).done){r.next=32;break}if(v=r.t1.value,!j[v]){r.next=30;break}return r.prev=16,y=_n[v],b=y.className,w=y.cssFont,k=y.cssName,r.next=20,Hn(x,b,w,k);case 20:S=r.sent,(z=document.createElement("style")).textContent=S.join("\n"),x.prepend(z),r.next=30;break;case 26:r.prev=26,r.t2=r.catch(16),alert("Failed to load fonts. Fonts in the exported PNG will be missing."),console.error(r.t2);case 30:r.next=13;break;case 32:if("svg"!==h){r.next=35;break}return wt("RMP_".concat((new Date).valueOf(),".svg"),"image/svg+xml",x.outerHTML),r.abrupt("return");case 35:document.body.appendChild(x),O="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(x.outerHTML))),document.body.removeChild(x),C=document.createElement("canvas"),E=m*A/100,_=g*A/100,C.width=E,C.height=_,H=C.getContext("2d"),K||(H.fillStyle=e,H.fillRect(0,0,E,_)),(N=new Image).onload=function(){H.drawImage(N,0,0,E,_),C.toBlob((function(e){e||n(Ue({status:"error",message:i("header.download.imageTooBig")})),kt("RMP_".concat((new Date).valueOf(),".png"),e)}),"image/png")},N.src=O;case 47:case"end":return r.stop()}}),r,null,[[16,26]])})));return function(){return r.apply(this,arguments)}}();return d.jsxs(v,{id:"download",children:[d.jsx(y,{as:b,size:"sm",variant:"ghost",icon:d.jsx(Ye,{})}),d.jsxs(w,{children:[d.jsx(k,{icon:d.jsx(qe,{}),onClick:function(){t&&Se.event(en.DOWNLOAD_PARAM,{"#nodes":s.current.order,"#edges":s.current.size}),wt("RMP_".concat((new Date).valueOf(),".json"),"application/json",nn(r))},children:i("header.download.config")}),d.jsxs(k,{icon:d.jsx($e,{}),onClick:function(){return he(!0)},children:[i("header.download.2rmg.title"),d.jsx(S,{ml:"1",colorScheme:"green",children:"New"})]}),d.jsx(k,{icon:d.jsx(Qe,{}),onClick:function(){return X(!0)},children:i("header.download.image")})]}),d.jsxs(z,{size:"xl",isOpen:Q,onClose:function(){return X(!1)},children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:i("header.download.image")}),d.jsx(H,{}),d.jsxs(N,{children:[d.jsx(Xe,{fields:Z}),"png"===h&&d.jsx(Xe,{fields:q}),"png"===h&&U.length>0&&d.jsxs(d.Fragment,{children:[d.jsx(_,{as:"i",fontSize:"sm",children:i("header.download.disabledScaleOptions")}),d.jsx("br",{}),d.jsx(_,{as:"i",fontSize:"sm",children:i("header.download.disabledScaleOptionsWorkarounds")}),d.jsxs(L,{color:"teal.500",onClick:function(){return window.open("https://github.com/RazrFalcon/resvg","_blank")},children:["RazrFalcon/resvg ",d.jsx(B,{as:Ge})]}),d.jsx("br",{})]}),d.jsx("br",{}),d.jsx(G,{isChecked:ie,onChange:function(e){return se(e.target.checked)},children:d.jsxs(_,{children:[i("header.download.shareInfo1"),d.jsxs(L,{color:"teal.500",onClick:function(){return window.open("https://railmapgen.github.io/rmp","_blank")},children:[i("header.about.rmp")," ",d.jsx(B,{as:Ge})]}),i("header.download.shareInfo2")]})}),d.jsx(G,{isChecked:ae,onChange:function(e){return le(e.target.checked)},children:d.jsxs(_,{children:[i("header.download.termsAndConditionsInfo"),d.jsxs(L,{color:"teal.500",onClick:function(){return te(!0)},children:[i("header.download.termsAndConditions")," ",d.jsx(B,{as:Ge})]}),i("header.download.period")]})})]}),d.jsx(T,{children:d.jsx(W,{children:d.jsx(P,{colorScheme:"teal",variant:"outline",size:"sm",disabled:!ae,onClick:de,children:i("header.download.confirm")})})}),d.jsx($t,{isOpen:ne,onClose:function(){return te(!1)}})]})]}),d.jsx(Zt,{isOpen:ue,onClose:function(){return he(!1)}})]})}var Xt=function(e,n){var t=document.createElementNS("http://www.w3.org/2000/svg","g");t.setAttribute("transform","translate(".concat(e,", ").concat(n,")scale(2)"));var r=document.createElementNS("http://www.w3.org/2000/svg","image");r.setAttribute("width","40"),r.setAttribute("height","40"),r.setAttribute("x","-50"),r.setAttribute("y","-20");var i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("font-family","Arial, sans-serif"),i.setAttribute("font-size","16"),i.appendChild(document.createTextNode("Rail Map Painter"));var s=document.createElementNS("http://www.w3.org/2000/svg","text");return s.setAttribute("font-family","Arial, sans-serif"),s.setAttribute("font-size","10"),s.setAttribute("y","10"),s.appendChild(document.createTextNode("https://railmapgen.github.io/rmp/")),t.appendChild(r),t.appendChild(i),t.appendChild(s),t},er=function(e){var n=e.isOpen,t=e.onClose,r=Ne().t,i=Se.getAppVersion(),s=u(xe.useState(!1),2),o=s[0],a=s[1];return d.jsxs(z,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:r("header.about.title")}),d.jsx(H,{}),d.jsxs(N,{paddingBottom:10,children:[d.jsxs(F,{direction:"row",children:[d.jsx(U,{boxSize:"128px",src:"/rmp//logo192.png"}),d.jsxs(F,{direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[d.jsx(_,{fontSize:"xl",as:"b",children:r("header.about.rmp")}),d.jsx(_,{children:i}),d.jsx(_,{}),d.jsx(_,{fontSize:"sm",children:r("header.about.railmapgen")})]})]}),d.jsx(V,{margin:5,children:d.jsx(_,{fontSize:"xl",children:r("header.about.desc")})}),d.jsx(J,{as:"h5",size:"sm",mt:3,mb:2,children:r("header.about.contributors")}),d.jsx(J,{as:"h6",size:"xs",my:2,children:r("header.about.coreContributors")}),d.jsxs(K,{children:[d.jsxs(Y,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/thekingofcity","_blank")},cursor:"pointer",children:[d.jsx(Z,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),d.jsxs(q,{display:"block",width:"100%",children:[d.jsx(_,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),d.jsx(_,{fontSize:"sm",children:r("header.about.content1")}),d.jsx(_,{fontSize:"sm",align:"right",mb:1,children:r("header.about.content2")})]})]}),d.jsxs(Y,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/langonginc","_blank")},cursor:"pointer",children:[d.jsx(Z,{src:"https://github.com/langonginc.png",size:"lg",my:2,ml:-1,mr:2}),d.jsxs(q,{display:"block",width:"100%",children:[d.jsx(_,{fontSize:"lg",fontWeight:"bold",mb:1,children:"langonginc"}),d.jsx(_,{fontSize:"sm",children:r("header.about.langonginc")}),d.jsx(_,{fontSize:"sm",align:"right",mb:1,children:"--Avicii"})]})]})]}),d.jsx(J,{as:"h6",size:"xs",my:2,children:r("header.about.styleContributors")}),d.jsxs(K,{children:[d.jsxs(Y,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/203IhzElttil","_blank")},cursor:"pointer",children:[d.jsx(Z,{src:"https://github.com/203IhzElttil.png",size:"lg",my:2,ml:-1,mr:2}),d.jsxs(q,{display:"block",width:"100%",children:[d.jsx(_,{fontSize:"lg",fontWeight:"bold",mb:1,children:"203IhzElttil"}),d.jsx(_,{fontSize:"sm",mb:1,children:r("header.about.203IhzElttil")})]})]}),d.jsxs(Y,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/52PD","_blank")},cursor:"pointer",children:[d.jsx(Z,{src:"https://github.com/52PD.png",size:"lg",my:2,ml:-1,mr:2}),d.jsxs(q,{display:"block",width:"100%",children:[d.jsx(_,{fontSize:"lg",fontWeight:"bold",mb:1,children:"52PD"}),d.jsx(_,{fontSize:"sm",mb:1,children:r("header.about.52PD")})]})]})]}),d.jsx(J,{as:"h5",size:"sm",mt:3,mb:2,children:r("header.about.contactUs")}),d.jsxs(K,{children:[d.jsxs(Y,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/railmapgen/rmp/issues","_blank")},cursor:"pointer",children:[d.jsx(Z,{src:"/rmp/assets/github-mark-7a0dd11e.svg",size:"lg",my:2,ml:-1,mr:2}),d.jsxs(q,{display:"block",width:"100%",children:[d.jsx(_,{fontSize:"lg",fontWeight:"bold",mb:1,children:r("header.about.github")}),d.jsx(_,{fontSize:"sm",children:r("header.about.githubContent")})]})]}),d.jsxs(Y,{size:"lg",w:"85%",onClick:function(){return window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank")},cursor:"pointer",children:[d.jsx(Z,{src:"/rmp/assets/slack-mark-19839006.svg",size:"lg",my:2,ml:-1,mr:2}),d.jsxs(q,{display:"block",width:"100%",children:[d.jsx(_,{fontSize:"lg",fontWeight:"bold",mb:1,children:r("header.about.slack")}),d.jsx(_,{fontSize:"sm",children:r("header.about.slackContent")}),d.jsx(_,{fontSize:"sm",as:"i",children:"#rmp, #gallery, #rmg, #palette-and-templates"})]})]})]}),d.jsx(J,{as:"h5",size:"sm",mt:3,mb:2,children:r("header.about.linkExchange")}),d.jsxs(K,{children:[d.jsxs(Y,{size:"lg",w:"85%",onClick:function(){return a(!0)},cursor:"pointer",children:[d.jsx(Z,{src:"/rmp//images/guidaoTransit.jpg",size:"lg",my:2,ml:-1,mr:2}),d.jsxs(q,{display:"block",width:"100%",children:[d.jsx(_,{fontSize:"lg",fontWeight:"bold",mb:1,children:r("header.about.guidaoTransit")}),d.jsx(_,{fontSize:"sm",children:r("header.about.guidaoTransitContent")})]})]}),d.jsxs(z,{size:"6xl",isOpen:o,onClose:function(){return a(!1)},children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:r("header.about.guidaoTransit")}),d.jsx(H,{}),d.jsx(N,{paddingBottom:10,children:d.jsx(U,{width:"1080",height:"304",src:"/rmp//images/guidaoTransitQRCode.png"})})]})]})]})]})]})]})},nr=function(){var e=u(xe.useState(!1),2),n=e[0],t=e[1],r=Ze((function(e){return e.param})).svgViewBoxZoom,i=Ae(),s=[{type:"slider",label:"",value:400-r,min:10,max:390,step:1,onChange:function(e){return i(We(400-e))},leftIcon:d.jsx(sn,{}),rightIcon:d.jsx(rn,{}),minW:160}];return d.jsxs($,{isOpen:n,onOpen:function(){return t(!0)},onClose:function(){return t(!1)},children:[d.jsx(Q,{children:d.jsx(b,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:d.jsx(rn,{}),onClick:function(){return t(!n)}})}),d.jsx(X,{children:d.jsx(ee,{children:d.jsx(Xe,{fields:s,noLabel:!0})})})]})},tr=function(e){var n=e.isOpen,t=e.onClose,r=Ae(),i=Ne().t,s=xe.useRef(window.graph),o=u(xe.useState(0),2),a=o[0],l=o[1],c=u(xe.useState(0),2),h=c[0],f=c[1],p=[{type:"input",label:i("header.settings.procedures.translate.x"),value:a.toString(),variant:"number",onChange:function(e){return l(Number(e))},minW:"full"},{type:"input",label:i("header.settings.procedures.translate.y"),value:h.toString(),variant:"number",onChange:function(e){return f(Number(e))},minW:"full"}];return d.jsxs(z,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:i("header.settings.procedures.translate.title")}),d.jsx(H,{}),d.jsxs(N,{children:[i("header.settings.procedures.translate.content"),d.jsx(Xe,{fields:p})]}),d.jsxs(T,{children:[d.jsx(P,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:i("cancel")}),d.jsx(P,{colorScheme:"red",onClick:function(){s.current.forEachNode((function(e,n){s.current.updateNodeAttribute(e,"x",(function(e){return(null!=e?e:0)+a})),s.current.updateNodeAttribute(e,"y",(function(e){return(null!=e?e:0)+h}))})),r(Pe()),r(Te()),r(Me(s.current.export())),t()},children:i("apply")})]})]})]})},rr=function(e){var n=e.isOpen,t=e.onClose,r=Ae(),i=Ne().t,s=xe.useRef(window.graph),o=u(xe.useState(1),2),a=o[0],l=o[1],c=[{type:"input",label:i("header.settings.procedures.scale.factor"),value:a.toString(),variant:"number",onChange:function(e){return l(Number(e))},minW:"full"}];return d.jsxs(z,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:i("header.settings.procedures.scale.title")}),d.jsx(H,{}),d.jsxs(N,{children:[i("header.settings.procedures.scale.content"),d.jsx(Xe,{fields:c})]}),d.jsxs(T,{children:[d.jsx(P,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:i("cancel")}),d.jsx(P,{colorScheme:"red",onClick:function(){s.current.forEachNode((function(e,n){s.current.updateNodeAttribute(e,"x",(function(e){return(null!=e?e:0)*a})),s.current.updateNodeAttribute(e,"y",(function(e){return(null!=e?e:0)*a}))})),r(Pe()),r(Te()),r(Me(s.current.export())),t()},children:i("apply")})]})]})]})},ir=function(e){var n=e.isOpen,t=e.onClose,r=Ae(),i=Ne().t,s=xe.useRef(window.graph),o=Object.fromEntries(Object.entries(On).map((function(e){var n=u(e,2),t=n[0],r=n[1];return[t,i(r.metadata.displayName).toString()]}))),a=u(xe.useState(Object.keys(On).at(0)),2),l=a[0],c=a[1],h=u(xe.useState(Object.keys(On).at(1)),2),f=h[0],p=h[1],m=[{type:"select",label:i("header.settings.procedures.changeType.changeFrom"),value:l,options:o,disabledOptions:[f],onChange:function(e){return c(e)},minW:"full"},{type:"select",label:i("header.settings.procedures.changeType.changeTo"),value:f,options:o,disabledOptions:[l],onChange:function(e){return p(e)},minW:"full"}];return d.jsxs(z,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsxs(E,{children:[d.jsx(_,{as:"b",fontSize:"xl",children:i("header.settings.procedures.changeType.title")}),d.jsx(ne,{label:i("header.settings.pro"),children:d.jsx(S,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]}),d.jsx(H,{}),d.jsxs(N,{children:[d.jsx(Xe,{fields:m}),d.jsx(_,{fontSize:"sm",mt:"3",lineHeight:"100%",color:"red.500",children:i("header.settings.procedures.changeType.info")})]}),d.jsxs(T,{children:[d.jsx(P,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:i("cancel")}),d.jsx(P,{colorScheme:"red",onClick:function(){An(s.current,l,f),r(Pe()),r(Me(s.current.export())),t()},children:i("apply")})]})]})]})},sr=function(e){var n=e.isOpen,t=e.onClose,r=Ae(),i=Ze((function(e){return e.runtime})).theme,s=Ne().t,o=xe.useRef(window.graph),a=u(xe.useState(i),2),l=a[0],c=a[1],h=u(xe.useState(!1),2),f=h[0],p=h[1];return d.jsxs(z,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:s("header.settings.procedures.removeLines.title")}),d.jsx(H,{}),d.jsxs(N,{children:[s("header.settings.procedures.removeLines.content"),d.jsx(on,{theme:l,onClick:function(){return p(!0)}}),d.jsx(an,{isOpen:f,defaultTheme:l,onClose:function(){return p(!1)},onUpdate:function(e){return c(e)}})]}),d.jsxs(T,{children:[d.jsx(P,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("cancel")}),d.jsx(P,{colorScheme:"red",onClick:function(){o.current.filterEdges((function(e,n,t,r,i,s,o){return n.style===_e.SingleColor&&JSON.stringify(n[_e.SingleColor].color)===JSON.stringify(l)})).forEach((function(e){return o.current.dropEdge(e)})),r(Te()),r(Me(o.current.export())),t()},children:s("remove")})]})]})]})},or={width:"100%",justifyContent:"space-between"},ar={fontFamily:"-apple-system"},lr=function(e){var n=e.isOpen,t=e.onClose,r=Ze((function(e){return e.runtime})).keepLastPath,i=Ae(),s=Ne().t,o=D("primary.500","primary.300"),a=u(xe.useState(!1),2),l=a[0],c=a[1],h=u(xe.useState(!1),2),f=h[0],p=h[1],m=u(xe.useState(!1),2),g=m[0],x=m[1],j=u(xe.useState(!1),2),v=j[0],y=j[1],b=Se.isAllowAnalytics(),w=Ze((function(e){return e.app})).telemetry.app;return d.jsxs(z,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[d.jsx(O,{}),d.jsxs(C,{children:[d.jsx(E,{children:s("header.settings.title")}),d.jsx(H,{}),d.jsx(N,{children:d.jsxs(K,{divider:d.jsx(te,{borderColor:"gray.200"}),children:[d.jsxs(V,{width:"100%",mb:"3",children:[d.jsx(_,{as:"b",fontSize:"xl",children:s("header.settings.preference.title")}),d.jsx(V,{mt:"3",children:d.jsxs(V,{display:"flex",mb:"1",children:[d.jsx(_,{flex:"1",children:s("header.settings.preference.keepLastPath")}),d.jsx(re,{isChecked:r,onChange:function(e){var n=e.target.checked;return i(ln(n))}})]})})]}),d.jsxs(V,{width:"100%",mb:"3",children:[d.jsx(_,{as:"b",fontSize:"xl",children:s("header.settings.procedures.title")}),d.jsxs(V,{mt:"3",children:[d.jsx(P,{sx:or,rightIcon:d.jsx(cn,{}),onClick:function(){return c(!0)},children:s("header.settings.procedures.translate.title")}),d.jsx(tr,{isOpen:l,onClose:function(){return c(!1)}}),d.jsx(P,{sx:or,rightIcon:d.jsx(cn,{}),onClick:function(){return p(!0)},children:s("header.settings.procedures.scale.title")}),d.jsx(rr,{isOpen:f,onClose:function(){return p(!1)}}),d.jsx(P,{sx:or,rightIcon:d.jsx(cn,{}),onClick:function(){return x(!0)},children:d.jsxs(V,{children:[s("header.settings.procedures.changeType.title"),d.jsx(ne,{label:s("header.settings.pro"),children:d.jsx(S,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]})}),d.jsx(ir,{isOpen:g,onClose:function(){return x(!1)}}),d.jsx(P,{sx:or,rightIcon:d.jsx(cn,{}),onClick:function(){return y(!0)},children:s("header.settings.procedures.removeLines.title")}),d.jsx(sr,{isOpen:v,onClose:function(){return y(!1)}})]})]}),d.jsxs(V,{width:"100%",mb:"3",children:[d.jsx(_,{as:"b",fontSize:"xl",children:s("header.settings.shortcuts.title")}),d.jsx(V,{mt:"3",children:d.jsxs(ie,{children:[d.jsx(se,{children:d.jsxs(oe,{children:[d.jsx(ae,{children:s("header.settings.shortcuts.keys")}),d.jsx(ae,{children:s("header.settings.shortcuts.description")})]})}),d.jsxs(le,{children:[d.jsxs(oe,{children:[d.jsx(ce,{children:d.jsx(ue,{children:"f"})}),d.jsx(ce,{children:s("header.settings.shortcuts.f")})]}),d.jsxs(oe,{children:[d.jsx(ce,{children:d.jsxs(V,{display:"flex",flexDirection:"row",children:[d.jsx(un,{}),d.jsx(hn,{}),d.jsx(dn,{}),d.jsx(fn,{})]})}),d.jsx(ce,{children:s("header.settings.shortcuts.arrows")})]}),d.jsxs(oe,{children:[d.jsx(ce,{children:d.jsxs(V,{display:"flex",flexDirection:"row",children:[d.jsx(ue,{children:"i"}),d.jsx(ue,{children:"j"}),d.jsx(ue,{children:"k"}),d.jsx(ue,{children:"l"})]})}),d.jsx(ce,{children:s("header.settings.shortcuts.ijkl")})]}),d.jsxs(oe,{children:[d.jsx(ce,{children:Nn?d.jsx(ue,{sx:ar,children:"⇧"}):d.jsx(ue,{children:"shift"})}),d.jsx(ce,{children:s("header.settings.shortcuts.shift")})]}),d.jsxs(oe,{children:[d.jsx(ce,{children:Nn?d.jsx(ue,{sx:ar,children:"⌥"}):d.jsx(ue,{children:"alt"})}),d.jsx(ce,{children:s("header.settings.shortcuts.alt")})]}),d.jsxs(oe,{children:[d.jsx(ce,{children:Nn?d.jsx(ue,{sx:ar,children:"⌫"}):d.jsx(ue,{children:"delete"})}),d.jsx(ce,{children:s("header.settings.shortcuts.delete")})]}),d.jsxs(oe,{children:[d.jsxs(ce,{children:[Nn?d.jsx(ue,{sx:ar,children:"⌘"}):d.jsx(ue,{children:"ctrl"})," + ",d.jsx(ue,{children:"z"})]}),d.jsx(ce,{children:s("header.settings.shortcuts.undo")})]}),d.jsxs(oe,{children:[d.jsx(ce,{children:Nn?d.jsxs(d.Fragment,{children:[d.jsx(ue,{sx:ar,children:"⇧"})," + ",d.jsx(ue,{sx:ar,children:"⌘"})," + ",d.jsx(ue,{children:"z"})]}):d.jsxs(d.Fragment,{children:[d.jsx(ue,{children:"ctrl"})," + ",d.jsx(ue,{children:"y"})]})}),d.jsx(ce,{children:s("header.settings.shortcuts.redo")})]})]})]})})]}),d.jsxs(V,{width:"100%",mb:"3",children:[d.jsx(_,{as:"b",fontSize:"xl",children:s("header.settings.telemetry.title")}),d.jsxs(V,{mt:"3",children:[d.jsxs(V,{display:"flex",mb:"1",children:[d.jsx(_,{flex:"1",children:s("header.settings.telemetry.essential")}),d.jsx(re,{isChecked:b,isDisabled:!0})]}),d.jsx(_,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:s("header.settings.telemetry.essentialInfo")}),d.jsxs(L,{color:o,fontSize:"sm",lineHeight:"100%",href:"https://support.google.com/analytics/answer/11593727",isExternal:!0,children:[s("header.settings.telemetry.essentialLink")," ",d.jsx(B,{as:Ge})]}),d.jsxs(V,{display:"flex",mb:"1",children:[d.jsx(_,{flex:"1",children:s("header.settings.telemetry.additional")}),d.jsx(re,{isChecked:w,onChange:function(e){var n=e.target.checked;return i(pn(n))}})]}),d.jsx(_,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:s("header.settings.telemetry.additionalInfo")})]})]})]})})]})]})};function cr(){var e=Ne().t,n=Ae(),t=Ze((function(e){return e.app})).telemetry.app,r=Ze((function(e){return e.param})),i=r.past,s=r.future,a=u(xe.useState(!1),2),c=a[0],h=a[1],f=u(xe.useState(!1),2),p=f[0],m=f[1],g=Jn(Se.getEnv),x=Jn(Se.getAppVersion);xe.useEffect((function(){t&&g!==mn.DEV&&Se.event(en.APP_LOAD,{isStandaloneWindow:Se.isStandaloneWindow()})}),[g]);var j=function(){var e=l(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Se.getI18nInstance().changeLanguage(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return d.jsxs(gn,{children:[d.jsx(J,{as:"h4",size:"md",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:e("header.about.rmp")}),d.jsx(xn,{environment:g,version:x,popoverHeader:g===mn.PRD?void 0:d.jsxs(Vn,{i18nKey:"header.popoverHeader",environment:g,children:["You're on ",{environment:g}," environment!"]}),popoverBody:g===mn.PRD?void 0:d.jsx(Vn,{i18nKey:"header.popoverBody",children:"This is a testing environment where we test the latest beta RMP."})}),d.jsxs(he,{ml:"auto",children:[d.jsx(de,{children:d.jsx(b,{size:"sm",variant:"ghost","aria-label":"Undo",icon:d.jsx(jn,{}),disabled:0===i.length,onClick:function(){return n(vn())}})}),d.jsx(de,{children:d.jsx(b,{size:"sm",variant:"ghost","aria-label":"Redo",icon:d.jsx(yn,{}),disabled:0===s.length,onClick:function(){return n(bn())}})}),d.jsx(de,{children:d.jsx(nr,{})}),d.jsx(de,{children:d.jsx(it,{})}),d.jsx(de,{children:d.jsx(Qt,{})}),Se.isStandaloneWindow()&&d.jsx(de,{children:d.jsxs(v,{children:[d.jsx(y,{as:b,icon:d.jsx(wn,{}),variant:"ghost",size:"sm"}),d.jsx(w,{children:["en","zh-Hans","zh-Hant","ja","ko"].map((function(e){return d.jsx(k,{onClick:function(){return j(e)},children:Kn[e][e]},e)}))})]})}),d.jsx(de,{children:d.jsx(b,{size:"sm",variant:"ghost","aria-label":"Settings",icon:d.jsx(kn,{}),onClick:function(){return h(!0)}})}),d.jsx(de,{children:d.jsx(b,{size:"sm",variant:"ghost","aria-label":"Help",icon:d.jsx(Sn,{}),onClick:function(){return m(!0)}})})]}),d.jsx(lr,{isOpen:c,onClose:function(){return h(!1)}}),d.jsx(er,{isOpen:p,onClose:function(){return m(!1)}})]})}function ur(){var e=Ae(),n=Ze((function(e){return e.runtime.globalAlerts}));return d.jsx(d.Fragment,{children:Object.entries(n).map((function(n){var t=u(n,2),r=t[0],i=t[1],s=i.message,o=i.url,a=i.linkedApp;return d.jsxs(fe,{status:r,variant:"solid",size:"xs",pl:3,pr:1,py:0,zIndex:"1",children:[d.jsx(pe,{}),a?d.jsx(L,{onClick:function(){return function(e){Se.isStandaloneWindow()?window.open("/".concat(e),"_blank"):Se.openApp(e)}(a)},children:s}):o?d.jsx(L,{href:o,target:"_blank",children:s}):s,d.jsx(j,{ml:"auto",onClick:function(){return e(zn(r))}})]},r)}))})}}}}))}();
