!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?e(Object(s),!0).forEach(function(e){n(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./chakra-legacy-DJB5Se8L.js","./index-legacy-C0H1G5aZ.js","./react-legacy-BN3K1j7S.js","./change-types-legacy-B-uAIavW.js","./master-manager-legacy-k9uoP_1P.js"],function(e,n){"use strict";var r,s,a,i,l,o,c,d,u,h,p,g,y,f,m,b,j,S,O,C,x,v,T,w,P,L,k,W,D,E,N,_,M,z,F,I,R,B,Z,q,A,H,J,K;return{setters:[e=>{r=e.j,s=e.ag,a=e.M,i=e.ah,l=e.J,o=e.N,c=e.K,d=e.L,u=e.aG,h=e.aH,p=e.aI,g=e.B,y=e.aJ,f=e.aK,m=e.O,b=e.t,j=e.aw},e=>{S=e.c,O=e.e,C=e.w,x=e.x,v=e.y,T=e.q,w=e.aQ,P=e.C,L=e.M,k=e.S,W=e.p,D=e.L,E=e.Z,N=e.W,_=e.R,M=e._,z=e.k},e=>{F=e.u,I=e.b},e=>{R=e.e,B=e.f,Z=e.g,q=e.h,A=e.i,H=e.j},e=>{J=e.s,K=e.g}],execute:function(){e("C",e=>{const{isOpen:n,onClose:U,isSelect:G,filter:Q}=e,{t:V}=F(),X=S(),{selected:Y}=O(e=>e.runtime),{preference:{autoParallel:$}}=O(e=>e.app),{activeSubscriptions:ee}=O(e=>e.account),te=I.useCallback(()=>{X(C(ne.current.export())),X(x()),X(v())},[X,x,v,C]),ne=I.useRef(window.graph),re=t({any:V("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(T).map(([e,t])=>[e,V(t.metadata.displayName).toString()]))),se=t({any:V("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(w).map(([e,t])=>[e,V(t.metadata.displayName).toString()]))),ae=t({any:V("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(J).map(([e,t])=>[e,V(t.metadata.displayName).toString()]))),ie={id:"any",theme:[P.Other,"other","#ffffff",L.black],value:V("header.settings.procedures.changeType.any")},[le,oe]=I.useState(!1),[ce,de]=I.useState(0),[ue,he]=I.useState(!1),[pe,ge]=I.useState("any"),[ye,fe]=I.useState(k.ShmetroBasic),[me,be]=I.useState(!1),[je,Se]=I.useState("any"),[Oe,Ce]=I.useState(W.SingleColor),[xe,ve]=I.useState(!1),[Te,we]=I.useState("any"),[Pe,Le]=I.useState(D.Diagonal),[ke,We]=I.useState(!1),[De,Ee]=I.useState(ie),{theme:Ne,requestThemeChange:_e}=E(),[Me,ze]=I.useState([]),Fe=[{id:"changeZIndex",title:V("header.settings.procedures.changeZIndex"),onClose:()=>oe(!le),field:[{type:"select",label:V("panel.details.info.zIndex"),value:ce,options:Object.fromEntries(Array.from({length:11},(e,t)=>[t-5,(t-5).toString()])),onChange:e=>de(Number(e))}]},{id:"changeStationType",title:V("header.settings.procedures.changeStationType.title"),onClose:()=>he(!ue),field:[{type:"select",label:V("header.settings.procedures.changeStationType.changeFrom"),options:ae,value:pe,disabledOptions:[ye],onChange:e=>ge(e)},{type:"select",label:V("header.settings.procedures.changeStationType.changeTo"),options:ae,value:ye,disabledOptions:["any",pe],onChange:e=>fe(e)}]},{id:"changeLineStyleType",title:V("header.settings.procedures.changeLineStyleType.title"),onClose:()=>be(!me),field:[{type:"select",label:V("header.settings.procedures.changeLineStyleType.changeFrom"),options:se,value:je,disabledOptions:[Oe],onChange:e=>Se(e)},{type:"select",label:V("header.settings.procedures.changeLineStyleType.changeTo"),options:se,value:Oe,disabledOptions:["any",je],onChange:e=>Ce(e)}]},{id:"changeLinePathType",title:V("header.settings.procedures.changeLinePathType.title"),onClose:()=>ve(!xe),field:[{type:"select",label:V("header.settings.procedures.changeLinePathType.changeFrom"),options:re,value:Te,disabledOptions:[Pe],onChange:e=>we(e)},{type:"select",label:V("header.settings.procedures.changeLinePathType.changeTo"),options:re,value:Pe,disabledOptions:["any","simple",Te],onChange:e=>Le(e)}]},{id:"changeColor",title:V("header.settings.procedures.changeColor.title"),onClose:()=>We(!ke),field:[{type:"custom",label:V("header.settings.procedures.changeColor.changeFrom"),component:r.jsx(N,{data:Me,displayHandler:e=>r.jsx(_,{name:e.value,fg:e.theme[3],bg:e.theme[2],title:e.theme[1],sx:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"}}),filter:(e,t)=>t.id.toLowerCase().includes(e.toLowerCase())||Object.values(t.id).some(t=>t.toLowerCase().includes(e.toLowerCase())),value:De.value,onChange:e=>Ee(e)})},{type:"custom",label:V("header.settings.procedures.changeColor.changeTo"),component:r.jsx(M,{theme:Ne,onClick:_e})}]}];I.useEffect(()=>{n&&(oe(!1),he(!1),be(!1),ve(!1),We(!1),de(0),ze([ie,...K(ne.current,G?[...Y].filter(e=>e.startsWith("stn")||e.startsWith("misc_node")):ne.current.nodes(),G?[...Y].filter(e=>e.startsWith("line")):ne.current.edges()).map(e=>({id:e.toString(),theme:e,value:"other"===e[1]?e[2]:e[1]}))]),Ee(ie))},[n]);return r.jsxs(s,{isOpen:n,onClose:U,size:"md",scrollBehavior:"inside",children:[r.jsx(a,{}),r.jsxs(i,{children:[r.jsxs(l,{children:[r.jsx(o,{as:"b",fontSize:"xl",children:V(G?"panel.details.multipleSelection.change":"header.settings.procedures.changeType.title")}),r.jsx(c,{})]}),r.jsx(d,{children:r.jsx(u,{allowMultiple:!0,children:Fe.map(e=>r.jsxs(h,{children:[r.jsxs(p,{onClick:e.onClose,children:[r.jsx(g,{as:"span",flex:"1",textAlign:"left",children:r.jsx(o,{as:"b",fontSize:"md",children:e.title})}),r.jsx(y,{})]}),r.jsx(f,{pb:4,children:r.jsx(z,{fields:e.field,minW:270})})]},e.id))})}),r.jsxs(m,{children:[r.jsx(b,{colorScheme:"blue",variant:"outline",mr:"1",onClick:U,children:V("cancel")}),r.jsx(j,{label:V("header.settings.pro"),isOpen:!ee.RMP_CLOUD,children:r.jsx(b,{colorScheme:"red",mr:"1",onClick:()=>{const e=null!=Q&&Q.includes("station")?[...Y].filter(e=>e.startsWith("stn")):G?[]:ne.current.filterNodes(e=>e.startsWith("stn")),t=null!=Q&&Q.includes("misc-node")?[...Y].filter(e=>e.startsWith("misc_node")):G?[]:ne.current.filterNodes(e=>e.startsWith("misc_node")),n=G?[...Y].filter(e=>e.startsWith("line")):ne.current.edges();Q&&!Q.includes("station")||!ue||R(ne.current,pe,ye,e),Q&&!Q.includes("line")||!me||B(ne.current,je,Oe,Ne,n),Q&&!Q.includes("line")||!xe||Z(ne.current,Te,Pe,n,$),ke&&(Q&&!Q.includes("line")||q(ne.current,"any"===De.id?"any":De.theme,Ne,n),(!Q||Q.includes("misc-node")||Q.includes("station"))&&A(ne.current,"any"===De.id?"any":De.theme,Ne,e,t)),le&&H(ne.current,e,t,n,ce),te(),U()},isDisabled:!(ee.RMP_CLOUD&&(le||ue||me||xe||ke)),children:V("apply")})})]})]})]})})}}})}();
