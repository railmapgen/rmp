System.register(["./chakra-legacy-BxCYkbHV.js","./react-legacy-DcrIyQlh.js","./index-legacy-B0huxA6h.js","./misc-nodes-legacy-CAodmf78.js","./master-manager-legacy-CCDPgIfh.js","./localized-order-legacy-B9HZkEVx.js"],function(e,l){"use strict";var s,a,i,t,n,o,r,c,d,x,h,j,u,p,m,f,g,v,y,b,C,k,w,I,M,$,D,P,S,L,N,T,O,z,A,R,V,U,_,q,B;return{setters:[e=>{s=e.R,a=e.j,i=e.h,t=e.v,n=e.aH,o=e.aI,r=e.aJ,c=e.B,d=e.aK,x=e.aL,h=e.O,j=e.y,u=e.ay,p=e.aw,m=e.aM,f=e.U,g=e.aq},e=>{v=e.u,y=e.b},e=>{b=e.c,C=e.e,k=e.aB,w=e.$,I=e.aC,M=e.aD,$=e.aE,D=e.aF,P=e.aG,S=e.a0,L=e.L,N=e.t,T=e.aH,O=e.aI,z=e.aJ,A=e.q,R=e.aK,V=e.b},e=>{U=e.m},e=>{_=e.s},e=>{q=e.l,B=e.a}],execute:function(){const l={justifyContent:"flex-start",p:0,w:"100%",h:10},F={p:2.5,h:10},H={p:0,display:"flex",flexDirection:"column"},W=a.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:a.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeDasharray:"2",fill:"none"})}),E=(e("default",()=>{var e,p;const{i18n:m,t:f}=v(),g=b(),{activeSubscriptions:R}=C(e=>e.account),{preference:{toolsPanel:{expand:V}}}=C(e=>e.app),{mode:J,lastTool:K,count:{masters:G}}=C(e=>e.runtime),Q=s("white","var(--chakra-colors-gray-800)"),X=y.useCallback(e=>{g(k(e))},[]),{theme:Y,requestThemeChange:Z}=w({onThemeApplied:X}),[ee,le]=y.useState(V),se=(e,l)=>{const s=O[e],a=null==s?void 0:s.metadata.supportLinePathType.includes(l),i=!(null!=s&&s.isPro)||R.RMP_CLOUD;return a&&i},ae=(e,l)=>{var s;const a=N[e],i=null===(s=O[l])||void 0===s?void 0:s.metadata.supportLinePathType.includes(e),t=!(null!=a&&a.isPro)||R.RMP_CLOUD;return i&&t},ie=e=>g(P(`misc-node-${e}`)),{path:te,style:ne}=I(J),oe=!R.RMP_CLOUD&&G+1>M;return a.jsxs(i,{flexShrink:"0",direction:"column",width:V?450:10,maxWidth:"100%",height:"100%",bg:Q,zIndex:"5",transition:"width 0.3s ease-in-out",children:[a.jsx(t,{"aria-label":"Menu",leftIcon:ee?a.jsx($,{size:40,transform:"rotate(90)"}):a.jsx(D,{size:40,transform:"rotate(90)"}),onClick:()=>{V?le(!1):setTimeout(()=>le(!0),320),g(z(!V))},sx:l,children:ee?f("panel.tools.showLess"):void 0}),a.jsx(i,{className:"tools",overflow:"auto",children:a.jsxs(n,{width:"100%",allowMultiple:!0,defaultIndex:[0,2,3],children:[a.jsx(t,{"aria-label":"select",leftIcon:W,onClick:()=>g(P("select"===J?"free":"select")),variant:"select"===J?"solid":"outline",sx:l,children:ee?f("panel.tools.select"):void 0}),a.jsxs(o,{children:[a.jsxs(r,{sx:F,children:[ee&&a.jsx(c,{as:"span",flex:"1",textAlign:"left",children:f("panel.tools.section.lineDrawing")}),a.jsx(d,{})]}),a.jsxs(x,{sx:H,children:[a.jsxs(i,{children:[a.jsx(S,{theme:Y,onClick:Z}),a.jsx(h,{fontWeight:"600",pl:"1",alignSelf:"center",children:ee?f("color"):void 0})]}),Object.values(L).filter(e=>e!==L.Simple||R.RMP_CLOUD).map(e=>a.jsx(t,{"aria-label":e,leftIcon:N[e].icon,onClick:()=>(e=>{let{style:l}=I(J);!l&&K&&(l=I(K).style);const s=l&&se(l,e)?l:A.SingleColor;g(P(`line-${e}/${s}`))})(e),variant:te===e?"solid":"outline",isDisabled:!!ne&&!ae(e,ne),sx:l,children:ee?f(N[e].metadata.displayName):void 0},e)),a.jsx(t,{"aria-label":T.Virtual,leftIcon:U[T.Virtual].icon,onClick:()=>ie(T.Virtual),variant:J===`misc-node-${T.Virtual}`?"solid":"outline",sx:l,children:ee?f(U[T.Virtual].metadata.displayName):void 0})]})]}),a.jsxs(o,{children:[a.jsxs(r,{sx:F,children:[ee&&a.jsx(c,{as:"span",flex:"1",textAlign:"left",children:f("panel.tools.section.lineStyles")}),a.jsx(d,{})]}),a.jsxs(x,{sx:H,children:[Object.entries(O).map(([e,s])=>a.jsx(t,{"aria-label":e,leftIcon:a.jsx(c,{boxSize:"40px"}),onClick:()=>(e=>{let{path:l}=I(J);!l&&K&&(l=I(K).path);const s=l&&ae(l,e)?l:L.Diagonal;g(P(`line-${s}/${e}`))})(e),variant:ne===e?"solid":"outline",isDisabled:!!te&&!se(e,te),sx:l,children:ee?f(s.metadata.displayName):void 0},e)),a.jsx(E,{type:"line-styles",expand:ee})]})]}),a.jsxs(o,{children:[a.jsxs(r,{sx:F,children:[ee&&a.jsx(c,{as:"span",flex:"1",textAlign:"left",children:f("panel.tools.section.stations")}),a.jsx(d,{})]}),a.jsxs(x,{sx:H,children:[null===(e=q[m.language])||void 0===e?void 0:e.map(e=>a.jsx(t,{"aria-label":e,leftIcon:_[e].icon,onClick:()=>(e=>g(P(`station-${e}`)))(e),variant:J===`station-${e}`?"solid":"outline",sx:l,children:ee?f(_[e].metadata.displayName):void 0},e)),a.jsx(E,{type:"station",expand:ee})]})]}),a.jsxs(o,{children:[a.jsxs(r,{sx:F,children:[ee&&a.jsx(c,{as:"span",flex:"1",textAlign:"left",children:f("panel.tools.section.miscellaneousNodes")}),a.jsx(d,{})]}),a.jsxs(x,{sx:H,children:[a.jsxs(t,{"aria-label":T.Master,leftIcon:U[T.Master].icon,onClick:()=>ie(T.Master),variant:J===`misc-node-${T.Master}`?"solid":"outline",isDisabled:oe,sx:l,children:[ee?f(U[T.Master].metadata.displayName):void 0,ee?a.jsxs(a.Fragment,{children:[a.jsx(j,{ml:"1",colorScheme:"green",children:"New"}),a.jsx(u,{label:f("header.settings.proWithTrial"),children:a.jsx(j,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})})]}):void 0]}),null===(p=B[m.language])||void 0===p?void 0:p.filter(e=>e!==T.Virtual&&e!==T.I18nText&&e!==T.Master).map(e=>a.jsx(t,{"aria-label":e,leftIcon:U[e].icon,onClick:()=>ie(e),variant:J===`misc-node-${e}`?"solid":"outline",sx:l,children:ee?f(U[e].metadata.displayName):void 0},e)),a.jsx(E,{type:"misc-node",expand:ee})]})]})]})})]})}),e=>{const{type:l,expand:s}=e,{t:i}=v(),t="misc-node"===l?"nodes":l;return a.jsxs(p,{children:[a.jsx(m.Provider,{value:{style:{padding:5},size:"40px"},children:a.jsx(R,{})}),s&&a.jsxs(a.Fragment,{children:[a.jsx(f,{color:"teal.500",href:`https://github.com/railmapgen/rmp/blob/main/docs/${t}.md`,isExternal:!0,children:i(`panel.tools.learnHowToAdd.${l}`)}),a.jsx(g,{as:V,color:"teal.500",mr:"auto"})]})]})})}}});
