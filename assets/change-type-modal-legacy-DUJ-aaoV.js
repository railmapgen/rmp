!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?e(Object(s),!0).forEach(function(e){n(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./chakra-legacy-DJB5Se8L.js","./index-legacy-sU1oED6m.js","./react-legacy-BN3K1j7S.js","./change-types-legacy-1GaF0Myx.js","./master-manager-legacy-Brsk2StB.js"],function(e,n){"use strict";var r,s,a,i,l,o,c,d,u,h,p,g,y,f,m,b,j,S,O,C,x,v,T,w,P,L,k,W,E,D,N,_,M,R,z,F,I,B,Z,q,A,H,J,K,U;return{setters:[e=>{r=e.j,s=e.ag,a=e.M,i=e.ah,l=e.J,o=e.N,c=e.K,d=e.L,u=e.aG,h=e.aH,p=e.aI,g=e.B,y=e.aJ,f=e.aK,m=e.O,b=e.t,j=e.aw},e=>{S=e.c,O=e.e,C=e.w,x=e.x,v=e.y,T=e.q,w=e.aR,P=e.C,L=e.M,k=e.S,W=e.p,E=e.L,D=e.Z,N=e.W,_=e.R,M=e._,R=e.k},e=>{z=e.u,F=e.b},e=>{I=e.f,B=e.c,Z=e.g,q=e.h,A=e.i,H=e.j,J=e.k},e=>{K=e.s,U=e.g}],execute:function(){e("C",e=>{const{isOpen:n,onClose:G,isSelect:Q,filter:V}=e,{t:X}=z(),Y=S(),{selected:$}=O(e=>e.runtime),{preference:{autoParallel:ee,autoChangeStationType:te}}=O(e=>e.app),{activeSubscriptions:ne}=O(e=>e.account),re=F.useCallback(()=>{Y(C(se.current.export())),Y(x()),Y(v())},[Y,x,v,C]),se=F.useRef(window.graph),ae=t({any:X("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(T).map(([e,t])=>[e,X(t.metadata.displayName).toString()]))),ie=t({any:X("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(w).map(([e,t])=>[e,X(t.metadata.displayName).toString()]))),le=t({any:X("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(K).map(([e,t])=>[e,X(t.metadata.displayName).toString()]))),oe={id:"any",theme:[P.Other,"other","#ffffff",L.black],value:X("header.settings.procedures.changeType.any")},[ce,de]=F.useState(!1),[ue,he]=F.useState(0),[pe,ge]=F.useState(!1),[ye,fe]=F.useState("any"),[me,be]=F.useState(k.ShmetroBasic),[je,Se]=F.useState(!1),[Oe,Ce]=F.useState("any"),[xe,ve]=F.useState(W.SingleColor),[Te,we]=F.useState(!1),[Pe,Le]=F.useState("any"),[ke,We]=F.useState(E.Diagonal),[Ee,De]=F.useState(!1),[Ne,_e]=F.useState(oe),{theme:Me,requestThemeChange:Re}=D(),[ze,Fe]=F.useState([]),Ie=[{id:"changeZIndex",title:X("header.settings.procedures.changeZIndex"),onClose:()=>de(!ce),field:[{type:"select",label:X("panel.details.info.zIndex"),value:ue,options:Object.fromEntries(Array.from({length:21},(e,t)=>[t-10,(t-10).toString()])),onChange:e=>he(Number(e))}]},{id:"changeStationType",title:X("header.settings.procedures.changeStationType.title"),onClose:()=>ge(!pe),field:[{type:"select",label:X("header.settings.procedures.changeStationType.changeFrom"),options:le,value:ye,disabledOptions:[me],onChange:e=>fe(e)},{type:"select",label:X("header.settings.procedures.changeStationType.changeTo"),options:le,value:me,disabledOptions:["any",ye],onChange:e=>be(e)}]},{id:"changeLineStyleType",title:X("header.settings.procedures.changeLineStyleType.title"),onClose:()=>Se(!je),field:[{type:"select",label:X("header.settings.procedures.changeLineStyleType.changeFrom"),options:ie,value:Oe,disabledOptions:[xe],onChange:e=>Ce(e)},{type:"select",label:X("header.settings.procedures.changeLineStyleType.changeTo"),options:ie,value:xe,disabledOptions:["any",Oe],onChange:e=>ve(e)}]},{id:"changeLinePathType",title:X("header.settings.procedures.changeLinePathType.title"),onClose:()=>we(!Te),field:[{type:"select",label:X("header.settings.procedures.changeLinePathType.changeFrom"),options:ae,value:Pe,disabledOptions:[ke],onChange:e=>Le(e)},{type:"select",label:X("header.settings.procedures.changeLinePathType.changeTo"),options:ae,value:ke,disabledOptions:["any","simple",Pe],onChange:e=>We(e)}]},{id:"changeColor",title:X("header.settings.procedures.changeColor.title"),onClose:()=>De(!Ee),field:[{type:"custom",label:X("header.settings.procedures.changeColor.changeFrom"),component:r.jsx(N,{data:ze,displayHandler:e=>r.jsx(_,{name:e.value,fg:e.theme[3],bg:e.theme[2],title:e.theme[1],sx:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"}}),filter:(e,t)=>t.id.toLowerCase().includes(e.toLowerCase())||Object.values(t.id).some(t=>t.toLowerCase().includes(e.toLowerCase())),value:Ne.value,onChange:e=>_e(e)})},{type:"custom",label:X("header.settings.procedures.changeColor.changeTo"),component:r.jsx(M,{theme:Me,onClick:Re})}]}];F.useEffect(()=>{n&&(de(!1),ge(!1),Se(!1),we(!1),De(!1),he(0),Fe([oe,...U(se.current,Q?[...$].filter(e=>e.startsWith("stn")||e.startsWith("misc_node")):se.current.nodes(),Q?[...$].filter(e=>e.startsWith("line")):se.current.edges()).map(e=>({id:e.toString(),theme:e,value:"other"===e[1]?e[2]:e[1]}))]),_e(oe))},[n]);return r.jsxs(s,{isOpen:n,onClose:G,size:"md",scrollBehavior:"inside",children:[r.jsx(a,{}),r.jsxs(i,{children:[r.jsxs(l,{children:[r.jsx(o,{as:"b",fontSize:"xl",children:X(Q?"panel.details.multipleSelection.change":"header.settings.procedures.changeType.title")}),r.jsx(c,{})]}),r.jsx(d,{children:r.jsx(u,{allowMultiple:!0,children:Ie.map(e=>r.jsxs(h,{children:[r.jsxs(p,{onClick:e.onClose,children:[r.jsx(g,{as:"span",flex:"1",textAlign:"left",children:r.jsx(o,{as:"b",fontSize:"md",children:e.title})}),r.jsx(y,{})]}),r.jsx(f,{pb:4,children:r.jsx(R,{fields:e.field,minW:270})})]},e.id))})}),r.jsxs(m,{children:[r.jsx(b,{colorScheme:"blue",variant:"outline",mr:"1",onClick:G,children:X("cancel")}),r.jsx(j,{label:X("header.settings.pro"),isOpen:!ne.RMP_CLOUD,children:r.jsx(b,{colorScheme:"red",mr:"1",onClick:()=>{const e=null!=V&&V.includes("station")?[...$].filter(e=>e.startsWith("stn")):Q?[]:se.current.filterNodes(e=>e.startsWith("stn")),t=null!=V&&V.includes("misc-node")?[...$].filter(e=>e.startsWith("misc_node")):Q?[]:se.current.filterNodes(e=>e.startsWith("misc_node")),n=Q?[...$].filter(e=>e.startsWith("line")):se.current.edges();V&&!V.includes("station")||!pe||(I(se.current,ye,me,e),te&&e.forEach(e=>B(se.current,e))),V&&!V.includes("line")||!je||Z(se.current,Oe,xe,Me,n),V&&!V.includes("line")||!Te||q(se.current,Pe,ke,n,ee),Ee&&(V&&!V.includes("line")||A(se.current,"any"===Ne.id?"any":Ne.theme,Me,n),(!V||V.includes("misc-node")||V.includes("station"))&&H(se.current,"any"===Ne.id?"any":Ne.theme,Me,e,t)),ce&&J(se.current,e,t,n,ue),re(),G()},isDisabled:!(ne.RMP_CLOUD&&(ce||pe||je||Te||Ee)),children:X("apply")})})]})]})]})})}}})}();
