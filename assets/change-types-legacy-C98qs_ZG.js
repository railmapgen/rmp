!function(){function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function e(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?t(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}System.register(["./index-legacy-Bk_bV-9b.js","./master-manager-legacy-Cez62CL0.js"],function(t,r){"use strict";var o,n,i,s,u,a,c,l,d,g;return{setters:[t=>{o=t.S,n=t.d,i=t.aI,s=t.t,u=t.L,a=t.p,c=t.q,l=t.aH,d=t.C},t=>{g=t.s}],execute:function(){const r=[o.ShmetroBasic2020,o.LondonTubeBasic,o.ShanghaiSuburbanRailway,o.OsakaMetro],b=t("d",(t,o,i)=>{const s=t.getNodeAttribute(o,"type"),u=structuredClone(t.getNodeAttribute(o,s).names);for(let e=0;e<Math.abs(g[i].defaultAttrs.names.length-u.length);e++)g[i].defaultAttrs.names.length>u.length?u.push("Stn"):u.pop();const a=e(e({},g[i].defaultAttrs),{},{names:u});Object.values(r).includes(s)&&Object.values(r).includes(i)||(a.nameOffsetX=t.getNodeAttribute(o,s).nameOffsetX,a.nameOffsetY=t.getNodeAttribute(o,s).nameOffsetY),n.has(i)&&n.has(s)&&(a.color=structuredClone(t.getNodeAttribute(o,s).color)),t.removeNodeAttribute(o,s),t.mergeNodeAttributes(o,{type:i,[i]:a})}),f=(t("f",(t,e,r,o)=>o.filter(r=>"any"===e||t.getNodeAttribute(r,"type")===e).forEach(e=>{b(t,e,r)})),t("a",(t,e,r,o)=>{const n=t.getEdgeAttribute(e,"type"),c=t.getEdgeAttribute(e,"style");if(i[c].metadata.supportLinePathType.includes(r)){const i=structuredClone(s[r].defaultAttrs);let c=-1;if(o&&r!==u.Simple){const[o,n]=t.extremities(e),s=i.startFrom;c=a(t,r,o,n,s)}t.setEdgeAttribute(e,"parallelIndex",c),t.removeEdgeAttribute(e,n),t.mergeEdgeAttributes(e,{type:r,[r]:i})}})),y=(t("h",(t,e,r,o,n)=>o.filter(r=>"any"===e||t.getEdgeAttribute(r,"type")===e).forEach(e=>{f(t,e,r,n)})),t("b",(t,e,r,o)=>{const s=t.getEdgeAttribute(e,"type"),u=t.getEdgeAttribute(e,"style");if(i[r].metadata.supportLinePathType.includes(s)){const s=t.getEdgeAttribute(e,"zIndex"),a=t.getEdgeAttribute(e,u);t.removeEdgeAttribute(e,u);const l=structuredClone(i[r].defaultAttrs);n.has(u)&&n.has(r)?l.color=a.color:n.has(r)&&o&&(l.color=o),t.mergeEdgeAttributes(e,{style:r,[r]:l}),r===c.River?t.setEdgeAttribute(e,"zIndex",-5):t.setEdgeAttribute(e,"zIndex",null!=s?s:0)}})),p=(t("g",(t,e,r,o,n)=>n.filter(r=>"any"===e||t.getEdgeAttribute(r,"style")===e).forEach(e=>{y(t,e,r,o)})),t("i",(t,e,r,o)=>o.filter(e=>n.has(t.getEdgeAttribute(e,"style"))).forEach(o=>{const n=t.getEdgeAttributes(o),i=n[n.style].color;("any"===e||i[0]==e[0]&&i[1]==e[1]&&i[2]==e[2]&&i[3]==e[3])&&t.mergeEdgeAttributes(o,{[n.style]:{color:r}})})),t("j",(t,e,r,o,n)=>{[...o,...n].forEach(o=>{const n=t.getNodeAttributes(o).type,i=t.getNodeAttribute(o,n);if(void 0!==i.color)if(n!==l.Master){const t=i.color;("any"===e||t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]&&t[3]==e[3])&&(i.color=r)}else{const t=i.color.value;("any"===e||void 0===t||t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]&&t[3]==e[3])&&(i.color.value=r)}t.mergeNodeAttributes(o,{[n]:i})})})),A=(t("k",(t,e,r,o,n)=>{[...e,...r].forEach(e=>{t.setNodeAttribute(e,"zIndex",n)}),o.forEach(e=>{t.setEdgeAttribute(e,"zIndex",n)})}),(t,e,r)=>{const n=t.getNodeAttribute(e,"type"),i=(s=n).endsWith("-int")&&"basic"===r?s.replace(/-int$/,"-basic"):s.endsWith("-basic")&&"int"===r?s.replace(/-basic$/,"-int"):void 0;var s;if(i&&Object.values(o).includes(i))return i}),h=(t,e)=>{const r=t.directedEdges(e),o=new Set,i=[],s=t=>t[0]!==d.Other?t[0].toString()+"/"+t[1].toString():t[2].toString()+"/"+t[3].toString();for(const u of r){const e=t.getEdgeAttributes(u).style;if(!n.has(e))continue;const r=t.getEdgeAttributes(u)[e].color;o.has(s(r))||(o.add(s(r)),i.push(r))}return{lineColorStr:o,lineColor:i}},m=t("e",(t,e)=>{var r,o;if(!((t,e)=>{const r=t.getNodeAttribute(e,"type"),o=t.getNodeAttribute(e,r);return!(!o||!("transfer"in o))})(t,e))return!1;const{lineColorStr:n,lineColor:i}=h(t,e),s=t.getNodeAttribute(e,"type"),u=t=>t[0]!==d.Other?t[0].toString()+"/"+t[1].toString():t[2].toString()+"/"+t[3].toString(),a=null!==(r=null===(o=t.getNodeAttribute(e,s).transfer)||void 0===o?void 0:o.at(0))&&void 0!==r?r:[];const c=[...a.filter(t=>n.has(u(t))),...i.filter(t=>!a.find(e=>u(t)===u(e))).map(t=>[t[0],t[1],t[2],t[3],"",""])];return JSON.stringify(a)!==JSON.stringify(c)&&(((t,e,r,o)=>{const n=t.getNodeAttribute(e,r);n&&(n.transfer=[o],t.mergeNodeAttributes(e,{[r]:n}))})(t,e,s,c),!0)});t("c",(t,e)=>{((t,e)=>{const{lineColorStr:r,lineColor:o}=h(t,e);if(r.size>1){const r=A(t,e,"int");if(r)return b(t,e,r),!0}else if(1===r.size){const r=A(t,e,"basic");if(r)return b(t,e,r),p(t,"any",o[0],[e],[]),!0}})(t,e),m(t,e)})}}})}();
