import{R as te,j as s,h as k,v as r,aH as ne,aI as g,aJ as S,B as u,aK as M,aL as v,O as oe,y as U,ay as le,aw as ie,aM as ce,U as re,aq as de}from"./chakra-Cop0_64e.js";import{u as W,b as F}from"./react-D0AKL3Cl.js";import{c as xe,e as D,aB as he,$ as me,aC as p,aD as ue,aE as pe,aF as je,aG as j,a0 as fe,L,t as O,aH as l,aI as $,aJ as be,q as ge,aK as Se,b as Me}from"./index-CHlkV3Zd.js";import{m}from"./misc-nodes-DGmpvZoe.js";import{s as H}from"./master-manager-DzE64Ssr.js";import{l as ve,a as Ce}from"./localized-order-DUaIIpm3.js";const d={justifyContent:"flex-start",p:0,w:"100%",h:10},C={p:2.5,h:10},P={p:0,display:"flex",flexDirection:"column"},Pe=s.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeDasharray:"2",fill:"none"})}),q=.3,De=()=>{var y,z;const{i18n:f,t:a}=W(),i=xe(),{activeSubscriptions:x}=D(e=>e.account),{preference:{toolsPanel:{expand:h}}}=D(e=>e.app),{mode:c,lastTool:b,count:{masters:J}}=D(e=>e.runtime),K=te("white","var(--chakra-colors-gray-800)"),X=F.useCallback(e=>{i(he(e))},[]),{theme:G,requestThemeChange:Q}=me({onThemeApplied:X}),[t,R]=F.useState(h),Y=()=>{h?R(!1):setTimeout(()=>R(!0),(q+.02)*1e3),i(be(!h))},Z=e=>i(j("station-".concat(e))),B=(e,n)=>{const o=$[e],A=o==null?void 0:o.metadata.supportLinePathType.includes(n),N=!(o!=null&&o.isPro)||x.RMP_CLOUD;return A&&N},_=(e,n)=>{var V;const o=O[e],A=(V=$[n])==null?void 0:V.metadata.supportLinePathType.includes(e),N=!(o!=null&&o.isPro)||x.RMP_CLOUD;return A&&N},ee=e=>{let{style:n}=p(c);!n&&b&&(n=p(b).style);const o=n&&B(n,e)?n:ge.SingleColor;i(j("line-".concat(e,"/").concat(o)))},se=e=>{let{path:n}=p(c);!n&&b&&(n=p(b).path);const o=n&&_(n,e)?n:L.Diagonal;i(j("line-".concat(o,"/").concat(e)))},I=e=>i(j("misc-node-".concat(e))),{path:w,style:T}=p(c),ae=!x.RMP_CLOUD&&J+1>ue;return s.jsxs(k,{flexShrink:"0",direction:"column",width:h?450:10,maxWidth:"100%",height:"100%",bg:K,zIndex:"5",transition:"width ".concat(q,"s ease-in-out"),children:[s.jsx(r,{"aria-label":"Menu",leftIcon:t?s.jsx(pe,{size:40,transform:"rotate(90)"}):s.jsx(je,{size:40,transform:"rotate(90)"}),onClick:Y,sx:d,children:t?a("panel.tools.showLess"):void 0}),s.jsx(k,{className:"tools",overflow:"auto",children:s.jsxs(ne,{width:"100%",allowMultiple:!0,defaultIndex:[0,2,3],children:[s.jsx(r,{"aria-label":"select",leftIcon:Pe,onClick:()=>i(j(c==="select"?"free":"select")),variant:c==="select"?"solid":"outline",sx:d,children:t?a("panel.tools.select"):void 0}),s.jsxs(g,{children:[s.jsxs(S,{sx:C,children:[t&&s.jsx(u,{as:"span",flex:"1",textAlign:"left",children:a("panel.tools.section.lineDrawing")}),s.jsx(M,{})]}),s.jsxs(v,{sx:P,children:[s.jsxs(k,{children:[s.jsx(fe,{theme:G,onClick:Q}),s.jsx(oe,{fontWeight:"600",pl:"1",alignSelf:"center",children:t?a("color"):void 0})]}),Object.values(L).filter(e=>e!==L.Simple||x.RMP_CLOUD).map(e=>s.jsx(r,{"aria-label":e,leftIcon:O[e].icon,onClick:()=>ee(e),variant:w===e?"solid":"outline",isDisabled:T?!_(e,T):!1,sx:d,children:t?a(O[e].metadata.displayName):void 0},e)),s.jsx(r,{"aria-label":l.Virtual,leftIcon:m[l.Virtual].icon,onClick:()=>I(l.Virtual),variant:c==="misc-node-".concat(l.Virtual)?"solid":"outline",sx:d,children:t?a(m[l.Virtual].metadata.displayName):void 0})]})]}),s.jsxs(g,{children:[s.jsxs(S,{sx:C,children:[t&&s.jsx(u,{as:"span",flex:"1",textAlign:"left",children:a("panel.tools.section.lineStyles")}),s.jsx(M,{})]}),s.jsxs(v,{sx:P,children:[Object.entries($).map(([e,n])=>s.jsx(r,{"aria-label":e,leftIcon:s.jsx(u,{boxSize:"40px"}),onClick:()=>se(e),variant:T===e?"solid":"outline",isDisabled:w?!B(e,w):!1,sx:d,children:t?a(n.metadata.displayName):void 0},e)),s.jsx(E,{type:"line-styles",expand:t})]})]}),s.jsxs(g,{children:[s.jsxs(S,{sx:C,children:[t&&s.jsx(u,{as:"span",flex:"1",textAlign:"left",children:a("panel.tools.section.stations")}),s.jsx(M,{})]}),s.jsxs(v,{sx:P,children:[(y=ve[f.language])==null?void 0:y.map(e=>s.jsx(r,{"aria-label":e,leftIcon:H[e].icon,onClick:()=>Z(e),variant:c==="station-".concat(e)?"solid":"outline",sx:d,children:t?a(H[e].metadata.displayName):void 0},e)),s.jsx(E,{type:"station",expand:t})]})]}),s.jsxs(g,{children:[s.jsxs(S,{sx:C,children:[t&&s.jsx(u,{as:"span",flex:"1",textAlign:"left",children:a("panel.tools.section.miscellaneousNodes")}),s.jsx(M,{})]}),s.jsxs(v,{sx:P,children:[s.jsxs(r,{"aria-label":l.Master,leftIcon:m[l.Master].icon,onClick:()=>I(l.Master),variant:c==="misc-node-".concat(l.Master)?"solid":"outline",isDisabled:ae,sx:d,children:[t?a(m[l.Master].metadata.displayName):void 0,t?s.jsxs(s.Fragment,{children:[s.jsx(U,{ml:"1",colorScheme:"green",children:"New"}),s.jsx(le,{label:a("header.settings.proWithTrial"),children:s.jsx(U,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})})]}):void 0]}),(z=Ce[f.language])==null?void 0:z.filter(e=>e!==l.Virtual&&e!==l.I18nText&&e!==l.Master).map(e=>s.jsx(r,{"aria-label":e,leftIcon:m[e].icon,onClick:()=>I(e),variant:c==="misc-node-".concat(e)?"solid":"outline",sx:d,children:t?a(m[e].metadata.displayName):void 0},e)),s.jsx(E,{type:"misc-node",expand:t})]})]})]})})]})},E=f=>{const{type:a,expand:i}=f,{t:x}=W(),h=a==="misc-node"?"nodes":a;return s.jsxs(ie,{children:[s.jsx(ce.Provider,{value:{style:{padding:5},size:"40px"},children:s.jsx(Se,{})}),i&&s.jsxs(s.Fragment,{children:[s.jsx(re,{color:"teal.500",href:"https://github.com/railmapgen/rmp/blob/main/docs/".concat(h,".md"),isExternal:!0,children:x("panel.tools.learnHowToAdd.".concat(a))}),s.jsx(de,{as:Me,color:"teal.500",mr:"auto"})]})]})};export{De as default};
