import{j as n,a8 as C}from"./chakra-C1zJvDsN.js";import{r as E,z as R,A as x}from"./index-oNfFqJ7e.js";import{b as s}from"./react-BpF4RbzH.js";const h="rmg-palette-bridge--",L={position:"relative",h:460,maxH:"70%","& > button":{position:"absolute",right:1,top:1},"& iframe":{h:"100%",w:"100%"}};function b(p){const{isOpen:c,onClose:o,defaultTheme:t,onSelect:l}=p,[r]=s.useState(crypto.randomUUID()),[m,f]=s.useState(!1),d="/rmg-palette/#/picker?"+new URLSearchParams({parentComponent:E.getAppName(),parentId:r}),i=s.useRef(void 0);return s.useEffect(()=>{const e=new BroadcastChannel(h+r);return i.current=e,e.onmessage=u=>{const{event:a,data:g}=u.data;R.debug("[rmp] Received event from Palette app clip:",a),a==="CLOSE"?o():a==="SELECT"?l(g):a==="LOADED"&&f(!0)},()=>{e.close()}},[]),s.useEffect(()=>{var e;t&&((e=i.current)==null||e.postMessage({event:"OPEN",data:t}))},[m,t==null?void 0:t.toString()]),n.jsxs(x,{size:"md",isOpen:c,onClose:o,sx:L,children:[n.jsx(C,{onClick:o}),n.jsx("iframe",{src:d,loading:"eager"})]})}export{b as default};
