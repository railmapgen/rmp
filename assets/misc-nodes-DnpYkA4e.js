import{C as $,M as T,b7 as B,b8 as U,aE as C,k as z,c as Je,b9 as Ze,ba as v,bb as Ye,bc as Oe,Z as Ke,_ as et,V as tt,R as Ie,J as nt,at as ot,e as He,a as at,bd as st,be as lt,bf as Ue,z as je,bg as it,n as rt,bh as De,bi as _e,bj as ct}from"./index-DnzX4unH.js";import{j as e,U as Qe,V as Ve,h as K,aM as dt,a2 as Ne,t as Te,ag as ht,M as mt,ah as ut,J as xt,K as gt,L as pt,aN as ft,aO as yt,aP as ze,x as We,aw as bt,aQ as jt,aR as wt,B as ke,S as Ct,N as Bt,aS as vt,aT as Lt,ai as Xe,aU as Nt,aj as St,q as Tt,X as Pt,Y as At,a8 as zt,O as kt}from"./chakra-CN5cGgMf.js";import{b as r,u as k,j as Mt}from"./react-CjWb0JYq.js";import{o as me,q as Rt,M as $t,i as O,r as Ee,t as It,u as Ut,v as Dt,w as _t,x as qe,y as Wt,z as Et,A as qt}from"./master-manager-DsJiiUt7.js";const Ft=h=>{const{id:n,x:t,y:l,handlePointerDown:o,handlePointerMove:i,handlePointerUp:a}=h,s=r.useCallback(m=>o(n,m),[n,o]),c=r.useCallback(m=>i(n,m),[n,i]),u=r.useCallback(m=>a(n,m),[n,a]);return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")rotate(45)"),onPointerDown:s,onPointerMove:c,onPointerUp:u,style:{cursor:"move"},className:"removeMe",children:[e.jsx("line",{x1:"-5",y1:"0",x2:"5",y2:"0",stroke:"black"}),e.jsx("line",{x1:"0",y1:"-5",x2:"0",y2:"5",stroke:"black"}),e.jsx("circle",{id:"virtual_circle_".concat(n),r:5,stroke:"black",fill:"white",fillOpacity:"0"})]})},Ot={},Ht=()=>{},Qt=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,transform:"rotate(45)",focusable:!1,children:[e.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:"currentColor",fill:"none"}),e.jsx("line",{x1:"6",y1:"12",x2:"18",y2:"12",stroke:"currentColor"}),e.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"18",stroke:"currentColor"})]}),Vt={component:Ft,icon:Qt,defaultAttrs:Ot,attrsComponent:Ht,metadata:{displayName:"panel.details.nodes.virtual.displayName",tags:[]}},Xt=new Set([B.zh,B.mtr_zh,B.jreast_ja,B.taipei]),Gt=h=>{const n=Je(),{id:t,x:l,y:o,attrs:i,handlePointerDown:a,handlePointerMove:s,handlePointerUp:c}=h,{content:u=M.content,fontSize:m=M.fontSize,lineHeight:y=M.lineHeight,textAnchor:f=M.textAnchor,dominantBaseline:p=M.dominantBaseline,language:g=M.language,color:d=M.color,rotate:x=M.rotate,italic:j=M.italic,bold:L=M.bold,outline:b=M.outline}=i!=null?i:M,w=r.useRef(null),[S,P]=r.useState({x:0,y:0,width:32,height:16});r.useEffect(()=>P(w.current.getBBox()),[u,m,y,f,p,g,x,j,L,P,w]),r.useEffect(()=>{n(Ze(g))},[g]);const D=r.useCallback(W=>a(t,W),[t,a]),I=r.useCallback(W=>s(t,W),[t,s]),_=r.useCallback(W=>c(t,W),[t,c]);return e.jsxs("g",{id:t,transform:"translate(".concat(l,", ").concat(o,")rotate(").concat(x,")"),onPointerDown:D,onPointerMove:I,onPointerUp:_,style:{cursor:"move"},children:[e.jsx("rect",{className:"removeMe",fill:"gray",fillOpacity:"0.1",x:S.x-1.5,y:S.y-1.5,width:S.width+3,height:S.height+3}),e.jsx(me,{ref:w,text:u.split("\n"),lineHeight:y,grow:"down",className:b>0?"rmp-name-outline":"",...v(g),strokeWidth:b>0?b:void 0,fontSize:m,textAnchor:f,dominantBaseline:p,fill:d[2],fontStyle:j,fontWeight:L})]})},M={content:"Enter your text here",fontSize:16,lineHeight:16,textAnchor:"middle",dominantBaseline:"middle",language:B.en,color:[$.Shanghai,"jsr","#000000",T.white],rotate:0,italic:"normal",bold:"normal",outline:0},Jt=h=>{var a,s,c,u,m,y,f,p,g;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"textarea",label:o("panel.details.nodes.text.content"),value:(a=t.content)!=null?a:M.content,onChange:d=>{t.content=d.toString(),l(n,t)},minW:"full"},{type:"input",label:o("panel.details.nodes.text.fontSize"),value:((s=t.fontSize)!=null?s:M.fontSize).toString(),validator:d=>Number.isInteger(d)&&Number(d)>0,onChange:d=>{t.fontSize=Number(d),l(n,t)},minW:"full"},{type:"input",label:o("panel.details.nodes.text.lineHeight"),value:((c=t.lineHeight)!=null?c:M.lineHeight).toString(),validator:d=>Number.isInteger(d)&&Number(d)>0,onChange:d=>{t.lineHeight=Number(d),l(n,t)},minW:"full"},{type:"select",label:o("panel.details.nodes.text.textAnchor"),value:(u=t.textAnchor)!=null?u:M.textAnchor,options:{start:o("panel.details.nodes.text.start"),middle:o("panel.details.nodes.text.middle"),end:o("panel.details.nodes.text.end")},onChange:d=>{t.textAnchor=d,l(n,t)},minW:"full"},{type:"select",label:o("panel.details.nodes.text.dominantBaseline"),value:(m=t.dominantBaseline)!=null?m:M.dominantBaseline,options:{auto:o("panel.details.nodes.text.auto"),middle:o("panel.details.nodes.text.middle"),hanging:o("panel.details.nodes.text.hanging")},onChange:d=>{t.dominantBaseline=d,l(n,t)},minW:"full"},{type:"select",label:o("panel.details.nodes.text.language"),value:(y=t.language)!=null?y:M.language,options:{zh:o("panel.details.nodes.text.zh"),en:o("panel.details.nodes.text.en"),mtr_zh:o("panel.details.nodes.text.mtr_zh"),mtr_en:o("panel.details.nodes.text.mtr_en"),berlin:o("panel.details.nodes.text.berlin"),mrt:o("panel.details.nodes.text.mrt"),jreast_ja:o("panel.details.nodes.text.jreast_ja"),jreast_en:o("panel.details.nodes.text.jreast_en"),tokyo_en:o("panel.details.nodes.text.tokyo_en"),tube:o("panel.details.nodes.text.tube"),taipei:o("panel.details.nodes.text.taipei")},onChange:d=>{t.language=d.toString(),l(n,t)},minW:"full"},{type:"input",label:o("panel.details.nodes.text.rotate"),value:((f=t.rotate)!=null?f:M.rotate).toString(),optionList:["0","45","90","135","180","225","270","315"],debouncedDelay:500,validator:d=>!Number.isNaN(d),onChange:d=>{t.rotate=(Number(d)%360+360)%360,l(n,t)},minW:"full"},{type:"custom",label:"",hidden:!Xt.has((p=t.language)!=null?p:M.language),component:e.jsxs(Qe,{status:"warning",children:[e.jsx(Ve,{}),o("panel.details.nodes.text.fontSynthesisWarning")]}),minW:"full"},{type:"switch",label:o("panel.details.nodes.text.italic"),isChecked:t.italic==="italic",onChange:d=>{t.italic=d?"italic":"normal",l(n,t)},minW:"full",oneLine:!0},{type:"switch",label:o("panel.details.nodes.text.bold"),isChecked:t.bold==="bold",onChange:d=>{t.bold=d?"bold":"normal",l(n,t)},minW:"full",oneLine:!0},{type:"input",label:o("panel.details.nodes.text.outline"),value:((g=t.outline)!=null?g:M.outline).toString(),validator:d=>Number.isInteger(d)&&Number(d)>0,onChange:d=>{t.outline=Math.abs(Number(d)),l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.Text,defaultTheme:M.color})}];return e.jsx(z,{fields:i})},Zt=e.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:e.jsx("text",{x:"12",y:"12",textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",children:"Text"})}),Pe={component:Gt,icon:Zt,defaultAttrs:M,attrsComponent:Jt,metadata:{displayName:"panel.details.nodes.text.displayName",tags:[]}},Yt=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,c=Ye();o.content=c(o.contents);const u=Pe.component;return e.jsx(u,{id:n,x:t,y:l,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s,attrs:o})},Kt={contents:{},...M},en={component:Yt,icon:Pe.icon,defaultAttrs:Kt,attrsComponent:Pe.attrsComponent,metadata:{displayName:"panel.details.nodes.i18nText.displayName",tags:[]}},tn=h=>{var L;const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,c=r.useCallback(b=>i(n,b),[n,i]),u=r.useCallback(b=>a(n,b),[n,a]),m=r.useCallback(b=>s(n,b),[n,s]),y=(b,...w)=>new Function(...w,"return ".concat(b)),f=(b,w,S)=>{var D;const P={};for(const I in b)if(Object.prototype.hasOwnProperty.call(b,I))try{P[I]=y(b[I].slice(1),...o.components.map(_=>_.label),"color")(...w.map((_,W)=>S[W]==="number"&&!Number.isNaN(Number(_))?Number(_):_),o.color?(D=o.color.value)!=null?D:o.color.defaultValue:"")}catch(_){P[I]=""}return P},p=o.nodeType==="MiscNode"?{onPointerDown:c,onPointerMove:u,onPointerUp:m,style:{cursor:"move"}}:{},g=b=>b.replace(/(^|,)\s*([^{},]+)/g,"$1 #".concat(n," $2")),d=b=>b.map(w=>{var D,I;const S=o.nodeType==="Station"&&o.core&&o.core===w.id?{id:"stn_core_".concat(n),onPointerDown:c,onPointerMove:u,onPointerUp:m,style:{cursor:"move"}}:{},P=f(w.attrs,o.components.map(_=>_.value),o.components.map(_=>_.type));return e.jsx("g",{transform:"translate(".concat((D=P.x)!=null?D:0,", ").concat((I=P.y)!=null?I:0,")"),children:r.createElement(w.type,{...P,x:0,y:0,...S},w.children?d(w.children):"_rmp_children_text"in P?w.type==="style"?g(P._rmp_children_text):P._rmp_children_text:null)},w.id)}),x=(L=o.transform)!=null?L:Oe,j=r.useMemo(()=>d(o.svgs),[o]);return r.createElement("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),...p},o.randomId?e.jsx("g",{transform:"translate(".concat(x.translateX,", ").concat(x.translateY,") scale(").concat(x.scale,") rotate(").concat(x.rotate,")"),children:j}):e.jsxs("g",{children:[e.jsx("circle",{r:"5.5"}),e.jsx("g",{transform:"translate(-4.7, -5) scale(0.8)",children:e.jsx("polygon",{points:"6,1 7.5,4.25 11,4.65 8.5,7.1 9.2,10.75 6,9 2.8,10.75 3.5,7.1 1,4.65 4.5,4.25",fill:"white"})})]}))},nn={randomId:void 0,label:void 0,transform:Oe,nodeType:"MiscNode",svgs:[],components:[]},on=h=>{var x,j,L,b,w;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),[i,a]=r.useState(!1),[s,c]=r.useState(!1),u=S=>{var D;const P=t.components.find(I=>I.id===S);return P?(D=P.value)!=null?D:P.defaultValue:void 0},m=S=>{S.components.forEach((P,D)=>{var I;S.components[D].value=(I=u(P.id))!=null?I:P.defaultValue}),S.color!==void 0&&(S.color.value=t.color?t.color.value:S.color.defaultValue),l(n,S)},y=t.components.map((S,P)=>{const{label:D,type:I,defaultValue:_,value:W}=S;return I==="number"||I==="text"?{label:o(D),type:"input",value:W!=null?W:_,onChange:N=>{t.components[P].value=N,l(n,{...t,components:t.components})}}:I==="switch"?{label:o(D),type:"switch",isChecked:W!==void 0?!!W:_,onChange:N=>{t.components[P].value=N,l(n,{...t,components:t.components})}}:I==="textarea"?{label:o(D),type:"textarea",value:W!=null?W:_,onChange:N=>{t.components[P].value=N,l(n,{...t,components:t.components})}}:{type:"input",label:"undefined",value:"none"}}),f=S=>{t.color&&(t.color.value=S,l(n,{...t,color:t.color}))},{theme:p,requestThemeChange:g}=Ke({theme:(x=t.color)==null?void 0:x.value,onThemeApplied:f}),d=[{type:"custom",label:o("color"),component:e.jsx(et,{theme:p,onClick:g})}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{direction:"row",mr:"auto",width:"100%",children:[e.jsx(tt,{width:"100%",overflow:"hidden",label:o("panel.details.nodes.master.type"),children:e.jsxs(K,{width:"100%",overflow:"hidden",children:[e.jsx(Ie,{name:(j=t.label)!=null?j:o("panel.details.nodes.master.undefined"),fg:(L=t.labelColorFg)!=null?L:T.white,bg:(b=t.labelColorBg)!=null?b:"#000000",sx:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"},mr:1}),e.jsx(Ie,{name:(w=t.randomId)!=null?w:"UNDEFINED",fg:T.white,bg:t.randomId?"#19B3EA":"#000000",sx:{display:"inline-block"},mr:1})]})}),e.jsx(dt,{}),e.jsx(Ne,{icon:e.jsx(nt,{}),onClick:()=>a(!0),"aria-label":"upload"})]}),e.jsx(Te,{width:"100%",leftIcon:e.jsx(ot,{}),onClick:()=>c(!0),children:o("header.settings.procedures.masterManager.title")}),t.randomId&&e.jsx(z,{fields:y,minW:"full"}),t.randomId&&t.color!==void 0&&e.jsx(z,{fields:d,minW:"full"}),e.jsx(Rt,{isOpen:i,onClose:()=>a(!1),onSubmit:m}),e.jsx($t,{isOpen:s,onClose:()=>c(!1)})]})},an=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:"currentColor",fill:"none"}),e.jsx("g",{transform:"translate(7.25, 7) scale(0.8)",children:e.jsx("polygon",{points:"6,1 7.5,4.25 11,4.65 8.5,7.1 9.2,10.75 6,9 2.8,10.75 3.5,7.1 1,4.65 4.5,4.25",fill:"currentColor"})})]}),sn={component:tn,icon:an,defaultAttrs:nn,attrsComponent:on,metadata:{displayName:"panel.details.nodes.master.displayName",tags:[]}},ln=h=>{const{id:n,isOpen:t,onClose:l,onChange:o}=h,{t:i}=k(),{token:a,activeSubscriptions:{RMP_EXPORT:s}}=He(N=>N.account),c=r.useRef(window.graph),u=Mt(),[m,y]=r.useState(0),[f,p]=r.useState(!1),[g,d]=r.useState([]),[x,j]=r.useState([]),[L,b]=r.useState(void 0),[w,S]=r.useState([]),P=[g,x],D=async(N,R)=>{var pe;const A=R===0?"local":"server",E=(pe=N.target.files)==null?void 0:pe[0];if(je.debug("File selected:",E),E)if(A==="server"){if(E.size>4*1024*1024){b("Image is too big.");return}const Q=await Dt(E);if(!Q)return;const fe=await _t(Q),Ae=new FileReader,ye=new FormData;ye.append("image",new Blob([Q],{type:E.type}),E.name),ye.append("mimetype",E.type),ye.append("hash",fe);try{const be=await(await fetch(Ue,{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:ye})).json();if(!be.code||be.code===201){const Ge="img-s_".concat(be.id);O.save(Ge,Ae.result),j(await qe(a))}else b(be.message)}catch($e){je.error("Error uploading image:",$e)}}else{const Q=new FileReader;Q.onload=()=>{if(typeof Q.result=="string"){const fe="img-l_".concat(rt(10));O.save(fe,Q.result),d(Ae=>[...Ae,{id:fe,thumbnail:Q.result}])}},Q.readAsDataURL(E)}};r.useEffect(()=>{t&&(async R=>{p(!0),b(void 0),await R(),S([]),p(!1)})(m===0?async()=>d(await Wt()):async()=>j(await qe(a)))},[t,m]);const I=async()=>{if(p(!0),w.length>0){const N=w[0].id,R=w[0].hash;N.startsWith("img-l")?o(n,N,"local"):(await Ee(N,R),o(n,N,"server",R))}p(!1),l()},_=async N=>{if(c.current.filterNodes((R,A)=>{var E;return R.startsWith("misc_node")&&A.type==="image"&&((E=A.image)==null?void 0:E.href)===N}).forEach(R=>{const A=c.current.getNodeAttribute(R,C.Image);A.href=void 0,c.current.mergeNodeAttributes(R,{[C.Image]:A})}),N.startsWith("img-l"))O.delete(N),d(R=>R.filter(A=>A.id!==N));else{const R=N.slice(6);try{(await fetch("".concat(Ue,"/data/").concat(R),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}})).ok?(j(E=>E.filter(pe=>pe.id!==N)),O.delete(N)):je.error("Failed to delete image from server")}catch(A){je.error("Error deleting image:",A)}}u(it())},W=async N=>{var A;N.id.startsWith("img-s")&&await O.has(N.id)===!1&&await Ee(N.id,N.hash);const R=await O.get(N.id);if(R){const E=(A=It(R))!=null?A:"jpg";Ut(R,"image_".concat(N.id,".").concat(E))}};return e.jsxs(ht,{isOpen:t,onClose:l,size:"3xl",scrollBehavior:"inside",children:[e.jsx(mt,{}),e.jsxs(ut,{children:[e.jsx(xt,{children:i("panel.details.image.importTitle")}),e.jsx(gt,{}),e.jsx(pt,{children:e.jsxs(ft,{isLazy:!0,isFitted:!0,overflow:"hidden",index:m,onChange:N=>y(N),children:[e.jsxs(yt,{children:[e.jsx(ze,{children:i("panel.details.image.local")}),s?e.jsxs(ze,{children:[i("panel.details.image.server"),e.jsx(We,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})]}):e.jsx(bt,{label:i("header.settings.pro"),hasArrow:!0,children:e.jsxs(ze,{isDisabled:!0,children:[i("panel.details.image.server"),e.jsx(We,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})]})})]}),e.jsx(jt,{overflow:"hidden",h:"100%",children:P.map((N,R)=>e.jsx(wt,{overflowY:"auto",h:"calc(100% - 2rem - 8px)",children:f?e.jsxs(ke,{textAlign:"center",py:10,children:[e.jsx(Ct,{size:"xl"}),e.jsx(Bt,{mt:4,children:i("panel.details.image.loading")})]}):e.jsxs(vt,{mt:"2",children:[e.jsx(Lt,{paddingTop:"0",children:e.jsx(K,{flexWrap:"wrap",children:N.map(A=>e.jsxs(K,{direction:"column",children:[e.jsx(ke,{boxSize:"300px",m:"2",border:"1px solid",borderColor:"gray.200",overflow:"hidden",borderRadius:"md",children:e.jsx(Xe,{id:"image_thumbnail_".concat(A.id),src:A.thumbnail,boxSize:"100%",objectFit:"cover"})},A.id),e.jsxs(K,{direction:"row",width:"100%",children:[e.jsx(Ne,{m:"1","aria-label":i("download"),icon:e.jsx(at,{}),colorScheme:"blue",onClick:()=>W(A)}),e.jsx(Ne,{m:"1",width:"100%","aria-label":i("select"),icon:e.jsx(st,{}),colorScheme:w.find(E=>E.id===A.id)?"blue":"gray",onClick:()=>S([A])}),e.jsx(Ne,{m:"1","aria-label":"Delete",icon:e.jsx(lt,{}),colorScheme:"red",onClick:()=>_(A.id)})]})]},A.id))})}),e.jsx(Nt,{children:e.jsxs(K,{width:"100%",direction:"column",children:[e.jsxs(K,{direction:"row",children:[e.jsx(St,{size:"md",width:"100%",children:i("panel.details.image.add")}),e.jsx(Tt,{variant:"flushed",type:"file",accept:"image/*",onChange:A=>D(A,R)})]}),L&&e.jsxs(Qe,{status:"error",variant:"left-accent",borderRadius:"md",boxShadow:"md",position:"relative",children:[e.jsx(Ve,{}),e.jsxs(ke,{flex:"1",children:[e.jsx(Pt,{children:i("panel.details.image.error")}),e.jsx(At,{children:L})]}),e.jsx(zt,{position:"absolute",right:"8px",top:"8px",onClick:()=>b(void 0)})]})]})})]})},R))})]})}),e.jsxs(kt,{children:[e.jsx(Te,{colorScheme:"blue",variant:"outline",mr:"1",onClick:l,children:i("close")}),e.jsx(Te,{colorScheme:"blue",variant:"solid",mr:"1",onClick:I,isDisabled:w.length===0,children:i("apply")})]})]})]})},rn=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{type:c=H.type,href:u=H.href,scale:m=H.scale,rotate:y=H.rotate,opacity:f=H.opacity}=o!=null?o:H,{refresh:{images:p}}=He(b=>b.runtime),g=r.useCallback(b=>i(n,b),[n,i]),d=r.useCallback(b=>a(n,b),[n,a]),x=r.useCallback(b=>s(n,b),[n,s]),[j,L]=r.useState(void 0);return r.useEffect(()=>{let b=!1;return u?O.get(u).then(w=>{b||L(w)}):L(void 0),()=>{b=!0}},[n,u,p]),e.jsx("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),children:u===void 0||j===void 0?e.jsxs("g",{transform:"translate(-5, -5)",className:"removeMe",onPointerDown:g,onPointerMove:d,onPointerUp:x,style:{cursor:"move"},children:[e.jsx("rect",{x:"0",y:"0",width:"12",height:"12",fill:"transparent"}),e.jsx(ct,{})]}):e.jsxs("g",{children:[e.jsx("g",{transform:"rotate(".concat(y,") scale(").concat(m,")"),children:e.jsx("image",{href:j,opacity:f})}),e.jsxs("g",{transform:"rotate(45)",className:"removeMe",onPointerDown:g,onPointerMove:d,onPointerUp:x,style:{cursor:"move"},children:[e.jsx("line",{x1:"-5",y1:"0",x2:"5",y2:"0",stroke:"black"}),e.jsx("line",{x1:"0",y1:"-5",x2:"0",y2:"5",stroke:"black"}),e.jsx("circle",{r:5,stroke:"black",fill:"white",fillOpacity:"0"})]})]})})},H={type:"local",scale:1,rotate:0,opacity:1},cn=h=>{var p,g,d;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),[i,a]=r.useState(!1),[s,c]=r.useState(void 0);r.useEffect(()=>{let x=!1;return t.href?O.get(t.href).then(j=>{x||c(j)}):c(void 0),()=>{x=!0}},[n,t.href]);const u=[{label:o("panel.details.nodes.image.scale"),type:"input",value:((p=t.scale)!=null?p:H.scale).toString(),validator:x=>!Number.isNaN(x),onChange:x=>{t.scale=Number(x),l(n,t)},minW:"full",hidden:!t.href},{label:o("panel.details.nodes.image.rotate"),type:"slider",value:(g=t.rotate)!=null?g:H.rotate,min:0,max:360,step:1,onChange:x=>{t.rotate=Number(x),l(n,t)},leftIcon:e.jsx(_e,{}),rightIcon:e.jsx(De,{}),minW:"full",hidden:!t.href},{label:o("panel.details.nodes.image.opacity"),type:"slider",value:(d=t.opacity)!=null?d:H.opacity,min:0,max:1,step:.01,onChange:x=>{t.opacity=Number(x),l(n,t)},leftIcon:e.jsx(_e,{}),rightIcon:e.jsx(De,{}),minW:"full",hidden:!t.href},{label:o("panel.details.nodes.image.preview"),type:"custom",component:t.href===void 0||!O.has(t.href)?"Please upload file.":e.jsx(Xe,{src:s}),minW:"full"}],m=(x,j,L,b)=>{l(x,{...t,type:L,href:j,hash:b})},[y,f]=r.useState(!1);return r.useEffect(()=>{t.href&&t.href.startsWith("img-s")?O.has("".concat(t.href,"_thumbnail")).then(x=>{f(x)}):f(!0)},[t.href]),e.jsxs(e.Fragment,{children:[e.jsx(z,{fields:u}),e.jsx(Te,{colorScheme:"blue",variant:"outline",onClick:()=>a(!0),isDisabled:!y,minW:"full",children:o("panel.details.image.importTitle")}),e.jsx(ln,{id:n,isOpen:i,onClose:()=>a(!1),onChange:m})]})},dn=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("path",{d:"M21 15l-5-5L5 21"})]}),hn={component:rn,icon:dn,defaultAttrs:H,attrsComponent:cn,metadata:{displayName:"panel.details.nodes.image.displayName",tags:[]}},mn=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=ae.num,color:u=ae.color}=o!=null?o:ae,[m,y]=c>=10?[22.67,10.75]:[21,10],f=r.useCallback(d=>i(n,d),[n,i]),p=r.useCallback(d=>a(n,d),[n,a]),g=r.useCallback(d=>s(n,d),[n,s]);return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:f,onPointerMove:p,onPointerUp:g,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],width:m,height:"22.67"}),e.jsx("text",{...v(B.en),textAnchor:"middle",x:y,y:"19",fill:u[3],fontSize:"21.33",letterSpacing:"-1.75",children:c}),e.jsx("text",{...v(B.zh),x:m+2,y:"12",fontSize:"14.67",children:"号线"}),e.jsxs("text",{...v(B.en),x:m+4,y:"21.5",fontSize:"8",children:["Line ",c]})]})},ae={num:1,color:[$.Shanghai,"sh1","#E4002B",T.white]},un=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:((a=t.num)!=null?a:ae.num).toString(),validator:s=>!Number.isNaN(s),onChange:s=>{t.num=Number(s),l(n,t)}},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.ShmetroNumLineBadge,defaultTheme:ae.color})}];return e.jsx(z,{fields:i})},xn=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"4",width:"10",height:"16"}),e.jsx("text",{x:"4",y:"18",fill:"white",children:"1"}),e.jsx("text",{x:"14",y:"10",fontSize:"5",children:"号线"}),e.jsx("text",{x:"14",y:"18",fontSize:"4",children:"Line 1"})]}),gn={component:mn,icon:xn,defaultAttrs:ae,attrsComponent:un,metadata:{displayName:"panel.details.nodes.shmetroNumLineBadge.displayName",tags:[]}},pn=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{names:c=ue.names,color:u=ue.color}=o!=null?o:ue,m=r.useRef(null),[y,f]=r.useState({width:12});r.useEffect(()=>f(m.current.getBBox()),[...c,f,m]);const p=r.useCallback(x=>i(n,x),[n,i]),g=r.useCallback(x=>a(n,x),[n,a]),d=r.useCallback(x=>s(n,x),[n,s]);return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:p,onPointerMove:g,onPointerUp:d,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],x:"0",width:y.width+7,height:"21"}),e.jsxs("g",{ref:m,children:[e.jsx("text",{...v(B.zh),textAnchor:"middle",dominantBaseline:"hanging",x:(y.width+7)/2,y:"3",fontSize:"10",fill:u[3],letterSpacing:"-0.25",children:c[0]}),e.jsx("text",{...v(B.en),textAnchor:"middle",dominantBaseline:"hanging",x:(y.width+7)/2,y:"14",fontSize:"5",fill:u[3],letterSpacing:"-0.25",children:c[1]})]})]})},ue={names:["浦江线","Pujiang Line"],color:[$.Shanghai,"pjl","#B5B5B6",T.white]},fn=h=>{const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.nameZh"),value:t.names[0],onChange:a=>{t.names[0]=a,l(n,t)},minW:"full"},{type:"input",label:o("panel.details.nodes.common.nameEn"),value:t.names[1],onChange:a=>{t.names[1]=a,l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.ShmetroTextLineBadge,defaultTheme:ue.color})}];return e.jsx(z,{fields:i})},yn=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"6",width:"20",height:"12"}),e.jsx("text",{x:"5",y:"11",fontSize:"5",fill:"white",children:"浦江线"}),e.jsx("text",{x:"3",y:"16",fontSize:"4",fill:"white",children:"Pujiang Line"})]}),bn={component:pn,icon:yn,defaultAttrs:ue,attrsComponent:fn,metadata:{displayName:"panel.details.nodes.shmetroTextLineBadge.displayName",tags:[]}},jn=h=>{var L,b;const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{names:c=X.names,color:u=X.color,tram:m=X.tram,span:y=X.span}=o!=null?o:X,f=r.useCallback(w=>i(n,w),[n,i]),p=r.useCallback(w=>a(n,w),[n,a]),g=r.useCallback(w=>s(n,w),[n,s]),d=r.useRef(null),[x,j]=r.useState({height:0,width:0});return r.useEffect(()=>{var w,S;return j((S=(w=d.current)==null?void 0:w.getBBox())!=null?S:{height:0,width:0})},[...c,m]),e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l-x.height/2,")scale(").concat(m?.5:1,")"),children:[e.jsx(Et,{ref:d,zhName:(L=c.at(0))!=null?L:"",enName:(b=c.at(1))!=null?b:"",textProps:{digits:{...v(B.en)},zh:{...v(B.zh)},en:{...v(B.en)}},foregroundColour:u[3],backgroundColour:u[2],spanDigits:y}),e.jsx("rect",{id:"misc_node_connectable_".concat(n),x:-x.width/2,width:x.width,height:"24",fill:"transparent",onPointerDown:f,onPointerMove:p,onPointerUp:g,style:{cursor:"move"}})]})},X={names:["1号线","Line 1"],color:[$.Guangzhou,"gz1","#F3D03E",T.black],tram:!1,span:!0},wn=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.nameZh"),value:t.names[0],onChange:s=>{t.names[0]=s,l(n,t)},minW:"full"},{type:"input",label:o("panel.details.nodes.common.nameEn"),value:(a=t.names.at(1))!=null?a:X.names[1],onChange:s=>{t.names[1]=s,l(n,t)},minW:"full"},{type:"switch",label:o("panel.details.nodes.gzmtrLineBadge.tram"),oneLine:!0,isChecked:t.tram,onChange:s=>{t.tram=s,l(n,t)},minW:"full"},{type:"switch",label:o("panel.details.nodes.gzmtrLineBadge.span"),oneLine:!0,isChecked:t.span,onChange:s=>{t.span=s,l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.GzmtrLineBadge,defaultTheme:X.color})}];return e.jsx(z,{fields:i})},Cn=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"5",width:"20",height:"14",rx:"1"}),e.jsx("text",{x:"6",y:"15",textAnchor:"middle",fontSize:"10",fill:"white",children:"1"}),e.jsx("text",{x:"15",y:"12",textAnchor:"middle",fontSize:"6",fill:"white",children:"号线"}),e.jsx("text",{x:"14.5",y:"17",textAnchor:"middle",fontSize:"4",fill:"white",children:"Line 1"})]}),Bn={component:jn,icon:Cn,defaultAttrs:X,attrsComponent:wn,metadata:{displayName:"panel.details.nodes.gzmtrLineBadge.displayName",tags:[]}},we=11.84375,vn=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=se.num,color:u=se.color}=o!=null?o:se,m=r.useCallback(g=>i(n,g),[n,i]),y=r.useCallback(g=>a(n,g),[n,a]),f=r.useCallback(g=>s(n,g),[n,s]),p=u[3]===T.black?"#003670":T.white;return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:m,onPointerMove:y,onPointerUp:f,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],x:"0",width:we+21,height:"16",rx:"2"}),e.jsx("text",{...v(B.en),textAnchor:"middle",x:we/2+2,y:"13.5",fill:p,fontSize:"15",letterSpacing:"-1.5",children:c}),e.jsx("text",{x:we+(c>9?5.5:3),y:"8.5",fontSize:"7",fill:p,...v(B.zh),children:"号线"}),e.jsxs("text",{...v(B.en),x:we+(c>9?6:4.5),y:"13.5",fontSize:"4",fill:p,children:["Line ",c]})]})},se={num:1,color:[$.Beijing,"bj1","#c23a30",T.white]},Ln=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:((a=t.num)!=null?a:se.num).toString(),validator:s=>!Number.isNaN(s),onChange:s=>{t.num=Number(s),l(n,t)}},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.BjsubwayNumLineBadge,defaultTheme:se.color})}];return e.jsx(z,{fields:i})},Nn=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"4",width:"20",height:"16",rx:"2"}),e.jsx("text",{x:"4",y:"17",fill:"white",fontSize:"14",children:"1"}),e.jsx("text",{x:"11",y:"11",fill:"white",fontSize:"5",children:"号线"}),e.jsx("text",{x:"11",y:"17",fill:"white",fontSize:"4",children:"Line 1"})]}),Sn={component:vn,icon:Nn,defaultAttrs:se,attrsComponent:Ln,metadata:{displayName:"panel.details.nodes.bjsubwayNumLineBadge.displayName",tags:[]}},Tn=28.84375,Pn=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{names:c=le.names,color:u=le.color}=o!=null?o:le,m=r.useRef(null),[y,f]=r.useState({width:12});r.useEffect(()=>f(m.current.getBBox()),[...c,f,m]);const p=r.useCallback(L=>i(n,L),[n,i]),g=r.useCallback(L=>a(n,L),[n,a]),d=r.useCallback(L=>s(n,L),[n,s]),x=Math.max(Tn,y.width),j=u[3]===T.black?"#003670":T.white;return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:p,onPointerMove:g,onPointerUp:d,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],x:"0",width:x+4,height:"16",rx:"2"}),e.jsxs("g",{ref:m,children:[e.jsx("text",{...v(B.zh),textAnchor:"middle",x:(x+4)/2,y:"8",fontSize:"7",fill:j,children:c[0]}),e.jsx("text",{...v(B.en),textAnchor:"middle",x:(x+4)/2,y:"13.5",fontSize:"4",fill:j,children:c[1]})]})]})},le={names:["八通线","Batong Line"],color:[$.Beijing,"bj1","#c23a30",T.white]},An=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.nameZh"),value:t.names[0],onChange:s=>{t.names[0]=s,l(n,t)},minW:"full"},{type:"input",label:o("panel.details.nodes.common.nameEn"),value:(a=t.names.at(1))!=null?a:le.names[1],onChange:s=>{t.names[1]=s,l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.BjsubwayTextLineBadge,defaultTheme:le.color}),minW:"full"}];return e.jsx(z,{fields:i})},zn=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"6",width:"20",height:"12",rx:"2"}),e.jsx("text",{x:"3",y:"12",fontSize:"6",fill:"white",children:"八通线"}),e.jsx("text",{x:"3",y:"16",fontSize:"3.2",fill:"white",children:"Batong Line"})]}),kn={component:Pn,icon:zn,defaultAttrs:le,attrsComponent:An,metadata:{displayName:"panel.details.nodes.bjsubwayTextLineBadge.displayName",tags:[]}},Mn=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=J.num,branch:u=J.branch,color:m=J.color}=o!=null?o:J,y=r.useCallback(g=>i(n,g),[n,i]),f=r.useCallback(g=>a(n,g),[n,a]),p=r.useCallback(g=>s(n,g),[n,s]);return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:y,onPointerMove:f,onPointerUp:p,style:{cursor:"move"},children:[e.jsx("rect",{fill:m[2],width:"20",height:"20",rx:"2",ry:"2"}),e.jsx("text",{...v(B.zh),textAnchor:"middle",dominantBaseline:"middle",x:"10",y:"11.4",fill:m[3],fontSize:"15",letterSpacing:"-1",children:c}),u&&e.jsxs(e.Fragment,{children:[e.jsx("text",{...v(B.zh),x:20+2.5,y:"10",fontSize:"10",children:"支线"}),e.jsx("text",{...v(B.en),x:20+2.5,y:"18",fontSize:"5",fill:"gray",children:"Branch line"})]})]})},J={num:1,branch:!1,color:[$.Suzhou,"sz1","#78BA25",T.white]},Rn=h=>{var a,s;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:((a=t.num)!=null?a:J.num).toString(),validator:c=>!Number.isNaN(c),onChange:c=>{t.num=Number(c),l(n,t)}},{type:"switch",label:o("panel.details.nodes.suzhouRTNumLineBadge.branch"),isChecked:(s=t==null?void 0:t.branch)!=null?s:J.branch,onChange:c=>{t.branch=c,l(n,t)}},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.SuzhouRTNumLineBadge,defaultTheme:J.color})}];return e.jsx(z,{fields:i})},$n=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"4",y:"4",width:"16",height:"16",rx:"3",ry:"3"}),e.jsx("text",{x:"12",y:"13.4",textAnchor:"middle",dominantBaseline:"middle",fill:"white",fontSize:"14",children:"1"})]}),In={component:Mn,icon:$n,defaultAttrs:J,attrsComponent:Rn,metadata:{displayName:"panel.details.nodes.suzhouRTNumLineBadge.displayName",tags:[]}},Un=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=ie.num,color:u=ie.color}=o!=null?o:ie,m=r.useCallback(g=>i(n,g),[n,i]),y=r.useCallback(g=>a(n,g),[n,a]),f=r.useCallback(g=>s(n,g),[n,s]),p=u[3];return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:m,onPointerMove:y,onPointerUp:f,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],x:"0",width:"25",height:"15"}),e.jsxs("text",{...v(B.berlin),textAnchor:"middle",x:"12.5",y:"12.5",fill:p,fontSize:"14",letterSpacing:"1",children:["U",c]})]})},ie={num:1,color:[$.Berlin,"bu1","#62AD2D",T.white]},Dn=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:((a=t.num)!=null?a:ie.num).toString(),validator:s=>!Number.isNaN(s),onChange:s=>{t.num=Number(s),l(n,t)}},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.BerlinUBahnLineBadge,defaultTheme:ie.color})}];return e.jsx(z,{fields:i})},_n=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"4",width:"20",height:"16"}),e.jsx("text",{x:"4",y:"17",fill:"white",fontSize:"14",children:"U1"})]}),Wn={component:Un,icon:_n,defaultAttrs:ie,attrsComponent:Dn,metadata:{displayName:"panel.details.nodes.berlinUBahnLineBadge.displayName",tags:[]}},En=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=re.num,color:u=re.color}=o!=null?o:re,[m,y]=c>=10?[6,19.75]:[10,20],f=r.useCallback(x=>i(n,x),[n,i]),p=r.useCallback(x=>a(n,x),[n,a]),g=r.useCallback(x=>s(n,x),[n,s]),d=u[3];return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:f,onPointerMove:p,onPointerUp:g,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],x:"0",width:"30",height:"15",rx:"8"}),e.jsx("text",{...v(B.berlin),textAnchor:"middle",x:m,y:"12.5",fill:d,fontSize:"14",letterSpacing:"0",children:"S"}),e.jsx("text",{...v(B.berlin),textAnchor:"middle",x:y,y:"12.5",fill:d,fontSize:"14",letterSpacing:"-0.2",children:c})]})},re={num:1,color:[$.Berlin,"bs1","#DD6CA6",T.white]},qn=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:((a=t.num)!=null?a:re.num).toString(),validator:s=>!Number.isNaN(s),onChange:s=>{t.num=Number(s),l(n,t)}},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.BerlinSBahnLineBadge,defaultTheme:re.color})}];return e.jsx(z,{fields:i})},Fn=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"4",width:"20",height:"16",rx:"8"}),e.jsx("text",{x:"4.5",y:"16.5",fill:"white",fontSize:"14",children:"S1"})]}),On={component:En,icon:Fn,defaultAttrs:re,attrsComponent:qn,metadata:{displayName:"panel.details.nodes.berlinSBahnLineBadge.displayName",tags:[]}},Hn=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=ce.num,color:u=ce.color}=o!=null?o:ce,m=r.useCallback(x=>i(n,x),[n,i]),y=r.useCallback(x=>a(n,x),[n,a]),f=r.useCallback(x=>s(n,x),[n,s]),p=u[3],g=Number.isInteger(c)?16:15,d=Number.isInteger(c)&&Number(c)>=10?-1.2:0;return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:m,onPointerMove:y,onPointerUp:f,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],x:"0",width:"20",height:"20",rx:"10",ry:"10"}),e.jsx("text",{...v(B.zh),textAnchor:"middle",x:"10",y:"10",fill:p,fontSize:g,letterSpacing:d,dominantBaseline:"central",children:c})]})},ce={num:1,color:[$.Chongqing,"cq1","#e4002b",T.white]},Qn=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:((a=t.num)!=null?a:ce.num).toString(),onChange:s=>{t.num=s,l(n,t)}},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.ChongqingRTNumLineBadge,defaultTheme:ce.color})}];return e.jsx(z,{fields:i})},Vn=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"2",rx:"10",ry:"10",width:"20",height:"20"}),e.jsx("text",{x:"8",y:"18",fill:"white",fontSize:"18",children:"1"})]}),Xn={component:Hn,icon:Vn,defaultAttrs:ce,attrsComponent:Qn,metadata:{displayName:"panel.details.nodes.chongqingRTNumLineBadge.displayName",tags:[]}},Gn=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{names:c=de.names,color:u=de.color}=o!=null?o:de,m=r.useRef(null),y=r.useCallback(d=>i(n,d),[n,i]),f=r.useCallback(d=>a(n,d),[n,a]),p=r.useCallback(d=>s(n,d),[n,s]),g=u[3];return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:y,onPointerMove:f,onPointerUp:p,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],x:"0",width:"20",height:"20",rx:"10",ry:"10"}),e.jsx("text",{...v(B.zh),textAnchor:"middle",x:"10",y:"10.5",fill:g,fontSize:"6",letterSpacing:"0",children:c[0]}),e.jsx(me,{ref:m,text:c[1].split("\n"),...v(B.en),textAnchor:"middle",x:"10",y:"9.25",fill:g,fontSize:"2.5",letterSpacing:"0",lineHeight:2.25,grow:"down"})]})},de={names:["空港线","Konggang Line"],color:[$.Chongqing,"cq3","#003da5",T.white]},Jn=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.nameZh"),value:t.names[0],onChange:s=>{t.names[0]=s,l(n,t)},minW:"full"},{type:"input",label:o("panel.details.nodes.common.nameEn"),value:(a=t.names.at(1))!=null?a:de.names[1],onChange:s=>{t.names[1]=s,l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.ChongqingRTTextLineBadge,defaultTheme:de.color})}];return e.jsx(z,{fields:i})},Zn=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"2",rx:"10",ry:"10",width:"20",height:"20"}),e.jsx("text",{x:"4.5",y:"12.5",fill:"white",fontSize:"5",children:"空港线"}),e.jsx("text",{x:"4.5",y:"15",fill:"white",fontSize:"2",children:"Konggang Line"})]}),Yn={component:Gn,icon:Zn,defaultAttrs:de,attrsComponent:Jn,metadata:{displayName:"panel.details.nodes.chongqingRTTextLineBadge.displayName",tags:[]}},Kn=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=he.num,color:u=he.color}=o!=null?o:he,m=r.useCallback(j=>i(n,j),[n,i]),y=r.useCallback(j=>a(n,j),[n,a]),f=r.useCallback(j=>s(n,j),[n,s]),p=u[3],g=Number.isInteger(c)?Number(c)>=10?15:16:15,d=Number.isInteger(c)&&Number(c)>=10?-1:0,x=Number.isInteger(c)&&Number(c)>=10?9.5:10.5;return e.jsx("g",{transform:"translate(".concat(t,", ").concat(l,")"),children:e.jsxs("g",{transform:"translate(-10.5, -10.5)",children:[e.jsx("rect",{fill:u[2],x:"0",width:"21",height:"21",rx:"3",ry:"3"}),e.jsx("rect",{strokeWidth:"1.5",stroke:"white",fill:"none",x:"1.5",y:"1.5",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("text",{...v(B.zh),textAnchor:"middle",x,y:"10.5",fill:p,fontSize:g,letterSpacing:d,dominantBaseline:"central",children:c}),e.jsx("rect",{id:"misc_node_connectable_".concat(n),onPointerDown:m,onPointerMove:y,onPointerUp:f,style:{cursor:"move",zIndex:1e3},x:0,y:0,width:21,height:21,fill:"white",opacity:0,stroke:"none"})]})})},he={num:1,color:[$.Chongqing,"cq1","#e4002b",T.white]},eo=h=>{const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:(t!=null?t:he).num,validator:a=>!Number.isNaN(a),onChange:a=>{Number.isNaN(Number(a))?t.num=a:t.num=Number(a),l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.ChongqingRTNumLineBadge2021,defaultTheme:he.color}),minW:"full"}];return e.jsx(z,{fields:i})},to=e.jsxs("svg",{viewBox:"0 0 21 21",height:40,width:40,focusable:!1,style:{padding:3},children:[e.jsx("rect",{fill:"currentColor",x:"0",width:"21",height:"21",rx:"3",ry:"3"}),e.jsx("rect",{strokeWidth:"1.5",stroke:"white",fill:"none",x:"1.5",y:"1.5",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("text",{textAnchor:"left",x:"7.5",y:"9.5",fill:"white",fontSize:"15",dominantBaseline:"central",children:"1"})]}),no={component:Kn,icon:to,defaultAttrs:he,attrsComponent:eo,metadata:{displayName:"panel.details.nodes.chongqingRTNumLineBadge2021.displayName",tags:[]}},oo=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{names:c=Z.names,color:u=Z.color,isRapid:m=Z.isRapid}=o!=null?o:Z,y=r.useRef(null),f=r.useCallback(L=>i(n,L),[n,i]),p=r.useCallback(L=>a(n,L),[n,a]),g=r.useCallback(L=>s(n,L),[n,s]),d=u[3],x=m?42:21,j=21;return e.jsx("g",{transform:"translate(".concat(t,", ").concat(l,")"),children:e.jsxs("g",{transform:"translate(".concat(-x/2,", ").concat(-j/2,")"),children:[e.jsx("rect",{fill:u[2],x:"0",width:x,height:j,rx:"3",ry:"3"}),e.jsx("rect",{strokeWidth:"1.5",stroke:"white",fill:"none",x:"1.5",y:"1.5",width:x-3,height:j-3,rx:"2",ry:"2"}),e.jsx("text",{...v(B.zh),textAnchor:"middle",x:x/2,y:j/2+.5,fill:d,fontSize:m?8:5,letterSpacing:"0",children:c[0]}),e.jsx(me,{ref:y,text:c[1].split("\n"),...v(B.en),textAnchor:"middle",x:x/2,y:j/2-+!m*.75,fill:d,fontSize:m?4:2.2,letterSpacing:"0",lineHeight:2.25,grow:"down"}),e.jsx("rect",{id:"misc_node_connectable_".concat(n),onPointerDown:f,onPointerMove:p,onPointerUp:g,style:{cursor:"move",zIndex:1e3},x:0,y:0,width:x,height:j,fill:"white",opacity:0,stroke:"none"})]})})},Z={names:["空港线","Konggang Line"],color:[$.Chongqing,"cq3","#003da5",T.white],isRapid:!1},ao=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.nameZh"),value:t.names[0],onChange:s=>{t.names[0]=s.toString(),l(n,t)},minW:"full"},{type:"textarea",label:o("panel.details.nodes.common.nameEn"),value:(a=t.names.at(1))!=null?a:Z.names[1],onChange:s=>{t.names[1]=s.toString(),l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.ChongqingRTTextLineBadge2021,defaultTheme:Z.color}),minW:"full"},{type:"switch",label:o("panel.details.nodes.chongqingRTTextLineBadge2021.isRapid"),isChecked:(t!=null?t:Z).isRapid,onChange:s=>{t.isRapid=s,l(n,t)},oneLine:!0,minW:"full"}];return e.jsx(z,{fields:i})},so=e.jsxs("svg",{viewBox:"0 0 21 21",height:40,width:40,focusable:!1,style:{padding:3},children:[e.jsx("rect",{fill:"currentColor",x:"0",width:"21",height:"21",rx:"3",ry:"3"}),e.jsx("rect",{strokeWidth:"1.5",stroke:"white",fill:"none",x:"1.5",y:"1.5",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("text",{...v(B.zh),textAnchor:"middle",x:"10.5",y:"11",fill:"white",fontSize:"5",letterSpacing:"0",children:"空港线"}),e.jsx("text",{...v(B.en),textAnchor:"middle",x:"10.5",y:"13.75",fill:"white",fontSize:"2",letterSpacing:"0",children:"Konggang Line"})]}),lo={component:oo,icon:so,defaultAttrs:Z,attrsComponent:ao,metadata:{displayName:"panel.details.nodes.chongqingRTTextLineBadge2021.displayName",tags:[]}},Ce=11.84375,io=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=ne.num,color:u=ne.color,isBranch:m=ne.isBranch}=o!=null?o:ne,y=r.useCallback(b=>i(n,b),[n,i]),f=r.useCallback(b=>a(n,b),[n,a]),p=r.useCallback(b=>s(n,b),[n,s]),g=u[3],d=m?10:Ce+(c>9?6.5:3),x=m?-1:0,j=m?11:Ce+(c>9?7:3.5),L=m?6:Ce/2+4;return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:y,onPointerMove:f,onPointerUp:p,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],x:"0",width:Ce+21,height:"16",rx:"2"}),e.jsx("text",{...v(B.en),textAnchor:"middle",x:L,y:"13.5",fill:g,fontSize:"15",letterSpacing:"-1",children:c}),e.jsxs("text",{...v(B.zh),x:d,y:"9.5",fontSize:"6",fill:g,letterSpacing:x,children:["号线",m?"支线":""]}),e.jsxs("text",{...v(B.en),x:j,y:"13.5",fontSize:"3",fill:g,children:[m?"Branch":""," Line ",c]})]})},ne={num:1,color:[$.Shenzhen,"sz1","#00b140",T.white],isBranch:!1},ro=h=>{const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:String(t.num),validator:a=>!Number.isNaN(a),onChange:a=>{t.num=Number(a),l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.ShenzhenMetroNumLineBadge,defaultTheme:ne.color}),minW:"full"},{type:"switch",label:o("panel.details.nodes.shenzhenMetroNumLineBadge.branch"),oneLine:!0,isChecked:t.isBranch,onChange:a=>{t.isBranch=a,l(n,t)},minW:"full"}];return e.jsx(z,{fields:i})},co=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"4",width:"20",height:"16",rx:"2"}),e.jsx("text",{x:"4",y:"17",fill:"white",fontSize:"14",children:"1"}),e.jsx("text",{x:"11",y:"14",fill:"white",fontSize:"5",children:"号线"}),e.jsx("text",{x:"12",y:"17",fill:"white",fontSize:"3",children:"Line 1"})]}),ho={component:io,icon:co,defaultAttrs:ne,attrsComponent:ro,metadata:{displayName:"panel.details.nodes.shenzhenMetroNumLineBadge.displayName",tags:[]}},mo=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=xe.num,color:u=xe.color}=o!=null?o:xe,m=r.useCallback(d=>i(n,d),[n,i]),y=r.useCallback(d=>a(n,d),[n,a]),f=r.useCallback(d=>s(n,d),[n,s]),p=u[3],g=u[2];return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:m,onPointerMove:y,onPointerUp:f,style:{cursor:"move"},children:[e.jsx("circle",{r:"8",fill:g}),e.jsx("text",{...v(B.mrt),textAnchor:"middle",x:"0",y:"0",width:"12",height:"12",fill:p,fontSize:"12",dominantBaseline:"central",letterSpacing:"-0.2",children:c})]})},xe={num:1,color:[$.Singapore,"ewl","#009739",T.white]},uo=h=>{const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:String(t.num),validator:a=>!Number.isNaN(a),onChange:a=>{t.num=Number(a),l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.MRTDestinationNumbers,defaultTheme:xe.color}),minW:"full"}];return e.jsx(z,{fields:i})},xo=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"2",rx:"10",ry:"10",width:"20",height:"20"}),e.jsx("text",{x:"9",y:"17",fill:"white",fontSize:"14",children:"1"})]}),go={component:mo,icon:xo,defaultAttrs:xe,attrsComponent:uo,metadata:{displayName:"panel.details.nodes.mrtDestinationNumbers.displayName",tags:[]}},po=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{lineCode:c=V.lineCode,color:u=V.color,lines:m=V.lines,name:y=V.name,isTram:f=V.isTram}=o!=null?o:V,p=r.useCallback(w=>i(n,w),[n,i]),g=r.useCallback(w=>a(n,w),[n,a]),d=r.useCallback(w=>s(n,w),[n,s]),x=22.85,j=12.935,L=u[3],b=u[2];return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:p,onPointerMove:g,onPointerUp:d,style:{cursor:"move"},children:[e.jsx("rect",{transform:"scale(1.8)",x:-x/2,y:-j/2,rx:"3",ry:"6",width:x,height:j,fill:b,stroke:"white",strokeWidth:"1"}),e.jsx("text",{...v(B.mrt),textAnchor:"middle",fill:L,fontSize:"15",dominantBaseline:"central",letterSpacing:"-0.2",children:c}),e.jsx("text",{...v(B.mrt),textAnchor:"left",x:"28",y:f?3.5:-3,fill:"black",fontSize:"10",letterSpacing:"-0.2",children:y}),!f&&m.split(",").map((w,S)=>e.jsx("g",{transform:"translate(".concat(34+14*S,", ").concat(4.5,")"),children:w.trim()!=="airport"?e.jsxs(e.Fragment,{children:[e.jsx("circle",{r:"6",fill:b}),e.jsx("text",{...v(B.mrt),textAnchor:"middle",fill:L,fontSize:"9",dominantBaseline:"central",letterSpacing:"-0.2",children:w})]}):e.jsxs("g",{transform:"translate(-6, -6) scale(4.5)",children:[e.jsx("path",{d:"M2.467 0H.226A.226.226 0 0 0 0 .226v2.241a.225.225 0 0 0 .226.225h2.241a.225.225 0 0 0 .225-.225V.226A.226.226 0 0 0 2.467 0",style:{fill:"#2d2a26"}}),e.jsx("path",{d:"M1.5.746v.3l.73.642a.08.08 0 0 1 .022.05v.12c0 .017-.012.025-.027.018L1.5 1.529l-.06.541.2.113a.03.03 0 0 1 .013.023V2.3a.01.01 0 0 1-.014.011l-.293-.091-.286.087a.01.01 0 0 1-.014-.007v-.09a.03.03 0 0 1 .013-.023l.2-.113-.059-.545-.724.348a.018.018 0 0 1-.028-.018v-.12a.07.07 0 0 1 .023-.05l.73-.642v-.3c0-.482.3-.482.3 0",style:{fill:"#fff",fillRule:"evenodd"}})]})},S))]})},V={lineCode:"EWL",name:"East-West Line",lines:"1, 2, 3, airport",isTram:!1,color:[$.Singapore,"ewl","#009739",T.white]},fo=h=>{const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.nameEn"),value:t.name,onChange:a=>{t.name=a,l(n,t)},minW:"full"},{type:"input",label:o("panel.details.stations.common.lineCode"),value:t.lineCode,onChange:a=>{t.lineCode=a,l(n,t)},minW:"full"},{type:"switch",label:o("panel.details.nodes.mrtLineBadge.isTram"),isChecked:t.isTram,onChange:a=>{t.isTram=a,l(n,t)},minW:"full",oneLine:!0},...t.isTram?[]:[{type:"input",label:o("panel.details.nodes.common.num"),value:t.lines,onChange:a=>{t.lines=a,l(n,t)},minW:"full"}],{type:"custom",label:o("color"),component:e.jsx(U,{type:C.MRTLineBadge,defaultTheme:V.color}),minW:"full"}];return e.jsx(z,{fields:i})},yo=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"2",rx:"10",ry:"10",width:"20",height:"20"}),e.jsx("text",{x:"9",y:"17",fill:"white",fontSize:"14",children:"1"})]}),bo={component:po,icon:yo,defaultAttrs:V,attrsComponent:fo,metadata:{displayName:"panel.details.nodes.mrtLineBadge.displayName",tags:[]}},Be=4,Me=7,ve=10,Fe=5,jo=5,q=jo*Math.SQRT1_2,Re=.25,Le=(q*Math.SQRT2-Re)/2*Math.SQRT2,wo=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{names:c=G.names,num:u=G.num,color:m=G.color,crosshatchPatternFill:y=G.crosshatchPatternFill}=o!=null?o:G,f=r.useRef(null),[p,g]=r.useState({height:10,width:12});r.useEffect(()=>g(f.current.getBBox()),[...c,g,f]);const d=r.useCallback(L=>i(n,L),[n,i]),x=r.useCallback(L=>a(n,L),[n,a]),j=r.useCallback(L=>s(n,L),[n,s]);return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:d,onPointerMove:x,onPointerUp:j,style:{cursor:"move"},children:[e.jsxs("defs",{children:[e.jsxs("clipPath",{id:"jr_east_fill_pattern_clip_path",patternUnits:"userSpaceOnUse",children:[e.jsx("polygon",{points:"0,0 0,".concat(Le," ").concat(Le,",0")}),e.jsx("polygon",{points:"".concat(q,",").concat(q," ").concat(q-Le,",").concat(q," ").concat(q,",").concat(q-Le)})]}),e.jsxs("pattern",{id:"jr_east_".concat(n,"_fill_pattern_").concat(m[2]),width:q,height:q,patternUnits:"userSpaceOnUse",children:[e.jsx("rect",{width:q,height:q,fill:m[2]}),e.jsx("line",{x1:"0",y1:"0",x2:q,y2:q,stroke:"white",strokeWidth:Re,strokeOpacity:"33%",clipPath:"url(#jr_east_fill_pattern_clip_path)"}),e.jsx("line",{x1:q,y1:"0",x2:"0",y2:q,stroke:"white",strokeWidth:Re,strokeOpacity:"33%"})]})]}),e.jsx("rect",{fill:y?"url(#jr_east_".concat(n,"_fill_pattern_").concat(m[2],")"):m[2],x:"0",y:"-1",width:p.width+Be+10,height:p.height+1,rx:"1",stroke:"black",strokeWidth:"0.25"}),e.jsx("circle",{r:Be,cx:Me,cy:ve/2+1,stroke:"black",strokeWidth:"0.25",fill:m[3]}),e.jsx("text",{x:Me,y:ve/2+1.75,textAnchor:"middle",dominantBaseline:"middle",fill:m[3]==="#000"?"white":m[2],fontSize:u>9?7:8,...v(B.jreast_en),children:u}),e.jsx(me,{ref:f,text:c[0].split("\n"),x:Me+Be+1,y:"-1",fill:m[3],fontSize:ve,lineHeight:ve,grow:"down",...v(B.jreast_ja)}),e.jsx(me,{text:c[1].split("\n"),textAnchor:"middle",dominantBaseline:"hanging",x:(p.width+Be+10)/2,y:p.height+1,fontSize:Fe,lineHeight:Fe,baseOffset:0,grow:"down",...v(B.jreast_en)})]})},G={names:["山手線","Yamanote Line"],color:[$.Tokyo,"jy","#9ACD32",T.black],num:9,crosshatchPatternFill:!1},Co=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:String(t.num),validator:s=>!Number.isNaN(s),onChange:s=>{t.num=Number(s),l(n,t)},minW:"full"},{type:"textarea",label:o("panel.details.nodes.common.nameJa"),value:t.names[0],onChange:s=>{t.names[0]=s,l(n,t)},minW:"full"},{type:"textarea",label:o("panel.details.nodes.common.nameEn"),value:(a=t.names.at(1))!=null?a:G.names[1],onChange:s=>{t.names[1]=s,l(n,t)},minW:"full"},{type:"switch",label:o("panel.details.nodes.jrEastLineBadge.crosshatchPatternFill"),oneLine:!0,isChecked:t.crosshatchPatternFill,onChange:s=>{t.crosshatchPatternFill=s,l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.JREastLineBadge,defaultTheme:G.color})}];return e.jsx(z,{fields:i})},Bo=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"1",y:"6",width:"22",height:"7"}),e.jsx("circle",{cx:"3.5",cy:"9.25",r:"2",fill:"white"}),e.jsx("text",{x:"3",y:"10.5",fontSize:"3",children:"9"}),e.jsx("text",{x:"6",y:"11.25",fontSize:"5",fill:"white",children:"山手線"}),e.jsx("text",{x:"1.5",y:"16",fontSize:"3",children:"Yamanote Line"})]}),vo={component:wo,icon:Bo,defaultAttrs:G,attrsComponent:Co,metadata:{displayName:"panel.details.nodes.jrEastLineBadge.displayName",tags:[]}},Lo=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{num:c=ee.num,numEn:u=ee.numEn,color:m=ee.color,showText:y=ee.showText}=o!=null?o:ee,f=r.useCallback(w=>i(n,w),[n,i]),p=r.useCallback(w=>a(n,w),[n,a]),g=r.useCallback(w=>s(n,w),[n,s]),d=m[3],[x,j,L,b]=Number(c)>=10?[-2.4,0,10.25,20]:[0,4,10,22];return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:f,onPointerMove:p,onPointerUp:g,style:{cursor:"move"},children:[e.jsx("rect",{fill:m[2],x:"0",width:"20",height:"20",rx:"2",ry:"2"}),e.jsx("text",{...v(B.en),textAnchor:"left",x:j,y:L,fill:d,fontSize:b,fontWeight:"bold",letterSpacing:x,dominantBaseline:"central",children:c}),y&&e.jsxs(e.Fragment,{children:[e.jsx("text",{...v(B.zh),x:"22",y:"10.5",fontSize:"13",children:"号线"}),e.jsxs("text",{...v(B.en),x:"22.5",y:"19.5",fontSize:"8",children:["Line ",u]})]})]})},ee={num:1,numEn:"1",showText:!0,color:[$.Qingdao,"qd1","#f7b000",T.white]},No=h=>{const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.num"),value:t.num.toString(),onChange:a=>{t.num=Number(a),t.numEn=a,l(n,t)}},{type:"input",label:o("panel.details.nodes.qingdaoMetroNumLineBadge.numEn"),value:t.numEn.toString(),onChange:a=>{t.numEn=a,l(n,t)}},{type:"switch",label:o("panel.details.nodes.qingdaoMetroNumLineBadge.showText"),isChecked:t.showText,oneLine:!0,onChange:a=>{t.showText=a,l(n,t)}},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.QingdaoMetroNumLineBadge,defaultTheme:ee.color})}];return e.jsx(z,{fields:i,minW:"full"})},So=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"6",rx:"1",ry:"1",width:"10",height:"10"}),e.jsx("text",{x:"4",y:"15",fill:"white",fontSize:"12",children:"1"}),e.jsx("text",{x:"12",y:"11.5",fill:"black",fontSize:"6",children:"号线"}),e.jsx("text",{x:"12",y:"15.5",fill:"black",fontSize:"4",children:"Line1"})]}),To={component:Lo,icon:So,defaultAttrs:ee,attrsComponent:No,metadata:{displayName:"panel.details.nodes.qingdaoMetroNumLineBadge.displayName",tags:[]}},Po=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{names:c=ge.names,color:u=ge.color}=o!=null?o:ge,m=r.useRef(null),[y,f]=r.useState({width:12});r.useEffect(()=>f(m.current.getBBox()),[...c,f,m]);const p=r.useCallback(x=>i(n,x),[n,i]),g=r.useCallback(x=>a(n,x),[n,a]),d=r.useCallback(x=>s(n,x),[n,s]);return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")"),onPointerDown:p,onPointerMove:g,onPointerUp:d,style:{cursor:"move"},children:[e.jsx("rect",{rx:"2",ry:"2",fill:u[2],x:"0",width:y.width+7,height:"21"}),e.jsxs("g",{ref:m,children:[e.jsx("text",{...v(B.zh),textAnchor:"middle",dominantBaseline:"hanging",x:(y.width+7)/2,y:"3",fontSize:"8.63",fill:u[3],children:c[0]}),e.jsx("text",{...v(B.en),textAnchor:"middle",dominantBaseline:"hanging",x:(y.width+7)/2,y:"14",fontSize:"3.54",fill:u[3],children:c[1]})]})]})},ge={names:["广清城际","Guangzhou-Qingyuan Intercity"],color:[$.Guangzhou,"ir","#2559a8",T.white]},Ao=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.common.nameZh"),value:t.names[0],onChange:s=>{t.names[0]=s,l(n,t)},minW:"full"},{type:"input",label:o("panel.details.nodes.common.nameEn"),value:(a=t.names.at(1))!=null?a:ge.names[1],onChange:s=>{t.names[1]=s,l(n,t)},minW:"full"}];return e.jsx(z,{fields:i})},zo=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"6",width:"20",height:"12"}),e.jsx("text",{x:"4.5",y:"11",fontSize:"4",fill:"white",children:"广清城际"}),e.jsx("text",{x:"3",y:"16",fontSize:"2",fill:"white",children:"Guangzhou-Qingyuan Intercity"})]}),ko={component:Po,icon:zo,defaultAttrs:ge,attrsComponent:Ao,metadata:{displayName:"panel.details.nodes.guangdongIntercityRailwayLineBadge.displayName",tags:[]}},F=5,Se="M0,0 L".concat(-F*2,",").concat(-F*2," L").concat(Math.SQRT2*F-2*F,",").concat(2*-F," L").concat(Math.SQRT2*F,",0 L").concat(Math.SQRT2*F-2*F,",").concat(2*F," L").concat(2*-F,",").concat(2*F," Z"),Mo=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{color:c=oe.color,rotate:u=oe.rotate,type:m=oe.type}=o!=null?o:oe,y=r.useCallback(g=>i(n,g),[n,i]),f=r.useCallback(g=>a(n,g),[n,a]),p=r.useCallback(g=>s(n,g),[n,s]);return e.jsx("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")rotate(").concat(u,")"),onPointerDown:y,onPointerMove:f,onPointerUp:p,style:{cursor:"move"},children:m==="continuation"?e.jsx("path",{id:"virtual_circle_".concat(n),fill:c[2],d:Se}):m==="sandwich"?e.jsx("path",{transform:"scale(0.5)",id:"virtual_circle_".concat(n),stroke:"white",strokeWidth:"1",fill:c[2],d:Se}):e.jsx("path",{transform:"scale(0.25)",id:"virtual_circle_".concat(n),fill:"white",d:Se})})},oe={color:[$.London,"thameslink","#d28db0",T.white],rotate:0,type:"continuation"},Ro=h=>{const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"select",label:o("panel.details.stations.common.rotate"),value:t.rotate,options:{0:"0",45:"45",90:"90",135:"135",180:"180",225:"225",270:"270",315:"315"},onChange:a=>{t.rotate=Number(a),l(n,t)},minW:"full"},{type:"select",label:o("panel.details.nodes.londonArrow.type"),value:t.type,options:{continuation:o("panel.details.nodes.londonArrow.continuation"),sandwich:o("panel.details.nodes.londonArrow.sandwich"),tube:o("panel.details.nodes.londonArrow.tube")},onChange:a=>{t.type=a,l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.LondonArrow,defaultTheme:oe.color}),minW:"full"}];return e.jsx(z,{fields:i})},$o=e.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:e.jsx("path",{transform:"translate(14,12)scale(0.75)",fill:"currentColor",d:Se})}),Io={component:Mo,icon:$o,defaultAttrs:oe,attrsComponent:Ro,metadata:{displayName:"panel.details.nodes.londonArrow.displayName",tags:[]}},Uo=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{content:c=Y.content,color:u=Y.color,badgeType:m=Y.badgeType}=o!=null?o:Y,y=r.useCallback(j=>i(n,j),[n,i]),f=r.useCallback(j=>a(n,j),[n,a]),p=r.useCallback(j=>s(n,j),[n,s]),g=u[3],d=16,x=m=="suburban"?(c.toString().length-2)*d/2:0;return e.jsx("g",{transform:"translate(".concat(t,", ").concat(l,")"),children:e.jsxs("g",{transform:"translate(".concat(-12.5,", ").concat(-12.5,")"),children:[m=="normal"?e.jsxs(e.Fragment,{children:[e.jsx("rect",{fill:u[2],x:"0",width:"25",height:"25",rx:"12.5",ry:"12.5"}),e.jsx("text",{...v(B.zh),textAnchor:"middle",x:"12.5",y:"12.5",fill:g,fontSize:d,dominantBaseline:"central",children:c})]}):m=="suburban"?e.jsxs(e.Fragment,{children:[e.jsx("rect",{fill:u[2],x:-x/2,y:"0",width:20+x,height:"25",rx:"0",ry:"0"}),e.jsx("rect",{fill:u[2],x:19+x/2,y:"0",width:"6",height:"5",rx:"0",ry:"0"}),e.jsx("rect",{fill:u[2],x:19+x/2,y:"10",width:"6",height:"5",rx:"0",ry:"0"}),e.jsx("rect",{fill:u[2],x:19+x/2,y:"20",width:"6",height:"5",rx:"0",ry:"0"}),e.jsx("text",{...v(B.zh),textAnchor:"left",x:-x/2,y:"12.5",fill:g,fontSize:d,dominantBaseline:"central",children:c})]}):e.jsxs(e.Fragment,{children:[e.jsx("rect",{fill:u[2],x:"-1.25",y:"0",width:"27.5",height:"7.5",rx:"0",ry:"0"}),e.jsx("rect",{fill:u[2],x:"7.5",y:"0",width:"10",height:"25",rx:"0",ry:"0"}),e.jsx(me,{text:c.toString().split(""),lineHeight:10.5,x:12.5,y:6.5,fill:"white",fontSize:10,textAnchor:"middle",grow:"down",dominantBaseline:"middle"})]}),e.jsx("rect",{id:"misc_node_connectable_".concat(n),onPointerDown:y,onPointerMove:f,onPointerUp:p,style:{cursor:"move",zIndex:1e3},x:0-x/2,y:0,width:25+x,height:25,fill:"white",opacity:0,stroke:"none"})]})})},Y={content:1,color:[$.Chengdu,"cd1","#222a8c",T.white],badgeType:"normal"},Do=h=>{const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.nodes.text.content"),value:(t!=null?t:Y).content,validator:a=>!Number.isNaN(a),onChange:a=>{Number.isNaN(Number(a))?t.content=a:t.content=Number(a),l(n,t)},minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.ChengduRTLineBadge,defaultTheme:Y.color}),minW:"full"},{type:"select",label:o("panel.details.nodes.chengduRTLineBadge.badgeType.displayName"),value:(t!=null?t:Y).badgeType,options:{normal:o("panel.details.nodes.chengduRTLineBadge.badgeType.normal"),suburban:o("panel.details.nodes.chengduRTLineBadge.badgeType.suburban"),tram:o("panel.details.nodes.chengduRTLineBadge.badgeType.tram")},onChange:a=>{t.badgeType=a,l(n,t)},minW:"full"}];return e.jsx(z,{fields:i})},_o=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"2",y:"2",rx:"10",ry:"10",width:"20",height:"20"}),e.jsx("text",{x:"9",y:"17",fill:"white",fontSize:"14",children:"1"})]}),Wo={component:Uo,icon:_o,defaultAttrs:Y,attrsComponent:Do,metadata:{displayName:"panel.details.nodes.chengduRTLineBadge.displayName",tags:[]}},Eo=h=>{const{id:n,x:t,y:l,attrs:o,handlePointerDown:i,handlePointerMove:a,handlePointerUp:s}=h,{code:c=te.code,color:u=te.color,tram:m=te.tram}=o!=null?o:te,y=r.useCallback(d=>i(n,d),[n,i]),f=r.useCallback(d=>a(n,d),[n,a]),p=r.useCallback(d=>s(n,d),[n,s]),g=(c.length<=2?10:5.5*c.length)+6;return e.jsxs("g",{id:n,transform:"translate(".concat(t,", ").concat(l,")scale(").concat(m?.8:1,")"),onPointerDown:y,onPointerMove:f,onPointerUp:p,style:{cursor:"move"},children:[e.jsx("rect",{fill:u[2],x:-g/2,y:"-8",width:g,height:"16",rx:"2.5",ry:"2.5"}),e.jsx("g",{children:e.jsx("text",{...v(B.taipei),textAnchor:"middle",dominantBaseline:"central",fontSize:"10",fill:u[3],children:c})})]})},te={code:"BR",tram:!1,color:[$.Taipei,"br","#C48C31",T.white]},qo=h=>{var a;const{id:n,attrs:t,handleAttrsUpdate:l}=h,{t:o}=k(),i=[{type:"input",label:o("panel.details.stations.common.lineCode"),value:t.code,onChange:s=>{t.code=s,l(n,t)},minW:"full"},{type:"switch",label:o("panel.details.nodes.taipeiMetroLineBadge.tram"),isChecked:(a=t.tram)!=null?a:te.tram,onChange:s=>{t.tram=s,l(n,t)},oneLine:!0,minW:"full"},{type:"custom",label:o("color"),component:e.jsx(U,{type:C.TaiPeiMetroLineBadege,defaultTheme:te.color})}];return e.jsx(z,{fields:i})},Fo=e.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[e.jsx("rect",{fill:"currentColor",x:"6",y:"6",width:"12",height:"12",rx:"2",ry:"2"}),e.jsx("text",{x:"12",y:"12",fontSize:"6",fill:"white",textAnchor:"middle",dominantBaseline:"central",children:"BR"})]}),Oo={component:Eo,icon:Fo,defaultAttrs:te,attrsComponent:qo,metadata:{displayName:"panel.details.nodes.taipeiMetroLineBadge.displayName",tags:[]}},Go={[C.Virtual]:Vt,[C.Master]:sn,[C.Image]:hn,[C.Facilities]:qt,[C.Text]:Pe,[C.I18nText]:en,[C.ShmetroNumLineBadge]:gn,[C.ShmetroTextLineBadge]:bn,[C.GzmtrLineBadge]:Bn,[C.BjsubwayNumLineBadge]:Sn,[C.BjsubwayTextLineBadge]:kn,[C.SuzhouRTNumLineBadge]:In,[C.BerlinSBahnLineBadge]:On,[C.BerlinUBahnLineBadge]:Wn,[C.ChongqingRTNumLineBadge]:Xn,[C.ChongqingRTTextLineBadge]:Yn,[C.ChongqingRTNumLineBadge2021]:no,[C.ChongqingRTTextLineBadge2021]:lo,[C.ShenzhenMetroNumLineBadge]:ho,[C.MRTDestinationNumbers]:go,[C.MRTLineBadge]:bo,[C.JREastLineBadge]:vo,[C.QingdaoMetroNumLineBadge]:To,[C.GuangdongIntercityRailwayLineBadge]:ko,[C.LondonArrow]:Io,[C.ChengduRTLineBadge]:Wo,[C.TaiPeiMetroLineBadege]:Oo};export{Go as m,Vt as v};
