!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,u,o=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);s=!0);}catch(c){l=!0,i=c}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./chakra-legacy-dae91ce7.js","./index-legacy-b4566606.js","./react-legacy-57266490.js","./graph-legacy-d0726f28.js","./stations-legacy-3954c77c.js","./change-types-legacy-012d4395.js","./clipboard-legacy-d0854fdb.js","./misc-nodes-legacy-fe9c3fab.js"],(function(e,t){"use strict";var a,u,o,s,l,c,d,f,p,h,g,m,b,y,j,v,x,w,A,N,S,O,E,C,k,P,W,z,T,R,D,I,_,M,U,F,L,V,$,q;return{setters:[function(e){a=e.j,u=e.A,o=e.M,s=e.m,l=e.n,c=e.p,d=e.r,f=e.s,p=e.$,h=e.a0,g=e.ae},function(e){m=e.c,b=e.i,y=e.y,j=e.A,v=e.j,x=e.ai,w=e.aj,A=e.z,N=e.t,S=e.N,O=e.q,E=e.v,C=e.n,k=e.D,P=e.ag,W=e.ak,z=e.al,T=e.am,R=e.an,D=e.p},function(e){I=e.b},function(e){_=e.a},function(e){M=e.s},function(e){U=e.d,F=e.e,L=e.f},function(e){V=e.u,$=e.e},function(e){q=e.m}],execute:function(){function t(){var e=m().t,t=b(),n=I.useCallback((function(){t(y()),t(j(p.current.export()))}),[t,y,j]),r=v((function(e){return e.runtime})).selected.at(0),p=I.useRef(window.graph),h=i(I.useState(!1),2),g=h[0],A=h[1],N=I.useRef(null),S=i(I.useState(void 0),2),O=S[0],E=S[1],C=p.current.getNodeAttribute(r,"type"),k=Object.fromEntries(Object.entries(M).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),P=function(e){e&&O&&(U(p.current,r,O),n()),E(void 0),A(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(x,{label:e("panel.details.info.stationType"),minW:"276",children:a.jsx(w,{options:k,disabledOptions:[C],value:C,onChange:function(e){var t=e.target.value;E(t),A(!0)}})}),a.jsx(u,{isOpen:g,leastDestructiveRef:N,onClose:function(){return P(!1)},children:a.jsx(o,{children:a.jsxs(s,{children:[a.jsx(l,{children:e("warning")}),a.jsx(c,{children:e("panel.details.changeStationTypeContent")}),a.jsxs(d,{children:[a.jsx(f,{ref:N,onClick:function(){return P(!1)},children:e("cancel")}),a.jsx(f,{ml:"2",colorScheme:"red",onClick:function(){return P(!0)},children:e("panel.details.changeType")})]})]})})})]})}function B(){var e=m().t,t=b(),n=I.useCallback((function(){t(A()),t(j(y.current.export()))}),[t,A,j]),r=v((function(e){return e.runtime})),p=r.selected,h=r.theme,g=p.at(0),y=I.useRef(window.graph),C=i(I.useState(!1),2),k=C[0],P=C[1],W=I.useRef(null),z=Object.fromEntries(Object.entries(N).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),T=i(I.useState(y.current.getEdgeAttribute(g,"type")),2),R=T[0],D=T[1],_=i(I.useState(void 0),2),M=_[0],U=_[1],V=Object.fromEntries(Object.entries(S).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),$=i(I.useState(y.current.getEdgeAttribute(g,"style")),2),q=$[0],B=$[1],G=i(I.useState(void 0),2),H=G[0],J=G[1],K=Object.values(O).filter((function(e){return!S[q].metadata.supportLinePathType.includes(e)})),Q=Object.values(E).filter((function(e){return!S[e].metadata.supportLinePathType.includes(R)})),X=function(e){e&&(M?(M&&(F(y.current,g,M),D(y.current.getEdgeAttribute(g,"type")),n()),U(void 0)):H&&(H&&(L(y.current,g,H,h),B(y.current.getEdgeAttribute(g,"style")),n()),J(void 0))),P(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(x,{label:e("panel.details.info.linePathType"),minW:"276",children:a.jsx(w,{options:z,disabledOptions:K,defaultValue:R,value:R,onChange:function(e){var t=e.target.value;U(t),P(!0)}})}),a.jsx(x,{label:e("panel.details.info.lineStyleType"),minW:"276",children:a.jsx(w,{options:V,disabledOptions:Q,defaultValue:q,value:q,onChange:function(e){var t=e.target.value;J(t),P(!0)}})}),a.jsx(u,{isOpen:k,leastDestructiveRef:W,onClose:function(){return X(!1)},children:a.jsx(o,{children:a.jsxs(s,{children:[a.jsx(l,{children:e("warning")}),a.jsx(c,{children:e("panel.details.changeLineTypeContent")}),a.jsxs(d,{children:[a.jsx(f,{ref:W,onClick:function(){return X(!1)},children:e("cancel")}),a.jsx(f,{ml:"2",colorScheme:"red",onClick:function(){return X(!0)},children:e("panel.details.changeType")})]})]})})})]})}function G(){var e=m().t,n=b(),r=I.useCallback((function(){n(y()),n(A()),n(j(o.current.export()))}),[n,A,j]),i=v((function(e){return e.runtime})).selected,u=i.at(0),o=I.useRef(window.graph),s=[{type:"input",label:e("panel.details.info.id"),value:i.length>0?i.join(", "):"undefined",minW:276},{type:"select",label:e("panel.details.info.zIndex"),value:u?o.current.hasNode(u)?o.current.getNodeAttribute(u,"zIndex"):o.current.hasEdge(u)?o.current.getEdgeAttribute(u,"zIndex"):0:0,options:Object.fromEntries(Array.from({length:11},(function(e,t){return[t-5,(t-5).toString()]}))),onChange:function(e){return function(e){var t=Math.min(Math.max(e,-5),5);o.current.hasNode(u)&&o.current.setNodeAttribute(u,"zIndex",t),o.current.hasEdge(u)&&o.current.setEdgeAttribute(u,"zIndex",t),r()}(Number(e))}}];return 0===i.length||i.length>1&&s.push({type:"input",label:e("panel.details.info.type"),value:"multiple selection",minW:276}),a.jsxs(p,{p:1,children:[a.jsx(h,{as:"h5",size:"sm",children:e("panel.details.info.title")}),a.jsx(C,{fields:s,minW:130}),1===i.length&&u.startsWith("stn")&&o.current.hasNode(u)&&a.jsx(t,{}),1===i.length&&u.startsWith("line")&&o.current.hasEdge(u)&&a.jsx(B,{})]})}function H(){var e=m().t,t=b(),n=v((function(e){return e.runtime})).selected,r=n.at(0),u=I.useRef(window.graph),o=i(I.useState("undefined"),2),s=o[0],l=o[1],c=i(I.useState("undefined"),2),d=c[0],g=c[1],y=i(I.useState("undefined"),2),j=y[0],x=y[1],w=i(I.useState("undefined"),2),A=w[0],N=w[1];I.useEffect((function(){if(null!=r&&r.startsWith("line")){var e=i(u.current.extremities(r),2),t=e[0],n=e[1];if(l(t),g(n),t.startsWith("stn")){var a,o,s=u.current.getNodeAttribute(t,"type");x(null!==(a=null===(o=u.current.getNodeAttribute(t,s))||void 0===o?void 0:o.names.at(0))&&void 0!==a?a:"undefined")}if(n.startsWith("stn")){var c,d,f=u.current.getNodeAttribute(n,"type");N(null!==(c=null===(d=u.current.getNodeAttribute(n,f))||void 0===d?void 0:d.names.at(0))&&void 0!==c?c:"undefined")}}}),[n]);var S=V((function(){t(k()),t(P(s))})),O=V((function(){t(k()),t(P(d))})),E=[{type:"custom",label:e("panel.details.lineExtremities.source"),component:a.jsx(f,{flex:1,size:"sm",variant:"link",onClick:S,children:s})},{type:"custom",label:e("panel.details.lineExtremities.target"),component:a.jsx(f,{flex:1,size:"sm",variant:"link",onClick:O,children:d})},{type:"input",label:e("panel.details.lineExtremities.sourceName"),value:j},{type:"input",label:e("panel.details.lineExtremities.targetName"),value:A}];return a.jsxs(p,{p:1,children:[a.jsx(h,{as:"h5",size:"sm",children:e("panel.details.lineExtremities.title")}),a.jsx(C,{fields:E,minW:130})]})}function J(){var e=m().t,t=b(),n=I.useCallback((function(){t(y()),t(A()),t(j(l.current.export()))}),[t,y,A,j]),r=v((function(e){return e.runtime})),u=r.selected,o=r.refresh.nodes,s=u.at(0),l=I.useRef(window.graph),c=i(I.useState({x:0,y:0}),2),d=c[0],f=c[1];I.useEffect((function(){if(null!=s&&s.startsWith("stn")||null!=s&&s.startsWith("misc_node_")){var e=l.current.getNodeAttribute(s,"x"),t=l.current.getNodeAttribute(s,"y");f({x:e,y:t})}}),[o,u]);var g=[{type:"input",label:e("panel.details.nodePosition.pos.x"),value:d.x.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){l.current.mergeNodeAttributes(s,{x:Number(e)}),n()}},{type:"input",label:e("panel.details.nodePosition.pos.y"),value:d.y.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){l.current.mergeNodeAttributes(s,{y:Number(e)}),n()}}];return a.jsxs(p,{p:1,children:[a.jsx(h,{as:"h5",size:"sm",children:e("panel.details.nodePosition.title")}),a.jsx(C,{fields:g,minW:130})]})}var K=n(n({},M),q),Q=function(){var e,t=b(),n=v((function(e){return e.runtime})).selected.at(0),i=window.graph.getNodeAttribute(n,"type"),u=K[i].attrsComponent,o=null!==(e=window.graph.getNodeAttribute(n,i))&&void 0!==e?e:{};return u&&a.jsx(u,{id:n,attrs:o,handleAttrsUpdate:function(e,n){var i=window.graph.getNodeAttribute(e,"type");window.graph.mergeNodeAttributes(e,r({},i,n)),t(y()),t(j(window.graph.export()))}})},X=function(){var e,t,n=b(),i=v((function(e){return e.runtime})).selected.at(0),u=window.graph.getEdgeAttribute(i,"type"),o=null!==(e=window.graph.getEdgeAttribute(i,u))&&void 0!==e?e:{},s=N[u].attrsComponent,l=window.graph.getEdgeAttribute(i,"style"),c=null!==(t=window.graph.getEdgeAttribute(i,l))&&void 0!==t?t:{},d=S[l].attrsComponent;return a.jsxs(a.Fragment,{children:[s&&a.jsx(s,{id:i,attrs:o,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},u,t)),n(A()),n(j(window.graph.export()))}}),d&&a.jsx(d,{id:i,attrs:c,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},l,t)),n(A()),n(j(window.graph.export()))}})]})};e("default",(function(){var e=m().t,t=b(),n=I.useRef(window.graph),r=I.useCallback((function(){t(y()),t(A()),t(j(n.current.export()))}),[t,y,A,j]),i=v((function(e){return e.runtime})),u=i.selected,o=i.mode,s=u.at(0);return a.jsxs(W,{isOpen:u.length>0&&!o.startsWith("line"),width:300,header:"Dummy header",alwaysOverlay:!0,children:[a.jsx(z,{onClose:function(){return t(k())},children:e("panel.details.header")}),a.jsxs(T,{children:[a.jsx(G,{}),1===u.length&&n.current.hasNode(s)&&a.jsx(J,{}),1===u.length&&n.current.hasEdge(s)&&a.jsx(H,{}),1===u.length&&a.jsxs(p,{p:1,children:[a.jsx(h,{as:"h5",size:"sm",children:e("panel.details.specificAttrsTitle")}),window.graph.hasNode(s)&&a.jsx(Q,{}),window.graph.hasEdge(s)&&a.jsx(X,{})]})]}),a.jsx(R,{children:a.jsxs(g,{children:[1===u.length&&n.current.hasNode(u.at(0))&&a.jsx(f,{size:"sm",variant:"outline",onClick:function(){return function(e){var r=structuredClone(n.current.getNodeAttributes(e));r.x+=50,r.y+=50;var i=e.startsWith("stn")?"stn_".concat(D(10)):"misc_node_".concat(D(10));n.current.addNode(i,r),t(y()),t(j(n.current.export()))}(u.at(0))},children:e("panel.details.footer.duplicate")}),a.jsx(f,{size:"sm",variant:"outline",onClick:function(){return function(e){var t=new Set(e),r=_(n.current,t),i=$(n.current,t,new Set(r));navigator.clipboard.writeText(i)}(u)},children:e("panel.details.footer.copy")}),a.jsx(f,{size:"sm",variant:"outline",onClick:function(){return e=u,t(k()),void e.forEach((function(e){n.current.hasNode(e)?(n.current.dropNode(e),r()):n.current.hasEdge(e)&&(n.current.dropEdge(e),t(A()),t(j(n.current.export())))}));var e},children:e("panel.details.footer.remove")})]})})]})}))}}}))}();
