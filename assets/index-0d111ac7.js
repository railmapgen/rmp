import{u as ze,a as oa,j as g,P as sa,c as sr,F as la,b as Kr,I as ua,d as $e,T as ca,e as ha,f as da,B as Jr,g as fa,h as pa,i as ga,k as ma,l as ya,A as ba,M as va,m as wa,n as xa,o as Sa,p as Na,q as Le,r as za,s as lr,t as Yr,L as dt,v as Mn,w as Pn,x as Ea,y as ka,z as Aa,C as Ra,S as Oa,D as _t,E as _a,G as Ta,H as La,J as ja,K as Ha,N as $a,O as ht,Q as Ma,R as Pa,U as Fa,V as Ca,W as Da,X as D}from"./chakra-594c63ee.js";import{g as Fn,a as qr,r as $,b as P,d as Cn,e as Zr,f as ur,h as Ia}from"./react-2c0b8364.js";function yg(){import.meta.url,import("_").catch(()=>1);async function*n(){}}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const Xr=n=>new Promise(e=>{setTimeout(e,n,`Timeout after ${n/1e3} seconds`)});var je;(function(n){n.DEV="DEV",n.UAT="UAT",n.PRD="PRD"})(je||(je={}));var xn;(function(n){n.GITHUB="GitHub",n.GITLAB="GitLab",n.BITBUCKET="Bitbucket",n.LOCALHOST="localhost",n.UNKNOWN="unknown"})(xn||(xn={}));var Qr=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(h){try{u(i.next(h))}catch(d){s(d)}}function c(h){try{u(i.throw(h))}catch(d){s(d)}}function u(h){h.done?o(h.value):a(h.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};let Dn,In,Bn,Gn,Un;const ei=()=>{Dn=!1,In="rmg-unknown",Bn="unknown",Gn=je.PRD,Un=xn.UNKNOWN},Ba=()=>Qr(void 0,void 0,void 0,function*(){const n=window.location.pathname.split("/")[1],e=n?`/${n}/info.json`:"/info.json",r=yield fetch(e);if(r.ok){const i=yield r.json();In=i.component,Bn=i.version,Gn=i.environment,Un=i.instance}else throw new Error(`Failed to fetch config from ${e}`)}),Ga=()=>Qr(void 0,void 0,void 0,function*(){try{console.log("[rmg-runtime] Loading config...");const n=yield Promise.race([Ba(),Xr(10*1e3)]);n?console.error("[rmg-runtime] Failed to load config.",n):(Dn=!0,console.log("[rmg-runtime] Config loaded!"))}catch(n){console.error("[rmg-runtime] Failed to load config.",n)}}),Ua=()=>Dn,Va=()=>In,Wa=()=>Bn,Ka=()=>Gn,Ja=()=>Un;ei();const ae={loadWithTimeout:Ga,isInitialised:Ua,getComponent:Va,getVersion:Wa,getEnvironment:Ka,getInstance:Ja,_resetConfig:ei};window.dataLayer=window.dataLayer||[];const Ya=()=>{const n=document.createElement("script");n.async=!0,n.src="https://www.googletagmanager.com/gtag/js?id=G-2HP8Y4MRRQ",document.head.append(n)};function Sn(...n){if(ae.getEnvironment()!==je.DEV)return window.dataLayer.push(arguments);console.log("[rmg-runtime] Not going to send event in DEV environment",n)}const qa=(n,e)=>{Sn("event",n,e)},Za=()=>{Ya(),Sn("js",new Date),Sn("config","G-2HP8Y4MRRQ",{appName:ae.getComponent(),version:ae.getVersion(),environment:ae.getEnvironment(),instance:ae.getInstance()})},Tt={init:Za,customEvent:qa},Xa="rmg-runtime-channel",Rt={};let ft;try{ft=new BroadcastChannel(Xa),ft.onmessage=n=>{var e;const{event:r,data:i,frameId:a}=n.data;(e=Rt[r])===null||e===void 0||e.forEach(o=>o(i,a))}}catch(n){console.warn("[rmg-runtime] Failed to initiate broadcast channel. Some features may be unavailable.",n)}const Qa=(n,e,r)=>{var i;r&&console.log(`[rmg-runtime] Broadcasting event ${n} with data`,e),ft==null||ft.postMessage({event:n,data:e,frameId:(i=window.frameElement)===null||i===void 0?void 0:i.id})},eo=(n,e)=>{var r;n in Rt?(r=Rt[n])===null||r===void 0||r.push(e):Rt[n]=[e]},ie={postEvent:Qa,onMessage:eo},Nn=()=>!window.frameElement,to=()=>{var n;return!!(!((n=window.frameElement)===null||n===void 0)&&n.closest(".show-menu"))},no=()=>{if(!Nn()){const e=document.createElement("style");e.textContent="body{padding: 0;}",document.head.appendChild(e)}const n=document.createElement("style");n.textContent=".rmg-window__header{margin-left: 40px;}",!Nn()&&!to()&&document.head.appendChild(n),ie.onMessage("TOGGLE_NAV_MENU",e=>{if(e)try{document.head.removeChild(n)}catch(r){console.warn("[rmg-runtime] Unable to remove indent style from RmgWindowHeader",r)}else document.head.appendChild(n)})},ro=(n,e)=>{ie.postEvent("OPEN_APP",{appId:n,url:e})},io=n=>{ie.postEvent("CLOSE_APP",n)},ao=n=>{ie.postEvent("UPDATE_URL",n)},oo=n=>{ie.onMessage("OPEN_APP",n)},so=n=>{ie.onMessage("CLOSE_APP",n)},lo=n=>{ie.onMessage("UPDATE_URL",n)},uo=n=>{ie.postEvent("TOGGLE_NAV_MENU",n,!0)},me={isStandaloneWindow:Nn,injectUITools:no,openApp:ro,onAppOpen:oo,closeApp:io,onAppClose:so,updateUrl:ao,onUrlUpdate:lo,toggleNavMenu:uo},ti="rmg-runtime__language",ni="rmg-runtime__colourMode",Lt="rmg-runtime__allowAnalytics",ri=["en","zh-Hans","zh-Hant","ko"],co=n=>{ri.includes(n)&&(ie.postEvent("SET_LANGUAGE",n),window.localStorage.setItem(ti,n))},ho=()=>{const n=window.localStorage.getItem(ti);return n&&ri.includes(n)?n:"en"},fo=n=>{ie.onMessage("SET_LANGUAGE",n)},ii=["light","dark","system"],po=n=>{ii.includes(n)&&(ie.postEvent("SET_COLOUR_MODE",n,!0),window.localStorage.setItem(ni,n))},go=()=>{const n=window.localStorage.getItem(ni);return n&&ii.includes(n)?n:"system"},mo=n=>{ie.onMessage("SET_COLOUR_MODE",n)},yo=()=>window.localStorage.getItem(Lt)!==null,ai=()=>window.localStorage.getItem(Lt)==="true",bo=n=>{const e=ai();return n?(e||(window.localStorage.setItem(Lt,n.toString()),Tt.init()),{refreshRequired:!1}):e?(window.localStorage.setItem(Lt,n.toString()),{refreshRequired:!0}):{refreshRequired:!1}},ce={setLanguage:co,getLanguage:ho,onLanguageChange:fo,setColourMode:po,getColourMode:go,onColourModeChange:mo,isAnalyticsQADone:yo,isAllowAnalytics:ai,allowAnalytics:bo},vo=new Date().getTime();function wo(){const n=ae.getComponent(),e=window.localStorage.getItem(n+"__startTime");return e===null?new Date().getTime()-vo:new Date().getTime()-Number(e)}const xo={getMsSinceStartUp:wo},oi=()=>{const n=ae.getComponent();if(n==="rmg-unknown")throw new Error("[rmg-runtime] Unable to clear storage for unknown app");return n==="railmapgen.github.io"?"rmg-home":n},So=()=>{const n=oi(),e={};let r=0;for(;r<window.localStorage.length;){const i=window.localStorage.key(r);if(i!=null&&i.startsWith(n+"__")){const a=window.localStorage.getItem(i);a&&(e[i]=a)}r++}return e},No=()=>{const n=oi();let e=0;for(;e<window.localStorage.length;){const r=window.localStorage.key(e);r!=null&&r.startsWith(n+"__")?(window.localStorage.removeItem(r),console.log(`[rmg-runtime] Removed item ${r}`)):e++}},cr={getStorageForCurrentApp:So,clearStorageForCurrentApp:No},zo={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console&&console[n]&&console[n].apply(console,e)}};class jt{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,r)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=e||zo,this.options=r,this.debug=r.debug}log(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}warn(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}error(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"error","")}deprecate(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,i,a){return a&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new jt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new jt(this.logger,e)}}var ye=new jt;let Wt=class{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(i=>{this.observers[i]=this.observers[i]||[],this.observers[i].push(r)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e]=this.observers[e].filter(i=>i!==r)}}emit(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];this.observers[e]&&[].concat(this.observers[e]).forEach(s=>{s(...i)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(s=>{s.apply(s,[e,...i])})}};function rt(){let n,e;const r=new Promise((i,a)=>{n=i,e=a});return r.resolve=n,r.reject=e,r}function hr(n){return n==null?"":""+n}function Eo(n,e,r){n.forEach(i=>{e[i]&&(r[i]=e[i])})}function Vn(n,e,r){function i(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function a(){return!n||typeof n=="string"}const o=typeof e!="string"?[].concat(e):e.split(".");for(;o.length>1;){if(a())return{};const s=i(o.shift());!n[s]&&r&&(n[s]=new r),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={}}return a()?{}:{obj:n,k:i(o.shift())}}function dr(n,e,r){const{obj:i,k:a}=Vn(n,e,Object);i[a]=r}function ko(n,e,r,i){const{obj:a,k:o}=Vn(n,e,Object);a[o]=a[o]||[],i&&(a[o]=a[o].concat(r)),i||a[o].push(r)}function Ht(n,e){const{obj:r,k:i}=Vn(n,e);if(r)return r[i]}function Ao(n,e,r){const i=Ht(n,r);return i!==void 0?i:Ht(e,r)}function si(n,e,r){for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?typeof n[i]=="string"||n[i]instanceof String||typeof e[i]=="string"||e[i]instanceof String?r&&(n[i]=e[i]):si(n[i],e[i],r):n[i]=e[i]);return n}function Fe(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Ro={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Oo(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,e=>Ro[e]):n}const _o=[" ",",","?","!",";"];function To(n,e,r){e=e||"",r=r||"";const i=_o.filter(s=>e.indexOf(s)<0&&r.indexOf(s)<0);if(i.length===0)return!0;const a=new RegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!a.test(n);if(!o){const s=n.indexOf(r);s>0&&!a.test(n.substring(0,s))&&(o=!0)}return o}function $t(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return n[e];const i=e.split(r);let a=n;for(let o=0;o<i.length;++o){if(!a||typeof a[i[o]]=="string"&&o+1<i.length)return;if(a[i[o]]===void 0){let s=2,l=i.slice(o,o+s).join(r),c=a[l];for(;c===void 0&&i.length>o+s;)s++,l=i.slice(o,o+s).join(r),c=a[l];if(c===void 0)return;if(c===null)return null;if(e.endsWith(l)){if(typeof c=="string")return c;if(l&&typeof c[l]=="string")return c[l]}const u=i.slice(o+s).join(r);return u?$t(c,u,r):void 0}a=a[i[o]]}return a}function Mt(n){return n&&n.indexOf("_")>0?n.replace("_","-"):n}class fr extends Wt{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,s=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let l=[e,r];i&&typeof i!="string"&&(l=l.concat(i)),i&&typeof i=="string"&&(l=l.concat(o?i.split(o):i)),e.indexOf(".")>-1&&(l=e.split("."));const c=Ht(this.data,l);return c||!s||typeof i!="string"?c:$t(this.data&&this.data[e]&&this.data[e][r],i,o)}addResource(e,r,i,a){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let l=[e,r];i&&(l=l.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(l=e.split("."),a=r,r=l[1]),this.addNamespaces(r),dr(this.data,l,a),o.silent||this.emit("added",e,r,i,a)}addResources(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in i)(typeof i[o]=="string"||Object.prototype.toString.apply(i[o])==="[object Array]")&&this.addResource(e,r,o,i[o],{silent:!0});a.silent||this.emit("added",e,r,i)}addResourceBundle(e,r,i,a,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},l=[e,r];e.indexOf(".")>-1&&(l=e.split("."),a=i,i=r,r=l[1]),this.addNamespaces(r);let c=Ht(this.data,l)||{};a?si(c,i,o):c={...c,...i},dr(this.data,l,c),s.silent||this.emit("added",e,r,i)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,r)}:this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(a=>r[a]&&Object.keys(r[a]).length>0)}toJSON(){return this.data}}var li={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,r,i,a){return n.forEach(o=>{this.processors[o]&&(e=this.processors[o].process(e,r,i,a))}),e}};const pr={};class Pt extends Wt{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Eo(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ye.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,r);return i&&i.res!==void 0}extractFromKey(e,r){let i=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!To(e,i,a);if(s&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:o};const u=e.split(i);(i!==a||i===a&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),e=u.join(a)}return typeof o=="string"&&(o=[o]),{key:e,namespaces:o}}translate(e,r,i){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:s,namespaces:l}=this.extractFromKey(e[e.length-1],r),c=l[l.length-1],u=r.lng||this.language,h=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(h){const R=r.nsSeparator||this.options.nsSeparator;return a?{res:`${c}${R}${s}`,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:c}:`${c}${R}${s}`}return a?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:c}:s}const d=this.resolve(e,r);let f=d&&d.res;const m=d&&d.usedKey||s,b=d&&d.exactUsedKey||s,v=Object.prototype.toString.apply(f),N=["[object Number]","[object Function]","[object RegExp]"],z=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject;if(k&&f&&(typeof f!="string"&&typeof f!="boolean"&&typeof f!="number")&&N.indexOf(v)<0&&!(typeof z=="string"&&v==="[object Array]")){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const R=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,f,{...r,ns:l}):`key '${s} (${this.language})' returned an object instead of string.`;return a?(d.res=R,d):R}if(o){const R=v==="[object Array]",S=R?[]:{},L=R?b:m;for(const O in f)if(Object.prototype.hasOwnProperty.call(f,O)){const M=`${L}${o}${O}`;S[O]=this.translate(M,{...r,joinArrays:!1,ns:l}),S[O]===M&&(S[O]=f[O])}f=S}}else if(k&&typeof z=="string"&&v==="[object Array]")f=f.join(z),f&&(f=this.extendTranslation(f,e,r,i));else{let R=!1,S=!1;const L=r.count!==void 0&&typeof r.count!="string",O=Pt.hasDefaultValue(r),M=L?this.pluralResolver.getSuffix(u,r.count,r):"",_=r.ordinal&&L?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",j=r[`defaultValue${M}`]||r[`defaultValue${_}`]||r.defaultValue;!this.isValidLookup(f)&&O&&(R=!0,f=j),this.isValidLookup(f)||(S=!0,f=s);const B=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:f,W=O&&j!==f&&this.options.updateMissing;if(S||R||W){if(this.logger.log(W?"updateKey":"missingKey",u,c,s,W?j:f),o){const X=this.resolve(s,{...r,keySeparator:!1});X&&X.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[];const ve=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ve&&ve[0])for(let X=0;X<ve.length;X++)K.push(ve[X]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(r.lng||this.language):K.push(r.lng||this.language);const St=(X,we,et)=>{const tt=O&&et!==f?et:B;this.options.missingKeyHandler?this.options.missingKeyHandler(X,c,we,tt,W,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(X,c,we,tt,W,r),this.emit("missingKey",X,c,we,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?K.forEach(X=>{this.pluralResolver.getSuffixes(X,r).forEach(we=>{St([X],s+we,r[`defaultValue${we}`]||j)})}):St(K,s,j))}f=this.extendTranslation(f,e,r,d,i),S&&f===s&&this.options.appendNamespaceToMissingKey&&(f=`${c}:${s}`),(S||R)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${s}`:s,R?f:void 0):f=this.options.parseMissingKeyHandler(f))}return a?(d.res=f,d):f}extendTranslation(e,r,i,a,o){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const u=typeof e=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(u){const f=e.match(this.interpolator.nestingRegexp);h=f&&f.length}let d=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,i.lng||this.language,i),u){const f=e.match(this.interpolator.nestingRegexp),m=f&&f.length;h<m&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(i.lng=a.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,m=new Array(f),b=0;b<f;b++)m[b]=arguments[b];return o&&o[0]===m[0]&&!i.context?(s.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${r[0]}`),null):s.translate(...m,r)},i)),i.interpolation&&this.interpolator.reset()}const l=i.postProcess||this.options.postProcess,c=typeof l=="string"?[l]:l;return e!=null&&c&&c.length&&i.applyPostProcessor!==!1&&(e=li.handle(c,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:a,...i}:i,this)),e}resolve(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,a,o,s,l;return typeof e=="string"&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const u=this.extractFromKey(c,r),h=u.key;a=h;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const f=r.count!==void 0&&typeof r.count!="string",m=f&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),b=r.context!==void 0&&(typeof r.context=="string"||typeof r.context=="number")&&r.context!=="",v=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);d.forEach(N=>{this.isValidLookup(i)||(l=N,!pr[`${v[0]}-${N}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(pr[`${v[0]}-${N}`]=!0,this.logger.warn(`key "${a}" for languages "${v.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(z=>{if(this.isValidLookup(i))return;s=z;const k=[h];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(k,h,z,N,r);else{let R;f&&(R=this.pluralResolver.getSuffix(z,r.count,r));const S=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(k.push(h+R),r.ordinal&&R.indexOf(L)===0&&k.push(h+R.replace(L,this.options.pluralSeparator)),m&&k.push(h+S)),b){const O=`${h}${this.options.contextSeparator}${r.context}`;k.push(O),f&&(k.push(O+R),r.ordinal&&R.indexOf(L)===0&&k.push(O+R.replace(L,this.options.pluralSeparator)),m&&k.push(O+S))}}let A;for(;A=k.pop();)this.isValidLookup(i)||(o=A,i=this.getResource(z,N,A,r))}))})}),{res:i,usedKey:a,exactUsedKey:o,usedLng:s,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,r,i,a):this.resourceStore.getResource(e,r,i,a)}static hasDefaultValue(e){const r="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&r===i.substring(0,r.length)&&e[i]!==void 0)return!0;return!1}}function fn(n){return n.charAt(0).toUpperCase()+n.slice(1)}class gr{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ye.create("languageUtils")}getScriptPartFromCode(e){if(e=Mt(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=Mt(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const r=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map(a=>a.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=fn(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=fn(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=fn(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(i=>{if(r)return;const a=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(a))&&(r=a)}),!r&&this.options.supportedLngs&&e.forEach(i=>{if(r)return;const a=this.getLanguagePartFromCode(i);if(this.isSupportedCode(a))return r=a;r=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&o.indexOf(a)===0)return o})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!r)return e.default||[];let i=e[r];return i||(i=e[this.getScriptPartFromCode(r)]),i||(i=e[this.formatLanguageCode(r)]),i||(i=e[this.getLanguagePartFromCode(r)]),i||(i=e.default),i||[]}toResolveHierarchy(e,r){const i=this.getFallbackCodes(r||this.options.fallbackLng||[],e),a=[],o=s=>{s&&(this.isSupportedCode(s)?a.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):typeof e=="string"&&o(this.formatLanguageCode(e)),i.forEach(s=>{a.indexOf(s)<0&&o(this.formatLanguageCode(s))}),a}}let Lo=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],jo={1:function(n){return+(n>1)},2:function(n){return+(n!=1)},3:function(n){return 0},4:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},5:function(n){return n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5},6:function(n){return n==1?0:n>=2&&n<=4?1:2},7:function(n){return n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},8:function(n){return n==1?0:n==2?1:n!=8&&n!=11?2:3},9:function(n){return+(n>=2)},10:function(n){return n==1?0:n==2?1:n<7?2:n<11?3:4},11:function(n){return n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3},12:function(n){return+(n%10!=1||n%100==11)},13:function(n){return+(n!==0)},14:function(n){return n==1?0:n==2?1:n==3?2:3},15:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2},16:function(n){return n%10==1&&n%100!=11?0:n!==0?1:2},17:function(n){return n==1||n%10==1&&n%100!=11?0:1},18:function(n){return n==0?0:n==1?1:2},19:function(n){return n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3},20:function(n){return n==1?0:n==0||n%100>0&&n%100<20?1:2},21:function(n){return n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0},22:function(n){return n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3}};const Ho=["v1","v2","v3"],$o=["v4"],mr={zero:0,one:1,two:2,few:3,many:4,other:5};function Mo(){const n={};return Lo.forEach(e=>{e.lngs.forEach(r=>{n[r]={numbers:e.nr,plurals:jo[e.fc]}})}),n}class Po{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=r,this.logger=ye.create("pluralResolver"),(!this.options.compatibilityJSON||$o.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Mo()}addRule(e,r){this.rules[e]=r}getRule(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Mt(e),{type:r.ordinal?"ordinal":"cardinal"})}catch(i){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(a=>`${r}${a}`)}getSuffixes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((a,o)=>mr[a]-mr[o]).map(a=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a}`):i.numbers.map(a=>this.getSuffix(e,a,r)):[]}getSuffix(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,i);return a?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${a.select(r)}`:this.getSuffixRetroCompatible(a,r):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,r){const i=e.noAbs?e.plurals(r):e.plurals(Math.abs(r));let a=e.numbers[i];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const o=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!Ho.includes(this.options.compatibilityJSON)}}function yr(n,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=Ao(n,e,r);return!o&&a&&typeof r=="string"&&(o=$t(n,r,i),o===void 0&&(o=$t(e,r,i))),o}class Fo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ye.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const r=e.interpolation;this.escape=r.escape!==void 0?r.escape:Oo,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?Fe(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?Fe(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?Fe(r.nestingPrefix):r.nestingPrefixEscaped||Fe("$t("),this.nestingSuffix=r.nestingSuffix?Fe(r.nestingSuffix):r.nestingSuffixEscaped||Fe(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(e,"g");const r=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(r,"g");const i=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(i,"g")}interpolate(e,r,i,a){let o,s,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(b){return b.replace(/\$/g,"$$$$")}const h=b=>{if(b.indexOf(this.formatSeparator)<0){const k=yr(r,c,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(k,void 0,i,{...a,...r,interpolationkey:b}):k}const v=b.split(this.formatSeparator),N=v.shift().trim(),z=v.join(this.formatSeparator).trim();return this.format(yr(r,c,N,this.options.keySeparator,this.options.ignoreJSONStructure),z,i,{...a,...r,interpolationkey:N})};this.resetRegExp();const d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,f=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>u(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?u(this.escape(b)):u(b)}].forEach(b=>{for(l=0;o=b.regex.exec(e);){const v=o[1].trim();if(s=h(v),s===void 0)if(typeof d=="function"){const z=d(e,o,a);s=typeof z=="string"?z:""}else if(a&&Object.prototype.hasOwnProperty.call(a,v))s="";else if(f){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),s="";else typeof s!="string"&&!this.useRawValueToEscape&&(s=hr(s));const N=b.safeValue(s);if(e=e.replace(o[0],N),f?(b.regex.lastIndex+=s.length,b.regex.lastIndex-=o[0].length):b.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,o,s;function l(c,u){const h=this.nestingOptionsSeparator;if(c.indexOf(h)<0)return c;const d=c.split(new RegExp(`${h}[ ]*{`));let f=`{${d[1]}`;c=d[0],f=this.interpolate(f,s);const m=f.match(/'/g),b=f.match(/"/g);(m&&m.length%2===0&&!b||b.length%2!==0)&&(f=f.replace(/'/g,'"'));try{s=JSON.parse(f),u&&(s={...u,...s})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,v),`${c}${h}${f}`}return delete s.defaultValue,c}for(;a=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&typeof s.replace!="string"?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const h=a[1].split(this.formatSeparator).map(d=>d.trim());a[1]=h.shift(),c=h,u=!0}if(o=r(l.call(this,a[1].trim(),s),s),o&&a[0]===e&&typeof o!="string")return o;typeof o!="string"&&(o=hr(o)),o||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),o=""),u&&(o=c.reduce((h,d)=>this.format(h,d,i.lng,{...i,interpolationkey:a[1].trim()}),o.trim())),e=e.replace(a[0],o),this.regexp.lastIndex=0}return e}}function Co(n){let e=n.toLowerCase().trim();const r={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const a=i[1].substring(0,i[1].length-1);e==="currency"&&a.indexOf(":")<0?r.currency||(r.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?r.range||(r.range=a.trim()):a.split(";").forEach(s=>{if(!s)return;const[l,...c]=s.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,"");r[l.trim()]||(r[l.trim()]=u),u==="false"&&(r[l.trim()]=!1),u==="true"&&(r[l.trim()]=!0),isNaN(u)||(r[l.trim()]=parseInt(u,10))})}return{formatName:e,formatOptions:r}}function Ce(n){const e={};return function(i,a,o){const s=a+JSON.stringify(o);let l=e[s];return l||(l=n(Mt(a),o),e[s]=l),l(i)}}class Do{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ye.create("formatter"),this.options=e,this.formats={number:Ce((r,i)=>{const a=new Intl.NumberFormat(r,{...i});return o=>a.format(o)}),currency:Ce((r,i)=>{const a=new Intl.NumberFormat(r,{...i,style:"currency"});return o=>a.format(o)}),datetime:Ce((r,i)=>{const a=new Intl.DateTimeFormat(r,{...i});return o=>a.format(o)}),relativetime:Ce((r,i)=>{const a=new Intl.RelativeTimeFormat(r,{...i});return o=>a.format(o,i.range||"day")}),list:Ce((r,i)=>{const a=new Intl.ListFormat(r,{...i});return o=>a.format(o)})},this.init(e)}init(e){const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Ce(r)}format(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r.split(this.formatSeparator).reduce((l,c)=>{const{formatName:u,formatOptions:h}=Co(c);if(this.formats[u]){let d=l;try{const f=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},m=f.locale||f.lng||a.locale||a.lng||i;d=this.formats[u](l,m,{...h,...a,...f})}catch(f){this.logger.warn(f)}return d}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}function Io(n,e){n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)}class Bo extends Wt{constructor(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=r,this.services=i,this.languageUtils=i.languageUtils,this.options=a,this.logger=ye.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,a.backend,a)}queueLoad(e,r,i,a){const o={},s={},l={},c={};return e.forEach(u=>{let h=!0;r.forEach(d=>{const f=`${u}|${d}`;!i.reload&&this.store.hasResourceBundle(u,d)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?s[f]===void 0&&(s[f]=!0):(this.state[f]=1,h=!1,s[f]===void 0&&(s[f]=!0),o[f]===void 0&&(o[f]=!0),c[d]===void 0&&(c[d]=!0)))}),h||(l[u]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,r,i){const a=e.split("|"),o=a[0],s=a[1];r&&this.emit("failedLoading",o,s,r),i&&this.store.addResourceBundle(o,s,i),this.state[e]=r?-1:2;const l={};this.queue.forEach(c=>{ko(c.loaded,[o],s),Io(c,e),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const h=c.loaded[u];h.length&&h.forEach(d=>{l[u][d]===void 0&&(l[u][d]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:i,tried:a,wait:o,callback:s});return}this.readingCalls++;const l=(u,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&h&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,i,a+1,o*2,s)},o);return}s(u,h)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const u=c(e,r);u&&typeof u.then=="function"?u.then(h=>l(null,h)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,r,l)}prepareLoading(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof r=="string"&&(r=[r]);const o=this.queueLoad(e,r,i,a);if(!o.toLoad.length)return o.pending.length||a(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,r,i){this.prepareLoading(e,r,{},i)}reload(e,r,i){this.prepareLoading(e,r,{reload:!0},i)}loadOne(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),a=i[0],o=i[1];this.read(a,o,"read",void 0,void 0,(s,l)=>{s&&this.logger.warn(`${r}loading namespace ${o} for language ${a} failed`,s),!s&&l&&this.logger.log(`${r}loaded namespace ${o} for language ${a}`,l),this.loaded(e,s,l)})}saveMissing(e,r,i,a,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${i}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const c={...s,isUpdate:o},u=this.backend.create.bind(this.backend);if(u.length<6)try{let h;u.length===5?h=u(e,r,i,a,c):h=u(e,r,i,a),h&&typeof h.then=="function"?h.then(d=>l(null,d)).catch(l):l(null,h)}catch(h){l(h)}else u(e,r,i,a,l,c)}!e||!e[0]||this.store.addResource(e[0],r,i,a)}}}function br(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let r={};if(typeof e[1]=="object"&&(r=e[1]),typeof e[1]=="string"&&(r.defaultValue=e[1]),typeof e[2]=="string"&&(r.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const i=e[3]||e[2];Object.keys(i).forEach(a=>{r[a]=i[a]})}return r},interpolation:{escapeValue:!0,format:(n,e,r,i)=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function vr(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function zt(){}function Go(n){Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(r=>{typeof n[r]=="function"&&(n[r]=n[r].bind(n))})}class vt extends Wt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=vr(e),this.services={},this.logger=ye,this.modules={external:[]},Go(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(){var e=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;typeof r=="function"&&(i=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(typeof r.ns=="string"?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const a=br();this.options={...a,...this.options,...vr(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);function o(h){return h?typeof h=="function"?new h:h:null}if(!this.options.isClone){this.modules.logger?ye.init(o(this.modules.logger),this.options):ye.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:typeof Intl<"u"&&(h=Do);const d=new gr(this.options);this.store=new fr(this.options.resources,this.options);const f=this.services;f.logger=ye,f.resourceStore=this.store,f.languageUtils=d,f.pluralResolver=new Po(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(f.formatter=o(h),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new Fo(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Bo(o(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(m){for(var b=arguments.length,v=new Array(b>1?b-1:0),N=1;N<b;N++)v[N-1]=arguments[N];e.emit(m,...v)}),this.modules.languageDetector&&(f.languageDetector=o(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=o(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Pt(this.services,this.options),this.translator.on("*",function(m){for(var b=arguments.length,v=new Array(b>1?b-1:0),N=1;N<b;N++)v[N-1]=arguments[N];e.emit(m,...v)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,i||(i=zt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return e.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return e.store[h](...arguments),e}});const c=rt(),u=()=>{const h=(d,f)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(f),i(d,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zt;const a=typeof e=="string"?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(a&&a.toLowerCase()==="cimode")return i();const o=[],s=l=>{if(!l)return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{o.indexOf(u)<0&&o.push(u)})};a?s(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload&&this.options.preload.forEach(l=>s(l)),this.services.backendConnector.load(o,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(l)})}else i(null)}reloadResources(e,r,i){const a=rt();return e||(e=this.languages),r||(r=this.options.ns),i||(i=zt),this.services.backendConnector.reload(e,r,o=>{a.resolve(),i(o)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&li.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let r=0;r<this.languages.length;r++){const i=this.languages[r];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,r){var i=this;this.isLanguageChangingTo=e;const a=rt();this.emit("languageChanging",e);const o=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},s=(c,u)=>{u?(o(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,a.resolve(function(){return i.t(...arguments)}),r&&r(c,function(){return i.t(...arguments)})},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const u=typeof c=="string"?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||o(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,h=>{s(h,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),a}getFixedT(e,r,i){var a=this;const o=function(s,l){let c;if(typeof l!="object"){for(var u=arguments.length,h=new Array(u>2?u-2:0),d=2;d<u;d++)h[d-2]=arguments[d];c=a.options.overloadTranslationOptionHandler([s,l].concat(h))}else c={...l};c.lng=c.lng||o.lng,c.lngs=c.lngs||o.lngs,c.ns=c.ns||o.ns,c.keyPrefix=c.keyPrefix||i||o.keyPrefix;const f=a.options.keySeparator||".";let m;return c.keyPrefix&&Array.isArray(s)?m=s.map(b=>`${c.keyPrefix}${f}${b}`):m=c.keyPrefix?`${c.keyPrefix}${f}${s}`:s,a.t(m,c)};return typeof e=="string"?o.lng=e:o.lngs=e,o.ns=r,o.keyPrefix=i,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=r.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===2};if(r.precheck){const l=r.precheck(this,s);if(l!==void 0)return l}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!a||s(o,e)))}loadNamespaces(e,r){const i=rt();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{i.resolve(),r&&r(a)}),i):(r&&r(),Promise.resolve())}loadLanguages(e,r){const i=rt();typeof e=="string"&&(e=[e]);const a=this.options.preload||[],o=e.filter(s=>a.indexOf(s)<0);return o.length?(this.options.preload=a.concat(o),this.loadResources(s=>{i.resolve(),r&&r(s)}),i):(r&&r(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new gr(br());return r.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new vt(e,r)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zt;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},o=new vt(a);return(e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(l=>{o[l]=this[l]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i&&(o.store=new fr(this.store.data,a),o.services.resourceStore=o.store),o.translator=new Pt(o.services,a),o.translator.on("*",function(l){for(var c=arguments.length,u=new Array(c>1?c-1:0),h=1;h<c;h++)u[h-1]=arguments[h];o.emit(l,...u)}),o.init(a,r),o.translator.options=a,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const q=vt.createInstance();q.createInstance=vt.createInstance;q.createInstance;q.dir;q.init;q.loadResources;q.reloadResources;q.use;q.changeLanguage;q.getFixedT;q.t;q.exists;q.setDefaultNamespace;q.hasLoadedNamespace;q.loadNamespaces;q.loadLanguages;let Be;const Uo=()=>Be,Vo=n=>{ce.onLanguageChange(e=>n.changeLanguage(e))};class Wo{constructor(){this._appName="RMG",this._lng=void 0,this._defaultResources={},this._resources={}}use(e){return q.use(e),this}withAppName(e){return this._appName=e,this}withLng(e){return this._lng=e,this}withDefaultResource(e){return Object.entries(e).forEach(([r,i])=>{this._defaultResources[r]=i}),this}withResource(e,r){return this._resources[e]=r,this}combineResource(){const e={};return Object.entries(this._defaultResources).forEach(([r,i])=>{e[r]={translation:i}}),Object.entries(this._resources).forEach(([r,i])=>{r in e?e[r].translation=Object.assign(Object.assign({},e[r].translation),i):e[r]={translation:i}}),e}build(){return Be=q.createInstance({lng:this._lng,fallbackLng:{"zh-CN":["zh-Hans","zh-Hant","en"],"zh-HK":["zh-Hant","zh-Hans","en"],"zh-TW":["zh-Hant","zh-Hans","en"],default:["en"]},resources:this.combineResource()},(e,r)=>{var i;if(e){console.error("[rmg-runtime] unexpected error occurs while initialising i18n",e);return}document.title=r(this._appName),document.documentElement.lang=(i=this._lng)!==null&&i!==void 0?i:"en"}),Be.on("languageChanged",e=>{document.title=Be.t(this._appName),document.documentElement.lang=e}),Vo(Be),Be}}var ui=globalThis&&globalThis.__awaiter||function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(h){try{u(i.next(h))}catch(d){s(d)}}function c(h){try{u(i.throw(h))}catch(d){s(d)}}function u(h){h.done?o(h.value):a(h.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};let ci=!1;const Ko=()=>ui(void 0,void 0,void 0,function*(){yield ae.loadWithTimeout(),ce.isAnalyticsQADone()?ce.isAllowAnalytics()&&(console.log("[rmg-runtime] User has previously allowed GA"),Tt.init()):me.isStandaloneWindow()&&ae.getComponent()!=="rmg-home"&&(console.warn("[rmg-runtime] App is opened in standalone window but analytics Q&A is not finished. GA will be init by default."),Tt.init()),ci=!0}),Jo=()=>ui(void 0,void 0,void 0,function*(){let n=0;for(;n<=10&&!ci;)yield Xr(1e3),n+=1}),oe={ready:Jo,getAppName:ae.getComponent,getAppVersion:ae.getVersion,getEnv:ae.getEnvironment,getInstance:ae.getInstance,event:Tt.customEvent,isStandaloneWindow:me.isStandaloneWindow,injectUITools:me.injectUITools,openApp:me.openApp,onAppOpen:me.onAppOpen,closeApp:me.closeApp,onAppClose:me.onAppClose,updateUrl:me.updateUrl,onUrlUpdate:me.onUrlUpdate,toggleNavMenu:me.toggleNavMenu,postEvent:ie.postEvent,onMessage:ie.onMessage,setLanguage:ce.setLanguage,getLanguage:ce.getLanguage,onLanguageChange:ce.onLanguageChange,setColourMode:ce.setColourMode,getColourMode:ce.getColourMode,onColourModeChange:ce.onColourModeChange,isAnalyticsQADone:ce.isAnalyticsQADone,isAllowAnalytics:ce.isAllowAnalytics,allowAnalytics:ce.allowAnalytics,getStorageForCurrentApp:cr.getStorageForCurrentApp,clearStorageForCurrentApp:cr.clearStorageForCurrentApp,getMsSinceStartUp:xo.getMsSinceStartUp,I18nBuilder:Wo,getI18nInstance:Uo};Ko().then();window.rmgRuntime=oe;var Wn={exports:{}},Ve=typeof Reflect=="object"?Reflect:null,wr=Ve&&typeof Ve.apply=="function"?Ve.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Ot;Ve&&typeof Ve.ownKeys=="function"?Ot=Ve.ownKeys:Object.getOwnPropertySymbols?Ot=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ot=function(e){return Object.getOwnPropertyNames(e)};function Yo(n){console&&console.warn&&console.warn(n)}var hi=Number.isNaN||function(e){return e!==e};function C(){C.init.call(this)}Wn.exports=C;Wn.exports.once=Qo;C.EventEmitter=C;C.prototype._events=void 0;C.prototype._eventsCount=0;C.prototype._maxListeners=void 0;var xr=10;function Kt(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return xr},set:function(n){if(typeof n!="number"||n<0||hi(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");xr=n}});C.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};C.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||hi(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function di(n){return n._maxListeners===void 0?C.defaultMaxListeners:n._maxListeners}C.prototype.getMaxListeners=function(){return di(this)};C.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var a=e==="error",o=this._events;if(o!==void 0)a=a&&o.error===void 0;else if(!a)return!1;if(a){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var l=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw l.context=s,l}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")wr(c,this,r);else for(var u=c.length,h=yi(c,u),i=0;i<u;++i)wr(h[i],this,r);return!0};function fi(n,e,r,i){var a,o,s;if(Kt(r),o=n._events,o===void 0?(o=n._events=Object.create(null),n._eventsCount=0):(o.newListener!==void 0&&(n.emit("newListener",e,r.listener?r.listener:r),o=n._events),s=o[e]),s===void 0)s=o[e]=r,++n._eventsCount;else if(typeof s=="function"?s=o[e]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),a=di(n),a>0&&s.length>a&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=n,l.type=e,l.count=s.length,Yo(l)}return n}C.prototype.addListener=function(e,r){return fi(this,e,r,!1)};C.prototype.on=C.prototype.addListener;C.prototype.prependListener=function(e,r){return fi(this,e,r,!0)};function qo(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pi(n,e,r){var i={fired:!1,wrapFn:void 0,target:n,type:e,listener:r},a=qo.bind(i);return a.listener=r,i.wrapFn=a,a}C.prototype.once=function(e,r){return Kt(r),this.on(e,pi(this,e,r)),this};C.prototype.prependOnceListener=function(e,r){return Kt(r),this.prependListener(e,pi(this,e,r)),this};C.prototype.removeListener=function(e,r){var i,a,o,s,l;if(Kt(r),a=this._events,a===void 0)return this;if(i=a[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(o=-1,s=i.length-1;s>=0;s--)if(i[s]===r||i[s].listener===r){l=i[s].listener,o=s;break}if(o<0)return this;o===0?i.shift():Zo(i,o),i.length===1&&(a[e]=i[0]),a.removeListener!==void 0&&this.emit("removeListener",e,l||r)}return this};C.prototype.off=C.prototype.removeListener;C.prototype.removeAllListeners=function(e){var r,i,a;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var o=Object.keys(i),s;for(a=0;a<o.length;++a)s=o[a],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function gi(n,e,r){var i=n._events;if(i===void 0)return[];var a=i[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?Xo(a):yi(a,a.length)}C.prototype.listeners=function(e){return gi(this,e,!0)};C.prototype.rawListeners=function(e){return gi(this,e,!1)};C.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):mi.call(n,e)};C.prototype.listenerCount=mi;function mi(n){var e=this._events;if(e!==void 0){var r=e[n];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}C.prototype.eventNames=function(){return this._eventsCount>0?Ot(this._events):[]};function yi(n,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=n[i];return r}function Zo(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Xo(n){for(var e=new Array(n.length),r=0;r<e.length;++r)e[r]=n[r].listener||n[r];return e}function Qo(n,e){return new Promise(function(r,i){function a(s){n.removeListener(e,o),i(s)}function o(){typeof n.removeListener=="function"&&n.removeListener("error",a),r([].slice.call(arguments))}bi(n,e,o,{once:!0}),e!=="error"&&es(n,a,{once:!0})})}function es(n,e,r){typeof n.on=="function"&&bi(n,"error",e,r)}function bi(n,e,r,i){if(typeof n.on=="function")i.once?n.once(e,r):n.on(e,r);else if(typeof n.addEventListener=="function")n.addEventListener(e,function a(o){i.once&&n.removeEventListener(e,a),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var ts=Wn.exports;function be(n){if(typeof n!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=n}typeof Symbol<"u"&&(be.prototype[Symbol.iterator]=function(){return this});be.of=function(){var n=arguments,e=n.length,r=0;return new be(function(){return r>=e?{done:!0}:{done:!1,value:n[r++]}})};be.empty=function(){var n=new be(function(){return{done:!0}});return n};be.fromSequence=function(n){var e=0,r=n.length;return new be(function(){return e>=r?{done:!0}:{done:!1,value:n[e++]}})};be.is=function(n){return n instanceof be?!0:typeof n=="object"&&n!==null&&typeof n.next=="function"};var Kn=be;const de=Fn(Kn);var Jn={};Jn.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Jn.SYMBOL_SUPPORT=typeof Symbol<"u";var ns=Kn,vi=Jn,rs=vi.ARRAY_BUFFER_SUPPORT,is=vi.SYMBOL_SUPPORT;function as(n){return typeof n=="string"||Array.isArray(n)||rs&&ArrayBuffer.isView(n)?ns.fromSequence(n):typeof n!="object"||n===null?null:is&&typeof n[Symbol.iterator]=="function"?n[Symbol.iterator]():typeof n.next=="function"?n:null}var wi=function(e){var r=as(e);if(!r)throw new Error("obliterator: target is not iterable nor a valid iterator.");return r},os=wi,ss=function(e,r){for(var i=arguments.length>1?r:1/0,a=i!==1/0?new Array(i):[],o,s=0,l=os(e);;){if(s===i)return a;if(o=l.next(),o.done)return s!==r&&(a.length=s),a;a[s++]=o.value}};const xi=Fn(ss);var ls=Kn,us=wi,cs=function(){var e=arguments,r=null,i=-1;return new ls(function(){var o=null;do{if(r===null){if(i++,i>=e.length)return{done:!0};r=us(e[i])}if(o=r.next(),o.done===!0){r=null;continue}break}while(!0);return o})};const Ne=Fn(cs);function hs(){const n=arguments[0];for(let e=1,r=arguments.length;e<r;e++)if(arguments[e])for(const i in arguments[e])n[i]=arguments[e][i];return n}let J=hs;typeof Object.assign=="function"&&(J=Object.assign);function he(n,e,r,i){const a=n._nodes.get(e);let o=null;return a&&(i==="mixed"?o=a.out&&a.out[r]||a.undirected&&a.undirected[r]:i==="directed"?o=a.out&&a.out[r]:o=a.undirected&&a.undirected[r]),o}function Y(n){return typeof n=="object"&&n!==null&&n.constructor===Object}function Si(n){let e;for(e in n)return!1;return!0}function le(n,e,r){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:r})}function pe(n,e,r){const i={enumerable:!0,configurable:!0};typeof r=="function"?i.get=r:(i.value=r,i.writable=!1),Object.defineProperty(n,e,i)}function Sr(n){return!(!Y(n)||n.attributes&&!Array.isArray(n.attributes))}function ds(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class Yn extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class E extends Yn{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,E.prototype.constructor)}}class x extends Yn{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,x.prototype.constructor)}}class H extends Yn{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,H.prototype.constructor)}}function Ni(n,e){this.key=n,this.attributes=e,this.clear()}Ni.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function zi(n,e){this.key=n,this.attributes=e,this.clear()}zi.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Ei(n,e){this.key=n,this.attributes=e,this.clear()}Ei.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function qe(n,e,r,i,a){this.key=e,this.attributes=a,this.undirected=n,this.source=r,this.target=i}qe.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const r=this.source.key,i=this.target.key;this.source[n][i]=this,!(this.undirected&&r===i)&&(this.target[e][r]=this)};qe.prototype.attachMulti=function(){let n="out",e="in";const r=this.source.key,i=this.target.key;this.undirected&&(n=e="undirected");const a=this.source[n],o=a[i];if(typeof o>"u"){a[i]=this,this.undirected&&r===i||(this.target[e][r]=this);return}o.previous=this,this.next=o,a[i]=this,this.target[e][r]=this};qe.prototype.detach=function(){const n=this.source.key,e=this.target.key;let r="out",i="in";this.undirected&&(r=i="undirected"),delete this.source[r][e],delete this.target[i][n]};qe.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let r="out",i="in";this.undirected&&(r=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[r][e],delete this.target[i][n]):(this.next.previous=void 0,this.source[r][e]=this.next,this.target[i][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const ki=0,Ai=1,fs=2,Ri=3;function Ee(n,e,r,i,a,o,s){let l,c,u,h;if(i=""+i,r===ki){if(l=n._nodes.get(i),!l)throw new x(`Graph.${e}: could not find the "${i}" node in the graph.`);u=a,h=o}else if(r===Ri){if(a=""+a,c=n._edges.get(a),!c)throw new x(`Graph.${e}: could not find the "${a}" edge in the graph.`);const d=c.source.key,f=c.target.key;if(i===d)l=c.target;else if(i===f)l=c.source;else throw new x(`Graph.${e}: the "${i}" node is not attached to the "${a}" edge (${d}, ${f}).`);u=o,h=s}else{if(c=n._edges.get(i),!c)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`);r===Ai?l=c.source:l=c.target,u=a,h=o}return[l,u,h]}function ps(n,e,r){n.prototype[e]=function(i,a,o){const[s,l]=Ee(this,e,r,i,a,o);return s.attributes[l]}}function gs(n,e,r){n.prototype[e]=function(i,a){const[o]=Ee(this,e,r,i,a);return o.attributes}}function ms(n,e,r){n.prototype[e]=function(i,a,o){const[s,l]=Ee(this,e,r,i,a,o);return s.attributes.hasOwnProperty(l)}}function ys(n,e,r){n.prototype[e]=function(i,a,o,s){const[l,c,u]=Ee(this,e,r,i,a,o,s);return l.attributes[c]=u,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:c}),this}}function bs(n,e,r){n.prototype[e]=function(i,a,o,s){const[l,c,u]=Ee(this,e,r,i,a,o,s);if(typeof u!="function")throw new E(`Graph.${e}: updater should be a function.`);const h=l.attributes,d=u(h[c]);return h[c]=d,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:c}),this}}function vs(n,e,r){n.prototype[e]=function(i,a,o){const[s,l]=Ee(this,e,r,i,a,o);return delete s.attributes[l],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:l}),this}}function ws(n,e,r){n.prototype[e]=function(i,a,o){const[s,l]=Ee(this,e,r,i,a,o);if(!Y(l))throw new E(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=l,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function xs(n,e,r){n.prototype[e]=function(i,a,o){const[s,l]=Ee(this,e,r,i,a,o);if(!Y(l))throw new E(`Graph.${e}: provided attributes are not a plain object.`);return J(s.attributes,l),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:l}),this}}function Ss(n,e,r){n.prototype[e]=function(i,a,o){const[s,l]=Ee(this,e,r,i,a,o);if(typeof l!="function")throw new E(`Graph.${e}: provided updater is not a function.`);return s.attributes=l(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Ns=[{name:n=>`get${n}Attribute`,attacher:ps},{name:n=>`get${n}Attributes`,attacher:gs},{name:n=>`has${n}Attribute`,attacher:ms},{name:n=>`set${n}Attribute`,attacher:ys},{name:n=>`update${n}Attribute`,attacher:bs},{name:n=>`remove${n}Attribute`,attacher:vs},{name:n=>`replace${n}Attributes`,attacher:ws},{name:n=>`merge${n}Attributes`,attacher:xs},{name:n=>`update${n}Attributes`,attacher:Ss}];function zs(n){Ns.forEach(function({name:e,attacher:r}){r(n,e("Node"),ki),r(n,e("Source"),Ai),r(n,e("Target"),fs),r(n,e("Opposite"),Ri)})}function Es(n,e,r){n.prototype[e]=function(i,a){let o;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new H(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,l=""+a;if(a=arguments[2],o=he(this,s,l,r),!o)throw new x(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(r!=="mixed")throw new H(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[a]}}function ks(n,e,r){n.prototype[e]=function(i){let a;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new H(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new H(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+arguments[1];if(a=he(this,o,s,r),!a)throw new x(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(r!=="mixed")throw new H(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,a=this._edges.get(i),!a)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return a.attributes}}function As(n,e,r){n.prototype[e]=function(i,a){let o;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new H(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,l=""+a;if(a=arguments[2],o=he(this,s,l,r),!o)throw new x(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(r!=="mixed")throw new H(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes.hasOwnProperty(a)}}function Rs(n,e,r){n.prototype[e]=function(i,a,o){let s;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new H(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new H(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,c=""+a;if(a=arguments[2],o=arguments[3],s=he(this,l,c,r),!s)throw new x(`Graph.${e}: could not find an edge for the given path ("${l}" - "${c}").`)}else{if(r!=="mixed")throw new H(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[a]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:a}),this}}function Os(n,e,r){n.prototype[e]=function(i,a,o){let s;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new H(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new H(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,c=""+a;if(a=arguments[2],o=arguments[3],s=he(this,l,c,r),!s)throw new x(`Graph.${e}: could not find an edge for the given path ("${l}" - "${c}").`)}else{if(r!=="mixed")throw new H(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof o!="function")throw new E(`Graph.${e}: updater should be a function.`);return s.attributes[a]=o(s.attributes[a]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:a}),this}}function _s(n,e,r){n.prototype[e]=function(i,a){let o;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new H(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,l=""+a;if(a=arguments[2],o=he(this,s,l,r),!o)throw new x(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(r!=="mixed")throw new H(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete o.attributes[a],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Ts(n,e,r){n.prototype[e]=function(i,a){let o;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new H(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,l=""+a;if(a=arguments[2],o=he(this,s,l,r),!o)throw new x(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(r!=="mixed")throw new H(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Y(a))throw new E(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Ls(n,e,r){n.prototype[e]=function(i,a){let o;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new H(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,l=""+a;if(a=arguments[2],o=he(this,s,l,r),!o)throw new x(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(r!=="mixed")throw new H(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Y(a))throw new E(`Graph.${e}: provided attributes are not a plain object.`);return J(o.attributes,a),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function js(n,e,r){n.prototype[e]=function(i,a){let o;if(this.type!=="mixed"&&r!=="mixed"&&r!==this.type)throw new H(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,l=""+a;if(a=arguments[2],o=he(this,s,l,r),!o)throw new x(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(r!=="mixed")throw new H(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new x(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof a!="function")throw new E(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Hs=[{name:n=>`get${n}Attribute`,attacher:Es},{name:n=>`get${n}Attributes`,attacher:ks},{name:n=>`has${n}Attribute`,attacher:As},{name:n=>`set${n}Attribute`,attacher:Rs},{name:n=>`update${n}Attribute`,attacher:Os},{name:n=>`remove${n}Attribute`,attacher:_s},{name:n=>`replace${n}Attributes`,attacher:Ts},{name:n=>`merge${n}Attributes`,attacher:Ls},{name:n=>`update${n}Attributes`,attacher:js}];function $s(n){Hs.forEach(function({name:e,attacher:r}){r(n,e("Edge"),"mixed"),r(n,e("DirectedEdge"),"directed"),r(n,e("UndirectedEdge"),"undirected")})}const Ms=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Ps(n,e,r,i){let a=!1;for(const o in e){if(o===i)continue;const s=e[o];if(a=r(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),n&&a)return s.key}}function Fs(n,e,r,i){let a,o,s,l=!1;for(const c in e)if(c!==i){a=e[c];do{if(o=a.source,s=a.target,l=r(a.key,a.attributes,o.key,s.key,o.attributes,s.attributes,a.undirected),n&&l)return a.key;a=a.next}while(a!==void 0)}}function pn(n,e){const r=Object.keys(n),i=r.length;let a,o=0;return new de(function(){do if(a)a=a.next;else{if(o>=i)return{done:!0};const l=r[o++];if(l===e){a=void 0;continue}a=n[l]}while(!a);return{done:!1,value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected}}})}function Cs(n,e,r,i){const a=e[r];if(!a)return;const o=a.source,s=a.target;if(i(a.key,a.attributes,o.key,s.key,o.attributes,s.attributes,a.undirected)&&n)return a.key}function Ds(n,e,r,i){let a=e[r];if(!a)return;let o=!1;do{if(o=i(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),n&&o)return a.key;a=a.next}while(a!==void 0)}function gn(n,e){let r=n[e];return r.next!==void 0?new de(function(){if(!r)return{done:!0};const i={edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected};return r=r.next,{done:!1,value:i}}):de.of({edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected})}function Is(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):xi(n._edges.keys(),n._edges.size);const r=e==="undirected"?n.undirectedSize:n.directedSize,i=new Array(r),a=e==="undirected",o=n._edges.values();let s=0,l,c;for(;l=o.next(),l.done!==!0;)c=l.value,c.undirected===a&&(i[s++]=c.key);return i}function Oi(n,e,r,i){if(e.size===0)return;const a=r!=="mixed"&&r!==e.type,o=r==="undirected";let s,l,c=!1;const u=e._edges.values();for(;s=u.next(),s.done!==!0;){if(l=s.value,a&&l.undirected!==o)continue;const{key:h,attributes:d,source:f,target:m}=l;if(c=i(h,d,f.key,m.key,f.attributes,m.attributes,l.undirected),n&&c)return h}}function Bs(n,e){if(n.size===0)return de.empty();const r=e!=="mixed"&&e!==n.type,i=e==="undirected",a=n._edges.values();return new de(function(){let s,l;for(;;){if(s=a.next(),s.done)return s;if(l=s.value,!(r&&l.undirected!==i))break}return{value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected},done:!1}})}function qn(n,e,r,i,a,o){const s=e?Fs:Ps;let l;if(r!=="undirected"&&(i!=="out"&&(l=s(n,a.in,o),n&&l)||i!=="in"&&(l=s(n,a.out,o,i?void 0:a.key),n&&l))||r!=="directed"&&(l=s(n,a.undirected,o),n&&l))return l}function Gs(n,e,r,i){const a=[];return qn(!1,n,e,r,i,function(o){a.push(o)}),a}function Us(n,e,r){let i=de.empty();return n!=="undirected"&&(e!=="out"&&typeof r.in<"u"&&(i=Ne(i,pn(r.in))),e!=="in"&&typeof r.out<"u"&&(i=Ne(i,pn(r.out,e?void 0:r.key)))),n!=="directed"&&typeof r.undirected<"u"&&(i=Ne(i,pn(r.undirected))),i}function Zn(n,e,r,i,a,o,s){const l=r?Ds:Cs;let c;if(e!=="undirected"&&(typeof a.in<"u"&&i!=="out"&&(c=l(n,a.in,o,s),n&&c)||typeof a.out<"u"&&i!=="in"&&(i||a.key!==o)&&(c=l(n,a.out,o,s),n&&c))||e!=="directed"&&typeof a.undirected<"u"&&(c=l(n,a.undirected,o,s),n&&c))return c}function Vs(n,e,r,i,a){const o=[];return Zn(!1,n,e,r,i,a,function(s){o.push(s)}),o}function Ws(n,e,r,i){let a=de.empty();return n!=="undirected"&&(typeof r.in<"u"&&e!=="out"&&i in r.in&&(a=Ne(a,gn(r.in,i))),typeof r.out<"u"&&e!=="in"&&i in r.out&&(e||r.key!==i)&&(a=Ne(a,gn(r.out,i)))),n!=="directed"&&typeof r.undirected<"u"&&i in r.undirected&&(a=Ne(a,gn(r.undirected,i))),a}function Ks(n,e){const{name:r,type:i,direction:a}=e;n.prototype[r]=function(o,s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Is(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(typeof l>"u")throw new x(`Graph.${r}: could not find the "${o}" node in the graph.`);return Gs(this.multi,i==="mixed"?this.type:i,a,l)}if(arguments.length===2){o=""+o,s=""+s;const l=this._nodes.get(o);if(!l)throw new x(`Graph.${r}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new x(`Graph.${r}:  could not find the "${s}" target node in the graph.`);return Vs(i,this.multi,a,l,s)}throw new E(`Graph.${r}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Js(n,e){const{name:r,type:i,direction:a}=e,o="forEach"+r[0].toUpperCase()+r.slice(1,-1);n.prototype[o]=function(u,h,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,Oi(!1,this,i,d);if(arguments.length===2){u=""+u,d=h;const f=this._nodes.get(u);if(typeof f>"u")throw new x(`Graph.${o}: could not find the "${u}" node in the graph.`);return qn(!1,this.multi,i==="mixed"?this.type:i,a,f,d)}if(arguments.length===3){u=""+u,h=""+h;const f=this._nodes.get(u);if(!f)throw new x(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(h))throw new x(`Graph.${o}:  could not find the "${h}" target node in the graph.`);return Zn(!1,i,this.multi,a,f,h,d)}throw new E(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+r[0].toUpperCase()+r.slice(1);n.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop();let d;if(u.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let m=0;u.push((b,v,N,z,k,A,R)=>{d[m++]=h(b,v,N,z,k,A,R)})}else d=[],u.push((f,m,b,v,N,z,k)=>{d.push(h(f,m,b,v,N,z,k))});return this[o].apply(this,u),d};const l="filter"+r[0].toUpperCase()+r.slice(1);n.prototype[l]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop(),d=[];return u.push((f,m,b,v,N,z,k)=>{h(f,m,b,v,N,z,k)&&d.push(f)}),this[o].apply(this,u),d};const c="reduce"+r[0].toUpperCase()+r.slice(1);n.prototype[c]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new E(`Graph.${c}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new E(`Graph.${c}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h,d;u.length===2?(h=u[0],d=u[1],u=[]):u.length===3?(h=u[1],d=u[2],u=[u[0]]):u.length===4&&(h=u[2],d=u[3],u=[u[0],u[1]]);let f=d;return u.push((m,b,v,N,z,k,A)=>{f=h(f,m,b,v,N,z,k,A)}),this[o].apply(this,u),f}}function Ys(n,e){const{name:r,type:i,direction:a}=e,o="find"+r[0].toUpperCase()+r.slice(1,-1);n.prototype[o]=function(c,u,h){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return h=c,Oi(!0,this,i,h);if(arguments.length===2){c=""+c,h=u;const d=this._nodes.get(c);if(typeof d>"u")throw new x(`Graph.${o}: could not find the "${c}" node in the graph.`);return qn(!0,this.multi,i==="mixed"?this.type:i,a,d,h)}if(arguments.length===3){c=""+c,u=""+u;const d=this._nodes.get(c);if(!d)throw new x(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new x(`Graph.${o}:  could not find the "${u}" target node in the graph.`);return Zn(!0,i,this.multi,a,d,u,h)}throw new E(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+r[0].toUpperCase()+r.slice(1,-1);n.prototype[s]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();return c.push((d,f,m,b,v,N,z)=>u(d,f,m,b,v,N,z)),!!this[o].apply(this,c)};const l="every"+r[0].toUpperCase()+r.slice(1,-1);n.prototype[l]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();return c.push((d,f,m,b,v,N,z)=>!u(d,f,m,b,v,N,z)),!this[o].apply(this,c)}}function qs(n,e){const{name:r,type:i,direction:a}=e,o=r.slice(0,-1)+"Entries";n.prototype[o]=function(s,l){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return de.empty();if(!arguments.length)return Bs(this,i);if(arguments.length===1){s=""+s;const c=this._nodes.get(s);if(!c)throw new x(`Graph.${o}: could not find the "${s}" node in the graph.`);return Us(i,a,c)}if(arguments.length===2){s=""+s,l=""+l;const c=this._nodes.get(s);if(!c)throw new x(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(l))throw new x(`Graph.${o}:  could not find the "${l}" target node in the graph.`);return Ws(i,a,c,l)}throw new E(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Zs(n){Ms.forEach(e=>{Ks(n,e),Js(n,e),Ys(n,e),qs(n,e)})}const Xs=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Jt(){this.A=null,this.B=null}Jt.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};Jt.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function it(n,e,r,i,a){for(const o in i){const s=i[o],l=s.source,c=s.target,u=l===r?c:l;if(e&&e.has(u.key))continue;const h=a(u.key,u.attributes);if(n&&h)return u.key}}function Xn(n,e,r,i,a){if(e!=="mixed"){if(e==="undirected")return it(n,null,i,i.undirected,a);if(typeof r=="string")return it(n,null,i,i[r],a)}const o=new Jt;let s;if(e!=="undirected"){if(r!=="out"){if(s=it(n,null,i,i.in,a),n&&s)return s;o.wrap(i.in)}if(r!=="in"){if(s=it(n,o,i,i.out,a),n&&s)return s;o.wrap(i.out)}}if(e!=="directed"&&(s=it(n,o,i,i.undirected,a),n&&s))return s}function Qs(n,e,r){if(n!=="mixed"){if(n==="undirected")return Object.keys(r.undirected);if(typeof e=="string")return Object.keys(r[e])}const i=[];return Xn(!1,n,e,r,function(a){i.push(a)}),i}function at(n,e,r){const i=Object.keys(r),a=i.length;let o=0;return new de(function(){let l=null;do{if(o>=a)return n&&n.wrap(r),{done:!0};const c=r[i[o++]],u=c.source,h=c.target;if(l=u===e?h:u,n&&n.has(l.key)){l=null;continue}}while(l===null);return{done:!1,value:{neighbor:l.key,attributes:l.attributes}}})}function el(n,e,r){if(n!=="mixed"){if(n==="undirected")return at(null,r,r.undirected);if(typeof e=="string")return at(null,r,r[e])}let i=de.empty();const a=new Jt;return n!=="undirected"&&(e!=="out"&&(i=Ne(i,at(a,r,r.in))),e!=="in"&&(i=Ne(i,at(a,r,r.out)))),n!=="directed"&&(i=Ne(i,at(a,r,r.undirected))),i}function tl(n,e){const{name:r,type:i,direction:a}=e;n.prototype[r]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new x(`Graph.${r}: could not find the "${o}" node in the graph.`);return Qs(i==="mixed"?this.type:i,a,s)}}function nl(n,e){const{name:r,type:i,direction:a}=e,o="forEach"+r[0].toUpperCase()+r.slice(1,-1);n.prototype[o]=function(u,h){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new x(`Graph.${o}: could not find the "${u}" node in the graph.`);Xn(!1,i==="mixed"?this.type:i,a,d,h)};const s="map"+r[0].toUpperCase()+r.slice(1);n.prototype[s]=function(u,h){const d=[];return this[o](u,(f,m)=>{d.push(h(f,m))}),d};const l="filter"+r[0].toUpperCase()+r.slice(1);n.prototype[l]=function(u,h){const d=[];return this[o](u,(f,m)=>{h(f,m)&&d.push(f)}),d};const c="reduce"+r[0].toUpperCase()+r.slice(1);n.prototype[c]=function(u,h,d){if(arguments.length<3)throw new E(`Graph.${c}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[o](u,(m,b)=>{f=h(f,m,b)}),f}}function rl(n,e){const{name:r,type:i,direction:a}=e,o=r[0].toUpperCase()+r.slice(1,-1),s="find"+o;n.prototype[s]=function(u,h){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new x(`Graph.${s}: could not find the "${u}" node in the graph.`);return Xn(!0,i==="mixed"?this.type:i,a,d,h)};const l="some"+o;n.prototype[l]=function(u,h){return!!this[s](u,h)};const c="every"+o;n.prototype[c]=function(u,h){return!this[s](u,(f,m)=>!h(f,m))}}function il(n,e){const{name:r,type:i,direction:a}=e,o=r.slice(0,-1)+"Entries";n.prototype[o]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return de.empty();s=""+s;const l=this._nodes.get(s);if(typeof l>"u")throw new x(`Graph.${o}: could not find the "${s}" node in the graph.`);return el(i==="mixed"?this.type:i,a,l)}}function al(n){Xs.forEach(e=>{tl(n,e),nl(n,e),rl(n,e),il(n,e)})}function Et(n,e,r,i,a){const o=i._nodes.values(),s=i.type;let l,c,u,h,d,f,m;for(;l=o.next(),l.done!==!0;){let b=!1;if(c=l.value,s!=="undirected"){h=c.out;for(u in h){d=h[u];do{if(f=d.target,b=!0,m=a(c.key,f.key,c.attributes,f.attributes,d.key,d.attributes,d.undirected),n&&m)return d;d=d.next}while(d)}}if(s!=="directed"){h=c.undirected;for(u in h)if(!(e&&c.key>u)){d=h[u];do{if(f=d.target,f.key!==u&&(f=d.source),b=!0,m=a(c.key,f.key,c.attributes,f.attributes,d.key,d.attributes,d.undirected),n&&m)return d;d=d.next}while(d)}}if(r&&!b&&(m=a(c.key,null,c.attributes,null,null,null,null),n&&m))return null}}function ol(n,e){const r={key:n};return Si(e.attributes)||(r.attributes=J({},e.attributes)),r}function sl(n,e,r){const i={key:e,source:r.source.key,target:r.target.key};return Si(r.attributes)||(i.attributes=J({},r.attributes)),n==="mixed"&&r.undirected&&(i.undirected=!0),i}function ll(n){if(!Y(n))throw new E('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new E("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Y(n.attributes)||n.attributes===null))throw new E("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function ul(n){if(!Y(n))throw new E('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new E("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new E("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Y(n.attributes)||n.attributes===null))throw new E("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new E("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const cl=ds(),hl=new Set(["directed","undirected","mixed"]),Nr=new Set(["domain","_events","_eventsCount","_maxListeners"]),dl=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],fl={allowSelfLoops:!0,multi:!1,type:"mixed"};function pl(n,e,r){if(r&&!Y(r))throw new E(`Graph.addNode: invalid attributes. Expecting an object but got "${r}"`);if(e=""+e,r=r||{},n._nodes.has(e))throw new H(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new n.NodeDataClass(e,r);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:r}),i}function zr(n,e,r){const i=new n.NodeDataClass(e,r);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:r}),i}function _i(n,e,r,i,a,o,s,l){if(!i&&n.type==="undirected")throw new H(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new H(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!Y(l))throw new E(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`);if(o=""+o,s=""+s,l=l||{},!n.allowSelfLoops&&o===s)throw new H(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const c=n._nodes.get(o),u=n._nodes.get(s);if(!c)throw new x(`Graph.${e}: source node "${o}" not found.`);if(!u)throw new x(`Graph.${e}: target node "${s}" not found.`);const h={key:null,undirected:i,source:o,target:s,attributes:l};if(r)a=n._edgeKeyGenerator();else if(a=""+a,n._edges.has(a))throw new H(`Graph.${e}: the "${a}" edge already exists in the graph.`);if(!n.multi&&(i?typeof c.undirected[s]<"u":typeof c.out[s]<"u"))throw new H(`Graph.${e}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new qe(i,a,c,u,l);n._edges.set(a,d);const f=o===s;return i?(c.undirectedDegree++,u.undirectedDegree++,f&&(c.undirectedLoops++,n._undirectedSelfLoopCount++)):(c.outDegree++,u.inDegree++,f&&(c.directedLoops++,n._directedSelfLoopCount++)),n.multi?d.attachMulti():d.attach(),i?n._undirectedSize++:n._directedSize++,h.key=a,n.emit("edgeAdded",h),a}function gl(n,e,r,i,a,o,s,l,c){if(!i&&n.type==="undirected")throw new H(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new H(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(c){if(typeof l!="function")throw new E(`Graph.${e}: invalid updater function. Expecting a function but got "${l}"`)}else if(!Y(l))throw new E(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`)}o=""+o,s=""+s;let u;if(c&&(u=l,l=void 0),!n.allowSelfLoops&&o===s)throw new H(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let h=n._nodes.get(o),d=n._nodes.get(s),f,m;if(!r&&(f=n._edges.get(a),f)){if((f.source.key!==o||f.target.key!==s)&&(!i||f.source.key!==s||f.target.key!==o))throw new H(`Graph.${e}: inconsistency detected when attempting to merge the "${a}" edge with "${o}" source & "${s}" target vs. ("${f.source.key}", "${f.target.key}").`);m=f}if(!m&&!n.multi&&h&&(m=i?h.undirected[s]:h.out[s]),m){const k=[m.key,!1,!1,!1];if(c?!u:!l)return k;if(c){const A=m.attributes;m.attributes=u(A),n.emit("edgeAttributesUpdated",{type:"replace",key:m.key,attributes:m.attributes})}else J(m.attributes,l),n.emit("edgeAttributesUpdated",{type:"merge",key:m.key,attributes:m.attributes,data:l});return k}l=l||{},c&&u&&(l=u(l));const b={key:null,undirected:i,source:o,target:s,attributes:l};if(r)a=n._edgeKeyGenerator();else if(a=""+a,n._edges.has(a))throw new H(`Graph.${e}: the "${a}" edge already exists in the graph.`);let v=!1,N=!1;h||(h=zr(n,o,{}),v=!0,o===s&&(d=h,N=!0)),d||(d=zr(n,s,{}),N=!0),f=new qe(i,a,h,d,l),n._edges.set(a,f);const z=o===s;return i?(h.undirectedDegree++,d.undirectedDegree++,z&&(h.undirectedLoops++,n._undirectedSelfLoopCount++)):(h.outDegree++,d.inDegree++,z&&(h.directedLoops++,n._directedSelfLoopCount++)),n.multi?f.attachMulti():f.attach(),i?n._undirectedSize++:n._directedSize++,b.key=a,n.emit("edgeAdded",b),[a,!0,v,N]}function De(n,e){n._edges.delete(e.key);const{source:r,target:i,attributes:a}=e,o=e.undirected,s=r===i;o?(r.undirectedDegree--,i.undirectedDegree--,s&&(r.undirectedLoops--,n._undirectedSelfLoopCount--)):(r.outDegree--,i.inDegree--,s&&(r.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),o?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:a,source:r.key,target:i.key,undirected:o})}class G extends ts.EventEmitter{constructor(e){if(super(),e=J({},fl,e),typeof e.multi!="boolean")throw new E(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!hl.has(e.type))throw new E(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new E(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const r=e.type==="mixed"?Ni:e.type==="directed"?zi:Ei;le(this,"NodeDataClass",r);const i="geid_"+cl()+"_";let a=0;const o=()=>{let s;do s=i+a++;while(this._edges.has(s));return s};le(this,"_attributes",{}),le(this,"_nodes",new Map),le(this,"_edges",new Map),le(this,"_directedSize",0),le(this,"_undirectedSize",0),le(this,"_directedSelfLoopCount",0),le(this,"_undirectedSelfLoopCount",0),le(this,"_edgeKeyGenerator",o),le(this,"_options",e),Nr.forEach(s=>le(this,s,this[s])),pe(this,"order",()=>this._nodes.size),pe(this,"size",()=>this._edges.size),pe(this,"directedSize",()=>this._directedSize),pe(this,"undirectedSize",()=>this._undirectedSize),pe(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),pe(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),pe(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),pe(this,"multi",this._options.multi),pe(this,"type",this._options.type),pe(this,"allowSelfLoops",this._options.allowSelfLoops),pe(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,r){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,a=this._edges.get(i);return!!a&&!a.undirected}else if(arguments.length===2){e=""+e,r=""+r;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(r):!1}throw new E(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,r){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,a=this._edges.get(i);return!!a&&a.undirected}else if(arguments.length===2){e=""+e,r=""+r;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(r):!1}throw new E(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,r){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,r=""+r;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(r)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(r):!1}throw new E(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,r){if(this.type==="undirected")return;if(e=""+e,r=""+r,this.multi)throw new H("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new x(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(r))throw new x(`Graph.directedEdge: could not find the "${r}" target node in the graph.`);const a=i.out&&i.out[r]||void 0;if(a)return a.key}undirectedEdge(e,r){if(this.type==="directed")return;if(e=""+e,r=""+r,this.multi)throw new H("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new x(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(r))throw new x(`Graph.undirectedEdge: could not find the "${r}" target node in the graph.`);const a=i.undirected&&i.undirected[r]||void 0;if(a)return a.key}edge(e,r){if(this.multi)throw new H("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,r=""+r;const i=this._nodes.get(e);if(!i)throw new x(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(r))throw new x(`Graph.edge: could not find the "${r}" target node in the graph.`);const a=i.out&&i.out[r]||i.undirected&&i.undirected[r]||void 0;if(a)return a.key}areDirectedNeighbors(e,r){e=""+e,r=""+r;const i=this._nodes.get(e);if(!i)throw new x(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:r in i.in||r in i.out}areOutNeighbors(e,r){e=""+e,r=""+r;const i=this._nodes.get(e);if(!i)throw new x(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:r in i.out}areInNeighbors(e,r){e=""+e,r=""+r;const i=this._nodes.get(e);if(!i)throw new x(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:r in i.in}areUndirectedNeighbors(e,r){e=""+e,r=""+r;const i=this._nodes.get(e);if(!i)throw new x(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:r in i.undirected}areNeighbors(e,r){e=""+e,r=""+r;const i=this._nodes.get(e);if(!i)throw new x(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(r in i.in||r in i.out)||this.type!=="directed"&&r in i.undirected}areInboundNeighbors(e,r){e=""+e,r=""+r;const i=this._nodes.get(e);if(!i)throw new x(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&r in i.in||this.type!=="directed"&&r in i.undirected}areOutboundNeighbors(e,r){e=""+e,r=""+r;const i=this._nodes.get(e);if(!i)throw new x(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&r in i.out||this.type!=="directed"&&r in i.undirected}inDegree(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:r.inDegree}outDegree(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:r.outDegree}directedDegree(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:r.inDegree+r.outDegree}undirectedDegree(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:r.undirectedDegree}inboundDegree(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=r.undirectedDegree),this.type!=="undirected"&&(i+=r.inDegree),i}outboundDegree(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=r.undirectedDegree),this.type!=="undirected"&&(i+=r.outDegree),i}degree(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=r.undirectedDegree),this.type!=="undirected"&&(i+=r.inDegree+r.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:r.inDegree-r.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:r.outDegree-r.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:r.inDegree+r.outDegree-r.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:r.undirectedDegree-r.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,a=0;return this.type!=="directed"&&(i+=r.undirectedDegree,a+=r.undirectedLoops*2),this.type!=="undirected"&&(i+=r.inDegree,a+=r.directedLoops),i-a}outboundDegreeWithoutSelfLoops(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,a=0;return this.type!=="directed"&&(i+=r.undirectedDegree,a+=r.undirectedLoops*2),this.type!=="undirected"&&(i+=r.outDegree,a+=r.directedLoops),i-a}degreeWithoutSelfLoops(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,a=0;return this.type!=="directed"&&(i+=r.undirectedDegree,a+=r.undirectedLoops*2),this.type!=="undirected"&&(i+=r.inDegree+r.outDegree,a+=r.directedLoops*2),i-a}source(e){e=""+e;const r=this._edges.get(e);if(!r)throw new x(`Graph.source: could not find the "${e}" edge in the graph.`);return r.source.key}target(e){e=""+e;const r=this._edges.get(e);if(!r)throw new x(`Graph.target: could not find the "${e}" edge in the graph.`);return r.target.key}extremities(e){e=""+e;const r=this._edges.get(e);if(!r)throw new x(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[r.source.key,r.target.key]}opposite(e,r){e=""+e,r=""+r;const i=this._edges.get(r);if(!i)throw new x(`Graph.opposite: could not find the "${r}" edge in the graph.`);const a=i.source.key,o=i.target.key;if(e===a)return o;if(e===o)return a;throw new x(`Graph.opposite: the "${e}" node is not attached to the "${r}" edge (${a}, ${o}).`)}hasExtremity(e,r){e=""+e,r=""+r;const i=this._edges.get(e);if(!i)throw new x(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===r||i.target.key===r}isUndirected(e){e=""+e;const r=this._edges.get(e);if(!r)throw new x(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return r.undirected}isDirected(e){e=""+e;const r=this._edges.get(e);if(!r)throw new x(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!r.undirected}isSelfLoop(e){e=""+e;const r=this._edges.get(e);if(!r)throw new x(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return r.source===r.target}addNode(e,r){return pl(this,e,r).key}mergeNode(e,r){if(r&&!Y(r))throw new E(`Graph.mergeNode: invalid attributes. Expecting an object but got "${r}"`);e=""+e,r=r||{};let i=this._nodes.get(e);return i?(r&&(J(i.attributes,r),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:r})),[e,!1]):(i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0])}updateNode(e,r){if(r&&typeof r!="function")throw new E(`Graph.updateNode: invalid updater function. Expecting a function but got "${r}"`);e=""+e;let i=this._nodes.get(e);if(i){if(r){const o=i.attributes;i.attributes=r(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const a=r?r({}):{};return i=new this.NodeDataClass(e,a),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:a}),[e,!0]}dropNode(e){e=""+e;const r=this._nodes.get(e);if(!r)throw new x(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const a in r.out){i=r.out[a];do De(this,i),i=i.next;while(i)}for(const a in r.in){i=r.in[a];do De(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const a in r.undirected){i=r.undirected[a];do De(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:r.attributes})}dropEdge(e){let r;if(arguments.length>1){const i=""+arguments[0],a=""+arguments[1];if(r=he(this,i,a,this.type),!r)throw new x(`Graph.dropEdge: could not find the "${i}" -> "${a}" edge in the graph.`)}else if(e=""+e,r=this._edges.get(e),!r)throw new x(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return De(this,r),this}dropDirectedEdge(e,r){if(arguments.length<2)throw new H("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new H("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,r=""+r;const i=he(this,e,r,"directed");if(!i)throw new x(`Graph.dropDirectedEdge: could not find a "${e}" -> "${r}" edge in the graph.`);return De(this,i),this}dropUndirectedEdge(e,r){if(arguments.length<2)throw new H("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new H("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=he(this,e,r,"undirected");if(!i)throw new x(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${r}" edge in the graph.`);return De(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let r;for(;r=e.next(),r.done!==!0;)r.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,r){return this._attributes[e]=r,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,r){if(typeof r!="function")throw new E("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=r(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Y(e))throw new E("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Y(e))throw new E("Graph.mergeAttributes: provided attributes are not a plain object.");return J(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new E("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,r){if(typeof e!="function")throw new E("Graph.updateEachNodeAttributes: expecting an updater function.");if(r&&!Sr(r))throw new E("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let a,o;for(;a=i.next(),a.done!==!0;)o=a.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:r||null})}updateEachEdgeAttributes(e,r){if(typeof e!="function")throw new E("Graph.updateEachEdgeAttributes: expecting an updater function.");if(r&&!Sr(r))throw new E("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let a,o,s,l;for(;a=i.next(),a.done!==!0;)o=a.value,s=o.source,l=o.target,o.attributes=e(o.key,o.attributes,s.key,l.key,s.attributes,l.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:r||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new E("Graph.forEachAdjacencyEntry: expecting a callback.");Et(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new E("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Et(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new E("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Et(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new E("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Et(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):xi(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new E("Graph.forEachNode: expecting a callback.");const r=this._nodes.values();let i,a;for(;i=r.next(),i.done!==!0;)a=i.value,e(a.key,a.attributes)}findNode(e){if(typeof e!="function")throw new E("Graph.findNode: expecting a callback.");const r=this._nodes.values();let i,a;for(;i=r.next(),i.done!==!0;)if(a=i.value,e(a.key,a.attributes))return a.key}mapNodes(e){if(typeof e!="function")throw new E("Graph.mapNode: expecting a callback.");const r=this._nodes.values();let i,a;const o=new Array(this.order);let s=0;for(;i=r.next(),i.done!==!0;)a=i.value,o[s++]=e(a.key,a.attributes);return o}someNode(e){if(typeof e!="function")throw new E("Graph.someNode: expecting a callback.");const r=this._nodes.values();let i,a;for(;i=r.next(),i.done!==!0;)if(a=i.value,e(a.key,a.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new E("Graph.everyNode: expecting a callback.");const r=this._nodes.values();let i,a;for(;i=r.next(),i.done!==!0;)if(a=i.value,!e(a.key,a.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new E("Graph.filterNodes: expecting a callback.");const r=this._nodes.values();let i,a;const o=[];for(;i=r.next(),i.done!==!0;)a=i.value,e(a.key,a.attributes)&&o.push(a.key);return o}reduceNodes(e,r){if(typeof e!="function")throw new E("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new E("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=r;const a=this._nodes.values();let o,s;for(;o=a.next(),o.done!==!0;)s=o.value,i=e(i,s.key,s.attributes);return i}nodeEntries(){const e=this._nodes.values();return new de(()=>{const r=e.next();if(r.done)return r;const i=r.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let r=0;this._nodes.forEach((a,o)=>{e[r++]=ol(o,a)});const i=new Array(this._edges.size);return r=0,this._edges.forEach((a,o)=>{i[r++]=sl(this.type,o,a)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,r=!1){if(e instanceof G)return e.forEachNode((c,u)=>{r?this.mergeNode(c,u):this.addNode(c,u)}),e.forEachEdge((c,u,h,d,f,m,b)=>{r?b?this.mergeUndirectedEdgeWithKey(c,h,d,u):this.mergeDirectedEdgeWithKey(c,h,d,u):b?this.addUndirectedEdgeWithKey(c,h,d,u):this.addDirectedEdgeWithKey(c,h,d,u)}),this;if(!Y(e))throw new E("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Y(e.attributes))throw new E("Graph.import: invalid attributes. Expecting a plain object.");r?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,a,o,s,l;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new E("Graph.import: invalid nodes. Expecting an array.");for(i=0,a=o.length;i<a;i++){s=o[i],ll(s);const{key:c,attributes:u}=s;r?this.mergeNode(c,u):this.addNode(c,u)}}if(e.edges){let c=!1;if(this.type==="undirected"&&(c=!0),o=e.edges,!Array.isArray(o))throw new E("Graph.import: invalid edges. Expecting an array.");for(i=0,a=o.length;i<a;i++){l=o[i],ul(l);const{source:u,target:h,attributes:d,undirected:f=c}=l;let m;"key"in l?(m=r?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,m.call(this,l.key,u,h,d)):(m=r?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,m.call(this,u,h,d))}}return this}nullCopy(e){const r=new G(J({},this._options,e));return r.replaceAttributes(J({},this.getAttributes())),r}emptyCopy(e){const r=this.nullCopy(e);return this._nodes.forEach((i,a)=>{const o=J({},i.attributes);i=new r.NodeDataClass(a,o),r._nodes.set(a,i)}),r}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new H(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new H("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new H("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const r=this.emptyCopy(e),i=this._edges.values();let a,o;for(;a=i.next(),a.done!==!0;)o=a.value,_i(r,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,J({},o.attributes));return r}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((o,s)=>{e[s]=o.attributes});const r={},i={};this._edges.forEach((o,s)=>{const l=o.undirected?"--":"->";let c="",u=o.source.key,h=o.target.key,d;o.undirected&&u>h&&(d=u,u=h,h=d);const f=`(${u})${l}(${h})`;s.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,c+=`${i[f]}. `):c+=`[${s}]: `,c+=f,r[c]=o.attributes});const a={};for(const o in this)this.hasOwnProperty(o)&&!Nr.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(a[o]=this[o]);return a.attributes=this._attributes,a.nodes=e,a.edges=r,le(a,"constructor",this.constructor),a}}typeof Symbol<"u"&&(G.prototype[Symbol.for("nodejs.util.inspect.custom")]=G.prototype.inspect);dl.forEach(n=>{["add","merge","update"].forEach(e=>{const r=n.name(e),i=e==="add"?_i:gl;n.generateKey?G.prototype[r]=function(a,o,s){return i(this,r,!0,(n.type||this.type)==="undirected",null,a,o,s,e==="update")}:G.prototype[r]=function(a,o,s,l){return i(this,r,!1,(n.type||this.type)==="undirected",a,o,s,l,e==="update")}})});zs(G);$s(G);Zs(G);al(G);class Ti extends G{constructor(e){const r=J({type:"directed"},e);if("multi"in r&&r.multi!==!1)throw new E("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(r.type!=="directed")throw new E('DirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}}class Li extends G{constructor(e){const r=J({type:"undirected"},e);if("multi"in r&&r.multi!==!1)throw new E("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(r.type!=="undirected")throw new E('UndirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}}class ji extends G{constructor(e){const r=J({multi:!0},e);if("multi"in r&&r.multi!==!0)throw new E("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(r)}}class ee extends G{constructor(e){const r=J({type:"directed",multi:!0},e);if("multi"in r&&r.multi!==!0)throw new E("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(r.type!=="directed")throw new E('MultiDirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}}class Hi extends G{constructor(e){const r=J({type:"undirected",multi:!0},e);if("multi"in r&&r.multi!==!0)throw new E("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(r.type!=="undirected")throw new E('MultiUndirectedGraph.from: inconsistent "'+r.type+'" type in given options!');super(r)}}function Ze(n){n.from=function(e,r){const i=J({},e.options,r),a=new n(i);return a.import(e),a}}Ze(G);Ze(Ti);Ze(Li);Ze(ji);Ze(ee);Ze(Hi);G.Graph=G;G.DirectedGraph=Ti;G.UndirectedGraph=Li;G.MultiGraph=ji;G.MultiDirectedGraph=ee;G.MultiUndirectedGraph=Hi;G.InvalidArgumentsGraphError=E;G.NotFoundGraphError=x;G.UsageGraphError=H;var $i,Er=qr;$i=Er.createRoot,Er.hydrateRoot;function ml(){if(console&&console.warn){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const kr={};function zn(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];typeof e[0]=="string"&&kr[e[0]]||(typeof e[0]=="string"&&(kr[e[0]]=new Date),ml(...e))}const Mi=(n,e)=>()=>{if(n.isInitialized)e();else{const r=()=>{setTimeout(()=>{n.off("initialized",r)},0),e()};n.on("initialized",r)}};function Ar(n,e,r){n.loadNamespaces(e,Mi(n,r))}function Rr(n,e,r,i){typeof r=="string"&&(r=[r]),r.forEach(a=>{n.options.ns.indexOf(a)<0&&n.options.ns.push(a)}),n.loadLanguages(e,Mi(n,i))}function yl(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.languages[0],a=e.options?e.options.fallbackLng:!1,o=e.languages[e.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(l,c)=>{const u=e.services.backendConnector.state[`${l}|${c}`];return u===-1||u===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!s(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(i,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||s(i,n)&&(!a||s(o,n)))}function bl(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(zn("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(n,{lng:r.lng,precheck:(a,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!o(a.isLanguageChangingTo,n))return!1}}):yl(n,e,r)}const vl=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,wl={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},xl=n=>wl[n],Sl=n=>n.replace(vl,xl);let En={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Sl};function Nl(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};En={...En,...n}}function zl(){return En}let Pi;function El(n){Pi=n}function kl(){return Pi}const Al={type:"3rdParty",init(n){Nl(n.options.react),El(n)}},Fi=$.createContext();class Rl{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Ol=(n,e)=>{const r=$.useRef();return $.useEffect(()=>{r.current=e?r.current:n},[n,e]),r.current};function Yt(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:r}=e,{i18n:i,defaultNS:a}=$.useContext(Fi)||{},o=r||i||kl();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Rl),!o){zn("You will need to pass in an i18next instance by using initReactI18next");const A=(S,L)=>typeof L=="string"?L:L&&typeof L=="object"&&typeof L.defaultValue=="string"?L.defaultValue:Array.isArray(S)?S[S.length-1]:S,R=[A,{},!1];return R.t=A,R.i18n={},R.ready=!1,R}o.options.react&&o.options.react.wait!==void 0&&zn("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...zl(),...o.options.react,...e},{useSuspense:l,keyPrefix:c}=s;let u=n||a||o.options&&o.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(u);const h=(o.isInitialized||o.initializedStoreOnce)&&u.every(A=>bl(A,o,s));function d(){return o.getFixedT(e.lng||null,s.nsMode==="fallback"?u:u[0],c)}const[f,m]=$.useState(d);let b=u.join();e.lng&&(b=`${e.lng}${b}`);const v=Ol(b),N=$.useRef(!0);$.useEffect(()=>{const{bindI18n:A,bindI18nStore:R}=s;N.current=!0,!h&&!l&&(e.lng?Rr(o,e.lng,u,()=>{N.current&&m(d)}):Ar(o,u,()=>{N.current&&m(d)})),h&&v&&v!==b&&N.current&&m(d);function S(){N.current&&m(d)}return A&&o&&o.on(A,S),R&&o&&o.store.on(R,S),()=>{N.current=!1,A&&o&&A.split(" ").forEach(L=>o.off(L,S)),R&&o&&R.split(" ").forEach(L=>o.store.off(L,S))}},[o,b]);const z=$.useRef(!0);$.useEffect(()=>{N.current&&!z.current&&m(d),z.current=!1},[o,c]);const k=[f,o,h];if(k.t=f,k.i18n=o,k.ready=h,h||!h&&!l)return k;throw new Promise(A=>{e.lng?Rr(o,e.lng,u,()=>A()):Ar(o,u,()=>A())})}function _l(n){let{i18n:e,defaultNS:r,children:i}=n;const a=$.useMemo(()=>({i18n:e,defaultNS:r}),[e,r]);return $.createElement(Fi.Provider,{value:a},i)}var Ci={exports:{}},Di={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Je=$;function Tl(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ll=typeof Object.is=="function"?Object.is:Tl,jl=Je.useState,Hl=Je.useEffect,$l=Je.useLayoutEffect,Ml=Je.useDebugValue;function Pl(n,e){var r=e(),i=jl({inst:{value:r,getSnapshot:e}}),a=i[0].inst,o=i[1];return $l(function(){a.value=r,a.getSnapshot=e,mn(a)&&o({inst:a})},[n,r,e]),Hl(function(){return mn(a)&&o({inst:a}),n(function(){mn(a)&&o({inst:a})})},[n]),Ml(r),r}function mn(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!Ll(n,r)}catch(i){return!0}}function Fl(n,e){return e()}var Cl=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fl:Pl;Di.useSyncExternalStore=Je.useSyncExternalStore!==void 0?Je.useSyncExternalStore:Cl;Ci.exports=Di;var Dl=Ci.exports,Ii={exports:{}},Bi={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=$,Il=Dl;function Bl(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Gl=typeof Object.is=="function"?Object.is:Bl,Ul=Il.useSyncExternalStore,Vl=qt.useRef,Wl=qt.useEffect,Kl=qt.useMemo,Jl=qt.useDebugValue;Bi.useSyncExternalStoreWithSelector=function(n,e,r,i,a){var o=Vl(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=Kl(function(){function c(m){if(!u){if(u=!0,h=m,m=i(m),a!==void 0&&s.hasValue){var b=s.value;if(a(b,m))return d=b}return d=m}if(b=d,Gl(h,m))return b;var v=i(m);return a!==void 0&&a(b,v)?b:(h=m,d=v)}var u=!1,h,d,f=r===void 0?null:r;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,r,i,a]);var l=Ul(n,o[0],o[1]);return Wl(function(){s.hasValue=!0,s.value=l},[l]),Jl(l),l};Ii.exports=Bi;var Yl=Ii.exports;function ql(n){n()}let Gi=ql;const Zl=n=>Gi=n,Xl=()=>Gi,Or=Symbol.for(`react-redux-context-${$.version}`),_r=globalThis;function Ql(){let n=_r[Or];return n||(n=$.createContext(null),_r[Or]=n),n}const Me=new Proxy({},new Proxy({},{get(n,e){const r=Ql();return(i,...a)=>Reflect[e](r,...a)}}));function Qn(n=Me){return function(){return $.useContext(n)}}const Ui=Qn(),eu=()=>{throw new Error("uSES not initialized!")};let Vi=eu;const tu=n=>{Vi=n},nu=(n,e)=>n===e;function ru(n=Me){const e=n===Me?Ui:Qn(n);return function(i,a={}){const{equalityFn:o=nu,stabilityCheck:s=void 0,noopCheck:l=void 0}=typeof a=="function"?{equalityFn:a}:a,{store:c,subscription:u,getServerState:h,stabilityCheck:d,noopCheck:f}=e();$.useRef(!0);const m=$.useCallback({[i.name](v){return i(v)}}[i.name],[i,d,s]),b=Vi(u.addNestedSub,c.getState,h||c.getState,m,o);return $.useDebugValue(b),b}}const iu=ru();var I={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var er=Symbol.for("react.element"),tr=Symbol.for("react.portal"),Zt=Symbol.for("react.fragment"),Xt=Symbol.for("react.strict_mode"),Qt=Symbol.for("react.profiler"),en=Symbol.for("react.provider"),tn=Symbol.for("react.context"),au=Symbol.for("react.server_context"),nn=Symbol.for("react.forward_ref"),rn=Symbol.for("react.suspense"),an=Symbol.for("react.suspense_list"),on=Symbol.for("react.memo"),sn=Symbol.for("react.lazy"),ou=Symbol.for("react.offscreen"),Wi;Wi=Symbol.for("react.module.reference");function fe(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case er:switch(n=n.type,n){case Zt:case Qt:case Xt:case rn:case an:return n;default:switch(n=n&&n.$$typeof,n){case au:case tn:case nn:case sn:case on:case en:return n;default:return e}}case tr:return e}}}I.ContextConsumer=tn;I.ContextProvider=en;I.Element=er;I.ForwardRef=nn;I.Fragment=Zt;I.Lazy=sn;I.Memo=on;I.Portal=tr;I.Profiler=Qt;I.StrictMode=Xt;I.Suspense=rn;I.SuspenseList=an;I.isAsyncMode=function(){return!1};I.isConcurrentMode=function(){return!1};I.isContextConsumer=function(n){return fe(n)===tn};I.isContextProvider=function(n){return fe(n)===en};I.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===er};I.isForwardRef=function(n){return fe(n)===nn};I.isFragment=function(n){return fe(n)===Zt};I.isLazy=function(n){return fe(n)===sn};I.isMemo=function(n){return fe(n)===on};I.isPortal=function(n){return fe(n)===tr};I.isProfiler=function(n){return fe(n)===Qt};I.isStrictMode=function(n){return fe(n)===Xt};I.isSuspense=function(n){return fe(n)===rn};I.isSuspenseList=function(n){return fe(n)===an};I.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Zt||n===Qt||n===Xt||n===rn||n===an||n===ou||typeof n=="object"&&n!==null&&(n.$$typeof===sn||n.$$typeof===on||n.$$typeof===en||n.$$typeof===tn||n.$$typeof===nn||n.$$typeof===Wi||n.getModuleId!==void 0)};I.typeOf=fe;function su(){const n=Xl();let e=null,r=null;return{clear(){e=null,r=null},notify(){n(()=>{let i=e;for(;i;)i.callback(),i=i.next})},get(){let i=[],a=e;for(;a;)i.push(a),a=a.next;return i},subscribe(i){let a=!0,o=r={callback:i,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}const Tr={notify(){},get:()=>[]};function lu(n,e){let r,i=Tr;function a(d){return c(),i.subscribe(d)}function o(){i.notify()}function s(){h.onStateChange&&h.onStateChange()}function l(){return!!r}function c(){r||(r=e?e.addNestedSub(s):n.subscribe(s),i=su())}function u(){r&&(r(),r=void 0,i.clear(),i=Tr)}const h={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:s,isSubscribed:l,trySubscribe:c,tryUnsubscribe:u,getListeners:()=>i};return h}const uu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cu=uu?$.useLayoutEffect:$.useEffect;function hu({store:n,context:e,children:r,serverState:i,stabilityCheck:a="once",noopCheck:o="once"}){const s=$.useMemo(()=>{const u=lu(n);return{store:n,subscription:u,getServerState:i?()=>i:void 0,stabilityCheck:a,noopCheck:o}},[n,i,a,o]),l=$.useMemo(()=>n.getState(),[n]);cu(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),l!==n.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,l]);const c=e||Me;return P.createElement(c.Provider,{value:s},r)}function Ki(n=Me){const e=n===Me?Ui:Qn(n);return function(){const{store:i}=e();return i}}const du=Ki();function fu(n=Me){const e=n===Me?du:Ki(n);return function(){return e().dispatch}}const pu=fu();tu(Yl.useSyncExternalStoreWithSelector);Zl(qr.unstable_batchedUpdates);const gu="modulepreload",mu=function(n){return"/rmp/"+n},Lr={},Xe=function(e,r,i){if(!r||r.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=mu(o),o in Lr)return;Lr[o]=!0;const s=o.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!i)for(let h=a.length-1;h>=0;h--){const d=a[h];if(d.href===o&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":gu,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};var Ji=function(){if(typeof Map<"u")return Map;function n(e,r){var i=-1;return e.some(function(a,o){return a[0]===r?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var i=n(this.__entries__,r),a=this.__entries__[i];return a&&a[1]},e.prototype.set=function(r,i){var a=n(this.__entries__,r);~a?this.__entries__[a][1]=i:this.__entries__.push([r,i])},e.prototype.delete=function(r){var i=this.__entries__,a=n(i,r);~a&&i.splice(a,1)},e.prototype.has=function(r){return!!~n(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,i){i===void 0&&(i=null);for(var a=0,o=this.__entries__;a<o.length;a++){var s=o[a];r.call(i,s[1],s[0])}},e}()}(),kn=typeof window<"u"&&typeof document<"u"&&window.document===document,Ft=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),yu=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Ft):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),bu=2;function vu(n,e){var r=!1,i=!1,a=0;function o(){r&&(r=!1,n()),i&&l()}function s(){yu(o)}function l(){var c=Date.now();if(r){if(c-a<bu)return;i=!0}else r=!0,i=!1,setTimeout(s,e);a=c}return l}var wu=20,xu=["top","right","bottom","left","width","height","size","weight"],Su=typeof MutationObserver<"u",Nu=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=vu(this.refresh.bind(this),wu)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var r=this.observers_,i=r.indexOf(e);~i&&r.splice(i,1),!r.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!kn||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Su?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!kn||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var r=e.propertyName,i=r===void 0?"":r,a=xu.some(function(o){return!!~i.indexOf(o)});a&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),Yi=function(n,e){for(var r=0,i=Object.keys(e);r<i.length;r++){var a=i[r];Object.defineProperty(n,a,{value:e[a],enumerable:!1,writable:!1,configurable:!0})}return n},Ye=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||Ft},qi=ln(0,0,0,0);function Ct(n){return parseFloat(n)||0}function jr(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(i,a){var o=n["border-"+a+"-width"];return i+Ct(o)},0)}function zu(n){for(var e=["top","right","bottom","left"],r={},i=0,a=e;i<a.length;i++){var o=a[i],s=n["padding-"+o];r[o]=Ct(s)}return r}function Eu(n){var e=n.getBBox();return ln(0,0,e.width,e.height)}function ku(n){var e=n.clientWidth,r=n.clientHeight;if(!e&&!r)return qi;var i=Ye(n).getComputedStyle(n),a=zu(i),o=a.left+a.right,s=a.top+a.bottom,l=Ct(i.width),c=Ct(i.height);if(i.boxSizing==="border-box"&&(Math.round(l+o)!==e&&(l-=jr(i,"left","right")+o),Math.round(c+s)!==r&&(c-=jr(i,"top","bottom")+s)),!Ru(n)){var u=Math.round(l+o)-e,h=Math.round(c+s)-r;Math.abs(u)!==1&&(l-=u),Math.abs(h)!==1&&(c-=h)}return ln(a.left,a.top,l,c)}var Au=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof Ye(n).SVGGraphicsElement}:function(n){return n instanceof Ye(n).SVGElement&&typeof n.getBBox=="function"}}();function Ru(n){return n===Ye(n).document.documentElement}function Ou(n){return kn?Au(n)?Eu(n):ku(n):qi}function _u(n){var e=n.x,r=n.y,i=n.width,a=n.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return Yi(s,{x:e,y:r,width:i,height:a,top:r,right:e+i,bottom:a+r,left:e}),s}function ln(n,e,r,i){return{x:n,y:e,width:r,height:i}}var Tu=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ln(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=Ou(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),Lu=function(){function n(e,r){var i=_u(r);Yi(this,{target:e,contentRect:i})}return n}(),ju=function(){function n(e,r,i){if(this.activeObservations_=[],this.observations_=new Ji,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Ye(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)||(r.set(e,new Tu(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Ye(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)&&(r.delete(e),r.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(i){return new Lu(i.target,i.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),Zi=typeof WeakMap<"u"?new WeakMap:new Ji,Xi=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Nu.getInstance(),i=new ju(e,r,this);Zi.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){Xi.prototype[n]=function(){var e;return(e=Zi.get(this))[n].apply(e,arguments)}});var Hu=function(){return typeof Ft.ResizeObserver<"u"?Ft.ResizeObserver:Xi}();window.ResizeObserver||(window.ResizeObserver=Hu);var An=globalThis&&globalThis.__assign||function(){return An=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},An.apply(this,arguments)},$u=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},xg=function(n){var e=n.isOpen,r=n.onClose,i=n.children,a=n.sx,o=n.size,s=n.zIndex,l=$u(n,["isOpen","onClose","children","sx","size","zIndex"]),c=ze("RmgAppClip",{size:o,zIndex:s!=null?s:1500}),u=$.useRef(null);return oa({ref:u,handler:r}),g.jsx(sa,{children:g.jsxs(sr.div,An({className:e?"show-app-clip":"",sx:c},l,{children:[g.jsx("div",{className:"rmg-app-clip__overlay"}),g.jsx(la,{isDisabled:!e,children:g.jsx("div",{className:"rmg-app-clip__container",children:g.jsx(sr.section,{ref:u,role:"dialog",className:"rmg-app-clip__content",sx:a,children:i})})})]}))})},Rn=globalThis&&globalThis.__assign||function(){return Rn=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Rn.apply(this,arguments)},Mu=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},Pu=globalThis&&globalThis.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),a,o=[],s;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o},Fu=function(n,e){var r=n.validator,i=n.onDebouncedChange,a=n.delay,o=n.optionList,s=n.defaultValue;n.onChange;var l=Mu(n,["validator","onDebouncedChange","delay","optionList","defaultValue","onChange"]),c=$.useRef(null),u=Kr(c,e),h=$.useRef("datalist-"+new Date().valueOf()),d=Pu($.useState(!1),2),f=d[0],m=d[1],b=$.useRef();$.useEffect(function(){c.current&&(c.current.value=(s==null?void 0:s.toString())||"")},[s]);var v=function(z){var k=z.target.value;window.clearTimeout(b.current),r&&m(!r(k)),b.current=window.setTimeout(function(){i==null||i(k),b.current=void 0},a!=null?a:500)},N=function(z){var k=z.target.value;b.current!==void 0&&(window.clearTimeout(b.current),r&&m(!r(k)),i==null||i(k),b.current=void 0)};return g.jsxs(g.Fragment,{children:[g.jsx(ua,Rn({ref:u,list:h.current,variant:"flushed",size:"sm",h:6,onChange:v,onBlur:N,isInvalid:f},l)),o&&g.jsx("datalist",{id:h.current,children:o==null?void 0:o.map(function(z,k){return g.jsx("option",{children:z},k)})})]})},Cu=$.forwardRef(Fu);globalThis&&globalThis.__read;globalThis&&globalThis.__read;globalThis&&globalThis.__spreadArray;var pt=globalThis&&globalThis.__assign||function(){return pt=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},pt.apply(this,arguments)},Du=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},Sg=function(n){var e=n.children,r=n.sx,i=Du(n,["children","sx"]),a=ze("RmgCard");return g.jsx($e,pt({sx:pt(pt({},a),r)},i,{children:e}))},Hr=globalThis&&globalThis.__assign||function(){return Hr=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Hr.apply(this,arguments)},On=globalThis&&globalThis.__assign||function(){return On=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},On.apply(this,arguments)},Iu=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},Bu=function(n,e){var r=n.onDebouncedChange,i=n.defaultValue;n.onChange;var a=Iu(n,["onDebouncedChange","defaultValue","onChange"]),o=$.useRef(null),s=Kr(o,e),l=$.useRef();$.useEffect(function(){o.current&&(o.current.value=(i==null?void 0:i.toString())||"")},[i]);var c=function(u){var h=u.target.value;window.clearTimeout(l.current),l.current=window.setTimeout(function(){r==null||r(h)},500)};return g.jsx(ca,On({ref:s,variant:"flushed",size:"sm",resize:"none",onChange:c},a))},Gu=$.forwardRef(Bu),$r=globalThis&&globalThis.__assign||function(){return $r=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},$r.apply(this,arguments)};globalThis&&globalThis.__rest;var Uu=globalThis&&globalThis.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),a,o=[],s;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o},Vu=function(n){switch(n){case je.DEV:return"red";case je.UAT:return"orange";case je.PRD:return"green"}};function Ng(n){var e=n.environment,r=n.version,i=n.popoverHeader,a=n.popoverBody,o=Uu($.useState(!1),2),s=o[0],l=o[1];return g.jsxs(ha,{isOpen:s,onOpen:function(){return i&&l(!0)},onClose:function(){return l(!1)},children:[g.jsx(da,{children:g.jsx(Jr,{ml:1,colorScheme:Vu(e),title:"".concat(e,": ").concat(r),cursor:i?"pointer":"help",children:e===je.PRD?r:e})}),g.jsxs(fa,{children:[g.jsx(pa,{}),g.jsx(ga,{}),g.jsx(ma,{children:i}),g.jsx(ya,{children:a})]})]})}var Wu=function(n,e,r){var i=new Blob([r],{type:e});Ku(n,i)},Ku=function(n,e){var r=window.URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)},Ju=globalThis&&globalThis.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),a,o=[],s;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o};function Yu(n){var e=n.cancelRef,r=n.isOpen,i=n.onClose,a=Ju($.useState(!1),2),o=a[0],s=a[1],l=function(){s(!0);var c=oe.getStorageForCurrentApp(),u=oe.getAppName(),h="".concat(u,"_BACKUP_").concat(new Date().toISOString(),".json");Wu(h,"application/json",JSON.stringify(c)),oe.clearStorageForCurrentApp(),setTimeout(function(){window.location.reload()},2e3)};return g.jsxs(ba,{leastDestructiveRef:e,isOpen:r,onClose:i,children:[g.jsx(va,{}),g.jsxs(wa,{children:[g.jsx(xa,{children:"Warning "}),g.jsx(Sa,{}),g.jsxs(Na,{sx:{"& p":{my:1}},children:[g.jsx(Le,{children:"Are you sure you want to reset the app? The webpage local storage for this app will be cleared. A copy of the local storage will be downloaded and it may be used for restoration (varies with app)."}),g.jsx(Le,{children:""}),g.jsx(Le,{children:""})]}),g.jsxs(za,{children:[g.jsx(lr,{ref:e,onClick:i,children:"Cancel"}),g.jsx(lr,{isLoading:o,colorScheme:"red",ml:3,onClick:l,children:"Confirm and reload"})]})]})]})}var gt=globalThis&&globalThis.__assign||function(){return gt=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},gt.apply(this,arguments)},qu=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},Zu=globalThis&&globalThis.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),a,o=[],s;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o};function Xu(n){var e=n.error,r=n.errorInfo,i=n.allowReset,a=n.sx,o=qu(n,["error","errorInfo","allowReset","sx"]),s=ze("RmgErrorBoundary"),l=Yr("primary.500","primary.300"),c=Zu($.useState(!1),2),u=c[0],h=c[1],d=$.useRef(null),f=function(v){return g.jsx(dt,{color:l,role:"button",onClick:function(){return h(!0)},children:v})},m=oe.getAppName(),b=g.jsx(dt,{color:l,href:"https://github.com/railmapgen/".concat(m,"/issues"),isExternal:!0,children:"GitHub Issue"});return g.jsxs(Mn,gt({status:"error",sx:gt(gt({},s),a)},o,{children:[g.jsx(Pn,{}),g.jsx(Ea,{children:"Something went wrong!"}),g.jsxs(ka,{children:[g.jsxs(Le,{children:["Please try to refresh or re-import your configuration files. If the issue still persists, please consider upgrading your browser",i?g.jsxs(g.Fragment,{children:[" or ",f("reset this app")]}):"",". Should you need any help, please contact us by submitting an issue in ",b," with the details shown below."]}),g.jsxs(Le,{children:["",i?g.jsxs(g.Fragment,{children:["",f("")]}):""," ",b,"  Issue "]}),g.jsxs(Le,{children:["",i?g.jsxs(g.Fragment,{children:["",f("")]}):""," ",b,"  Issue "]}),g.jsxs(Le,{as:"details",children:[e==null?void 0:e.toString(),g.jsx("br",{}),r==null?void 0:r.componentStack]}),i&&g.jsx(Yu,{cancelRef:d,isOpen:u,onClose:function(){return h(!1)}})]})]}))}var Qu=globalThis&&globalThis.__extends||function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),_n=globalThis&&globalThis.__assign||function(){return _n=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},_n.apply(this,arguments)},ec=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},tc=function(n){Qu(e,n);function e(r){var i=n.call(this,r)||this;return i.state={hasError:!1,error:null,errorInfo:null},i}return e.getDerivedStateFromError=function(){return{hasError:!0}},e.prototype.componentDidCatch=function(r,i){this.setState({error:r,errorInfo:i})},e.prototype.render=function(){var r=this.props,i=r.children,a=r.suspenseFallback,o=r.allowReset,s=ec(r,["children","suspenseFallback","allowReset"]);return this.state.hasError?g.jsx(Xu,_n({error:this.state.error,errorInfo:this.state.errorInfo,allowReset:o},s)):a?g.jsx($.Suspense,{fallback:a,children:i}):i},e}(P.Component),Tn=globalThis&&globalThis.__assign||function(){return Tn=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Tn.apply(this,arguments)},nc=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},rc=function(n){var e=n.label,r=n.children;n.width;var i=n.noLabel,a=n.oneLine,o=n.className,s=nc(n,["label","children","width","noLabel","oneLine","className"]),l=ze("RmgLabel");return g.jsxs(Aa,Tn({className:"".concat(a?"rmg-label__one-line":""," ").concat(o!=null?o:""),"aria-label":e,sx:l},s,{children:[!i&&g.jsx(Ra,{size:"xs",children:e}),r]}))},Ln=globalThis&&globalThis.__assign||function(){return Ln=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Ln.apply(this,arguments)},ic=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},Mr=globalThis&&globalThis.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),a,o=[],s;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o};function ac(n){var e=n.defaultValue,r=n.options,i=n.disabledOptions,a=ic(n,["defaultValue","options","disabledOptions"]),o=$.useRef(null);$.useEffect(function(){o.current&&(o.current.value=(e==null?void 0:e.toString())||"")},[e]);var s=function(l,c){return g.jsx("option",{value:l,disabled:(i==null?void 0:i.find(function(u){return u.toString()===l}))!==void 0,children:c},l)};return g.jsx(Oa,Ln({ref:o,variant:"flushed",size:"sm",h:6},a,{children:Object.entries(r).map(function(l){var c=Mr(l,2),u=c[0],h=c[1];return typeof h=="object"?g.jsx("optgroup",{label:u,children:Object.entries(h).map(function(d){var f=Mr(d,2),m=f[0],b=f[1];return s(m,b)})},u):s(u,h)})}))}var oc=globalThis&&globalThis.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),a,o=[],s;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o},zg=function(n,e,r){var i=oc($.useState(r!=null?r:e()),2),a=i[0],o=i[1];return $.useEffect(function(){n.then(function(){console.debug("[rmg-components] Getter updates finished"),o(e())})},[]),a};globalThis&&globalThis.__read;var yn=globalThis&&globalThis.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),a,o=[],s;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o},Pr=globalThis&&globalThis.__spreadArray||function(n,e,r){if(r||arguments.length===2)for(var i=0,a=e.length,o;i<a;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},sc=function(n,e){e===void 0&&(e=500);var r=yn($.useState(!0),2),i=r[0],a=r[1],o=$.useRef([]),s=$.useRef(),l=$.useCallback(function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(!i){o.current=c;return}a(!1),o.current=[],n.apply(void 0,Pr([],yn(c),!1))},[i,n]);return $.useEffect(function(){if(!i)return s.current=window.setTimeout(function(){a(!0),o.current.length&&n.apply(void 0,Pr([],yn(o.current),!1))},e),function(){window.clearTimeout(s.current)}},[i,e]),l},lc=globalThis&&globalThis.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),a,o=[],s;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o};function uc(n){var e=n.defaultValue,r=n.min,i=n.max,a=n.step,o=n.onThrottledChange,s=n.leftIcon,l=n.rightIcon,c=ze("RmgThrottledSlider"),u=lc($.useState(e!=null?e:0),2),h=u[0],d=u[1],f=sc(o!=null?o:function(){},500),m=function(){var v=Math.min(h+(a!=null?a:1)*10,i!=null?i:100);o==null||o(v),d(v)},b=function(){var v=Math.max(h-(a!=null?a:1)*10,r!=null?r:0);o==null||o(v),d(v)};return g.jsxs($e,{sx:c,children:[s&&g.jsx(_t,{size:"xs",variant:"ghost","aria-label":"Drag left",icon:s,onClick:b}),g.jsxs(_a,{value:h,min:r,max:i,step:a,onChange:function(v){f(v),d(v)},children:[g.jsx(Ta,{children:g.jsx(La,{})}),g.jsx(ja,{})]}),l&&g.jsx(_t,{size:"xs",variant:"ghost","aria-label":"Drag right",icon:l,onClick:m})]})}function cc(n){var e=n.fields,r=n.noLabel,i=n.minW;return g.jsx($e,{wrap:"wrap",children:e.map(function(a,o){if(a.hidden)return g.jsx($.Fragment,{},o);var s=a.minW||i,l=s==="full";return g.jsx(rc,{className:l?"mw-full":"",label:a.label,flex:l?void 0:1,minW:l?void 0:s,noLabel:r,oneLine:a.oneLine,children:function(c){switch(c.type){case"input":return g.jsx(Cu,{placeholder:c.placeholder,defaultValue:c.value,type:c.variant,validator:c.validator,onDebouncedChange:c.onChange,delay:c.debouncedDelay,optionList:c.optionList});case"textarea":return g.jsx(Gu,{placeholder:c.placeholder,defaultValue:c.value,onDebouncedChange:c.onChange});case"slider":return g.jsx(uc,{defaultValue:c.value,min:c.min,max:c.max,step:c.step,onThrottledChange:c.onChange,leftIcon:c.leftIcon,rightIcon:c.rightIcon});case"select":return g.jsx(ac,{defaultValue:c.value,onChange:function(u){var h,d=u.target.value;return(h=c.onChange)===null||h===void 0?void 0:h.call(c,typeof c.value=="number"?Number(d):d.toString())},options:c.options,disabledOptions:c.disabledOptions,isInvalid:c.isInvalid});case"switch":return g.jsx(Ha,{isChecked:c.isChecked,isDisabled:c.isDisabled,onChange:function(u){var h,d=u.target.checked;return(h=c.onChange)===null||h===void 0?void 0:h.call(c,d)}});case"custom":return c.component;default:return g.jsx("div",{})}}(a)},o)})})}var He=globalThis&&globalThis.__assign||function(){return He=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},He.apply(this,arguments)},Qi=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},hc=function(n){var e=n.sx,r=n.className,i=Qi(n,["sx","className"]),a=ze("RmgWindow");return g.jsx($e,He({className:"rmg-window ".concat(r!=null?r:""),sx:He(He({},a),e)},i))},Eg=function(n){var e=n.sx,r=n.className,i=Qi(n,["sx","className"]),a=ze("RmgWindowHeader");return g.jsx($e,He({className:"rmg-window__header ".concat(r!=null?r:""),sx:He(He({},a),e)},i))},jn=globalThis&&globalThis.__assign||function(){return jn=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},jn.apply(this,arguments)},dc=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},kg=function(n){var e=n.name,r=n.fg,i=n.bg,a=n.showShortName,o=n.actions,s=dc(n,["name","fg","bg","showShortName","actions"]),l=ze("RmgLineBadge"),c=function(u){var h,d;return typeof u=="object"?((h=u[0].match(/^[\d\w]+/))===null||h===void 0?void 0:h[0])||u[0]:((d=u.match(/^[\d\w]+/))===null||d===void 0?void 0:d[0])||u};return g.jsxs(Jr,jn({color:r,bg:i,sx:l},s,{children:[a?c(e):typeof e=="object"?e[0]:e,o]}))},Fr=globalThis&&globalThis.__assign||function(){return Fr=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Fr.apply(this,arguments)};globalThis&&globalThis.__rest;globalThis&&globalThis.__read;globalThis&&globalThis.__spreadArray;var mt=globalThis&&globalThis.__assign||function(){return mt=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},mt.apply(this,arguments)},fc=globalThis&&globalThis.__rest||function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r},Ag=function(n){var e=n.isOpen,r=n.alwaysOverlay,i=n.width,a=n.sx,o=n.children,s=fc(n,["isOpen","alwaysOverlay","width","sx","children"]),l=ze("RmgSidePanel",{width:i!=null?i:320,alwaysOverlay:r});return g.jsx($e,mt({as:"section",className:e?"show-side-panel":"",sx:mt(mt({},l),a),"data-testid":"side-panel-root"},s,{children:g.jsx($e,{className:"rmg-side-panel__inner",children:o})}))},Rg=function(n){var e=n.onClose,r=n.children;return g.jsxs(Mn,{className:"rmg-side-panel__header",status:"info",variant:"solid",size:"xs",children:[g.jsx(Pn,{}),r,g.jsx($a,{onClick:e})]})},Og=function(n){var e=n.children;return g.jsx("div",{className:"rmg-side-panel__body",children:e})},_g=function(n){var e=n.children;return g.jsx("div",{className:"rmg-side-panel__footer",children:e})},Cr=function(n){return n==="dark"?"primary.300":"primary.500"},bn={variants:{flushed:function(n){var e=n.theme,r=n.colorMode;return{field:{_focusVisible:{borderColor:Cr(r),boxShadow:"0px 1px 0px 0px ".concat(ht(e,Cr(r)))}}}}}},pc={defaultProps:{colorScheme:"primary"}},Dr={defaultProps:{colorScheme:"primary"}},gc={baseStyle:{w:"100%",h:"100%","& .ag-header-cell:not(.ag-header-cell-auto-height) .ag-header-cell-comp-wrapper":{height:"unset"},"& .ag-cell":{display:"flex",lineHeight:"unset",alignItems:"center"},"& .ag-cell, & .ag-header-cell":{padding:"8px 9px"},"& .ag-row, & .ag-header":{border:"unset"},"&.ag-theme-alpine .ag-row .ag-cell, &.ag-theme-alpine .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))"},"&.ag-theme-alpine-dark .ag-row .ag-cell, &.ag-theme-alpine-dark .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))"},"& .ag-pinned-left-cols-container, & .ag-pinned-left-header":{boxShadow:"var(--chakra-shadows-lg)",zIndex:1},"&.ag-theme-alpine":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #fff)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #fcfcfc)"}},"&.ag-theme-alpine-dark":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #181d1f)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #222628)"}}}},mc={baseStyle:function(n){var e=n.colorMode,r=n.zIndex;return{display:"none","&.show-app-clip":{display:"block"},"& .rmg-app-clip__overlay":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",zIndex:r,bg:"blackAlpha.600"},"& .rmg-app-clip__container":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:r},"& .rmg-app-clip__content":{display:"flex",w:"100%",maxW:"md",my:16,bg:e==="light"?"white":"gray.700",boxShadow:"lg",borderRadius:"md",overflow:"hidden"}}},sizes:{xs:{"& .rmg-app-clip__content":{maxW:"xs"}},sm:{"& .rmg-app-clip__content":{maxW:"sm"}},lg:{"& .rmg-app-clip__content":{maxW:"lg"}},xl:{"& .rmg-app-clip__content":{maxW:"xl"}},full:{"& .rmg-app-clip__content":{maxW:"100vw",minH:"var(--chakra-vh)",my:0,borderRadius:0}}}},yc={baseStyle:function(n){var e=n.colorMode;return{p:1,my:1,w:"100%",borderRadius:2,bg:e==="dark"?"gray.700":"gray.50",boxShadow:"lg"}}},bc={baseStyle:function(n){var e=n.colorMode;return{"& thead":{position:"sticky",top:0,zIndex:10},"& td, th":{borderRight:"1px solid",borderColor:e==="dark"?"whiteAlpha.400":"blackAlpha.200",backgroundColor:e==="dark"?"gray.700":"gray.50",whiteSpace:"nowrap","&:first-of-type":{position:"sticky",left:0,zIndex:1},"&:last-of-type":{borderRight:"none",position:"sticky",right:0,zIndex:1}}}}},vc={baseStyle:function(){return{flexGrow:1,flexDirection:"column",justifyContent:"center",alignItems:"flex-start",h:10,"& span":{maxW:"100%",textOverflow:"ellipsis",overflow:"hidden"},"& span:last-of-type":{fontWeight:"normal",fontSize:"2xs"}}}},wc={baseStyle:{flexDirection:"column",alignItems:"center",maxH:"100%",overflowY:"auto","& .chakra-alert__icon":{w:"40px",h:"40px",mr:0},"& .chakra-alert__title":{mt:4,mb:1,fontSize:"lg"},"& .chakra-alert__desc":{w:"100%","& p":{my:1},"& details":{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"sm"}}}},xc={baseStyle:{m:1,w:"unset","& label":{overflow:"hidden",fontSize:12,mr:0,mb:-.5,whiteSpace:"nowrap",textOverflow:"ellipsis"},"&.rmg-label__one-line":{display:"flex",alignItems:"center","& label:first-of-type":{mr:"auto"}}}},Sc={baseStyle:{display:"inline-flex",alignItems:"center","& > button:first-of-type":{ml:1}}},Nc={baseStyle:{w:"100%",h:"100%",position:"absolute",top:0,right:0,alignItems:"center",justifyContent:"center","& .rmg-loader__backdrop":{position:"absolute",w:"100%",h:"100%",zIndex:1500,bg:"blackAlpha.400"},"& .chakra-progress":{zIndex:2e3}}},Oe=function(n){return n==="dark"?"primary.300":"primary.500"},zc={baseStyle:function(n){var e=n.theme,r=n.colorMode;return{"& .rmg-multi-select__wrapper":{position:"relative",w:"100%",h:"25.75px",transform:"translateY(1.75px)",cursor:"default"},"& .rmg-multi-select__field":{position:"relative",w:"100%",minW:0,outline:0,appearance:"none",transitionProperty:"common",transitionDuration:"normal",pb:"1px",fontSize:"sm",h:"6",borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_active:{borderColor:Oe(r),boxShadow:"0px 1px 0px 0px ".concat(ht(e,Oe(r)))},_focus:{borderColor:Oe(r),boxShadow:"0px 1px 0px 0px ".concat(ht(e,Oe(r)))},_focusVisible:{borderColor:Oe(r),boxShadow:"0px 1px 0px 0px ".concat(ht(e,Oe(r)))},"&.active":{borderColor:Oe(r),boxShadow:"0px 1px 0px 0px ".concat(ht(e,Oe(r)))},"& > span:last-of-type":{position:"absolute",right:8}},"& .rmg-multi-select__icon-wrapper":{display:"inline-flex",justifyContent:"center",w:6,h:"100%",position:"absolute",right:2,top:0,fontSize:"xl","& svg":{h:"1em",w:"1em"}},"& .chakra-popover__content":{w:"unset",minW:200},"& .chakra-popover__body":{p:0,"li label":{p:2,w:"100%",_hover:{bg:r==="dark"?"whiteAlpha.200":"gray.100"},_active:{bg:r==="dark"?"whiteAlpha.300":"gray.200"}}}}}},Ec={baseStyle:{position:"relative",flexDirection:"column",flex:1,overflow:"hidden"}},kc={baseStyle:{alignItems:"center",flexWrap:"wrap",pl:2,pr:3,py:1,zIndex:10}},Ac={baseStyle:function(n){var e=n.colorMode,r=n.width,i=n.alwaysOverlay;return{height:"100%",position:i?"absolute":{base:"absolute",lg:"relative"},right:i?0:{base:0,lg:"unset"},background:e==="light"?"white":"gray.800",boxShadow:"lg",flexShrink:0,flexDirection:"column",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",zIndex:5,"&.show-side-panel":{maxW:{base:"100%",sm:r},w:{base:"100%",sm:"unset"},visibility:"initial"},"& .rmg-side-panel__inner":{flexDirection:"column",h:"100%",w:{base:"100vw",sm:r}},"& .rmg-side-panel__header":{flexShrink:0,pl:3,pr:1,py:0,"& button":{ml:"auto"}},"& .rmg-side-panel__body":{display:"flex",flexDirection:"column",flex:1,overflowY:"auto",p:1},"& .rmg-side-panel__footer":{display:"flex",justifyContent:"flex-end",p:1}}}},Rc={baseStyle:{h:6,alignItems:"center","& .chakra-button:first-of-type":{mr:1},"& .chakra-button:last-of-type":{ml:1}}},Oc={baseStyle:{position:"relative",flexDirection:"column",height:"100%",overflow:"hidden"}},_c={baseStyle:{px:2,alignItems:"center",zIndex:15,minH:10,transition:"0.3s ease-in-out"}},Tc={Input:bn,Checkbox:Dr,Select:bn,Slider:pc,Switch:Dr,Textarea:bn,RmgAgGrid:gc,RmgAppClip:mc,RmgCard:yc,RmgDataTable:bc,RmgEnrichedButton:vc,RmgErrorBoundary:wc,RmgLabel:xc,RmgLineBadge:Sc,RmgLoader:Nc,RmgMultiSelect:zc,RmgPage:Ec,RmgPageHeader:kc,RmgSidePanel:Ac,RmgThrottledSlider:Rc,RmgWindow:Oc,RmgWindowHeader:_c},Hn=globalThis&&globalThis.__assign||function(){return Hn=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Hn.apply(this,arguments)},Ir="chakra-ui-color-mode",Lc=function(){var n=oe.getColourMode()==="system";return oe.isStandaloneWindow()&&(n?window.localStorage.removeItem(Ir):window.localStorage.setItem(Ir,oe.getColourMode())),{initialColorMode:"system",useSystemColorMode:n}},jc={primary:Hn({},Ma.colors.teal)},Hc={global:{".mw-full":{w:"100%",flexBasis:"100%"}}},$c=function(){return Pa({config:Lc(),colors:jc,styles:Hc,components:Tc})},Mc=function(n){var e=n.children;return g.jsx(Fa,{theme:$c(),children:g.jsx(Pc,{children:e})})},Pc=function(n){var e=n.children,r=Ca().setColorMode,i=Da();return $.useEffect(function(){console.log("[rmg-components] RMG theme is initialised with",i.config),oe.onColourModeChange(function(a){if(a==="system"){var o=window.matchMedia("(prefers-color-scheme: dark)").matches;r(o?"dark":"light")}else r(a)})},[r]),g.jsx(g.Fragment,{children:e})},Fc=(n=>(n.RailMap="railmap",n.Platform="platform",n))(Fc||{}),Cc=(n=>(n.Metro="metro",n.NationalRail="nationalrail",n.LightRail="lightrail",n.Footpath="footpath",n))(Cc||{}),Dc=(n=>(n.APP_LOAD="APP_LOAD",n.ADD_STATION="ADD_STATION",n.ADD_LINE="ADD_LINE",n.IMPORT_RMG_PARAM="IMPORT_RMG_PARAM",n.IMPORT_WORK_FROM_GALLERY="IMPORT_WORK_FROM_GALLERY",n.DOWNLOAD_PARAM="DOWNLOAD_PARAM",n.DOWNLOAD_IMAGES="DOWNLOAD_IMAGES",n.OPEN_DONATION="OPEN_DONATION",n))(Dc||{}),Pe=(n=>(n.APP="rmp__app",n.PARAM="rmp__param",n.PARAM_BACKUP="rmp__param__backup",n.DO_NOT_SHOW_RMT_MSG="rmp__doNotShowRMTMsg",n))(Pe||{}),se;(function(n){n.black="#000",n.white="#fff"})(se||(se={}));var y;(function(n){n.Adelaide="adelaide",n.Almaty="almaty",n.Amsterdam="amsterdam",n.Ankara="ankara",n.Athens="athens",n.Baku="baku",n.Bangkok="bangkok",n.Barcelona="barcelona",n.Beijing="beijing",n.Berlin="berlin",n.Bne="bne",n.Bonn="bonn",n.Bordeaux="bordeaux",n.Boston="boston",n.Brussels="brussels",n.Bucharest="bucharest",n.Budapest="budapest",n.Buenosaires="buenosaires",n.Busan="busan",n.Cairo="cairo",n.Caracas="caracas",n.Cbr="cbr",n.Changchun="changchun",n.Changsha="changsha",n.Changzhou="changzhou",n.Chengdu="chengdu",n.Chennai="chennai",n.Chongqing="chongqing",n.Chuzhou="chuzhou",n.Cochabamba="cochabamba",n.Cologne="cologne",n.Copenhagen="copenhagen",n.Daegu="daegu",n.Dalian="dalian",n.Delhi="delhi",n.Dongguan="dongguan",n.Dortmund="dortmund",n.Dublin="dublin",n.Edinburgh="edinburgh",n.Eskisehir="eskisehir",n.Foshan="foshan",n.Frankfurt="frankfurt",n.Fuzhou="fuzhou",n.Glasgow="glasgow",n.Gothenburg="gothenburg",n.Guadalajara="guadalajara",n.Guangzhou="guangzhou",n.Guiyang="guiyang",n.Hamburg="hamburg",n.Hangzhou="hangzhou",n.Hanoi="hanoi",n.Harbin="harbin",n.Hefei="hefei",n.Hiroshima="hiroshima",n.Hochiminh="hochiminh",n.Hohhot="hohhot",n.Hongkong="hongkong",n.Iashi="iashi",n.Istanbul="istanbul",n.Jakarta="jakarta",n.Jinan="jinan",n.Kansai="kansai",n.Kaohsiung="kaohsiung",n.Kaosiung="kaosiung",n.Kharkiv="kharkiv",n.Klangvalley="klangvalley",n.Kunming="kunming",n.Kyiv="kyiv",n.Lahore="lahore",n.Lanzhou="lanzhou",n.Liege="liege",n.Lille="lille",n.Lima="lima",n.Lisbon="lisbon",n.Littlerockcity="littlerockcity",n.London="london",n.Losangeles="losangeles",n.Lucknow="lucknow",n.Luoyang="luoyang",n.Lyon="lyon",n.Macao="macao",n.Madrid="madrid",n.Manchester="manchester",n.Marseille="marseille",n.Melbourne="melbourne",n.Mexicocity="mexicocity",n.Milan="milan",n.Monterrey="monterrey",n.Montreal="montreal",n.Moscow="moscow",n.Munich="munich",n.Nagpur="nagpur",n.Nanchang="nanchang",n.Nanjing="nanjing",n.Nanning="nanning",n.Nantes="nantes",n.Nantong="nantong",n.Naples="naples",n.Neworleans="neworleans",n.Newtaipei="newtaipei",n.Newyork="newyork",n.Nice="nice",n.Ningbo="ningbo",n.Novosibirsk="novosibirsk",n.Osaka="osaka",n.Oslo="oslo",n.Other="other",n.Ottawa="ottawa",n.Panamacity="panamacity",n.Paris="paris",n.Perth="perth",n.Pyongyang="pyongyang",n.Qingdao="qingdao",n.Rheinruhr="rheinruhr",n.Rio="rio",n.Riyadh="riyadh",n.Rome="rome",n.Rotterdam="rotterdam",n.Saltlakecity="saltlakecity",n.Samara="samara",n.Sanfrancisco="sanfrancisco",n.Sanktpeterburg="sanktpeterburg",n.Santiago="santiago",n.Saopaulo="saopaulo",n.Sapporo="sapporo",n.Seoul="seoul",n.Sevilla="sevilla",n.Shanghai="shanghai",n.Shaoxing="shaoxing",n.Shenyang="shenyang",n.Shenzhen="shenzhen",n.Shijiazhuang="shijiazhuang",n.Shiraz="shiraz",n.Singapore="singapore",n.Stlouis="stlouis",n.Stockholm="stockholm",n.Suzhou="suzhou",n.Sydney="sydney",n.Taichung="taichung",n.Taipei="taipei",n.Taiyuan="taiyuan",n.Taoyuan="taoyuan",n.Tashkent="tashkent",n.Tehran="tehran",n.Tianjin="tianjin",n.Tokyo="tokyo",n.Toronto="toronto",n.Turin="turin",n.Tyneandwear="tyneandwear",n.Urumqi="urumqi",n.Vienna="vienna",n.Warsaw="warsaw",n.Washington="washington",n.Wenzhou="wenzhou",n.Wuhan="wuhan",n.Wuxi="wuxi",n.Xiamen="xiamen",n.Xian="xian",n.Xuzhou="xuzhou",n.Yekaterinburg="yekaterinburg",n.Yevpatoria="yevpatoria",n.Yokohama="yokohama",n.Zhengzhou="zhengzhou"})(y||(y={}));var p;(function(n){n.AR="AR",n.AT="AT",n.AU="AU",n.AZ="AZ",n.BE="BE",n.BO="BO",n.BR="BR",n.CA="CA",n.CL="CL",n.CN="CN",n.DE="DE",n.DK="DK",n.EG="EG",n.ES="ES",n.FR="FR",n.GBENG="GBENG",n.GBSCT="GBSCT",n.GR="GR",n.HK="HK",n.HU="HU",n.ID="ID",n.IE="IE",n.IN="IN",n.IR="IR",n.IT="IT",n.JP="JP",n.KP="KP",n.KR="KR",n.KZ="KZ",n.MO="MO",n.MX="MX",n.MY="MY",n.NL="NL",n.NO="NO",n.PA="PA",n.PE="PE",n.PK="PK",n.PL="PL",n.PT="PT",n.RO="RO",n.RU="RU",n.SA="SA",n.SE="SE",n.SG="SG",n.TH="TH",n.TR="TR",n.TW="TW",n.UA="UA",n.UN="UN",n.US="US",n.UZ="UZ",n.VE="VE",n.VN="VN"})(p||(p={}));y.Adelaide,p.AU,y.Almaty,p.KZ,y.Amsterdam,p.NL,y.Ankara,p.TR,y.Athens,p.GR,y.Baku,p.AZ,y.Bangkok,p.TH,y.Barcelona,p.ES,y.Beijing,p.CN,y.Berlin,p.DE,y.Bne,p.AU,y.Bonn,p.DE,y.Bordeaux,p.FR,y.Boston,p.US,y.Brussels,p.BE,y.Bucharest,p.RO,y.Budapest,p.HU,y.Buenosaires,p.AR,y.Busan,p.KR,y.Cairo,p.EG,y.Caracas,p.VE,y.Cbr,p.AU,y.Changchun,p.CN,y.Changsha,p.CN,y.Changzhou,p.CN,y.Chengdu,p.CN,y.Chennai,p.IN,y.Chongqing,p.CN,y.Chuzhou,p.CN,y.Cochabamba,p.BO,y.Cologne,p.DE,y.Copenhagen,p.DK,y.Daegu,p.KR,y.Dalian,p.CN,y.Delhi,p.IN,y.Dongguan,p.CN,y.Dortmund,p.DE,y.Dublin,p.IE,y.Edinburgh,p.GBSCT,y.Eskisehir,p.TR,y.Foshan,p.CN,y.Frankfurt,p.DE,y.Fuzhou,p.CN,y.Glasgow,p.GBSCT,y.Gothenburg,p.SE,y.Guadalajara,p.MX,y.Guangzhou,p.CN,y.Guiyang,p.CN,y.Hamburg,p.DE,y.Hangzhou,p.CN,y.Hanoi,p.VN,y.Harbin,p.CN,y.Hefei,p.CN,y.Hiroshima,p.JP,y.Hochiminh,p.VN,y.Hohhot,p.CN,y.Hongkong,p.HK,y.Iashi,p.RO,y.Istanbul,p.TR,y.Jakarta,p.ID,y.Jinan,p.CN,y.Kansai,p.JP,y.Kaohsiung,p.TW,y.Kaosiung,p.TW,y.Kharkiv,p.UA,y.Klangvalley,p.MY,y.Kunming,p.CN,y.Kyiv,p.UA,y.Lahore,p.PK,y.Lanzhou,p.CN,y.Liege,p.BE,y.Lille,p.FR,y.Lima,p.PE,y.Lisbon,p.PT,y.Littlerockcity,p.US,y.London,p.GBENG,y.Losangeles,p.US,y.Lucknow,p.IN,y.Luoyang,p.CN,y.Lyon,p.FR,y.Macao,p.MO,y.Madrid,p.ES,y.Manchester,p.GBENG,y.Marseille,p.FR,y.Melbourne,p.AU,y.Mexicocity,p.MX,y.Milan,p.IT,y.Monterrey,p.MX,y.Montreal,p.CA,y.Moscow,p.RU,y.Munich,p.DE,y.Nagpur,p.IN,y.Nanchang,p.CN,y.Nanjing,p.CN,y.Nanning,p.CN,y.Nantes,p.FR,y.Nantong,p.CN,y.Naples,p.IT,y.Neworleans,p.US,y.Newtaipei,p.TW,y.Newyork,p.US,y.Nice,p.FR,y.Ningbo,p.CN,y.Novosibirsk,p.RU,y.Osaka,p.JP,y.Oslo,p.NO,y.Other,p.UN,y.Ottawa,p.CA,y.Panamacity,p.PA,y.Paris,p.FR,y.Perth,p.AU,y.Pyongyang,p.KP,y.Qingdao,p.CN,y.Rheinruhr,p.DE,y.Rio,p.BR,y.Riyadh,p.SA,y.Rome,p.IT,y.Rotterdam,p.NL,y.Saltlakecity,p.US,y.Samara,p.RU,y.Sanfrancisco,p.US,y.Sanktpeterburg,p.RU,y.Santiago,p.CL,y.Saopaulo,p.BR,y.Sapporo,p.JP,y.Seoul,p.KR,y.Sevilla,p.ES,y.Shanghai,p.CN,y.Shaoxing,p.CN,y.Shenyang,p.CN,y.Shenzhen,p.CN,y.Shijiazhuang,p.CN,y.Shiraz,p.IR,y.Singapore,p.SG,y.Stlouis,p.US,y.Stockholm,p.SE,y.Suzhou,p.CN,y.Sydney,p.AU,y.Taichung,p.TW,y.Taipei,p.TW,y.Taiyuan,p.CN,y.Taoyuan,p.TW,y.Tashkent,p.UZ,y.Tehran,p.IR,y.Tianjin,p.CN,y.Tokyo,p.JP,y.Toronto,p.CA,y.Turin,p.IT,y.Tyneandwear,p.GBENG,y.Urumqi,p.CN,y.Vienna,p.AT,y.Warsaw,p.PL,y.Washington,p.US,y.Wenzhou,p.CN,y.Wuhan,p.CN,y.Wuxi,p.CN,y.Xiamen,p.CN,y.Xian,p.CN,y.Xuzhou,p.CN,y.Yekaterinburg,p.RU,y.Yevpatoria,p.UA,y.Yokohama,p.JP,y.Zhengzhou,p.CN;p.AR,p.AT,p.AU,p.AZ,p.BE,p.BO,p.BR,p.CA,p.CL,p.CN,p.DE,p.DK,p.EG,p.ES,p.FR,p.GBENG,p.GBSCT,p.GR,p.HK,p.HU,p.ID,p.IE,p.IN,p.IR,p.IT,p.JP,p.KP,p.KR,p.KZ,p.MO,p.MX,p.MY,p.NL,p.NO,p.PA,p.PE,p.PK,p.PL,p.PT,p.RO,p.RU,p.SA,p.SE,p.SG,p.TH,p.TR,p.TW,p.UA,p.UN,p.US,p.UZ,p.VE,p.VN;let Ic=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");var T=(n=>(n.Diagonal="diagonal",n.Perpendicular="perpendicular",n.RotatePerpendicular="ro-perp",n.Simple="simple",n))(T||{}),V=(n=>(n.SingleColor="single-color",n.ShmetroVirtualInt="shmetro-virtual-int",n.GzmtrVirtualInt="gzmtr-virtual-int",n.ChinaRailway="china-railway",n.BjsubwaySingleColor="bjsubway-single-color",n.BjsubwayTram="bjsubway-tram",n.BjsubwayDotted="bjsubway-dotted",n.DualColor="dual-color",n.River="river",n.MTRRaceDays="mtr-race-days",n.MTRLightRail="mtr-light-rail",n.MTRUnpaidArea="mtr-unpaid-area",n.MTRPaidArea="mtr-paid-area",n))(V||{});const Tg=["single-color","bjsubway-single-color","bjsubway-tram","bjsubway-dotted","mtr-race-days","mtr-light-rail"],Bc=49,Gc={present:new ee().export(),past:[],future:[],svgViewBoxZoom:100,svgViewBoxMin:{x:0,y:0}},ea=Zr("undo"),ta=Zr("redo"),na=Cn({name:"param",initialState:Gc,reducers:{setFullState:(n,e)=>structuredClone(e.payload),saveGraph:(n,e)=>{n.future=[],n.past.push(n.present),n.past.length>Bc&&n.past.shift(),n.present=structuredClone(e.payload)},setSvgViewBoxZoom:(n,e)=>{n.svgViewBoxZoom=e.payload},setSvgViewBoxMin:(n,e)=>{n.svgViewBoxMin=e.payload}},extraReducers:n=>{n.addCase(ea,e=>{if(e.past.length===0)return;const r=e.past.pop();e.future.unshift(e.present),e.present=r,window.graph.clear(),window.graph.import(structuredClone(ur(r)))}).addCase(ta,e=>{if(e.future.length===0)return;const r=e.future.shift();e.past.push(e.present),e.present=r,window.graph.clear(),window.graph.import(structuredClone(ur(r)))})}}),{setFullState:Uc,saveGraph:We,setSvgViewBoxZoom:Lg,setSvgViewBoxMin:jg}=na.actions,Vc=na.reducer,Wc={selected:[],active:void 0,refresh:{nodes:Date.now(),edges:Date.now()},mode:"free",lastTool:void 0,keepLastPath:!1,theme:[y.Shanghai,"sh1","#E3002B",se.white],paletteAppClip:{input:void 0,output:void 0},globalAlerts:{}},ra=Cn({name:"runtime",initialState:Wc,reducers:{setSelected:(n,e)=>{n.selected=e.payload},addSelected:(n,e)=>{n.selected.includes(e.payload)||n.selected.push(e.payload)},removeSelected:(n,e)=>{n.selected.filter(r=>r!==e.payload)},clearSelected:n=>{n.selected=[]},setActive:(n,e)=>{n.active=e.payload},setRefreshNodes:n=>{n.refresh.nodes=Date.now()},setRefreshEdges:n=>{n.refresh.edges=Date.now()},setMode:(n,e)=>{n.mode!=="free"&&(n.lastTool=n.mode),n.mode=e.payload},setKeepLastPath:(n,e)=>{n.keepLastPath=e.payload},setTheme:(n,e)=>{n.theme=e.payload},openPaletteAppClip:(n,e)=>{n.paletteAppClip.input=e.payload,n.paletteAppClip.output=void 0},closePaletteAppClip:n=>{n.paletteAppClip.input=void 0},onPaletteAppClipEmit:(n,e)=>{n.paletteAppClip.input=void 0,n.paletteAppClip.output=e.payload},setGlobalAlert:(n,e)=>{const{status:r,message:i,url:a,linkedApp:o}=e.payload;n.globalAlerts[r]={message:i,url:a,linkedApp:o}},closeGlobalAlert:(n,e)=>{delete n.globalAlerts[e.payload]}},extraReducers:n=>{n.addCase(ea,e=>{e.refresh.nodes=Date.now(),e.refresh.edges=Date.now()}).addCase(ta,e=>{e.refresh.nodes=Date.now(),e.refresh.edges=Date.now()})}}),{setSelected:Hg,addSelected:$g,removeSelected:Mg,clearSelected:Pg,setActive:Fg,setRefreshNodes:$n,setRefreshEdges:wt,setMode:Cg,setKeepLastPath:Dg,setTheme:Ig,openPaletteAppClip:Kc,closePaletteAppClip:Jc,onPaletteAppClipEmit:Yc,setGlobalAlert:qc,closeGlobalAlert:Bg}=ra.actions,Zc=ra.reducer,Z=n=>{const{t:e}=Yt(),r=un(),{selected:i}=cn(l=>l.runtime),a=i.at(0),o=P.useRef(window.graph),s=[];if(i.length===1&&o.current.hasNode(a)){const l=o.current.getNodeAttribute(a,"type"),c=o.current.getNodeAttribute(a,l);s.push(...n.fields.filter(u=>u.type!=="custom").map(u=>{var h,d,f;return{type:u.type,label:e(u.label),value:(h=u.value)==null?void 0:h.call(u,c),isChecked:(d=u.isChecked)==null?void 0:d.call(u,c),hidden:(f=u.hidden)==null?void 0:f.call(u,c),options:u.options,disabledOptions:u.disabledOptions&&u.disabledOptions(c),validator:u.validator,oneLine:u.oneLine,onChange:m=>{let b;try{b=u.onChange(m,c)}catch(v){r(qc({status:"error",message:e(`err-code.${v}`)}));return}o.current.mergeNodeAttributes(a,{[l]:b}),r($n()),r(We(o.current.export()))}}}),...n.fields.filter(u=>u.type==="custom").map(u=>({...u,label:e(u.label)})))}if(i.length===1&&o.current.hasEdge(a)&&n.type!=="style"){const l=o.current.getEdgeAttribute(a,"type"),c=o.current.getEdgeAttribute(a,l);s.push(...n.fields.map(u=>({type:u.type,label:e(u.label),value:u.value(c),options:u.options,disabledOptions:u.disabledOptions&&u.disabledOptions(c),validator:u.validator,onChange:h=>{o.current.mergeEdgeAttributes(a,{[l]:u.onChange(h,c)}),r(wt()),r(We(o.current.export()))}})))}if(i.length===1&&o.current.hasEdge(a)&&n.type==="style"){const l=o.current.getEdgeAttribute(a,"style"),c=o.current.getEdgeAttribute(a,l);console.log(n.fields.map(u=>u.label).map(u=>[u,e(u)])),s.push(...n.fields.filter(u=>u.type!=="custom").map(u=>({type:u.type,label:e(u.label),value:u.value(c),options:u.options,disabledOptions:u.disabledOptions&&u.disabledOptions(c),validator:u.validator,onChange:h=>{o.current.mergeEdgeAttributes(a,{[l]:u.onChange(h,c)}),r(wt()),r(We(o.current.export()))}})),...n.fields.filter(u=>u.type==="custom").map(u=>({...u,label:e(u.label)})))}return g.jsx(cc,{fields:s,minW:276})},Xc=(n,e,r,i,a=xt)=>{const{offset:o=xt.offset}=a,s=Math.abs((i-r)/(e-n));if(s===1/0)return`M ${n+o},${r} L ${e+o},${i}`;if(s===0)return`M ${n},${r+o} L ${e},${i+o}`;{const l=1/s,c=o/Math.sqrt(l*l+1),u=c*l*-Math.sign((e-n)*(i-r));return`M ${n+c},${r+u} L ${e+c},${i+u}`}},xt={offset:0},Qc=[{type:"input",label:"panel.details.lines.simple.offset",value:n=>{var e;return((e=n==null?void 0:n.offset)!=null?e:xt.offset).toString()},validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const r=e!=null?e:xt;return Number.isNaN(n)||(r.offset=Number(n)),r}}],eh=()=>g.jsx(Z,{fields:Qc}),th=g.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:g.jsx("path",{d:"M6,18L18,6",stroke:"currentColor",fill:"none"})}),nh={generatePath:Xc,icon:th,defaultAttrs:xt,attrsComponent:eh,metadata:{displayName:"panel.details.lines.simple.displayName"}};function nr(n,e,r){function i(_,j,F){var B=j.x-_.x,W=j.y-_.y,K=Math.sqrt(B*B+W*W);return a(_,j,Math.min(1,F/K))}function a(_,j,F){return{x:_.x+(j.x-_.x)*F,y:_.y+(j.y-_.y)*F}}function o(_,j){_.length>2&&(_[_.length-2]=j.x,_[_.length-1]=j.y)}function s(_){return{x:parseFloat(_[_.length-2]),y:parseFloat(_[_.length-1])}}var l=n.split(/[,\s]/).reduce(function(_,j){var F=j.match("([a-zA-Z])(.+)");return F?(_.push(F[1]),_.push(F[2])):_.push(j),_},[]),c=l.reduce(function(_,j){return parseFloat(j)==j&&_.length?_[_.length-1].push(j):_.push([j]),_},[]),u=[];if(c.length>1){var h=s(c[0]),d=null;c[c.length-1][0]=="Z"&&c[0].length>2&&(d=["L",h.x,h.y],c[c.length-1]=d),u.push(c[0]);for(var f=1;f<c.length;f++){var m=u[u.length-1],b=c[f],v=b==d?c[1]:c[f+1];if(v&&m&&m.length>2&&b[0]=="L"&&v.length>2&&v[0]=="L"){var N=s(m),z=s(b),k=s(v),A,R;r?(A=a(z,m.origPoint||N,e),R=a(z,v.origPoint||k,e)):(A=i(z,N,e),R=i(z,k,e)),o(b,A),b.origPoint=z,u.push(b);var S=a(A,z,.5),L=a(z,R,.5),O=["C",S.x,S.y,L.x,L.y,R.x,R.y];O.origPoint=z,u.push(O)}else u.push(b)}if(d){var M=s(u[u.length-1]);u.push(["Z"]),o(u[0],M)}}else u=c;return u.reduce(function(_,j){return _+j.join(" ")+" "},"")}const rh=(n,e,r,i,a=te)=>{const{startFrom:o=te.startFrom,offsetFrom:s=te.offsetFrom,offsetTo:l=te.offsetTo,roundCornerFactor:c=te.roundCornerFactor}=a,[u,h,d,f]=o==="from"?[n,r,e,i]:[e,i,n,r],m=Math.abs(d-u)<Math.abs(f-h)?"vertical":"horizontal",[b,v]=o==="from"?[s,l]:[l,s],N=m==="horizontal"?0:b,z=m==="horizontal"?b:0,k=v*Math.SQRT1_2,A=v*Math.SQRT1_2*((d-u)*(f-h)<0?1:-1),[R,S,L,O]=[u+N,h+z,d+k,f+A],M=m==="horizontal"?L+Math.abs(O-S)*(L-R>0?-1:1):R,_=m==="horizontal"?S:O+Math.abs(L-R)*(O-S>0?-1:1),[j,F,B,W]=o==="from"?[R,S,L,O]:[L,O,R,S];return nr(`M ${j},${F} L ${M},${_} L ${B},${W}`,c,!1)},te={startFrom:"from",offsetFrom:0,offsetTo:0,roundCornerFactor:10},ih=[{type:"select",label:"panel.details.lines.common.startFrom",value:n=>{var e;return(e=n==null?void 0:n.startFrom)!=null?e:te.startFrom},options:{from:"from",to:"to"},onChange:(n,e)=>{const r=e!=null?e:te;return r.startFrom=n,r}},{type:"input",label:"panel.details.lines.common.offsetFrom",value:n=>{var e;return((e=n==null?void 0:n.offsetFrom)!=null?e:te.offsetFrom).toString()},validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const r=e!=null?e:te;return Number.isNaN(n)||(r.offsetFrom=Number(n)),r}},{type:"input",label:"panel.details.lines.common.offsetTo",value:n=>{var e;return((e=n==null?void 0:n.offsetTo)!=null?e:te.offsetTo).toString()},validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const r=e!=null?e:te;return Number.isNaN(n)||(r.offsetTo=Number(n)),r}},{type:"input",label:"panel.details.lines.common.roundCornerFactor",value:n=>{var e;return((e=n==null?void 0:n.roundCornerFactor)!=null?e:te.roundCornerFactor).toString()},validator:n=>!Number.isNaN(n)&&Number(n)>=0,onChange:(n,e)=>{const r=e!=null?e:te;return Number.isNaN(n)||Number(n)<0||(r.roundCornerFactor=Number(n)),r}}],ah=()=>g.jsx(Z,{fields:ih}),oh=g.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:g.jsx("path",{d:"M9,18V12L15,6",stroke:"currentColor",fill:"none"})}),sh={generatePath:rh,icon:oh,defaultAttrs:te,attrsComponent:ah,metadata:{displayName:"panel.details.lines.diagonal.displayName"}},lh=(n,e,r,i,a=ne)=>{const{startFrom:o=ne.startFrom,offsetFrom:s=ne.offsetFrom,offsetTo:l=ne.offsetTo,roundCornerFactor:c=ne.roundCornerFactor}=a,[u,h]=o==="from"?[s,l]:[l,s],[d,f,m,b]=o==="from"?[0,u,h,0]:[u,0,0,h],v=o==="from"?e+m:n+d,N=o==="from"?r+f:i+b;return nr(`M ${n+d},${r+f} L ${v},${N} L ${e+m},${i+b}`,c,!1)},ne={startFrom:"from",offsetFrom:0,offsetTo:0,roundCornerFactor:18.33},uh=[{type:"select",label:"panel.details.lines.common.startFrom",value:n=>{var e;return(e=n==null?void 0:n.startFrom)!=null?e:ne.startFrom},options:{from:"from",to:"to"},onChange:(n,e)=>{const r=e!=null?e:ne;return r.startFrom=n,r}},{type:"input",label:"panel.details.lines.common.offsetFrom",value:n=>{var e;return((e=n==null?void 0:n.offsetFrom)!=null?e:ne.offsetFrom).toString()},validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const r=e!=null?e:ne;return Number.isNaN(n)||(r.offsetFrom=Number(n)),r}},{type:"input",label:"panel.details.lines.common.offsetTo",value:n=>{var e;return((e=n==null?void 0:n.offsetTo)!=null?e:ne.offsetTo).toString()},validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const r=e!=null?e:ne;return Number.isNaN(n)||(r.offsetTo=Number(n)),r}},{type:"input",label:"panel.details.lines.common.roundCornerFactor",value:n=>{var e;return((e=n==null?void 0:n.roundCornerFactor)!=null?e:ne.roundCornerFactor).toString()},validator:n=>!Number.isNaN(n)&&Number(n)>=0,onChange:(n,e)=>{const r=e!=null?e:ne;return Number.isNaN(n)||Number(n)<0||(r.roundCornerFactor=Number(n)),r}}],ch=()=>g.jsx(Z,{fields:uh}),hh=g.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:g.jsx("path",{d:"M6,6H18V18",stroke:"currentColor",fill:"none"})}),dh={generatePath:lh,icon:hh,defaultAttrs:ne,attrsComponent:ch,metadata:{displayName:"panel.details.lines.perpendicular.displayName"}},fh=(n,e,r,i,a=re)=>{const{startFrom:o=re.startFrom,offsetFrom:s=re.offsetFrom,offsetTo:l=re.offsetTo,roundCornerFactor:c=re.roundCornerFactor}=a,[u,h]=o==="from"?[s,l]:[l,s],[d,f,m,b]=o==="from"?[0,u,h,0]:[u,0,0,h],[v,N,z,k]=[n*Math.SQRT1_2+r*Math.SQRT1_2,-n*Math.SQRT1_2+r*Math.SQRT1_2,e*Math.SQRT1_2+i*Math.SQRT1_2,-e*Math.SQRT1_2+i*Math.SQRT1_2],[A,R,S,L]=[v+d,N+f,z+m,k+b],[O,M,_,j]=[A*Math.SQRT1_2-R*Math.SQRT1_2,A*Math.SQRT1_2+R*Math.SQRT1_2,S*Math.SQRT1_2-L*Math.SQRT1_2,S*Math.SQRT1_2+L*Math.SQRT1_2],F=o==="from"?z+m:v+d,B=o==="from"?N+f:k+b,[W,K]=[F*Math.SQRT1_2-B*Math.SQRT1_2,F*Math.SQRT1_2+B*Math.SQRT1_2];return nr(`M ${O},${M} L ${W},${K} L ${_},${j}`,c,!1)},re={startFrom:"from",offsetFrom:0,offsetTo:0,roundCornerFactor:18.33},ph=[{type:"select",label:"panel.details.lines.common.startFrom",value:n=>{var e;return(e=n==null?void 0:n.startFrom)!=null?e:re.startFrom},options:{from:"from",to:"to"},onChange:(n,e)=>{const r=e!=null?e:re;return r.startFrom=n,r}},{type:"input",label:"panel.details.lines.common.offsetFrom",value:n=>{var e;return((e=n==null?void 0:n.offsetFrom)!=null?e:re.offsetFrom).toString()},validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const r=e!=null?e:re;return Number.isNaN(n)||(r.offsetFrom=Number(n)),r}},{type:"input",label:"panel.details.lines.common.offsetTo",value:n=>{var e;return((e=n==null?void 0:n.offsetTo)!=null?e:re.offsetTo).toString()},validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const r=e!=null?e:re;return Number.isNaN(n)||(r.offsetTo=Number(n)),r}},{type:"input",label:"panel.details.lines.common.roundCornerFactor",value:n=>{var e;return((e=n==null?void 0:n.roundCornerFactor)!=null?e:re.roundCornerFactor).toString()},validator:n=>!Number.isNaN(n)&&Number(n)>=0,onChange:(n,e)=>{const r=e!=null?e:re;return Number.isNaN(n)||Number(n)<0||(r.roundCornerFactor=Number(n)),r}}],gh=()=>g.jsx(Z,{fields:ph}),mh=g.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:g.jsx("path",{d:"M9,6L15,12L9,18",stroke:"currentColor",fill:"none"})}),yh={generatePath:fh,icon:mh,defaultAttrs:re,attrsComponent:gh,metadata:{displayName:"panel.details.lines.rotatePerpendicular.displayName"}};var Ge=(n=>(n.Virtual="virtual",n.ShmetroNumLineBadge="shmetro-num-line-badge",n.ShmetroTextLineBadge="shmetro-text-line-badge",n.GzmtrLineBadge="gzmtr-line-badge",n.BjsubwayNumLineBadge="bjsubway-num-line-badge",n.BjsubwayTextLineBadge="bjsubway-text-line-badge",n.SuzhouRTNumLineBadge="suzhourt-num-line-badge",n.BerlinSBahnLineBadge="berlin-s-bahn-line-badge",n.BerlinUBahnLineBadge="berlin-u-bahn-line-badge",n.ChongqingRTNumLineBadge="chongqingrt-num-line-badge",n.ChongqingRTTextLineBadge="chongqingrt-text-line-badge",n.ShenzhenMetroNumLineBadge="shenzhen-metro-num-line-badge",n.Facilities="facilities",n.Text="text",n))(Ge||{}),Ue=(n=>(n.ShmetroBasic="shmetro-basic",n.ShmetroBasic2020="shmetro-basic-2020",n.ShmetroInt="shmetro-int",n.ShmetroOutOfSystemInt="shmetro-osysi",n.GzmtrBasic="gzmtr-basic",n.GzmtrInt="gzmtr-int",n.BjsubwayBasic="bjsubway-basic",n.BjsubwayInt="bjsubway-int",n.MTR="mtr",n.SuzhouRTBasic="suzhourt-basic",n.SuzhouRTInt="suzhourt-int",n.KunmingRTBasic="kunmingrt-basic",n.KunmingRTInt="kunmingrt-int",n))(Ue||{});const Gg={names:["","Stn"]};class bh{static hexToRgb(e){return[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)]}static fade(e,r){return`rgba(${[...this.hexToRgb(e),r].join(",")})`}static euclideanDistance(e,r){return this.hexToRgb(e).reduce((i,a,o)=>i+Math.pow(a-this.hexToRgb(r)[o],2),0)}}function Ug(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}]})(n)}function Vg(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}}]})(n)}function Wg(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z"}}]})(n)}function Kg(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}}]})(n)}function Jg(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}}]})(n)}function Yg(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"}}]})(n)}function qg(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}},{tag:"path",attr:{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}}]})(n)}function Zg(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}}]})(n)}function Xg(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 7h9v2h-9zM13 15h9v2h-9zM16 11h6v2h-6zM13 12L8 7v4H2v2h6v4z"}}]})(n)}function Qg(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}}]})(n)}function em(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}}]})(n)}function tm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 017.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}}]})(n)}function nm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M21 12.4V7l-4-4H5a2 2 0 00-2 2v14a2 2 0 002 2h7.4l8.6-8.6zM15 15c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zM6 6h9v4H6V6zm13.99 10.25l1.77 1.77L16.77 23H15v-1.77l4.99-4.98zm3.26.26l-.85.85-1.77-1.77.85-.85c.2-.2.51-.2.71 0l1.06 1.06c.2.2.2.52 0 .71z"}}]})(n)}function rm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}}]})(n)}function im(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}}]})(n)}function am(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"}}]})(n)}function om(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}}]})(n)}function sm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}}]})(n)}function vh(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"}}]})(n)}function lm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}}]})(n)}function um(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}}]})(n)}function cm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}}]})(n)}function hm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}}]})(n)}function dm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}}]})(n)}function fm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}}]})(n)}function pm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}}]})(n)}function wh(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"}}]})(n)}function gm(n){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M3.55 19.09l1.41 1.41 1.79-1.8-1.41-1.41zM11 20h2v3h-2zM1 11h3v2H1zm12-6.95v3.96l1 .58c1.24.72 2 2.04 2 3.46 0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.42.77-2.74 2-3.46l1-.58V4.05h2m2-2H9v4.81C7.21 7.9 6 9.83 6 12.05c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19V2.05zM20 11h3v2h-3zm-2.76 7.71l1.79 1.8 1.41-1.41-1.8-1.79z"}}]})(n)}function xh(n){const{theme:e,onClick:r}=n,{t:i}=Yt();return g.jsx(_t,{"aria-label":i("Color"),color:e[3],bg:e[2],size:"md",_hover:{bg:bh.fade(e[2],.7)},icon:g.jsx(vh,{}),onClick:r})}const Qe=n=>{var k;const{type:e,colorKey:r="color",defaultTheme:i}=n,a=un(),{selected:o,paletteAppClip:{output:s}}=cn(A=>A.runtime),l=o.at(0),c=P.useCallback(()=>{a($n()),a(wt()),a(We(u.current.export()))},[a,$n,wt,We]),u=P.useRef(window.graph),[h,d,f]=[].concat(Object.values(Ue)).concat(Object.values(Ge)).find(A=>e===A)?[u.current.hasNode,u.current.getNodeAttribute,u.current.mergeNodeAttributes]:[u.current.hasEdge,u.current.getEdgeAttribute,u.current.mergeEdgeAttributes],m=A=>{if(l&&h.bind(u.current)(l)){const R=d.bind(u.current)(l,e);R[r]=A,f.bind(u.current)(l,{[e]:R}),c()}},[b,v]=P.useState(!1);P.useEffect(()=>{b&&s&&(m(s),v(!1))},[s==null?void 0:s.toString()]);const z=l&&h.bind(u.current)(l)&&(l.startsWith("stn")||l.startsWith("misc_node")?u.current.getNodeAttribute(l,"type")===e:u.current.getEdgeAttribute(l,"style")===e)?((k=d.bind(u.current)(l,e))!=null?k:{[r]:i})[r]:i;return g.jsx(g.Fragment,{children:g.jsx(xh,{theme:z,onClick:()=>{v(!0),a(Kc(z))}})})},Sh=n=>{const{id:e,path:r,styleAttrs:i,newLine:a,handleClick:o}=n,{color:s=Dt.color}=i!=null?i:Dt,l=P.useCallback(c=>o(e,c),[e,o]);return g.jsx("path",{id:e,d:r,fill:"none",stroke:s[2],strokeWidth:"5",strokeLinecap:"round",cursor:"pointer",onClick:a?void 0:l,pointerEvents:a?"none":void 0})},Dt={color:[y.Shanghai,"sh1","#E4002B",se.white]},Nh=[{type:"custom",label:"color",component:g.jsx(Qe,{type:V.SingleColor,defaultTheme:Dt.color})}],zh=()=>g.jsx(Z,{fields:Nh,type:"style"}),Eh={component:Sh,defaultAttrs:Dt,attrsComponent:zh,metadata:{displayName:"panel.details.lines.singleColor.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular]}},kh=n=>{const{id:e,path:r,handleClick:i}=n,a=P.useCallback(o=>i(e,o),[e,i]);return g.jsxs("g",{id:e,children:[g.jsx("path",{d:r,fill:"none",stroke:"black",strokeWidth:"7",strokeLinecap:"round"}),g.jsx("path",{d:r,fill:"none",stroke:"white",strokeWidth:"4.33",strokeLinecap:"round"}),g.jsx("path",{d:r,fill:"none",stroke:"white",strokeOpacity:"0",strokeWidth:"7",strokeLinecap:"round",cursor:"pointer",onClick:a})]})},Ah={},Rh=()=>g.jsx(Z,{fields:[],type:"style"}),Oh={component:kh,defaultAttrs:Ah,attrsComponent:Rh,metadata:{displayName:"panel.details.lines.shmetroVirtualInt.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular,T.Simple]}},_h=n=>{const{id:e,path:r,handleClick:i}=n,a=P.useCallback(o=>i(e,o),[e,i]);return g.jsx("path",{d:r,fill:"none",stroke:"black",strokeWidth:"3",strokeDasharray:"3",cursor:"pointer",onClick:a})},Th={},Lh=()=>g.jsx(Z,{fields:[],type:"style"}),jh={component:_h,defaultAttrs:Th,attrsComponent:Lh,metadata:{displayName:"panel.details.lines.gzmtrVirtualInt.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular,T.Simple]}},Hh=n=>{const{id:e,path:r,handleClick:i}=n,a=P.useCallback(o=>i(e,o),[e,i]);return g.jsxs("g",{id:e,children:[g.jsx("path",{d:r,fill:"none",stroke:"black",strokeWidth:"5",strokeLinecap:"round"}),g.jsx("path",{d:r,fill:"none",stroke:"white",strokeWidth:"4.67",strokeDasharray:"17.5"}),g.jsx("path",{d:r,fill:"none",stroke:"black",strokeOpacity:"0",strokeWidth:"5",strokeLinecap:"round",cursor:"pointer",onClick:a})]})},$h={},Mh=()=>g.jsx(Z,{fields:[],type:"style"}),Ph={component:Hh,defaultAttrs:$h,attrsComponent:Mh,metadata:{displayName:"panel.details.lines.chinaRailway.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular]}},Fh=n=>{const{id:e,path:r,styleAttrs:i,newLine:a,handleClick:o}=n,{color:s=It.color}=i!=null?i:It,l=P.useCallback(c=>o(e,c),[e,o]);return P.useMemo(()=>g.jsxs(g.Fragment,{children:[g.jsx("path",{d:r,fill:"none",stroke:"white",strokeWidth:"6",strokeLinecap:"round"}),g.jsx("path",{id:e,d:r,fill:"none",stroke:s[2],strokeWidth:"5",strokeLinecap:"round"}),g.jsx("path",{id:e,d:r,fill:"none",stroke:"white",strokeWidth:"6",strokeLinecap:"round",strokeOpacity:"0",cursor:"pointer",onClick:a?void 0:l,pointerEvents:a?"none":void 0})]}),[e,r,i.color[2],a])},It={color:[y.Beijing,"bj1","#c23a30",se.white]},Ch=[{type:"custom",label:"color",component:g.jsx(Qe,{type:V.BjsubwaySingleColor,defaultTheme:It.color})}],Dh=()=>g.jsx(Z,{fields:Ch,type:"style"}),Ih={component:Fh,defaultAttrs:It,attrsComponent:Dh,metadata:{displayName:"panel.details.lines.bjsubwaySingleColor.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular]}},Bh=n=>{const{id:e,path:r,styleAttrs:i,handleClick:a}=n,{color:o=Bt.color}=i!=null?i:Bt,s=P.useCallback(l=>a(e,l),[e,a]);return g.jsxs("g",{id:e,children:[g.jsx("path",{d:r,fill:"none",stroke:o[2],strokeWidth:"5"}),g.jsx("path",{d:r,fill:"none",stroke:"white",strokeWidth:"1.67"}),g.jsx("path",{d:r,fill:"none",stroke:"white",strokeOpacity:"0",strokeWidth:5,cursor:"pointer",onClick:s})]})},Bt={color:[y.Shanghai,"sh1","#E4002B",se.white]},Gh=[{type:"custom",label:"color",component:g.jsx(Qe,{type:V.BjsubwayTram,defaultTheme:Bt.color})}],Uh=()=>g.jsx(Z,{fields:Gh,type:"style"}),Vh={component:Bh,defaultAttrs:Bt,attrsComponent:Uh,metadata:{displayName:"panel.details.lines.bjsubwayTram.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular]}},{abs:ot,cos:xe,sin:Ie,acos:Wh,atan2:st,sqrt:_e,pow:ue}=Math;function lt(n){return n<0?-ue(-n,1/3):ue(n,1/3)}const ia=Math.PI,kt=2*ia,Te=ia/2,Kh=1e-6,vn=Number.MAX_SAFE_INTEGER||9007199254740991,wn=Number.MIN_SAFE_INTEGER||-9007199254740991,Jh={x:0,y:0,z:0},w={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),_e(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const a=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:a*o[0].x+n*o[1].x,y:a*o[0].y+n*o[1].y,t:n};return r&&(l.z=a*o[0].z+n*o[1].z),l}if(i<4){let l=a*a,c=n*n,u,h,d,f=0;i===2?(o=[o[0],o[1],o[2],Jh],u=l,h=a*n*2,d=c):i===3&&(u=l*a,h=l*n*3,d=a*c*3,f=n*c);const m={x:u*o[0].x+h*o[1].x+d*o[2].x+f*o[3].x,y:u*o[0].y+h*o[1].y+d*o[2].y+f*o[3].y,t:n};return r&&(m.z=u*o[0].z+h*o[1].z+d*o[2].z+f*o[3].z),m}const s=JSON.parse(JSON.stringify(e));for(;s.length>1;){for(let l=0;l<s.length-1;l++)s[l]={x:s[l].x+(s[l+1].x-s[l].x)*n,y:s[l].y+(s[l+1].y-s[l].y)*n},typeof s[l].z<"u"&&(s[l]=s[l].z+(s[l+1].z-s[l].z)*n);s.splice(s.length-1,1)}return s[0].t=n,s[0]},computeWithRatios:function(n,e,r,i){const a=1-n,o=r,s=e;let l=o[0],c=o[1],u=o[2],h=o[3],d;if(l*=a,c*=n,s.length===2)return d=l+c,{x:(l*s[0].x+c*s[1].x)/d,y:(l*s[0].y+c*s[1].y)/d,z:i?(l*s[0].z+c*s[1].z)/d:!1,t:n};if(l*=a,c*=2*a,u*=n*n,s.length===3)return d=l+c+u,{x:(l*s[0].x+c*s[1].x+u*s[2].x)/d,y:(l*s[0].y+c*s[1].y+u*s[2].y)/d,z:i?(l*s[0].z+c*s[1].z+u*s[2].z)/d:!1,t:n};if(l*=a,c*=1.5*a,u*=3*a,h*=n*n*n,s.length===4)return d=l+c+u+h,{x:(l*s[0].x+c*s[1].x+u*s[2].x+h*s[3].x)/d,y:(l*s[0].y+c*s[1].y+u*s[2].y+h*s[3].y)/d,z:i?(l*s[0].z+c*s[1].z+u*s[2].z+h*s[3].z)/d:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,a=i.length,o=a-1;a>1;a--,o--){const s=[];for(let l=0,c;l<o;l++)c={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(c.z=o*(i[l+1].z-i[l].z)),s.push(c);r.push(s),i=s}return r},between:function(n,e,r){return e<=n&&n<=r||w.approximately(n,e)||w.approximately(n,r)},approximately:function(n,e,r){return ot(n-e)<=(r||Kh)},length:function(n){const r=w.Tvalues.length;let i=0;for(let a=0,o;a<r;a++)o=.5*w.Tvalues[a]+.5,i+=w.Cvalues[a]*w.arcfn(o,n);return .5*i},map:function(n,e,r,i,a){const o=r-e,s=a-i,l=n-e,c=l/o;return i+s*c},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(w.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,a=e.y-n.y,o=r.x-n.x,s=r.y-n.y,l=i*s-a*o,c=i*o+a*s;return st(l,c)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return _e(r*r+i*i)},closest:function(n,e){let r=ue(2,63),i,a;return n.forEach(function(o,s){a=w.dist(e,o),a<r&&(r=a,i=s)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=ue(n,e)+ue(1-n,e),i=r-1;return ot(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=ue(1-n,e),i=ue(n,e)+r;return r/i},lli8:function(n,e,r,i,a,o,s,l){const c=(n*i-e*r)*(a-s)-(n-r)*(a*l-o*s),u=(n*i-e*r)*(o-l)-(e-i)*(a*l-o*s),h=(n-r)*(o-l)-(e-i)*(a-s);return h==0?!1:{x:c/h,y:u/h}},lli4:function(n,e,r,i){const a=n.x,o=n.y,s=e.x,l=e.y,c=r.x,u=r.y,h=i.x,d=i.y;return w.lli8(a,o,s,l,c,u,h,d)},lli:function(n,e){return w.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new U(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=vn,r=vn,i=wn,a=wn;return n.forEach(function(o){const s=o.bbox();e>s.x.min&&(e=s.x.min),r>s.y.min&&(r=s.y.min),i<s.x.max&&(i=s.x.max),a<s.y.max&&(a=s.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+a)/2,max:a,size:a-r}}},shapeintersections:function(n,e,r,i,a){if(!w.bboxoverlap(e,i))return[];const o=[],s=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return s.forEach(function(c){c.virtual||l.forEach(function(u){if(u.virtual)return;const h=c.intersects(u,a);h.length>0&&(h.c1=c,h.c2=u,h.s1=n,h.s2=r,o.push(h))})}),o},makeshape:function(n,e,r){const i=e.points.length,a=n.points.length,o=w.makeline(e.points[i-1],n.points[0]),s=w.makeline(n.points[a-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:s,bbox:w.findbbox([o,n,e,s])};return l.intersections=function(c){return w.shapeintersections(l,l.bbox,c,c.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=vn,a=wn,o,s;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,c=r.length;l<c;l++)o=r[l],s=n.get(o),s[e]<i&&(i=s[e]),s[e]>a&&(a=s[e]);return{min:i,mid:(i+a)/2,max:a,size:a-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,a=-st(e.p2.y-i,e.p2.x-r),o=function(s){return{x:(s.x-r)*xe(a)-(s.y-i)*Ie(a),y:(s.x-r)*Ie(a)+(s.y-i)*xe(a)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=w.align(n,e),a=function(O){return 0<=O&&O<=1};if(r===2){const O=i[0].y,M=i[1].y,_=i[2].y,j=O-2*M+_;if(j!==0){const F=-_e(M*M-O*_),B=-O+M,W=-(F+B)/j,K=-(-F+B)/j;return[W,K].filter(a)}else if(M!==_&&j===0)return[(2*M-_)/(2*M-2*_)].filter(a);return[]}const o=i[0].y,s=i[1].y,l=i[2].y,c=i[3].y;let u=-o+3*s-3*l+c,h=3*o-6*s+3*l,d=-3*o+3*s,f=o;if(w.approximately(u,0)){if(w.approximately(h,0))return w.approximately(d,0)?[]:[-f/d].filter(a);const O=_e(d*d-4*h*f),M=2*h;return[(O-d)/M,(-d-O)/M].filter(a)}h/=u,d/=u,f/=u;const m=(3*d-h*h)/3,b=m/3,v=(2*h*h*h-9*h*d+27*f)/27,N=v/2,z=N*N+b*b*b;let k,A,R,S,L;if(z<0){const O=-m/3,M=O*O*O,_=_e(M),j=-v/(2*_),F=j<-1?-1:j>1?1:j,B=Wh(F),W=lt(_),K=2*W;return R=K*xe(B/3)-h/3,S=K*xe((B+kt)/3)-h/3,L=K*xe((B+2*kt)/3)-h/3,[R,S,L].filter(a)}else{if(z===0)return k=N<0?lt(-N):-lt(N),R=2*k-h/3,S=-k-h/3,[R,S].filter(a);{const O=_e(z);return k=lt(-N+O),A=lt(N+O),[k-A-h/3].filter(a)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],a=e-2*r+i;if(a!==0){const o=-_e(r*r-e*i),s=-e+r,l=-(o+s)/a,c=-(-o+s)/a;return[l,c]}else if(r!==i&&a===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,a){let o,s,l,c,u=0,h=0;const d=w.compute(n,e),f=w.compute(n,r),m=d.x*d.x+d.y*d.y;if(i?(o=_e(ue(d.y*f.z-f.y*d.z,2)+ue(d.z*f.x-f.z*d.x,2)+ue(d.x*f.y-f.x*d.y,2)),s=ue(m+d.z*d.z,3/2)):(o=d.x*f.y-d.y*f.x,s=ue(m,3/2)),o===0||s===0)return{k:0,r:0};if(u=o/s,h=s/o,!a){const b=w.curvature(n-.001,e,r,i,!0).k,v=w.curvature(n+.001,e,r,i,!0).k;c=(v-u+(u-b))/2,l=(ot(v-u)+ot(u-b))/2}return{k:u,r:h,dk:c,adk:l}},inflections:function(n){if(n.length<4)return[];const e=w.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,a=e[1].x*e[2].y,o=e[3].x*e[2].y,s=18*(-3*r+2*i+3*a-o),l=18*(3*r-i-3*a),c=18*(a-r);if(w.approximately(s,0)){if(!w.approximately(l,0)){let f=-c/l;if(0<=f&&f<=1)return[f]}return[]}const u=2*s;if(w.approximately(u,0))return[];const h=l*l-4*s*c;if(h<0)return[];const d=Math.sqrt(h);return[(d-l)/u,-(l+d)/u].filter(function(f){return 0<=f&&f<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let a=0,o,s,l,c;a<i;a++)if(o=r[a],s=n[o].mid,l=e[o].mid,c=(n[o].size+e[o].size)/2,ot(s-l)>=c)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),a=e.bbox(),o=1e5,s=r||.5;if(i.x.size+i.y.size<s&&a.x.size+a.y.size<s)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),c=e.split(.5),u=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];u=u.filter(function(d){return w.bboxoverlap(d.left.bbox(),d.right.bbox())});let h=[];return u.length===0||(u.forEach(function(d){h=h.concat(w.pairiteration(d.left,d.right,s))}),h=h.filter(function(d,f){return h.indexOf(d)===f})),h},getccenter:function(n,e,r){const i=e.x-n.x,a=e.y-n.y,o=r.x-e.x,s=r.y-e.y,l=i*xe(Te)-a*Ie(Te),c=i*Ie(Te)+a*xe(Te),u=o*xe(Te)-s*Ie(Te),h=o*Ie(Te)+s*xe(Te),d=(n.x+e.x)/2,f=(n.y+e.y)/2,m=(e.x+r.x)/2,b=(e.y+r.y)/2,v=d+l,N=f+c,z=m+u,k=b+h,A=w.lli8(d,f,v,N,m,b,z,k),R=w.dist(A,n);let S=st(n.y-A.y,n.x-A.x),L=st(e.y-A.y,e.x-A.x),O=st(r.y-A.y,r.x-A.x),M;return S<O?((S>L||L>O)&&(S+=kt),S>O&&(M=O,O=S,S=M)):O<L&&L<S?(M=O,O=S,S=M):O+=kt,A.s=S,A.e=O,A.r=R,A},numberSort:function(n,e){return n-e}};class yt{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return w.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)w.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new yt(r)}}const{abs:ut,min:Br,max:Gr,cos:Yh,sin:qh,acos:Zh,sqrt:ct}=Math,Xh=Math.PI;class U{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const m=[];r.forEach(function(b){["x","y","z"].forEach(function(v){typeof b[v]<"u"&&m.push(b[v])})}),r=m}let a=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const s=this._3d=!a&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let m=0,b=s?3:2;m<o;m+=b){var c={x:r[m],y:r[m+1]};s&&(c.z=r[m+2]),l.push(c)}const u=this.order=l.length-1,h=this.dims=["x","y"];s&&h.push("z"),this.dimlen=h.length;const d=w.align(l,{p1:l[0],p2:l[u]}),f=w.dist(l[0],l[u]);this._linear=d.reduce((m,b)=>m+ut(b.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,a){if(typeof a>"u"&&(a=.5),a===0)return new U(r,r,i);if(a===1)return new U(e,r,r);const o=U.getABC(2,e,r,i,a);return new U(e,o.A,i)}static cubicFromPoints(e,r,i,a,o){typeof a>"u"&&(a=.5);const s=U.getABC(3,e,r,i,a);typeof o>"u"&&(o=w.dist(r,s.C));const l=o*(1-a)/a,c=w.dist(e,i),u=(i.x-e.x)/c,h=(i.y-e.y)/c,d=o*u,f=o*h,m=l*u,b=l*h,v={x:r.x-d,y:r.y-f},N={x:r.x+m,y:r.y+b},z=s.A,k={x:z.x+(v.x-z.x)/(1-a),y:z.y+(v.y-z.y)/(1-a)},A={x:z.x+(N.x-z.x)/a,y:z.y+(N.y-z.y)/a},R={x:e.x+(k.x-e.x)/a,y:e.y+(k.y-e.y)/a},S={x:i.x+(A.x-i.x)/(1-a),y:i.y+(A.y-i.y)/(1-a)};return new U(e,R,S,i)}static getUtils(){return w}getUtils(){return U.getUtils()}static get PolyBezier(){return yt}valueOf(){return this.toString()}toString(){return w.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,a=["M",r,i,this.order===2?"Q":"C"];for(let o=1,s=e.length;o<s;o++)a.push(e[o].x),a.push(e[o].y);return a.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=w.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=w.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return w.length(this.derivative.bind(this))}static getABC(e=2,r,i,a,o=.5){const s=w.projectionratio(o,e),l=1-s,c={x:s*r.x+l*a.x,y:s*r.y+l*a.y},u=w.abcratio(o,e);return{A:{x:i.x+(i.x-c.x)/u,y:i.y+(i.y-c.y)/u},B:i,C:c,S:r,E:a}}getABC(e,r){r=r||this.get(e);let i=this.points[0],a=this.points[this.order];return U.getABC(this.order,i,r,a,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,a;r<e;r++)a=r/(e-1),i=this.compute(a),i.t=a,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),a=[];for(let o=0,s,l=0;o<i.length;o++)s=i[o],w.dist(s,e)<r&&(a.push(s),l+=o/i.length);return a.length?t/=a.length:!1}project(e){const r=this.getLUT(),i=r.length-1,a=w.closest(r,e),o=a.mpos,s=(o-1)/i,l=(o+1)/i,c=.1/i;let u=a.mdist,h=s,d=h,f;u+=1;for(let m;h<l+c;h+=c)f=this.compute(h),m=w.dist(e,f),m<u&&(u=m,d=h);return d=d<0?0:d>1?1:d,f=this.compute(d),f.t=d,f.d=u,f}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?w.computeWithRatios(e,this.points,this.ratios,this._3d):w.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let a=1,o,s;a<i;a++)o=e[a],s=e[a-1],r[a]={x:(i-a)/i*o.x+a/i*s.x,y:(i-a)/i*o.y+a/i*s.y};return r[i]=e[i-1],new U(r)}derivative(e){return w.compute(e,this.dpoints[0],this._3d)}dderivative(e){return w.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new U(w.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return w.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return w.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=ct(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),a=ct(r.x*r.x+r.y*r.y+r.z*r.z),o=ct(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=a,r.y/=a,r.z/=a,i.x/=o,i.y/=o,i.z/=o;const s={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=ct(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=l,s.y/=l,s.z/=l;const c=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:e,x:c[0]*r.x+c[1]*r.y+c[2]*r.z,y:c[3]*r.x+c[4]*r.y+c[5]*r.z,z:c[6]*r.x+c[7]*r.y+c[8]*r.z}}hull(e){let r=this.points,i=[],a=[],o=0;for(a[o++]=r[0],a[o++]=r[1],a[o++]=r[2],this.order===3&&(a[o++]=r[3]);r.length>1;){i=[];for(let s=0,l,c=r.length-1;s<c;s++)l=w.lerp(e,r[s],r[s+1]),a[o++]=l,i.push(l);r=i}return a}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),a={left:this.order===2?new U([i[0],i[3],i[5]]):new U([i[0],i[4],i[7],i[9]]),right:this.order===2?new U([i[5],i[4],i[2]]):new U([i[9],i[8],i[6],i[3]]),span:i};return a.left._t1=w.map(0,0,1,this._t1,this._t2),a.left._t2=w.map(e,0,1,this._t1,this._t2),a.right._t1=w.map(e,0,1,this._t1,this._t2),a.right._t2=w.map(1,0,1,this._t1,this._t2),r?(r=w.map(r,e,1,0,1),a.right.split(r).left):a}extrema(){const e={};let r=[];return this.dims.forEach(function(i){let a=function(s){return s[i]},o=this.dpoints[0].map(a);e[i]=w.droots(o),this.order===3&&(o=this.dpoints[1].map(a),e[i]=e[i].concat(w.droots(o))),e[i]=e[i].filter(function(s){return s>=0&&s<=1}),r=r.concat(e[i].sort(w.numberSort))}.bind(this)),e.values=r.sort(w.numberSort).filter(function(i,a){return r.indexOf(i)===a}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach(function(i){r[i]=w.getminmax(this,i,e[i])}.bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return w.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),a=this.normal(e),o={c:i,n:a,x:i.x+a.x*r,y:i.y+a.y*r};return this._3d&&(o.z=i.z+a.z*r),o}if(this._linear){const i=this.normal(0),a=this.points.map(function(o){const s={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(s.z=o.z+e*i.z),s});return[new U(a)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const a=w.angle(this.points[0],this.points[3],this.points[1]),o=w.angle(this.points[0],this.points[3],this.points[2]);if(a>0&&o<0||a<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),ut(Zh(i))<Xh/3}reduce(){let e,r=0,i=0,a=.01,o,s=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),r=c[0],e=1;e<c.length;e++)i=c[e],o=this.split(r,i),o._t1=r,o._t2=i,s.push(o),r=i;return s.forEach(function(u){for(r=0,i=0;i<=1;)for(i=r+a;i<=1+a;i+=a)if(o=u.split(r,i),!o.simple()){if(i-=a,ut(r-i)<a)return[];o=u.split(r,i),o._t1=w.map(r,0,1,u._t1,u._t2),o._t2=w.map(i,0,1,u._t1,u._t2),l.push(o),r=i;break}r<1&&(o=u.split(r,1),o._t1=w.map(r,0,1,u._t1,u._t2),o._t2=u._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const a=this.order;let o=this.points.map((s,l)=>(1-l/a)*r+l/a*i);return new U(this.points.map((s,l)=>({x:s.x+e.x*o[l],y:s.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const a=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const s=i?i(0):e,l=i?i(1):e,c=[this.offset(0,10),this.offset(1,10)],u=[],h=w.lli4(c[0],c[0].c,c[1],c[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(d){const f=u[d*r]=w.copy(o[d*r]);f.x+=(d?l:s)*c[d].n.x,f.y+=(d?l:s)*c[d].n.y}),i?([0,1].forEach(function(d){if(!(r===2&&d)){var f=o[d+1],m={x:f.x-h.x,y:f.y-h.y},b=i?i((d+1)/r):e;i&&!a&&(b=-b);var v=ct(m.x*m.x+m.y*m.y);m.x/=v,m.y/=v,u[d+1]={x:f.x+b*m.x,y:f.y+b*m.y}}}),new U(u)):([0,1].forEach(d=>{if(r===2&&d)return;const f=u[d*r],m=this.derivative(d),b={x:f.x+m.x,y:f.y+m.y};u[d+1]=w.lli4(f,b,h,o[d+1])}),new U(u))}outline(e,r,i,a){if(r=r===void 0?e:r,this._linear){const S=this.normal(0),L=this.points[0],O=this.points[this.points.length-1];let M,_,j;i===void 0&&(i=e,a=r),M={x:L.x+S.x*e,y:L.y+S.y*e},j={x:O.x+S.x*i,y:O.y+S.y*i},_={x:(M.x+j.x)/2,y:(M.y+j.y)/2};const F=[M,_,j];M={x:L.x-S.x*r,y:L.y-S.y*r},j={x:O.x-S.x*a,y:O.y-S.y*a},_={x:(M.x+j.x)/2,y:(M.y+j.y)/2};const B=[j,_,M],W=w.makeline(B[2],F[0]),K=w.makeline(F[2],B[0]),ve=[W,new U(F),K,new U(B)];return new yt(ve)}const o=this.reduce(),s=o.length,l=[];let c=[],u,h=0,d=this.length();const f=typeof i<"u"&&typeof a<"u";function m(S,L,O,M,_){return function(j){const F=M/O,B=(M+_)/O,W=L-S;return w.map(j,0,1,S+F*W,S+B*W)}}o.forEach(function(S){const L=S.length();f?(l.push(S.scale(m(e,i,d,h,L))),c.push(S.scale(m(-r,-a,d,h,L)))):(l.push(S.scale(e)),c.push(S.scale(-r))),h+=L}),c=c.map(function(S){return u=S.points,u[3]?S.points=[u[3],u[2],u[1],u[0]]:S.points=[u[2],u[1],u[0]],S}).reverse();const b=l[0].points[0],v=l[s-1].points[l[s-1].points.length-1],N=c[s-1].points[c[s-1].points.length-1],z=c[0].points[0],k=w.makeline(N,b),A=w.makeline(v,z),R=[k].concat(l).concat([A]).concat(c);return new yt(R)}outlineshapes(e,r,i){r=r||e;const a=this.outline(e,r).curves,o=[];for(let s=1,l=a.length;s<l/2;s++){const c=w.makeshape(a[s],a[l-s],i);c.startcap.virtual=s>1,c.endcap.virtual=s<l/2-1,o.push(c)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof U&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=Br(e.p1.x,e.p2.x),i=Br(e.p1.y,e.p2.y),a=Gr(e.p1.x,e.p2.x),o=Gr(e.p1.y,e.p2.y);return w.roots(this.points,e).filter(s=>{var l=this.get(s);return w.between(l.x,r,a)&&w.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,a=[];for(let o=0,s,l,c;o<i;o++)l=r.slice(o,o+1),c=r.slice(o+2),s=this.curveintersects(l,c,e),a.push(...s);return a}curveintersects(e,r,i){const a=[];e.forEach(function(s){r.forEach(function(l){s.overlaps(l)&&a.push({left:s,right:l})})});let o=[];return a.forEach(function(s){const l=w.pairiteration(s.left,s.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,a){const o=(a-i)/4,s=this.get(i+o),l=this.get(a-o),c=w.dist(e,r),u=w.dist(e,s),h=w.dist(e,l);return ut(u-c)+ut(h-c)}_iterate(e,r){let i=0,a=1,o;do{o=0,a=1;let s=this.get(i),l,c,u,h,d=!1,f=!1,m,b=a,v=1;do if(f=d,h=u,b=(i+a)/2,l=this.get(b),c=this.get(a),u=w.getccenter(s,l,c),u.interval={start:i,end:a},d=this._error(u,s,i,a)<=e,m=f&&!d,m||(v=a),d){if(a>=1){if(u.interval.end=v=1,h=u,a>1){let z={x:u.x+u.r*Yh(u.e),y:u.y+u.r*qh(u.e)};u.e+=w.angle({x:u.x,y:u.y},z,this.get(1))}break}a=a+(a-i)/2}else a=b;while(!m&&o++<100);if(o>=100)break;h=h||u,r.push(h),i=v}while(a<1);return r}}const At=(n,e,r,i,a,o)=>{const[s,l]=[n+r,i+o],[c,u]=[s-e,l-a];return[c,u]},Qh=n=>{const{id:e,type:r,path:i,styleAttrs:a,handleClick:o}=n,{colorA:s=bt.colorA,colorB:l=bt.colorB}=a!=null?a:bt,c=P.useCallback(m=>o(e,m),[e,o]),[u,h]=P.useState(i),[d,f]=P.useState(i);return P.useEffect(()=>{var X,we,et,tt,rr,ir,ar,or;const m=(we=(X=i.match(/M\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+/))==null?void 0:X.at(0))==null?void 0:we.replace(/M\s*/,"").split(" ").map(Q=>Number(Q)),b=(tt=(et=i.match(/L\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*$/))==null?void 0:et.at(0))==null?void 0:tt.replace(/L\s*/,"").split(" ").map(Q=>Number(Q));if(!m||!b)return;if(m[0]===b[0]||m[1]===b[1]||r===T.Diagonal&&Math.abs(m[1]-b[1])===Math.abs(m[0]-b[0])){const[Q,ke,Ae,Re]=[m[0],m[1],b[0],b[1]],hn=Math.abs((Re-ke)/(Ae-Q));if(hn===1/0)h(`M ${Q+1.25},${ke} L ${Ae+1.25},${Re}`),f(`M ${Q-1.25},${ke} L ${Ae-1.25},${Re}`);else if(hn===0)h(`M ${Q},${ke+1.25} L ${Ae},${Re+1.25}`),f(`M ${Q},${ke-1.25} L ${Ae},${Re-1.25}`);else{const dn=1/hn,nt=1.25/Math.sqrt(dn*dn+1),Nt=nt*dn*-Math.sign((Ae-Q)*(Re-ke));h(`M ${Q+nt},${ke+Nt} L ${Ae+nt},${Re+Nt}`),f(`M ${Q-nt},${ke-Nt} L ${Ae-nt},${Re-Nt}`)}return}const v=(ir=(rr=i.match(/L\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+/))==null?void 0:rr.at(0))==null?void 0:ir.replace(/L\s*/,"").split(" ").map(Q=>Number(Q)),N=(or=(ar=i.match(/C\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+/g))==null?void 0:ar.at(0))==null?void 0:or.replace(/C\s*/,"").split(" ").map(Q=>Number(Q));if(!v||!N)return;const z=new U([...v,...N]),[k,A]=[z.scale(-1.25),z.scale(1.25)],R=[k.points.at(0).x,k.points.at(0).y],S=[A.points.at(0).x,A.points.at(0).y];if(!m)return;const[L,O]=At(m[0],v[0],R[0],m[1],v[1],R[1]),[M,_]=At(m[0],v[0],S[0],m[1],v[1],S[1]),j=[k.points.at(-1).x,k.points.at(-1).y],F=[A.points.at(-1).x,A.points.at(-1).y],B=[z.points.at(-1).x,z.points.at(-1).y];if(!b)return;const[W,K]=At(j[0],B[0],b[0],j[1],B[1],b[1]),[ve,St]=At(F[0],B[0],b[0],F[1],B[1],b[1]);h(`M ${L},${O} ${k.toSVG().replace("M","L")} L ${W},${K}`),f(`M ${M},${_} ${A.toSVG().replace("M","L")} L ${ve},${St}`)},[i]),g.jsxs("g",{id:e,children:[g.jsx("path",{d:u,fill:"none",stroke:s[2],strokeWidth:"2.5",strokeLinecap:"round"}),g.jsx("path",{d,fill:"none",stroke:l[2],strokeWidth:"2.5",strokeLinecap:"round"}),g.jsx("path",{d:i,fill:"none",stroke:"white",strokeOpacity:"0",strokeWidth:"5",strokeLinecap:"round",cursor:"pointer",onClick:c})]})},bt={colorA:[y.Shanghai,"maglevA","#008B9A",se.white],colorB:[y.Shanghai,"maglevB","#F5A74E",se.white]},ed=()=>{const{t:n}=Yt(),e=un(),{selected:r}=cn(o=>o.runtime),i=r.at(0),a=P.useRef(window.graph);return g.jsx(_t,{"aria-label":n("panel.details.lines.dualColor.swap"),icon:g.jsx(wh,{}),size:"sm",onClick:()=>{var l;const o=(l=a.current.getEdgeAttribute(i,V.DualColor))!=null?l:bt,s=o.colorA;o.colorA=o.colorB,o.colorB=s,a.current.mergeEdgeAttributes(i,{[V.DualColor]:o}),e(wt()),e(We(a.current.export()))}})},td=[{type:"custom",label:"panel.details.lines.dualColor.swap",component:g.jsx(ed,{})}],nd=()=>g.jsx(Z,{fields:td,type:"style"}),rd={component:Qh,defaultAttrs:bt,attrsComponent:nd,metadata:{displayName:"panel.details.lines.dualColor.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular]}},id=n=>{const{id:e,path:r,styleAttrs:i,handleClick:a}=n,{color:o=Ke.color,width:s=Ke.width}=i!=null?i:Ke,l=P.useCallback(c=>a(e,c),[e,a]);return g.jsx("path",{id:e,d:r,fill:"none",stroke:o[2],strokeWidth:s,strokeLinecap:"round",cursor:"pointer",onClick:l})},Ke={color:[y.Shanghai,"river","#B9E3F9",se.white],width:20},ad=[{type:"input",label:"panel.details.lines.river.width",variant:"number",value:n=>(n!=null?n:Ke).width,onChange:(n,e)=>{const r=e!=null?e:Ke;return r.width=Number(n),r}}],od=()=>g.jsx(Z,{fields:ad,type:"style"}),sd={component:id,defaultAttrs:Ke,attrsComponent:od,metadata:{displayName:"panel.details.lines.river.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular,T.Simple]}},ld=n=>{const{id:e,path:r,styleAttrs:i,handleClick:a}=n,{color:o=Gt.color}=i!=null?i:Gt,s=P.useCallback(l=>a(e,l),[e,a]);return g.jsx("path",{id:e,d:r,fill:"none",stroke:o[2],strokeWidth:"5",strokeLinecap:"butt",strokeDasharray:"5 2.5",cursor:"pointer",onClick:s})},Gt={color:[y.Hongkong,"twl","#E2231A",se.white]},ud=[{type:"custom",label:"color",component:g.jsx(Qe,{type:V.MTRRaceDays,defaultTheme:Gt.color})}],cd=()=>g.jsx(Z,{fields:ud,type:"style"}),hd={component:ld,defaultAttrs:Gt,attrsComponent:cd,metadata:{displayName:"panel.details.lines.mtrRaceDays.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular]}},dd=n=>{const{id:e,path:r,styleAttrs:i,handleClick:a}=n,{color:o=Ut.color}=i!=null?i:Ut,s=P.useCallback(l=>a(e,l),[e,a]);return g.jsx("path",{id:e,d:r,fill:"none",stroke:o[2],strokeWidth:"2.5",strokeLinecap:"round",cursor:"pointer",onClick:s})},Ut={color:[y.Hongkong,"lrl","#CD9700",se.white]},fd=[{type:"custom",label:"color",component:g.jsx(Qe,{type:V.MTRLightRail,defaultTheme:Ut.color})}],pd=()=>g.jsx(Z,{fields:fd,type:"style"}),gd={component:dd,defaultAttrs:Ut,attrsComponent:pd,metadata:{displayName:"panel.details.lines.mtrLightRail.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular]}},md=n=>{const{id:e,path:r,handleClick:i}=n,a=P.useCallback(o=>i(e,o),[e,i]);return g.jsx("path",{d:r,fill:"none",stroke:"black",strokeWidth:"1.33",strokeDasharray:"2.66 1.33",cursor:"pointer",onClick:a})},yd={},bd=()=>g.jsx(Z,{fields:[],type:"style"}),vd={component:md,defaultAttrs:yd,attrsComponent:bd,metadata:{displayName:"panel.details.lines.mtrUnpaidArea.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular,T.Simple]}},wd=n=>{const{id:e,path:r,handleClick:i}=n,a=P.useCallback(o=>i(e,o),[e,i]);return g.jsx("path",{d:r,fill:"none",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round",cursor:"pointer",onClick:a})},xd={},Sd=()=>g.jsx(Z,{fields:[],type:"style"}),Nd={component:wd,defaultAttrs:xd,attrsComponent:Sd,metadata:{displayName:"panel.details.lines.mtrPaidArea.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular,T.Simple]}},zd=n=>{const{id:e,path:r,styleAttrs:i,handleClick:a}=n,{color:o=Vt.color}=i!=null?i:Vt,s=P.useCallback(c=>a(e,c),[e,a]),l=Yr("white","var(--chakra-colors-gray-800)");return g.jsxs("g",{id:e,children:[g.jsx("path",{d:r,fill:"none",stroke:o[2],strokeWidth:"5",strokeDasharray:"2 2"}),g.jsx("path",{d:r,fill:"none",stroke:l,strokeWidth:"3.4"}),g.jsx("path",{d:r,fill:"none",stroke:"white",strokeOpacity:"0",strokeWidth:5,strokeDasharray:"2 2",cursor:"pointer",onClick:s})]})},Vt={color:[y.Beijing,"bj1","#c23a30",se.white]},Ed=[{type:"custom",label:"color",component:g.jsx(Qe,{type:V.BjsubwayDotted,defaultTheme:Vt.color})}],kd=()=>g.jsx(Z,{fields:Ed,type:"style"}),Ad={component:zd,defaultAttrs:Vt,attrsComponent:kd,metadata:{displayName:"panel.details.lines.bjsubwayDotted.displayName",supportLinePathType:[T.Diagonal,T.Perpendicular,T.RotatePerpendicular]}},Rd={[T.Diagonal]:sh,[T.Perpendicular]:dh,[T.RotatePerpendicular]:yh,[T.Simple]:nh},Od={[V.SingleColor]:Eh,[V.ShmetroVirtualInt]:Oh,[V.GzmtrVirtualInt]:jh,[V.ChinaRailway]:Ph,[V.BjsubwaySingleColor]:Ih,[V.BjsubwayTram]:Vh,[V.BjsubwayDotted]:Ad,[V.DualColor]:rd,[V.River]:sd,[V.MTRRaceDays]:hd,[V.MTRLightRail]:gd,[V.MTRUnpaidArea]:vd,[V.MTRPaidArea]:Nd},_d=21,Ur=async()=>JSON.stringify((await Xe(()=>import("./shanghai-25571990.js"),[])).default),Td=async n=>{let e=!1;n||(n=await Ur(),e=!0);let r=JSON.parse(n);(!("version"in r)||!Number.isInteger(r.version))&&(r=JSON.parse(await Ur()),e=!0);let i=Number(r.version),a=JSON.stringify(r);for(;i in Vr;)a=Vr[i](a),i=Number(JSON.parse(a).version),e=!0;return e&&(console.warn(`Upgrade save to version: ${i}`),localStorage.setItem(Pe.PARAM_BACKUP,n)),a},Ld=n=>{const{present:e,past:r,future:i,...a}=n,o={...a,graph:e,version:_d};return JSON.stringify(o)},Vr={0:n=>{var e;return JSON.stringify({version:1,graph:(e=JSON.parse(n))==null?void 0:e.graph,svgViewBoxZoom:100,svgViewBoxMin:{x:0,y:0}})},1:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterNodes((i,a)=>i.startsWith("stn")&&a.type!==Ue.GzmtrInt).forEach(i=>{const a=r.getNodeAttribute(i,"type"),o=r.getNodeAttribute(i,a);o&&"transfer"in o&&delete o.transfer,r.mergeNodeAttributes(i,{[a]:o})}),JSON.stringify({...e,version:2,graph:r.export()})},2:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterNodes((i,a)=>i.startsWith("stn")).forEach(i=>{const a=r.getNodeAttribute(i,"type"),o=r.getNodeAttribute(i,a);(o==null?void 0:o.nameOffsetX)==="middle"&&(o==null?void 0:o.nameOffsetY)==="middle"&&(o.nameOffsetX="right",o.nameOffsetY="top"),(o==null?void 0:o.nameOffsetY)==="up"&&(o.nameOffsetY="top"),r.mergeNodeAttributes(i,{[a]:o})}),JSON.stringify({...e,version:3,graph:r.export()})},3:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterEdges((i,a,o,s,l,c,u)=>i.startsWith("line")).forEach(i=>{const a=r.getEdgeAttribute(i,"color");r.removeEdgeAttribute(i,"color"),r.mergeEdgeAttributes(i,{style:V.SingleColor,[V.SingleColor]:{color:a}})}),r.filterEdges((i,a,o,s,l,c,u)=>i.startsWith("misc_edge")).forEach(i=>{const a=`line_${Ic(10)}`,[o,s]=r.extremities(i),l=r.getEdgeAttribute(i,"type"),c=l;r.addDirectedEdgeWithKey(a,o,s,{visible:!0,zIndex:0,type:T.Simple,[l]:structuredClone(Rd[T.Simple].defaultAttrs),style:c,[c]:structuredClone(Od[c].defaultAttrs),reconcileId:""}),r.dropEdge(i)}),JSON.stringify({...e,version:4,graph:r.export()})},4:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterNodes((i,a)=>i.startsWith("stn")&&(a.type===Ue.GzmtrBasic||a.type===Ue.GzmtrInt)).forEach(i=>{const a=r.getNodeAttribute(i,"type"),o=r.getNodeAttribute(i,a);o.open=!0,o.secondaryNames=["",""],r.mergeNodeAttributes(i,{[a]:o})}),JSON.stringify({...e,version:5,graph:r.export()})},5:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterEdges((i,a,o,s,l,c,u)=>i.startsWith("line")&&a.type===T.Simple).forEach(i=>{var o;const a=(o=r.getEdgeAttribute(i,T.Simple))!=null?o:{offset:0};a.offset=0,r.mergeEdgeAttributes(i,{[T.Simple]:a})}),JSON.stringify({...e,version:6,graph:r.export()})},6:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterNodes((i,a)=>i.startsWith("stn")&&a.type===Ue.GzmtrBasic).forEach(i=>{const a=r.getNodeAttribute(i,"type"),o=r.getNodeAttribute(i,a);o.tram=!1,r.mergeNodeAttributes(i,{[a]:o})}),JSON.stringify({...e,version:7,graph:r.export()})},7:n=>JSON.stringify({...JSON.parse(n),version:8}),8:n=>JSON.stringify({...JSON.parse(n),version:9}),9:n=>JSON.stringify({...JSON.parse(n),version:10}),10:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterNodes((i,a)=>i.startsWith("misc_node")&&a.type===Ge.Text).forEach(i=>{const a=r.getNodeAttribute(i,"type"),o=r.getNodeAttribute(i,a);o.color=[y.Shanghai,"jsr","#000000",se.white],r.mergeNodeAttributes(i,{[a]:o})}),JSON.stringify({...e,version:11,graph:r.export()})},11:n=>JSON.stringify({...JSON.parse(n),version:12}),12:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterNodes((i,a)=>i.startsWith("misc_node")&&a.type===Ge.Text).forEach(i=>{const a=r.getNodeAttribute(i,"type"),o=r.getNodeAttribute(i,a);o.rotate=0,o.italic=!1,r.mergeNodeAttributes(i,{[a]:o})}),JSON.stringify({...e,version:13,graph:r.export()})},13:n=>JSON.stringify({...JSON.parse(n),version:14}),14:n=>JSON.stringify({...JSON.parse(n),version:15}),15:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterNodes((i,a)=>i.startsWith("misc_node")&&a.type===Ge.Text).forEach(i=>{const a=r.getNodeAttribute(i,"type"),o=r.getNodeAttribute(i,a);o.italic=o.italic?"italic":"normal",o.bold="normal",r.mergeNodeAttributes(i,{[a]:o})}),JSON.stringify({...e,version:16,graph:r.export()})},16:n=>{const e=JSON.parse(n),r=new ee;return r.import(e==null?void 0:e.graph),r.filterNodes((i,a)=>i.startsWith("misc_node")&&a.type===Ge.Facilities).forEach(i=>{const a=r.getNodeAttribute(i,"type"),o=r.getNodeAttribute(i,a);let s=0;switch(o.type){case"airport":case"maglev":case"disney":case"railway":s+=25/2;break;case"hsr":case"airport_hk":case"disney_hk":s+=19/2;break}r.updateNodeAttribute(i,"y",l=>(l!=null?l:0)+s)}),JSON.stringify({...e,version:17,graph:r.export()})},17:n=>JSON.stringify({...JSON.parse(n),version:18}),18:n=>JSON.stringify({...JSON.parse(n),version:19}),19:n=>JSON.stringify({...JSON.parse(n),version:20}),20:n=>JSON.stringify({...JSON.parse(n),version:21})},jd={telemetry:{app:!0,project:!0},preference:{unlockSimplePathAttempts:3,toolsPanel:{expand:!0}}},aa=Cn({name:"param",initialState:jd,reducers:{setTelemetryApp:(n,e)=>{n.telemetry.app=e.payload},setTelemetryProject:(n,e)=>{n.telemetry.project=e.payload},setUnlockSimplePath:(n,e)=>{n.preference.unlockSimplePathAttempts=e.payload},setToolsPanelExpansion:(n,e)=>{n.preference.toolsPanel.expand=e.payload}}}),{setTelemetryApp:Hd,setTelemetryProject:$d,setUnlockSimplePath:Md,setToolsPanelExpansion:Pd}=aa.actions,Fd=aa.reducer,Se=Ia({reducer:{app:Fd,param:Vc,runtime:Zc},middleware:n=>n({serializableCheck:!1})});Se.subscribe(()=>{localStorage.setItem(Pe.PARAM,Ld(Se.getState().param)),localStorage.setItem(Pe.APP,JSON.stringify(Se.getState().app))});const un=()=>pu(),cn=iu,Cd=P.lazy(()=>Xe(()=>import("./page-header-358eb622.js"),["assets/page-header-358eb622.js","assets/chakra-594c63ee.js","assets/react-2c0b8364.js","assets/stations-12179c83.js","assets/helpers-72f8fecf.js","assets/graph-1424c961.js","assets/change-types-3c7e98bb.js"])),Dd=P.lazy(()=>Xe(()=>import("./tools-3d35ad2d.js"),["assets/tools-3d35ad2d.js","assets/chakra-594c63ee.js","assets/react-2c0b8364.js","assets/misc-nodes-67200cac.js","assets/stations-12179c83.js"])),Id=P.lazy(()=>Xe(()=>import("./svg-wrapper-fec25a7e.js"),["assets/svg-wrapper-fec25a7e.js","assets/chakra-594c63ee.js","assets/react-2c0b8364.js","assets/clipboard-c291d56a.js","assets/helpers-72f8fecf.js","assets/graph-1424c961.js","assets/misc-nodes-67200cac.js","assets/stations-12179c83.js"])),Bd=P.lazy(()=>Xe(()=>import("./details-2dee30a0.js"),["assets/details-2dee30a0.js","assets/chakra-594c63ee.js","assets/react-2c0b8364.js","assets/graph-1424c961.js","assets/change-types-3c7e98bb.js","assets/stations-12179c83.js","assets/clipboard-c291d56a.js","assets/misc-nodes-67200cac.js"])),Gd=P.lazy(()=>Xe(()=>import("./rmg-palette-app-clip-d7bdedd3.js"),["assets/rmg-palette-app-clip-d7bdedd3.js","assets/chakra-594c63ee.js","assets/react-2c0b8364.js"]));function Ud(){const n=un(),{paletteAppClip:{input:e}}=cn(c=>c.runtime),{t:r}=Yt(),[i,a]=P.useState(!1);P.useEffect(()=>{oe.isStandaloneWindow()&&!window.localStorage.getItem(Pe.DO_NOT_SHOW_RMT_MSG)&&a(!0)},[]);const o=new Date,s=`${o.getFullYear()}${String(o.getMonth()+1).padStart(2,"0")}01`,l=`${String(o.getFullYear()).slice(-2)}.${o.getMonth()+1}.1`;return g.jsx(Mc,{children:g.jsx(hc,{children:g.jsxs(P.Suspense,{fallback:g.jsxs(g.Fragment,{children:[g.jsx("p",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:"Rail Map Toolkit protocol... checked"}),g.jsxs("p",{style:{position:"absolute",top:"75%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"small",color:"gray"},children:["Seeing this page for too long? Try another mirror"," ",g.jsx("a",{href:"https://railmapgen.github.io/?app=rmp",target:"_blank",rel:"noreferrer",children:"GitHub"})," ",g.jsx("a",{href:"https://railmapgen.gitlab.io/?app=rmp",target:"_blank",rel:"noreferrer",children:"Gitlab"})," ","or the"," ",g.jsx("a",{href:"https://github.com/railmapgen/railmapgen.github.io/releases",target:"_blank",rel:"noreferrer",children:"offline application"})," ",".",g.jsx("br",{}),g.jsx("br",{}),"Offline applications via ghproxy.com"," ",g.jsx("a",{href:`https://ghproxy.com/https://github.com/railmapgen/railmapgen.github.io/releases/download/tauri-${s}/railmapgen_${l}_x64-setup.exe`,children:"Windows"})," ",g.jsx("a",{href:`https://ghproxy.com/https://github.com/railmapgen/railmapgen.github.io/releases/download/tauri-${s}/railmapgen_${l}_x64.dmg`,children:"MacOS"})," ",g.jsx("a",{href:`https://ghproxy.com/https://github.com/railmapgen/railmapgen.github.io/releases/download/tauri-${s}/railmapgen_${l}_amd64.deb`,children:"Linux"})," ","if you are in mainland China :)"]})]}),children:[g.jsx(Cd,{}),i&&g.jsxs(Mn,{status:"info",variant:"solid",size:"xs",pl:3,pr:1,py:1,zIndex:"1",children:[g.jsx(Pn,{}),g.jsxs(Le,{children:[g.jsx(dt,{href:"/?app=rmp",isExternal:!0,fontWeight:"bold",children:r("rmtPromotion")})," ",g.jsx(dt,{as:"button",ml:"auto",textDecoration:"underline",onClick:()=>a(!1),children:r("close")})," | ",g.jsx(dt,{as:"button",textDecoration:"underline",onClick:()=>{a(!1),window.localStorage.setItem(Pe.DO_NOT_SHOW_RMT_MSG,"true")},children:r("noShowAgain")})]})]}),g.jsx(tc,{allowReset:!0,children:g.jsxs($e,{direction:"row",height:"100%",overflow:"hidden",sx:{position:"relative"},children:[g.jsx(Dd,{}),g.jsx(Id,{}),g.jsx(Bd,{})]})}),g.jsx(Gd,{isOpen:!!e,onClose:()=>n(Jc()),defaultTheme:e,onSelect:c=>n(Yc(c))})]})})})}const Vd="",Wd="",Kd="",Jd="",Yd="",qd="",Zd="",Xd="",Qd="",ef="",tf="/Language",nf="",rf="",af="",of="",sf="",lf="",uf="",cf="",hf="",df="",ff="",pf="",gf="",mf={Action:Vd,Apps:Wd,"Back to list":"","Background colour":"",Black:Kd,Cancel:Jd,City:Yd,Components:qd,"Configuration file":"",Confirm:Zd,Continue:Xd,"Country/Region":"/",Copy:Qd,Edit:ef,"Foreground colour":"","Go back":"",Language:tf,Justification:nf,Name:rf,Next:af,Open:of,Palette:sf,"Please select...":"...",Previous:lf,"Rail Map Generator":"","Rail Map Painter":"","Rail Map Toolkit":"",Remove:uf,Reset:cf,"RMG Templates":"RMG ","RMP Gallery":"RMP ","Seed Project":"",Settings:hf,Submit:df,Translate:ff,Upload:pf,White:gf},yf="",bf="",vf="",wf="",xf="",Sf="",Nf="",zf="",Ef="",kf="",Af="/Language",Rf="",Of="",_f="",Tf="",Lf="",jf="",Hf="",$f="",Mf="",Pf="",Ff="",Cf="",Df="",If={Action:yf,Apps:bf,"Back to list":"","Background colour":"",Black:vf,Cancel:wf,City:xf,Components:Sf,"Configuration file":"",Confirm:Nf,Continue:zf,Copy:Ef,"Country/Region":"/",Edit:kf,"Foreground colour":"","Go back":"",Language:Af,Justification:Rf,Name:Of,Next:_f,Open:Tf,Palette:Lf,"Please select...":"...",Previous:jf,"Rail Map Generator":"","Rail Map Painter":"","Rail Map Toolkit":"",Remove:Hf,Reset:$f,"RMG Templates":"RMG ","RMP Gallery":"RMP ","Seed Project":"",Settings:Mf,Submit:Pf,Translate:Ff,Upload:Cf,White:Df},Bf="",Gf="",Uf="",Vf="",Wf="",Kf="",Jf="",Yf="",qf="",Zf="/Language",Xf="",Qf="",ep="",tp="",np="",rp="",ip="",ap="",op="",sp="",lp="",up="",cp="",hp={Action:Bf,Apps:Gf,"Back to list":" ","Background colour":"",Black:Uf,Cancel:Vf,City:Wf,Components:Kf,"Configuration file":"  ",Confirm:Jf,Copy:Yf,"Country/Region":"/",Edit:qf,"Foreground colour":"","Go back":"",Language:Zf,Justification:Xf,Name:Qf,Next:ep,Open:tp,Palette:np,"Please select...":"",Previous:rp,"Rail Map Generator":"  ","Rail Map Painter":"  ","Rail Map Toolkit":" ",Remove:ip,Reset:ap,"RMG Templates":"RMG ","RMP Gallery":"RMP ","Seed Project":" ",Settings:op,Submit:sp,Translate:lp,Upload:up,White:cp};var dp={en:{},"zh-Hans":mf,"zh-Hant":If,ko:hp};const fp="Color",pp="Warning",gp="Cancel",mp="Apply",yp="Remove",bp="Close",vp="Don't show me again",wp="The all-in-one toolkit you definitely do not want to miss!",xp={tools:{showLess:"Show less",section:{lineDrawing:"Line drawing",stations:"Stations",miscellaneousNodes:"Miscellaneous nodes"},select:"Select"},details:{header:"Details",info:{title:"Basic information",id:"ID",zIndex:"Depth",stationType:"Station Type",linePathType:"Line Path Type",lineStyleType:"Line Style Type",type:"Type"},multipleSelection:"Multiple Selection",selected:"Selected Objects:",changeStationTypeContent:"Changing station's type will remove all attributes from the station except its names.",changeLineTypeContent:"Changing line's type will remove all attributes from the line.",changeType:"Change Type",nodePosition:{title:"Node Position",pos:{x:"Coordinate X",y:"Coordinate Y"}},lineExtremities:{title:"Line Extremities",source:"Source",target:"Target",sourceName:"Source Name",targetName:"Target Name"},specificAttrsTitle:"Specific Attributes",nodes:{common:{nameZh:"Line name in Chinese",nameEn:"Line name in English",num:"Line Number"},virtual:{displayName:"Virtual node"},shmetroNumLineBadge:{displayName:"Shanghai Metro num line badge"},shmetroTextLineBadge:{displayName:"Shanghai Metro text line badge"},gzmtrLineBadge:{displayName:"Guangzhou Metro line badge"},bjsubwayNumLineBadge:{displayName:"Beijing Subway num line badge"},bjsubwayTextLineBadge:{displayName:"Beijing Subway text line badge"},berlinSBahnLineBadge:{displayName:"Berlin S Bahn line badge"},berlinUBahnLineBadge:{displayName:"Berlin U Bahn line badge"},suzhouRTNumLineBadge:{displayName:"Suzhou Rail Transit num line badge",branch:"Is branch line"},chongqingRTNumLineBadge:{displayName:"Chongqing Rail Transit num line badge"},chongqingRTTextLineBadge:{displayName:"Chongqing Rail Transit text line badge"},shenzhenMetroNumLineBadge:{displayName:"Shenzhen Metro num line badge",branch:"Is branch line"},facilities:{displayName:"Facilities",type:"Type"},text:{displayName:"Arbitrary text",content:"Content",fontSize:"Font size",lineHeight:"Line height",textAnchor:"Text anchor",dominantBaseline:"Dominant baseline",language:"Font family in which language",rotate:"Rotation",italic:"Italic",bold:"Bold"}},stations:{common:{nameZh:"Name in Chinese",nameEn:"Name in English",nameOffsetX:"Name offset X",nameOffsetY:"Name offset Y",rotate:"Icon rotation"},interchange:{title:"Interchanges",within:"Within-station interchange",outStation:"Out-of-station interchange",outSystem:"Out-of-system interchange",addGroup:"Add interchange group",noInterchanges:"No interchanges",nameZh:"Chinese name",nameEn:"English name",add:"Add interchange",copy:"Copy interchange",remove:"Remove interchange"},shmetroBasic:{displayName:"Shanghai Metro basic station"},shmetroBasic2020:{displayName:"Shanghai Metro basic station (2020)"},shmetroInt:{displayName:"Shanghai Metro interchange station",height:"Icon height",width:"Icon width"},shmetroOsysi:{displayName:"Shanghai Metro out-of-system interchange station"},gzmtrBasic:{displayName:"Guangzhou Metro basic station",lineCode:"Line code",stationCode:"Station code",open:"Is opened",secondaryNameZh:"Secondary name in Chinese",secondaryNameEn:"Secondary name in English",tram:"Tram"},gzmtrInt:{displayName:"Guangzhou Metro interchange station",lineCode:"Line code",stationCode:"Station code",open:"Is opened",secondaryNameZh:"Secondary name in Chinese",secondaryNameEn:"Secondary name in English"},bjsubwayBasic:{displayName:"Beijing Subway basic station",open:"Is opened"},bjsubwayInt:{displayName:"Beijing Subway interchange station",outOfStation:"Out of station interchange"},mtr:{displayName:"MTR station",rotate:"Icon rotation"},suzhouRTBasic:{displayName:"Suzhou Rail Transit basic station"},suzhouRTInt:{displayName:"Suzhou Rail Transit interchange station"},kunmingRTBasic:{displayName:"Kunming Rail Transit basic station"},kunmingRTInt:{displayName:"Kunming Rail Transit interchange station"}},lines:{reconcileId:"Reconcile ID",common:{offsetFrom:"Offset From",offsetTo:"Offset To",startFrom:"Start From",roundCornerFactor:"Round Corner Factor"},simple:{displayName:"Simple path",offset:"Offset"},diagonal:{displayName:"135 diagonal path"},perpendicular:{displayName:"90 perpendicular path"},rotatePerpendicular:{displayName:"90 rotate perpendicular path"},singleColor:{displayName:"Single color style"},shmetroVirtualInt:{displayName:"Shanghai Metro out-of-station interchange style"},gzmtrVirtualInt:{displayName:"Guangzhou Metro out-of-station interchange style"},chinaRailway:{displayName:"China Railway style"},bjsubwaySingleColor:{displayName:"Beijing Subway single color style"},bjsubwayTram:{displayName:"Beijing Subway tram style"},bjsubwayDotted:{displayName:"Beijing Subway dotted style"},dualColor:{displayName:"Shanghai Maglev style",swap:"Swap color"},river:{displayName:"River style",width:"Width"},mtrRaceDays:{displayName:"MTR race days style"},mtrLightRail:{displayName:"MTR light rail style"},mtrUnpaidArea:{displayName:"MTR unpaid area style"},mtrPaidArea:{displayName:"MTR paid area style"}},edge:{},footer:{duplicate:"Duplicate",copy:"Copy",remove:"Remove"}}},Sp={popoverHeader:"You're on <1>{{environment}}</1> environment!",popoverBody:"We are currently testing the latest RMP. If you have any suggestions, feel free to raise at https://github.com/railmapgen/rmp/issues",open:{new:"New project",config:"Import project",projectRMG:"Import from RMG project",invalidType:"Invalid file type! Only file in JSON format is accepted.",unknownError:"Unknown error occurred while parsing the uploaded file! Please try again.",gallery:"Import from Gallery",importFromRMPGallery:"Template {{id}} imported. Not satisfied with this change? Undo via Ctrl + Z or the undo button.",failToImportFromRMPGallery:"Fail to import {{id}} from the gallery. The file can not be found."},download:{config:"Export project",image:"Export image","2rmg":{title:"Export to RMG project",type:{line:"Line",loop:"Loop",branch:"Branch"},placeholder:{chinese:"Chinese name",english:"English name",lineCode:"Line code"},info1:"This function is designed to convert the RMP project into RMG projects.",info2:"The lines in the list following are the available lines for converting. You can enter the Chinese line name in the text box on the left, the English line name in the middle, the line code (for Guangzhou Metro style) on the right, and then click the download button on the right to save your RMG projects.",noline:"No available lines found.",download:"Download",downloadInfo:"Please select one of the following stations as the starting station and click it to download."},format:"Format",png:"PNG",svg:"SVG (Web use)",transparent:"Transparency",scale:"Scale",disabledScaleOptions:"Some scale options are disabled due to your browser's canvas limitation.",disabledScaleOptionsWorkarounds:"Possible workarounds include generating the image from svg using this cli tool: ",imageTooBig:"The image is too big for your browser to generate!",shareInfo1:"I will attach ",shareInfo2:" and its link when I share this image.",termsAndConditions:"Terms and Conditions",termsAndConditionsInfo:"I agree to ",period:".",confirm:"Download"},donation:{title:"Donation",content:"Your support means the world to us! By donating, you enable us to continue our work and provide this free to everyone. Choose from our exciting reward options and make a difference today!",rewards:"Rewards",gallery:"Your fantasy works in Gallery",galleryContent:"Upload your fantasy works and display them in Gallery.",nodes:"Stations and miscellaneous nodes",nodesContent:"Request to add stations and miscellaneous nodes.",features:"Features requests",featuresContent:"Request to add new features.",methods:"Donation Methods",openCollective:"Open Collective",viaUSD:"Donate in USD via Paypal or Visa card.",afdian:"",viaCNY:"Donate in CNY via Alipay or Wechat Pay."},settings:{title:"Settings",pro:"This is PRO feature and is free for a limited time!",preference:{title:"Preference",keepLastPath:"Keep drawing lines until clicking on the background in the next move"},shortcuts:{title:"Shortcuts",keys:"Keys",description:"Description",f:"Use the last tool.",s:"Select.",arrows:"Move the canvas a little bit.",ijkl:"Move the selected station(s) a little bit.",shift:"Multiple selection.",alt:"Precise movement.",delete:"Delete the selected station(s).",cut:"Cut.",copy:"Copy.",paste:"Paste.",undo:"Undo.",redo:"Redo."},procedures:{title:"Procedures",translate:{title:"Translate nodes' coordinates",content:"Add the following offset to all nodes' x and y:",x:"X axis",y:"Y axis"},scale:{title:"Scale nodes' coordinates",content:"Multiply the following value to all nodes' x and y:",factor:"Scale factor"},changeType:{title:"Change stations type in batch",changeFrom:"Change all stations from this type:",changeTo:"To this type:",info:"Changing stations' type will remove all specific attributes from stations except their position and names. SAVE BEFORE CHANGE!"},changeLineStyleType:{title:"Change lines style in batch",changeFrom:"Change all lines from this style:",changeTo:"To this style:",info:"Changing lines' style will remove all specific attributes from lines except their connections. SAVE BEFORE CHANGE!"},changeLinesColor:{title:"Change lines color in batch",changeFrom:"Change all lines from this color:",changeTo:"To this color:"},removeLines:{title:"Remove lines with single color",content:"Remove lines that have this color: "},unlockSimplePath:{title:"Unlock simple path",content1:"The Rail Map Painter application endeavors to offer an interactive platform conducive to the creation of rail maps while adhering to established conventions. Among these conventions, one particularly renowned style finds its origins in the innovative work of Harry Beck. His pioneering contribution, officially endorsed in the year 1932, garnered instantaneous acclaim from the general populace. Presently, it stands as an exemplar of paramount significance within the realm of information design. This paradigmatic approach has found widespread implementation in transit cartography on a global scale, albeit with varying degrees of success.",content2:"The application inherently conceals the option to utilize a simple path, as its deployment has the potential to contravene established conventions. This particular feature remains discreetly tucked away by default. Additionally, submissions to the Rail Map Painter Gallery are subject to stringent scrutiny, with a categorical rejection of compositions that employ the simple path with a single color style approach.",content3:"Nonetheless, we place unwavering faith in the limitless creative potential harbored within you. As such, we extend the opportunity for exploration. However, a series of inquiries must be adequately addressed prior to achieving the status of a seasoned professional and thereby unlocking access to the simple path functionality. It is pertinent to note that even post-attainment, the employment of the simple path is exclusively restricted to the single-color style.",content4:"For the sake of conciseness, certain paragraphs within the passage have been omitted. Furthermore, in the interest of enhancing clarity, both the passage and the accompanying questions have been retained in their original language without translation.",content5:"You are accorded three attempts to respond accurately to the aforementioned questions. It is imperative to bear in mind that once the remaining attempts are depleted, the opportunity to address further queries will be forfeited. Current Remaining Attempts: ",check:"Checking answers and unlock simple path",maximumAttemptsExceed:"Maximum attempts exceed",unlocked:"Already Unlocked",fail:"Fail"}},telemetry:{title:"Telemetry",essential:"Basic",essentialInfo:"Rail Map Painter uses Google Analytics to collect data that helps the contributors know how and when our users visit this project. Since there is no user registration and backend service in Rail Map Painter, this is the only feedback that contributors can get and be motivated to keep updating the project. Be assured that all the data transferred will not contain any personal identifiable information and data from your project.",essentialLink:"Click this link to see detailed fields that Google Analytics may collect.",additional:"Additional",additionalInfo:"Rail Map Painter also sends additional events when you interact with your mouse or keyboard such as project creation or station addition. As always, they do not contain any personal identifiable information and are only used for statistics purpose."}},about:{title:"About",rmp:"Rail Map Painter",railmapgen:"A Rail Map Toolkit project",desc:"Design your own rail map by freely dragging stations from different cities and connecting them with 90 or 135-degree rounded corners lines!",content1:"In memory of all the freedom and equality we once had.",content2:"06/01/2022 in Shanghai",contributors:"Contributors",coreContributors:"Core Contributors",styleContributors:"Style Contributors",langonginc:"Live a life you will remember.","203IhzElttil":"Special thanks for his diligent work in ensuring that the stations of Shanghai Metro match the original design.","52PD":"Special thanks for his diligent work in ensuring that the stations of Beijing Subway match the original design.",contactUs:"Contact Us",github:"Project repository",githubContent:"Face any problems? Search or raise an issue here!",slack:"Slack group",slackContent:"Chat in these Slack channels!",linkExchange:"Link Exchange",guidaoTransit:"Guidao Transit",guidaoTransitContent:"Want to know more about Shanghai rail transit? Follow this WeChat account! (Chinese Only)"}},Np={color:fp,warning:pp,cancel:gp,apply:mp,remove:yp,close:bp,noShowAgain:vp,rmtPromotion:wp,panel:xp,header:Sp},zp="",Ep="",kp="",Ap="",Rp="",Op="",_p="",Tp="",Lp={tools:{showLess:"",section:{lineDrawing:"",stations:"",miscellaneousNodes:""},select:""},details:{header:"",info:{title:"",id:"ID",zIndex:"",stationType:"",linePathType:"",lineStyleType:"",type:""},multipleSelection:"",selected:":",changeStationTypeContent:"",changeLineTypeContent:"",changeType:"",nodePosition:{title:"",pos:{x:"X",y:"Y"}},lineExtremities:{title:"",source:"",target:"",sourceName:"",targetName:""},specificAttrsTitle:"",nodes:{common:{nameZh:"",nameEn:"",num:""},virtual:{displayName:""},shmetroNumLineBadge:{displayName:""},shmetroTextLineBadge:{displayName:""},gzmtrLineBadge:{displayName:""},bjsubwayNumLineBadge:{displayName:""},bjsubwayTextLineBadge:{displayName:""},berlinSBahnLineBadge:{displayName:""},berlinUBahnLineBadge:{displayName:"S"},suzhouRTNumLineBadge:{displayName:"  ",branch:""},chongqingRTNumLineBadge:{displayName:""},chongqingRTTextLineBadge:{displayName:""},shenzhenMetroNumLineBadge:{displayName:"",branch:""},facilities:{displayName:"",type:""},text:{displayName:"",content:"",fontSize:"",lineHeight:"",textAnchor:"",dominantBaseline:"",language:"",rotate:"",italic:"",bold:""}},stations:{interchange:{title:"",within:"",outStation:"",outSystem:"",addGroup:"",noInterchanges:"",nameZh:"",nameEn:"",add:"",copy:"",remove:""},common:{nameZh:"",nameEn:"",nameOffsetX:"X",nameOffsetY:"Y",rotate:""},shmetroBasic:{displayName:""},shmetroBasic2020:{displayName:"2020"},shmetroInt:{displayName:"",height:"",width:""},shmetroOsysi:{displayName:""},gzmtrBasic:{displayName:"",lineCode:"",stationCode:"",open:"",secondaryNameZh:"",secondaryNameEn:"",tram:""},gzmtrInt:{displayName:"",lineCode:"",stationCode:"",open:"",secondaryNameZh:"",secondaryNameEn:""},bjsubwayBasic:{displayName:"",open:""},bjsubwayInt:{displayName:"",outOfStation:""},mtr:{displayName:"MTR",rotate:""},suzhouRTBasic:{displayName:""},suzhouRTInt:{displayName:""},kunmingRTBasic:{displayName:""},kunmingRTInt:{displayName:""}},lines:{reconcileId:"ID",common:{offsetFrom:"From",offsetTo:"To",startFrom:"",roundCornerFactor:""},simple:{displayName:"",offset:""},diagonal:{displayName:"135"},perpendicular:{displayName:"90"},rotatePerpendicular:{displayName:"90"},singleColor:{displayName:""},shmetroVirtualInt:{displayName:""},gzmtrVirtualInt:{displayName:""},chinaRailway:{displayName:""},bjsubwaySingleColor:{displayName:""},bjsubwayTram:{displayName:""},bjsubwayDotted:{displayName:""},dualColor:{displayName:"",swap:""},river:{displayName:"",width:""},mtrRaceDays:{displayName:"MTR"},mtrLightRail:{displayName:"MTR"},mtrUnpaidArea:{displayName:"MTR"},mtrPaidArea:{displayName:"MTR"}},edges:{},footer:{duplicate:"",copy:"",remove:""}}},jp={popoverHeader:"<1>{{environment}}</1> ",popoverBody:"RMPhttps://github.com/railmapgen/rmp/issues ",open:{new:"",config:"",configRMG:"RMG",projectRMG:"RMG",invalidType:"JSON",unknownError:"",gallery:"",importFromRMPGallery:"{{id}}Ctrl + Z",failToImportFromRMPGallery:"{{id}}"},download:{config:"",image:"","2rmg":{title:"RMG",type:{line:"",loop:"",branch:""},placeholder:{chinese:"",english:"",lineCode:""},info1:"RMPRMG",info2:"RMG",noline:"",download:"",downloadInfo:""},format:"",png:"PNG",svg:"SVGWeb",transparent:"",scale:"",disabledScaleOptions:"",disabledScaleOptionsWorkarounds:"CLISVG",imageTooBig:"",shareInfo1:" ",shareInfo2:" ",termsAndConditions:"",termsAndConditionsInfo:"",period:"",confirm:""},donation:{title:"",content:"  ",rewards:"",gallery:"",galleryContent:"",nodes:"",nodesContent:"",features:"",featuresContent:"",methods:"",openCollective:"Open Collective",viaUSD:"PaypalVisaUSD",afdian:"",viaCNY:"AlipayWechat PayCNY"},settings:{title:"",pro:"PRO",preference:{title:"",keepLastPath:""},shortcuts:{title:"",keys:"",description:"",f:"",s:"",arrows:"",ijkl:"",shift:"",alt:"",delete:"",cut:"",copy:"",paste:"",undo:"",redo:""},procedures:{title:"",translate:{title:"",content:"XY",x:"X",y:"Y"},scale:{title:"",content:"XY",factor:""},changeType:{title:"",changeFrom:"",changeTo:"",info:""},changeLineStyleType:{title:"",changeFrom:"",changeTo:"",info:" "},changeLinesColor:{title:"",changeFrom:"",changeTo:":"},removeLines:{title:"",content:""},unlockSimplePath:{title:"",content1:"11932",content2:"",content3:"",content4:"",content5:"3",check:"",maximumAttemptsExceed:"",unlocked:"",fail:""}},telemetry:{title:"",essential:"",essentialInfo:"Rail Map PainterGoogle AnalyticsRail Map Painter",essentialLink:"Google Analytics",additional:"",additionalInfo:"Rail Map Painter"}},about:{title:"",rmp:"",railmapgen:"",desc:"90135",content1:"",content2:"202261",contributors:"",coreContributors:"",styleContributors:"","203IhzElttil":"","52PD":"",contactUs:"",github:"",githubContent:"",slack:"Slack",slackContent:"Slack",linkExchange:"",guidaoTransit:"",guidaoTransitContent:"? WeChat ()"}},Hp={color:zp,warning:Ep,cancel:kp,apply:Ap,remove:Rp,close:Op,noShowAgain:_p,rmtPromotion:Tp,panel:Lp,header:jp},$p="",Mp="",Pp="",Fp="",Cp="",Dp="",Ip=" ",Bp="    ! .",Gp={tools:{showLess:" ",section:{lineDrawing:" ",stations:"",miscellaneousNodes:" "},select:""},details:{header:" ",info:{title:"",id:" ",zIndex:"",stationType:" ",linePathType:"  ",lineStyleType:"  ",type:""},nodePosition:{title:" ",pos:{x:" ",y:" "}},lineExtremities:{title:" ",source:"",target:"",sourceName:" ",targetName:" "},specificAttrsTitle:" ",selected:" :",multipleSelection:" ",changeStationTypeContent:"        .",changeLineTypeContent:"      .",changeType:" ",nodes:{common:{nameZh:" ",nameEn:" ",num:" "},virtual:{displayName:" "},shmetroNumLineBadge:{displayName:"    "},shmetroTextLineBadge:{displayName:"    "},gzmtrLineBadge:{displayName:"   "},bjsubwayNumLineBadge:{displayName:"   "},bjsubwayTextLineBadge:{displayName:"    "},berlinSBahnLineBadge:{displayName:" S  "},berlinUBahnLineBadge:{displayName:" U  "},suzhouRTNumLineBadge:{displayName:"    ",branch:""},chongqingRTNumLineBadge:{displayName:"     "},chongqingRTTextLineBadge:{displayName:"     "},shenzhenMetroNumLineBadge:{displayName:"    ",branch:""},facilities:{displayName:"",type:"Type"},text:{displayName:" ",content:"",fontSize:" ",lineHeight:"",textAnchor:" ",dominantBaseline:" ",language:"   ",rotate:"",italic:"",bold:""}},stations:{common:{nameZh:" ",nameEn:" ",nameOffsetX:"  ",nameOffsetY:"  ",rotate:""},interchange:{title:"",within:"  ",outStation:"  ",outSystem:"",addGroup:"  ",noInterchanges:"",nameZh:" ",nameEn:" ",add:" ",copy:" ",remove:" "},shmetroBasic:{displayName:"   "},shmetroBasic2020:{displayName:"   (2020)"},shmetroInt:{displayName:"  ",height:" ",width:" "},shmetroOsysi:{displayName:"    "},gzmtrBasic:{displayName:"  ",lineCode:" ",stationCode:" ",open:"",secondaryNameZh:" 2",secondaryNameEn:" 2",tram:"Tram"},gzmtrInt:{displayName:"  ",lineCode:" ",stationCode:" ",open:"",secondaryNameZh:" 2",secondaryNameEn:" 2"},bjsubwayBasic:{displayName:"  ",open:""},bjsubwayInt:{displayName:"  ",outOfStation:"  "},mtr:{displayName:"MTR "},suzhouRTBasic:{displayName:"  "},suzhouRTInt:{displayName:"  "},kunmingRTBasic:{displayName:"  "},kunmingRTInt:{displayName:"  "}},lines:{reconcileId:"   ",common:{offsetFrom:" ",offsetTo:" ",startFrom:" ",roundCornerFactor:""},simple:{displayName:" ",offset:""},diagonal:{displayName:"135  "},perpendicular:{displayName:"90  "},rotatePerpendicular:{displayName:"90   "},singleColor:{displayName:" "},shmetroVirtualInt:{displayName:"    "},gzmtrVirtualInt:{displayName:"    "},chinaRailway:{displayName:"  "},bjsubwaySingleColor:{displayName:"   "},bjsubwayTram:{displayName:"    "},bjsubwayDotted:{displayName:"   "},dualColor:{displayName:"  ",swap:" "},river:{displayName:" ",width:""},mtrRaceDays:{displayName:"MTR  "},mtrLightRail:{displayName:"MTR  "},mtrUnpaidArea:{displayName:"MTR   "},mtrPaidArea:{displayName:"MTR   "}},edges:{},footer:{duplicate:"",copy:"",remove:""}}},Up={popoverHeader:" <1>{{environment}}</1> ",popoverBody:" RMP  .    https://github.com/railmapgen/rmp/issues  .",open:{new:" ",config:" ",configRMG:"RMG  ",projectRMG:"RMG  ",invalidType:"  ! JSON   .",unknownError:"        .  .",gallery:" ",importFromRMPGallery:" {{id}}  .     ? Ctrl + Z       .",failToImportFromRMPGallery:" {{id}}   .    ."},download:{config:" ",image:" ","2rmg":{title:"RMG  ",type:{line:"",loop:"",branch:""},placeholder:{chinese:"  ",english:"  ",lineCode:" "},info1:"  RMP  RMG    .",info2:"       .       ,     ,  (  )    ,     RMG    .",noline:"   .",download:"",downloadInfo:"   ."},format:" ",png:"PNG ",svg:"SVG ()",transparent:" ",scale:"/",disabledScaleOptions:"       .",disabledScaleOptionsWorkarounds:"    CLI   SVG    :",imageTooBig:"       !",shareInfo1:"   ",shareInfo2:"  .",termsAndConditions:"  ",termsAndConditionsInfo:"",period:".",confirm:""},donation:{title:"",content:"     !             .        !",rewards:"",gallery:"   ",galleryContent:"     .",nodes:"   ",nodesContent:"     .",features:" ",featuresContent:"   .",methods:" ",openCollective:"Open Collective",viaUSD:"Paypal  Visa   USD .",afdian:"",viaCNY:"Alipay  Wechat Pay  CNY ."},settings:{title:"",pro:"  PRO !",preference:{title:"",keepLastPath:"       "},shortcuts:{title:" ",keys:"",description:"",f:"  .",s:".",arrows:"  .",ijkl:"   .",shift:"  .",alt:" .",delete:"  .",cut:".",copy:".",paste:".",undo:".",redo:" ."},procedures:{title:"",translate:{title:"  ",content:"  x  y   :",x:"X",y:"Y"},scale:{title:"  ",content:"  x  y   :",factor:" "},changeType:{title:"   ",changeFrom:"   :",changeTo:"   :",info:"        .  !"},changeLineStyleType:{title:"   ",changeFrom:"    :",changeTo:" :",info:"         .   !"},changeLinesColor:{title:"   ",changeFrom:"    .",changeTo:" :"},removeLines:{title:"Remove lines with single color",content:"Remove lines that have this color: "},unlockSimplePath:{title:"   ",content1:"Rail Map Painter            .          .     1932      .         .              .",content2:"              .  Rail Map Painter      ,         .",content3:"         .    .                 . ,         .",content4:"     .             .",content5:"       3 .          .    :",check:"      ",maximumAttemptsExceed:"   ",unlocked:" ",fail:""}},telemetry:{title:" ",essential:"",essentialInfo:"   Google Analytics            .                 .           .",essentialLink:"Google Analytics         .",additional:"",additionalInfo:"     (:     ),      .          ."}},about:{title:"",rmp:"  ",railmapgen:"     ",desc:"     90  135        !",content1:"    .",content2:"2022 6 1 ",contributors:"",coreContributors:" ",styleContributors:" ",langonginc:"   .","203IhzElttil":"             .","52PD":"             .",contactUs:" ",github:" ",githubContent:"  ?    !",slack:" ",slackContent:"   !",linkExchange:"",guidaoTransit:"Guidao Transit",guidaoTransitContent:"      ?  WeChat  ! ( )"}},Vp={color:$p,warning:Mp,cancel:Pp,apply:Fp,remove:Cp,close:Dp,noShowAgain:Ip,rmtPromotion:Bp,panel:Gp,header:Up},Wp="",Kp="",Jp="",Yp="",qp="",Zp="",Xp="",Qp="",eg={tools:{showLess:"",section:{lineDrawing:"",stations:"",miscellaneousNodes:""},select:""},details:{header:"",info:{title:"",id:"",zIndex:"",stationType:"",linePathType:"",lineStyleType:"",type:""},nodePosition:{title:"",pos:{x:"",y:""}},lineExtremities:{title:"",source:"",target:"",sourceName:"",targetName:""},specificAttrsTitle:"",multipleSelection:"",selected:":",changeStationTypeContent:"",changeLineTypeContent:"",changeType:"",nodes:{common:{nameZh:"",nameEn:"",num:""},virtual:{displayName:""},shmetroNumLineBadge:{displayName:""},shmetroTextLineBadge:{displayName:""},gzmtrLineBadge:{displayName:""},bjsubwayNumLineBadge:{displayName:""},bjsubwayTextLineBadge:{displayName:""},berlinSBahnLineBadge:{displayName:""},berlinUBahnLineBadge:{displayName:""},suzhouRTNumLineBadge:{displayName:"",branch:""},chongqingRTNumLineBadge:{displayName:""},chongqingRTTextLineBadge:{displayName:""},shenzhenMetroNumLineBadge:{displayName:"",branch:""},facilities:{displayName:"",type:""},text:{displayName:"",content:"",fontSize:"",lineHeight:"",textAnchor:"",dominantBaseline:"",language:"",rotate:"",italic:"",bold:""}},stations:{common:{nameZh:"",nameEn:"",nameOffsetX:"",nameOffsetY:"",rotate:""},interchange:{title:"",within:"",outStation:"",outSystem:"",addGroup:"",noInterchanges:"",nameZh:"",nameEn:"",add:"",copy:"",remove:""},shmetroBasic:{displayName:""},shmetroBasic2020:{displayName:"(2020)"},shmetroInt:{displayName:"",height:"",width:""},shmetroOsysi:{displayName:""},gzmtrBasic:{displayName:"",lineCode:"",stationCode:"",open:"",secondaryNameZh:"",secondaryNameEn:"",tram:""},gzmtrInt:{displayName:"",lineCode:"",stationCode:"",open:"",secondaryNameZh:"",secondaryNameEn:""},bjsubwayBasic:{displayName:"",open:""},bjsubwayInt:{displayName:"",outOfStation:""},mtr:{displayName:"MTR"},suzhouRTBasic:{displayName:""},suzhouRTInt:{displayName:""},kunmingRTBasic:{displayName:""},kunmingRTInt:{displayName:""}},lines:{reconcileId:"",common:{offsetFrom:"",offsetTo:"",startFrom:"",roundCornerFactor:""},simple:{displayName:"",offset:""},diagonal:{displayName:"135"},perpendicular:{displayName:"90"},rotatePerpendicular:{displayName:"90"},singleColor:{displayName:""},shmetroVirtualInt:{displayName:""},gzmtrVirtualInt:{displayName:""},chinaRailway:{displayName:""},bjsubwaySingleColor:{displayName:""},bjsubwayTram:{displayName:""},bjsubwayDotted:{displayName:""},dualColor:{displayName:"",swap:""},river:{displayName:"",width:""},mtrRaceDays:{displayName:"MTR"},mtrLightRail:{displayName:"MTR"},mtrUnpaidArea:{displayName:"MTR"},mtrPaidArea:{displayName:"MTR"}},edges:{},footer:{duplicate:"",copy:"",remove:""}}},tg={popoverHeader:"<1>{{environment}}</1>",popoverBody:"RMP https://github.com/railmapgen/rmp/issues ",open:{new:"",config:"",configRMG:"RMG",projectRMG:"RMG",invalidType:"JSON",unknownError:"",gallery:"",importFromRMPGallery:" {{id}}  Ctrl + Z ",failToImportFromRMPGallery:"{{id}}"},download:{config:"",image:"","2rmg":{title:"RMG",type:{line:"",loop:"",branch:""},placeholder:{chinese:"",english:"",lineCode:""},info1:"RMPRMG",info2:"RMG",noline:"",download:"",downloadInfo:""},format:"",png:"PNG",svg:"SVG",transparent:"",scale:"",disabledScaleOptions:"",disabledScaleOptionsWorkarounds:"SVG",imageTooBig:"",shareInfo1:"",shareInfo2:"",termsAndConditions:"",termsAndConditionsInfo:"",period:"",confirm:""},donation:{title:"",content:"",rewards:"",gallery:"",galleryContent:"",nodes:"",nodesContent:"",features:"",featuresContent:"",methods:"",openCollective:"Open Collective",viaUSD:"PaypalVisaUSD",afdian:"",viaCNY:"CNY"},settings:{title:"",pro:" PRO ",preference:{title:"",keepLastPath:""},shortcuts:{title:"",keys:"",description:"",f:"",s:"",arrows:"",ijkl:"",shift:"",alt:"",delete:"",cut:"",copy:"",paste:"",undo:"",redo:""},procedures:{title:"",translate:{title:"",content:"xy",x:"",y:""},scale:{title:"",content:"xy",factor:""},changeType:{title:"",changeFrom:"",changeTo:"",info:""},changeLineStyleType:{title:"",changeFrom:"",changeTo:"",info:""},changeLinesColor:{title:"",changeFrom:"",changeTo:""},removeLines:{title:"",content:" "},unlockSimplePath:{title:"",content1:"1932",content2:"",content3:"",content4:"",content5:"",check:"",maximumAttemptsExceed:"",unlocked:"",fail:""}},telemetry:{title:"",essential:"",essentialInfo:" Google Analytics ",essentialLink:" Google Analytics ",additional:"",additionalInfo:" "}},about:{title:"",rmp:"",railmapgen:"",desc:" 90  135 ",content1:"",content2:"06/01/2022",contributors:"",coreContributors:"",styleContributors:"",langonginc:"","203IhzElttil":"","52PD":"",contactUs:"",github:"",githubContent:"",slack:"Slack",slackContent:"Slack!",linkExchange:"",guidaoTransit:"",guidaoTransitContent:""}},ng={color:Wp,warning:Kp,cancel:Jp,apply:Yp,remove:qp,close:Zp,noShowAgain:Xp,rmtPromotion:Qp,panel:eg,header:tg},rg="",ig="",ag="",og="",sg="",lg="",ug="",cg="",hg={tools:{showLess:"",section:{lineDrawing:"",stations:"",miscellaneousNodes:""},select:""},details:{header:"",info:{title:"",id:"",zIndex:"",stationType:"",linePathType:"",lineStyleType:"",type:""},nodePosition:{title:"",pos:{x:"",y:""}},lineExtremities:{title:"",source:"",target:"",sourceName:"",targetName:""},specificAttrsTitle:"",multipleSelection:"",selected:":",changeStationTypeContent:"",changeLineTypeContent:"",changeType:"",nodes:{common:{nameZh:"",nameEn:"",num:""},virtual:{displayName:""},shmetroNumLineBadge:{displayName:""},shmetroTextLineBadge:{displayName:""},gzmtrLineBadge:{displayName:""},bjsubwayNumLineBadge:{displayName:""},bjsubwayTextLineBadge:{displayName:""},berlinSBahnLineBadge:{displayName:""},berlinUBahnLineBadge:{displayName:""},suzhouRTNumLineBadge:{displayName:"",branch:""},chongqingRTNumLineBadge:{displayName:""},chongqingRTTextLineBadge:{displayName:""},shenzhenMetroNumLineBadge:{displayName:"",branch:""},facilities:{displayName:"",type:""},text:{displayName:"",content:"",fontSize:"",lineHeight:"",textAnchor:"",dominantBaseline:"",language:"",rotate:"",italic:"",bold:""}},stations:{common:{nameZh:"",nameEn:"",nameOffsetX:"",nameOffsetY:"",rotate:""},interchange:{title:"",within:"",outStation:"",outSystem:"",addGroup:"",noInterchanges:"",nameZh:"",nameEn:"",add:"",copy:"",remove:""},shmetroBasic:{displayName:""},shmetroBasic2020:{displayName:"(2020)"},shmetroInt:{displayName:"",height:"",width:""},shmetroOsysi:{displayName:""},gzmtrBasic:{displayName:"",lineCode:"",stationCode:"",open:"",secondaryNameZh:"",secondaryNameEn:"",tram:""},gzmtrInt:{displayName:"",lineCode:"",stationCode:"",open:"",secondaryNameZh:"",secondaryNameEn:""},bjsubwayBasic:{displayName:"",open:""},bjsubwayInt:{displayName:"",outOfStation:""},mtr:{displayName:"MTR"},suzhouRTBasic:{displayName:""},suzhouRTInt:{displayName:""},kunmingRTBasic:{displayName:""},kunmingRTInt:{displayName:""}},lines:{reconcileId:"",common:{offsetFrom:"",offsetTo:"",startFrom:"",roundCornerFactor:""},simple:{displayName:"",offset:""},diagonal:{displayName:"135"},perpendicular:{displayName:"90"},rotatePerpendicular:{displayName:"90"},singleColor:{displayName:""},shmetroVirtualInt:{displayName:""},gzmtrVirtualInt:{displayName:""},chinaRailway:{displayName:""},bjsubwaySingleColor:{displayName:""},bjsubwayTram:{displayName:""},bjsubwayDotted:{displayName:""},dualColor:{displayName:"",swap:""},river:{displayName:"",width:""},mtrRaceDays:{displayName:"MTR"},mtrLightRail:{displayName:"MTR"},mtrUnpaidArea:{displayName:"MTR"},mtrPaidArea:{displayName:"MTR"}},edges:{},footer:{duplicate:"",copy:"",remove:""}}},dg={popoverHeader:"<1>{{environment}}</1>",popoverBody:"RMP https://github.com/railmapgen/rmp/issues ",open:{new:"",config:"",configRMG:"RMG",projectRMG:"RMG",invalidType:"JSON",unknownError:"",gallery:"",importFromRMPGallery:" {{id}}  Ctrl + Z ",failToImportFromRMPGallery:"{{id}}"},download:{config:"",image:"","2rmg":{title:"RMG",type:{line:"",loop:"",branch:""},placeholder:{chinese:"",english:"",lineCode:""},info1:"RMPRMG",info2:"RMG",noline:"",download:"",downloadInfo:""},format:"",png:"PNG",svg:"SVG",transparent:"",scale:"",disabledScaleOptions:"",disabledScaleOptionsWorkarounds:"SVG",imageTooBig:"",shareInfo1:"",shareInfo2:"",termsAndConditions:"",termsAndConditionsInfo:"",period:"",confirm:""},donation:{title:"",content:"",rewards:"",gallery:"",galleryContent:"",nodes:"",nodesContent:"",features:"",featuresContent:"",methods:"",openCollective:"Open Collective",viaUSD:"PaypalVisaUSD",afdian:"",viaCNY:"CNY"},settings:{title:"",pro:" PRO ",preference:{title:"",keepLastPath:""},shortcuts:{title:"",keys:"",description:"",f:"",s:"",arrows:"",ijkl:"",shift:"",alt:"",delete:"",cut:"",copy:"",paste:"",undo:"",redo:""},procedures:{title:"",translate:{title:"",content:"xy",x:"",y:""},scale:{title:"",content:"xy",factor:""},changeType:{title:"",changeFrom:"",changeTo:"",info:""},changeLineStyleType:{title:"",changeFrom:"",changeTo:"",info:""},changeLinesColor:{title:"",changeFrom:"",changeTo:""},removeLines:{title:"",content:" "},unlockSimplePath:{title:"",content1:"1932",content2:"",content3:"",content4:"",content5:"",check:"",maximumAttemptsExceed:"",unlocked:"",fail:""}},telemetry:{title:"",essential:"",essentialInfo:" Google Analytics ",essentialLink:" Google Analytics ",additional:"",additionalInfo:" "}},about:{title:"",rmp:"",railmapgen:"",desc:" 90  135 ",content1:"",content2:"06/01/2022",contributors:"",coreContributors:"",styleContributors:"",langonginc:"","203IhzElttil":"","52PD":"",contactUs:"",github:"",githubContent:"",slack:"Slack",slackContent:"Slack!",linkExchange:"",guidaoTransit:"",guidaoTransitContent:""}},fg={color:rg,warning:ig,cancel:ag,apply:og,remove:sg,close:lg,noShowAgain:ug,rmtPromotion:cg,panel:hg,header:dg},pg=new oe.I18nBuilder().use(Al).withAppName("Rail Map Painter").withLng(oe.getLanguage()).withDefaultResource(dp).withResource("en",Np).withResource("zh-Hans",ng).withResource("zh-Hant",fg).withResource("ja",Hp).withResource("ko",Vp).build();const gg=()=>{$i(document.getElementById("root")).render(g.jsx(P.StrictMode,{children:g.jsx(hu,{store:Se,children:g.jsx(_l,{i18n:pg,children:g.jsx(Ud,{})})})}))};var Wr;const ge=JSON.parse((Wr=localStorage.getItem(Pe.APP))!=null?Wr:"{}"),mg=localStorage.getItem(Pe.PARAM);"telemetry"in ge&&("app"in ge.telemetry&&Se.dispatch(Hd(ge.telemetry.app)),"project"in ge.telemetry&&Se.dispatch($d(ge.telemetry.project))),"preference"in ge&&("unlockSimplePathAttempts"in ge.preference&&Se.dispatch(Md(ge.preference.unlockSimplePathAttempts)),"toolsPanel"in ge.preference&&"expand"in ge.preference.toolsPanel&&Se.dispatch(Pd(ge.preference.toolsPanel.expand)));Td(mg).then(n=>{const{version:e,graph:r,...i}=JSON.parse(n);window.graph=ee.from(r);const a={...i,present:r,past:[],future:[]};Se.dispatch(Uc(a)),gg(),oe.injectUITools()});export{Zg as $,We as A,Td as B,y as C,Pg as D,Dc as E,sm as F,Wg as G,am as H,Fi as I,Lg as J,jg as K,Tg as L,gm as M,Od as N,Kc as O,Md as P,Dg as Q,kg as R,Ue as S,xh as T,Xg as U,dm as V,um as W,hm as X,cm as Y,Hd as Z,qg as _,yg as __vite_legacy_guard,ml as a,je as a0,Eg as a1,Ng as a2,im as a3,ea as a4,tm as a5,ta as a6,Yg as a7,Jg as a8,Vg as a9,Bg as aa,Ig as ab,pm as ac,fm as ad,Pd as ae,Cg as af,Fg as ag,$g as ah,Hg as ai,rc as aj,ac as ak,Ag as al,Rg as am,Og as an,_g as ao,Z as ap,Qe as aq,Fc as ar,Cc as as,Gg as at,Sg as au,Qg as av,em as aw,Ug as ax,kl as b,Yt as c,cn as d,Ge as e,se as f,zl as g,om as h,Kg as i,un as j,rm as k,nm as l,lm as m,cc as n,qc as o,Ic as p,T as q,oe as r,Ld as s,Rd as t,zg as u,V as v,zn as w,xg as x,$n as y,wt as z};
