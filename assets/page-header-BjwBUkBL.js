import{j as e,at as F,$ as J,au as q,a1 as X,a2 as Q,a3 as $,g as os,av as Ds,a4 as b,B as T,aw as be,ax as ke,ay as U,az as Z,aA as V,as as Gs,h as Je,O as E,a5 as xe,aB as dt,aC as ht,aD as ze,a7 as A,aE as N,a6 as Us,aF as gs,aG as xs,af as se,aH as ms,aI as le,U as we,aJ as qe,aK as pt,aL as Zs,al as Vs,d as Ks,R as Ys,q as Fs,Z as Js,aM as Ee,aN as ut,ak as Be,aO as gt,aP as xt,aQ as G,aR as Os,aS as mt,aT as O,aU as C,W as ft,m as oe,a8 as jt,a9 as bt}from"./chakra-t2DzLzXq.js";import{u as wt,r as k,E as Se,M as St,C as yt,a as fs,n as rs,L as qs,S as _,R as Ms,b as Xs,c as R,d as D,e as B,f as Ct,g as zt,h as vt,i as kt,j as Oe,s as Ot,k as Ue,l as Xe,m as Mt,o as At,p as As,q as js,t as te,v as Y,w as re,x as Qs,y as $s,z as is,A as Me,B as Ie,D as Ts,F as Rs,G as Tt,H as Rt,I as Et,J as Nt,K as It,N as Es,O as _t,P as Ht,Q as Wt,T as Lt,U as Bt,V as Pt,W as Dt,X as Gt,Y as Ut,Z as Zt,_ as Vt,$ as Kt,a0 as Yt,a1 as Ft,a2 as Jt,a3 as qt,a4 as me,a5 as Xt,a6 as Qt,a7 as $t,a8 as en,a9 as pe,aa as sn,ab as Ns,ac as tn,ad as Qe,ae as nn,af as on,ag as rn,ah as an,ai as ln,aj as Is,ak as cn,al as dn,am as hn,an as pn,ao as un}from"./index-CraRA2I5.js";import{u as H,b as f,r as Pe,T as _s}from"./react-DmTIgZys.js";import{I as et}from"./index-semDsYsg.js";import{d as as,m as gn,a as xn,i as mn,s as fn,u as bs,M as jn}from"./master-manager-BWGBRYxS.js";import{C as bn}from"./change-type-modal-DvfqYld5.js";var Hs=function(s){return wt(k.ready(),s)},wn={ar:{ar:"العربية",en:"Arabic",ko:"아랍어","zh-Hans":"阿拉伯文","zh-Hant":"阿拉伯文"},az:{az:"Azərbaycanca",en:"Azerbaijani",ko:"아제르바이잔어","zh-Hans":"阿塞拜疆文","zh-Hant":"阿塞拜疆文"},ca:{ca:"Català",en:"Catalan",ko:"카탈루냐어","zh-Hans":"加泰罗尼亚文","zh-Hant":"加泰隆尼亞文"},da:{da:"Dansk",en:"Danish",ko:"덴마크어","zh-Hans":"丹麦文","zh-Hant":"丹麥文"},de:{de:"Deutsch",en:"German",ko:"독일어","zh-Hans":"德文","zh-Hant":"德文"},el:{el:"Ελληνικά",en:"Greek",ko:"그리스어","zh-Hans":"希腊文","zh-Hant":"希臘文"},en:{en:"English",ja:"英語",ko:"영어","zh-Hans":"英文","zh-Hant":"英文"},es:{en:"Spanish",es:"Español",ko:"스페인어","zh-Hans":"西班牙文","zh-Hant":"西班牙文"},fa:{en:"Persian",fa:"فارسی",ko:"페르시아어","zh-Hans":"波斯文","zh-Hant":"波斯文"},fr:{en:"French",fr:"Français",ko:"프랑스어","zh-Hans":"法文","zh-Hant":"法文"},ga:{en:"Irish",ga:"Gaeilge",ko:"아일랜드어","zh-Hans":"爱尔兰文","zh-Hant":"愛爾蘭文"},gd:{en:"Scottish Gaelic",gd:"Gàidhlig",ko:"스코틀랜드 게일어","zh-Hans":"苏格兰盖尔文","zh-Hant":"蘇格蘭蓋爾文"},hi:{en:"Hindi",hi:"हिन्दी",ko:"힌디어","zh-Hans":"印地文","zh-Hant":"印地文"},hu:{en:"Hungarian",hu:"Magyar",ko:"헝가리어","zh-Hans":"匈牙利文","zh-Hant":"匈牙利文"},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"인도네시아어","zh-Hans":"印尼文","zh-Hant":"印尼文"},it:{en:"Italian",it:"Italiano",ko:"이탈리아어","zh-Hans":"意大利文","zh-Hant":"意大利文"},ja:{en:"Japanese",ja:"日本語",ko:"일본어","zh-Hans":"日文","zh-Hant":"日文"},kk:{en:"Kazakh",kk:"Қазақша",ko:"카자흐어","zh-Hans":"哈萨克文","zh-Hant":"哈薩克文"},ko:{en:"Korean",ja:"韓国語",ko:"한국어","zh-Hans":"韩文","zh-Hant":"韓文"},ms:{en:"Malay",ko:"말레이어",ms:"Bahasa Melayu","zh-Hans":"马来文","zh-Hant":"馬來文"},no:{en:"Norwegian",ko:"노르웨이어",no:"Norsk","zh-Hans":"挪威文","zh-Hant":"挪威文"},pl:{en:"Polish",ko:"폴란드어",pl:"Polski","zh-Hans":"波兰文","zh-Hant":"波蘭文"},pt:{en:"Portuguese",ko:"포르투갈어",pt:"Português","zh-Hans":"葡萄牙文","zh-Hant":"葡萄牙文"},ro:{en:"Romanian",ko:"루마니아어",ro:"Română","zh-Hans":"罗马尼亚文","zh-Hant":"羅馬尼亞文"},ru:{en:"Russian",ko:"러시아어",ru:"Русский","zh-Hans":"俄文","zh-Hant":"俄文"},sv:{en:"Swedish",ko:"스웨덴어",sv:"Svenska","zh-Hans":"瑞典文","zh-Hant":"瑞典文"},th:{en:"Thai",ko:"태국어",th:"ภาษาไทย","zh-Hans":"泰文","zh-Hant":"泰文"},tr:{en:"Turkish",ko:"튀르키예어",tr:"Türkçe","zh-Hans":"土耳其文","zh-Hant":"土耳其文"},uk:{en:"Ukrainian",ko:"우크라이나어",uk:"Українська","zh-Hans":"乌克兰文","zh-Hant":"烏克蘭文"},ur:{en:"Urdo",ko:"우르두어",ur:"اردو","zh-Hans":"乌尔都文","zh-Hant":"烏爾都文"},uz:{en:"Uzbek",ko:"우즈베크어",uz:"Oʻzbekcha","zh-Hans":"乌兹别克文","zh-Hant":"烏茲別克文"},vi:{en:"Vietnamese",ko:"베트남어",vi:"Tiếng Việt","zh-Hans":"越南文","zh-Hant":"越南文"},zh:{en:"Chinese",ja:"中国語",ko:"중국어",zh:"中文","zh-Hans":"中文","zh-Hant":"中文"},"zh-Hans":{en:"Simplified Chinese",ja:"中国語（簡体字）",ko:"중국어 간체자","zh-Hans":"简体中文","zh-Hant":"簡體中文"},"zh-Hant":{en:"Traditional Chinese",ja:"中国語（繁体字）",ko:"중국어 정체자","zh-Hans":"繁体中文","zh-Hant":"繁體中文"}};const Sn="data:image/svg+xml,%3csvg%20width='98'%20height='96'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M48.854%200C21.839%200%200%2022%200%2049.217c0%2021.756%2013.993%2040.172%2033.405%2046.69%202.427.49%203.316-1.059%203.316-2.362%200-1.141-.08-5.052-.08-9.127-13.59%202.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015%204.934.326%207.523%205.052%207.523%205.052%204.367%207.496%2011.404%205.378%2014.235%204.074.404-3.178%201.699-5.378%203.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283%200-5.378%201.94-9.778%205.014-13.2-.485-1.222-2.184-6.275.486-13.038%200%200%204.125-1.304%2013.426%205.052a46.97%2046.97%200%200%201%2012.214-1.63c4.125%200%208.33.571%2012.213%201.63%209.302-6.356%2013.427-5.052%2013.427-5.052%202.67%206.763.97%2011.816.485%2013.038%203.155%203.422%205.015%207.822%205.015%2013.2%200%2018.905-11.404%2023.06-22.324%2024.283%201.78%201.548%203.316%204.481%203.316%209.126%200%206.6-.08%2011.897-.08%2013.526%200%201.304.89%202.853%203.316%202.364%2019.412-6.52%2033.405-24.935%2033.405-46.691C97.707%2022%2075.788%200%2048.854%200z'%20fill='%2324292f'/%3e%3c/svg%3e",yn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2023.0.1,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20270%20270'%20style='enable-background:new%200%200%20270%20270;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23E01E5A;}%20.st1{fill:%2336C5F0;}%20.st2{fill:%232EB67D;}%20.st3{fill:%23ECB22E;}%20%3c/style%3e%3cg%3e%3cg%3e%3cpath%20class='st0'%20d='M99.4,151.2c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h12.9V151.2z'/%3e%3cpath%20class='st0'%20d='M105.9,151.2c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v32.3c0,7.1-5.8,12.9-12.9,12.9%20s-12.9-5.8-12.9-12.9V151.2z'/%3e%3c/g%3e%3cg%3e%3cpath%20class='st1'%20d='M118.8,99.4c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v12.9H118.8z'/%3e%3cpath%20class='st1'%20d='M118.8,105.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9H86.5c-7.1,0-12.9-5.8-12.9-12.9%20s5.8-12.9,12.9-12.9H118.8z'/%3e%3c/g%3e%3cg%3e%3cpath%20class='st2'%20d='M170.6,118.8c0-7.1,5.8-12.9,12.9-12.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9h-12.9V118.8z'/%3e%3cpath%20class='st2'%20d='M164.1,118.8c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9V86.5c0-7.1,5.8-12.9,12.9-12.9%20c7.1,0,12.9,5.8,12.9,12.9V118.8z'/%3e%3c/g%3e%3cg%3e%3cpath%20class='st3'%20d='M151.2,170.6c7.1,0,12.9,5.8,12.9,12.9c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9v-12.9H151.2z'/%3e%3cpath%20class='st3'%20d='M151.2,164.1c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h32.3c7.1,0,12.9,5.8,12.9,12.9%20c0,7.1-5.8,12.9-12.9,12.9H151.2z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Cn=s=>{const{isOpen:i,onClose:a}=s,{t}=H(),r=k.getAppVersion();return e.jsxs(F,{isOpen:i,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:t("header.about.title")}),e.jsx(Q,{}),e.jsxs($,{paddingBottom:10,children:[e.jsxs(os,{direction:"row",children:[e.jsx(Ds,{boxSize:"128px",src:"/rmp//logo192.png"}),e.jsxs(os,{direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[e.jsx(b,{fontSize:"xl",as:"b",children:t("header.about.rmp")}),e.jsx(b,{children:r}),e.jsx(b,{}),e.jsx(b,{fontSize:"sm",children:t("header.about.railmapgen")})]})]}),e.jsx(T,{margin:5,children:e.jsx(b,{fontSize:"xl",children:t("header.about.desc")})}),e.jsx(be,{as:"h5",size:"sm",mt:3,mb:2,children:t("header.about.contributors")}),e.jsx(be,{as:"h6",size:"xs",my:2,children:t("header.about.coreContributors")}),e.jsxs(ke,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),e.jsx(b,{fontSize:"sm",children:t("header.about.content1")}),e.jsx(b,{fontSize:"sm",align:"right",mb:1,children:t("header.about.content2")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/langonginc","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/langonginc.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:"langonginc"}),e.jsx(b,{fontSize:"sm",children:t("header.about.langonginc")}),e.jsx(b,{fontSize:"sm",align:"right",mb:1,children:"--Avicii"})]})]})]}),e.jsx(be,{as:"h6",size:"xs",my:2,children:t("header.about.styleContributors")}),e.jsxs(ke,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/203IhzElttil","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/203IhzElttil.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:"203IhzElttil"}),e.jsx(b,{fontSize:"sm",mb:1,children:t("header.about.203IhzElttil")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/Swiftiecott","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/Swiftiecott.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:"Swiftiecott"}),e.jsx(b,{fontSize:"sm",mb:1,children:t("header.about.Swiftiecott")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/Minwtraft","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/Minwtraft.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:"Minwtraft"}),e.jsx(b,{fontSize:"sm",mb:1,children:t("header.about.Minwtraft")})]})]})]}),e.jsx(be,{as:"h5",size:"sm",mt:3,mb:2,children:t("header.about.contactUs")}),e.jsxs(ke,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/railmapgen/rmp/issues","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:Sn,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.about.github")}),e.jsx(b,{fontSize:"sm",children:t("header.about.githubContent")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:yn,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.about.slack")}),e.jsx(b,{fontSize:"sm",children:t("header.about.slackContent")}),e.jsx(b,{fontSize:"sm",as:"i",children:"#rmp, #gallery, #rmg, #palette-and-templates"})]})]})]})]})]})]})};function zn(s){return Gs({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 21a9 9 0 0 0 9 -9a9 9 0 0 0 -9 -9a9 9 0 0 0 -9 9a9 9 0 0 0 9 9z"},child:[]},{tag:"path",attr:{d:"M12 12m-4.5 0a4.5 4.5 0 1 0 9 0a4.5 4.5 0 1 0 -9 0"},child:[]}]})(s)}function vn(s){return Gs({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M13 10v-10h-13v13h13v-3zM1 1h11v8h-0.755l-2.564-3.319-1.159 1.214-2.248-3.881-3.576 5.986h-0.698v-8zM9.982 9h-7.119l2.398-4.014 2.064 3.564 1.275-1.337 1.382 1.787zM1 12v-2h11v2h-11zM17 3v13h-13v-1.984h1v0.984h11v-11h-2v-1h3z"},child:[]}]})(s)}const kn="data:image/png;base64,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",On="/rmp/assets/opencollective-icon-Ciasch0w.webp",Mn=s=>{const{isOpen:i,onClose:a}=s,{t}=H(),r=k.isAllowAnalytics(),n=()=>{k.isStandaloneWindow()?window.open("/rmp-gallery/#/donation","_blank"):k.openApp({appId:"rmp-gallery",hash:"/donation"})},o=c=>new URLSearchParams({title:"Donation: New ".concat(c," request for [city name]"),body:"Hi, I'd like to have new ".concat(c,", and here is my support.\n\n<!-- your donation entry -->\n\n<!-- reference (images or URLs) -->\n\n")}).toString();return f.useEffect(()=>{i&&r&&k.event(Se.OPEN_DONATION,{})},[i]),e.jsxs(F,{isOpen:i,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:t("header.donation.title")}),e.jsx(Q,{}),e.jsxs($,{paddingBottom:10,children:[e.jsxs(os,{direction:"row",alignItems:"center",justifyContent:"space-around",children:[e.jsx(b,{fontSize:"96px",fontFamily:"serif",children:"I"}),e.jsx(et,{size:"64px",color:"red"}),e.jsx(Ds,{boxSize:"96px",src:"/rmp//logo192.png"})]}),e.jsx(T,{margin:5,children:e.jsx(b,{fontSize:"xl",children:t("header.donation.content")})}),e.jsx(be,{as:"h5",size:"sm",mb:2,children:t("header.donation.rewards")}),e.jsxs(ke,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:n,cursor:"pointer",children:[e.jsx(Z,{icon:e.jsx(vn,{}),size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.gallery")}),e.jsx(b,{fontSize:"sm",children:t("header.donation.galleryContent")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/railmapgen/rmp/issues/new?"+o("stations/nodes"),"_blank"),cursor:"pointer",children:[e.jsx(Z,{icon:e.jsx(zn,{}),size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.nodes")}),e.jsx(b,{fontSize:"sm",children:t("header.donation.nodesContent")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/railmapgen/rmp/issues/new?"+o("features"),"_blank"),cursor:"pointer",children:[e.jsx(Z,{icon:e.jsx(St,{}),size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.features")}),e.jsx(b,{fontSize:"sm",children:t("header.donation.featuresContent")})]})]})]}),e.jsx(be,{as:"h5",size:"sm",mt:3,mb:2,children:t("header.donation.methods")}),e.jsxs(ke,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://opencollective.com/rail-map-toolkit","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:On,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.openCollective")}),e.jsx(b,{fontSize:"sm",children:t("header.donation.viaUSD")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://afdian.com/a/rail-map-toolkit","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:kn,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(b,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.afdian")}),e.jsx(b,{fontSize:"sm",children:t("header.donation.viaCNY")})]})]})]})]})]})]})};/*!
 * canvas-size
 * v2.0.0
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function _e(s){const i=s.sizes.shift(),a=Math.max(Math.ceil(i[0]),1),t=Math.max(Math.ceil(i[1]),1),r=[a-1,t-1,1,1],n=performance.now(),o=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;let c,g;o?(c=new OffscreenCanvas(1,1),g=new OffscreenCanvas(a,t)):(c=document.createElement("canvas"),c.width=1,c.height=1,g=document.createElement("canvas"),g.width=a,g.height=t);const h=c.getContext("2d"),w=g.getContext("2d");w&&(w.fillRect.apply(w,r),h.drawImage(g,a-1,t-1,1,1,0,0,1,1));const x=h&&h.getImageData(0,0,1,1).data[3]!==0,l=parseInt(performance.now()-n);return[c,g].forEach(u=>{u.height=0,u.width=0}),o?(postMessage({width:a,height:t,testTime:l,isTestPass:x}),!x&&s.sizes.length&&setTimeout(()=>{_e(s)},0)):x?s.onSuccess({width:a,height:t,testTime:l}):(s.onError({width:a,height:t,testTime:l}),s.sizes.length&&setTimeout(()=>{_e(s)},0)),x}const $e={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},ve={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},Re={};function es(s){const i=s.width===s.height,a=s.height===1,t=s.width===1,r=[];if(!s.width||!s.height)s.sizes.forEach(n=>{const o=i||a?n:1,c=i||t?n:1;r.push([o,c])});else{const n=s.min||ve.min,o=s.step||ve.step;let c=Math.max(s.width,s.height);for(;c>=n;){const g=i||a?c:1,h=i||t?c:1;r.push([g,h]),c-=o}}return r}function De(s){const i=typeof window<"u",a=i&&"Promise"in window,t=i&&"HTMLCanvasElement"in window,r=i&&"OffscreenCanvas"in window,n=URL.createObjectURL(new Blob([])).slice(-36),o=performance.now(),{onError:c,onSuccess:g,...h}=s,w=()=>parseInt(performance.now()-o);let x=null;if(!t)return!1;if(s.useWorker&&r){const l="\n            var canvasTest = ".concat(_e.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),u=new Blob([l],{type:"application/javascript"}),d=URL.createObjectURL(u);x=new Worker(d),URL.revokeObjectURL(d),x.onmessage=function(p){const{width:m,height:j,testTime:S,isTestPass:y}=p.data,M={width:m,height:j,testTime:S,totalTime:w()};y?(Re[n].onSuccess(M),delete Re[n]):Re[n].onError(M)}}if(a)return new Promise(l=>{const u={...s,onError(d){let{width:p,height:m,testTime:j}=d;const S={width:p,height:m,testTime:j,totalTime:w()};let y;if(s.sizes.length===0)y=!0;else{const[[M,W]]=s.sizes.slice(-1);y=p===M&&m===W}c(S),y&&l({...S,success:!1})},onSuccess(d){let{width:p,height:m,testTime:j}=d;const S={width:p,height:m,testTime:j,totalTime:w()};g(S),l({...S,success:!0})}};if(x){const{onError:d,onSuccess:p}=u;Re[n]={onError:d,onSuccess:p},x.postMessage(h)}else _e(u)});if(x)Re[n]={onError:c,onSuccess:g},x.postMessage(h);else return _e(s)}const An={maxArea(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=es({width:s.max,height:s.max,min:s.min,step:s.step,sizes:[...$e.area]}),a={...ve,...s,sizes:i};return De(a)},maxHeight(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=es({width:1,height:s.max,min:s.min,step:s.step,sizes:[...$e.height]}),a={...ve,...s,sizes:i};return De(a)},maxWidth(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=es({width:s.max,height:1,min:s.min,step:s.step,sizes:[...$e.width]}),a={...ve,...s,sizes:i};return De(a)},test(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={...ve,...s};return i.sizes=[...i.sizes],i.width&&i.height&&(i.sizes=[[i.width,i.height]]),De(i)}};var He=(s=>(s.left="l",s.right="r",s))(He||{}),je=(s=>(s.through="through",s.nonThrough="nonthrough",s))(je||{}),Ze=(s=>(s.local="local",s.express="express",s.direct="direct",s))(Ze||{}),ue=(s=>(s.MTR="mtr",s.GZMTR="gzmtr",s.SHMetro="shmetro",s))(ue||{}),ws=(s=>(s.sh="sh",s.sh2020="sh2020",s))(ws||{});const ce=new Set,ls=new Set,cs=new Set,ds=new Set,hs=new Map,ge=new Map,ss=new Set,ts=new Map,K=new Map;let I=[],Ne=0;const Ge=new Map,ns=new Map,ps=new Set,Tn={localisedName:{en:"LEFT END"},num:"00",services:[Ze.local],parents:[],children:["lineend"],transfer:{groups:[{}],tick_direc:He.right,paid_area:!0},loop_pivot:!1,one_line:!0,int_padding:355},Rn={localisedName:{en:"RIGHT END"},num:"00",services:[Ze.local],parents:[],children:[],transfer:{groups:[{}],tick_direc:He.right,paid_area:!0},loop_pivot:!1,one_line:!0,int_padding:355},En={},st={svgWidth:{destination:1500,runin:1500,railmap:1500,indoor:1500},svg_height:400,style:ue.SHMetro,y_pc:50,padding:10,branchSpacingPct:33,direction:He.right,platform_num:"1",theme:[yt.Shanghai,"sh1","#E3002B",fs.white],line_name:["地鐵線","Metro Line"],current_stn_idx:"jlaMj2",stn_list:En,namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:ws.sh,direction_gz_x:40,direction_gz_y:70,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:0,bottom_factor:1}},Nn={localisedName:{},num:"",services:[Ze.local],parents:[],children:[],transfer:{groups:[{}],tick_direc:He.right,paid_area:!0},loop_pivot:!1,one_line:!0,int_padding:355},z=s=>"".concat(s[0],"/").concat(s[1],"=").concat(s[2]).concat(s[3]),Ss=s=>qs.includes(s),In=s=>{if(Ss(s.style))return structuredClone(s[s.style].color)},_n=(s,i)=>{const[a,t]=s.extremities(i),r=s.getEdgeAttributes(i),n=r.style;if(a!=t&&Ss(n)){const o=In(r);ds.has(z(o))||(cs.add(o),ds.add(z(o)),hs.set(o,a),ge.set(z(o),new Set)),ge.get(z(o)).add(a),ge.get(z(o)).add(t),K.has(a)?I.push({target:t,next:K.get(a),color:o}):I.push({target:t,next:-1,color:o}),K.set(a,Ne),Ne++,K.has(t)?I.push({target:a,next:K.get(t),color:o}):I.push({target:a,next:-1,color:o}),K.set(t,Ne),Ne++}},tt=(s,i,a)=>{if(ge.get(z(a)).has(s)){ge.get(z(a)).delete(s);for(let t=K.get(s);t!=-1;t=I[t].next){const r=I[t].target,n=I[t].color;z(n)==z(a)&&tt(r,s,a)}}},nt=(s,i,a)=>{if(ce.has(s))return;ce.add(s);let t=0;const r=new Set;for(let n=K.get(s);n!=-1;n=I[n].next){const o=I[n].target,c=I[n].color;z(c)==z(a)&&(r.has(o)||(r.add(o),t++,o!=i&&nt(o,s,a)))}Ge.set(s,t)},Ws=(s,i)=>{const a=s.stn_list.lineend.parents;a.push(i),s.stn_list.lineend.parents=structuredClone(a).reverse(),s.stn_list.lineend.branch={...s.stn_list.lineend.branch,left:s.stn_list.lineend.parents.length==2?[je.through,a[1]]:void 0}},Hn=(s,i)=>{let a=0;for(let t=K.get(s);t!=-1;t=I[t].next){I[t].target;const r=I[t].color;z(r)==z(i)&&a++}return a},ot=(s,i,a)=>{if(ps.has(s))return[];ps.add(s);const t=[];for(let r=K.get(s);r!=-1;r=I[r].next){const n=I[r].target,o=I[r].color;n!=i&&z(o)==z(a)&&(n.startsWith("stn")?t.push(n):t.push(...ot(n,s,a)))}return t},us=(s,i,a,t,r,n,o)=>{var l;if(ce.has(s)&&(!s.startsWith("misc_node_")&&o.stn_list[s]==null||s.startsWith("misc_node_")&&!ls.has(s)||o.loop))return[];if(ce.has(s)&&o.stn_list[s]!=null&&Hn(s,n)-1>=2){const u=[...o.stn_list[s].parents,i];if(o.stn_list[u[1]]==null){const m=u[0];u[0]=u[1],u[1]=m}o.stn_list[s].parents=structuredClone(u).reverse(),o.stn_list[s].branch={...o.stn_list[s].branch,left:[je.through,u[1]]};const d=[];for(const m of o.stn_list[s].children)m!=i&&d.push(m);o.stn_list[s].children=structuredClone(d),(l=o.stn_list[s].branch)==null||delete l.right;const p=[];for(const m of o.stn_list.lineend.parents)m!=s&&p.push(m);return o.stn_list.lineend.parents=structuredClone(p).reverse(),o.stn_list.lineend.branch={...o.stn_list.lineend.branch,left:o.stn_list.lineend.parents.length==2?[je.through,p[1]]:void 0},d.length==0&&(o.stn_list[s].children=["lineend"],Ws(o,s)),[s]}ce.add(s);const c=[],g=[],h=[],w=new Set,x=new Set;for(let u=K.get(s);u!=-1;u=I[u].next){const d=I[u].target,p=I[u].color;if(d!=a){if(z(p)==z(n)){if(x.has(d))continue;if(x.add(d),s.startsWith("misc_node_")){const m=us(d,i,s,t+1,r,n,o);m.length!=0&&c.push(...m)}else{const m=us(d,s,s,t+1,r,n,o);m.length!=0&&c.push(...m)}}if(!w.has(z(p))&&z(p)!=z(n)){w.add(z(p));const m={theme:p,name:["ch_".concat(z(p)),"en_".concat(z(p))]};h.push(m)}}}if(c.length==2){for(let u=0;u<2;u++)c[u]=="lineend"&&c.splice(u,1);if(o.stn_list[c[1]].parents.length>=2){const u=c[0];c[0]=c[1],c[1]=u}}if(ce.has(s)&&o.stn_list[s]!=null){const u=[];for(const d of o.stn_list.lineend.parents)d!=s&&u.push(d);o.stn_list.lineend.parents=structuredClone(u).reverse(),o.stn_list.lineend.branch={...o.stn_list.lineend.branch,left:o.stn_list.lineend.parents.length==2?[je.through,u[1]]:void 0},c.length==0&&(ps.clear(),g.push(...ot(s,i,n)))}if(s.startsWith("misc_node_"))return ls.add(s),c;{const u=r.getNodeAttributes(s).type,d=r.getNodeAttributes(s)[u];if(o.stn_list[s]=structuredClone(Nn),o.stn_list[s].localisedName={zh:d.names[0],en:d.names[1]},o.stn_list[s].num=String(t),r.getNodeAttributes(s).type==_.GzmtrBasic){const p=d;o.stn_list[s].num=p.stationCode,(p.secondaryNames[0]!==""||p.secondaryNames[1]!=="")&&(o.stn_list[s].localisedSecondaryName={zh:p.secondaryNames[0],en:p.secondaryNames[1]})}if(r.getNodeAttributes(s).type==_.GzmtrInt){const p=d,m=p.transfer[0];for(const j of m)if(z(j)==z(n)){o.stn_list[s].num=String(j[5]);break}(p.secondaryNames[0]!==""||p.secondaryNames[1]!=="")&&(o.stn_list[s].localisedSecondaryName={zh:p.secondaryNames[0],en:p.secondaryNames[1]})}return c.length!=0?(o.stn_list[s].children=structuredClone(c).reverse(),c.length==2&&(o.stn_list[s].branch={...o.stn_list[s].branch,right:[je.through,c[1]]})):(o.stn_list[s].children=["lineend"],Ws(o,s)),g.push(i),o.stn_list[s].parents=structuredClone(g).reverse(),g.length==2&&(o.stn_list[s].branch={...o.stn_list[s].branch,left:[je.through,g[1]]}),h.length!=0&&(o.stn_list[s].transfer.groups[0].lines=structuredClone(h)),[s]}},Wn=(s,i,a,t)=>{const r=structuredClone(st);t=="LOOP"&&(r.loop=!0);let n;switch(s.getNodeAttributes(a).type){case _.GzmtrBasic:case _.GzmtrInt:n=ue.GZMTR;break;case _.MTR:n=ue.MTR;break;default:n=ue.SHMetro;break}r.theme=structuredClone(i),r.style=n,r.stn_list.linestart=structuredClone(Tn),r.stn_list.lineend=structuredClone(Rn),ce.clear(),ls.clear();const o=us(a,"linestart","linestart",1,s,i,r);if(r.current_stn_idx=o[0],r.stn_list.linestart.children=[o[0]],!(Object.keys(r.stn_list).length<=3||r.stn_list.lineend.parents.length>=3))return structuredClone(r)},Ln=s=>{var t,r;ce.clear(),cs.clear(),ds.clear(),hs.clear(),ge.clear(),ss.clear(),ts.clear(),K.clear(),I=[],Ne=0,Ge.clear(),ns.clear(),s.filterEdges(n=>n.startsWith("line")).forEach(n=>{Ss(s.getEdgeAttributes(n).style)&&_n(s,n)});let i=0;s.forEachNode(n=>{ns.set(n,++i)}),ns.set("lineend",++i);const a=[];for(const n of cs){let o=0;for(;ge.get(z(n)).size!=0;){let c="line_root";ge.get(z(n)).forEach(h=>{c=="line_root"&&(c=h)}),tt(c,"line_root",n);const g={theme:n,index:++o};ss.add(g),ts.set(g,c)}}for(const n of ss){const{theme:o}=n;ce.clear(),Ge.clear(),nt(ts.get(n),"line_root",o);let c=!0,g="LINE";const h=[];for(const[x,l]of Ge)l==1&&h.push(x),l==3&&(g="BRANCH"),l>3&&(c=!1);if(!c)continue;h.length==0&&(g="LOOP",h.push(hs.get(o)));const w=[];for(const x of h){const l=Wn(s,o,x,g);l!=null&&w.push([l,(t=l.stn_list[l.current_stn_idx].localisedName.zh)!=null?t:"",(r=l.stn_list[l.current_stn_idx].localisedName.en)!=null?r:""])}w.length!=0&&a.push({id:rs(10),theme:o,param:structuredClone(w),type:g})}return a},Bn=s=>s[0]!=""&&s[1]!=""?s[0]+"_"+s[1]:s[0]!=""?s[0]:s[1]!=""?s[1]:"".concat(new Date().valueOf()),Pn=(s,i)=>{let a=s;return i.forEach((t,r)=>{const n=new RegExp("ch_".concat(r),"g"),o=new RegExp("en_".concat(r),"g");a=a.replace(n,t[0]),a=a.replace(o,t[1])}),a},Dn=(s,i,a,t)=>{s.line_name=i,s.line_num=String(a),as("RMG_".concat(Bn(i),".json"),"application/json",Pn(JSON.stringify(s),t))},Gn={LINE:"#33ccff",BRANCH:"#007B61",LOOP:"#ff6666"},Un=s=>{const{isOpen:i,onClose:a}=s,{t}=H(),r=f.useRef(window.graph),[n,o]=f.useState(!1),[c,g]=f.useState([[st,"",""]]),[h,w]=f.useState(["","",""]),[x,l]=f.useState(new Map),[u,d]=f.useState(new Map),[p,m]=f.useState([]);f.useEffect(()=>{if(i){const S=Ln(r.current),y=new Map;S.forEach(({id:M,theme:W})=>{y.set(z(W),M)}),m(S),l(y)}},[i]);const j=(S,y)=>document.getElementById("2RMG_"+y+"_"+S).value.trim();return e.jsxs(F,{isOpen:i,onClose:a,size:"2xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:e.jsx(b,{as:"b",fontSize:"xl",children:t("header.download.2rmg.title")})}),e.jsx(Q,{}),e.jsxs($,{children:[e.jsx(b,{fontSize:"sm",mt:"3",lineHeight:"100%",children:t("header.download.2rmg.info1")}),e.jsx(b,{fontSize:"sm",mt:"3",lineHeight:"100%",children:t("header.download.2rmg.info2")}),e.jsx("br",{}),p.length===0?e.jsx(b,{fontSize:"md",children:t("header.download.2rmg.noline")}):e.jsx("table",{children:e.jsx("tbody",{children:p.map(({id:S,theme:y,param:M,type:W})=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(Ms,{name:y[0]=="other"&&y[1]=="other"?y[2]:y[1],bg:y[2],fg:y[3]})}),e.jsx("td",{children:e.jsx(Je,{placeholder:t("header.download.2rmg.placeholder.chinese"),id:"2RMG_nameCh_".concat(S),size:"sm"})}),e.jsx("td",{children:e.jsx(Je,{placeholder:t("header.download.2rmg.placeholder.english"),id:"2RMG_nameEn_".concat(S),size:"sm"})}),e.jsx("td",{children:e.jsx(Je,{placeholder:t("header.download.2rmg.placeholder.lineCode"),id:"2RMG_lineNum_".concat(S),size:"sm"})}),e.jsx("td",{children:e.jsx(Ms,{name:t("header.download.2rmg.type.".concat(W.toLowerCase())),bg:Gn[W],fg:fs.white})}),e.jsx("td",{children:e.jsx(E,{colorScheme:"blue",variant:"ghost",mr:"1",onClick:()=>{const P=j(S,"nameCh"),de=j(S,"nameEn"),ie=j(S,"lineNum"),ee=new Map;x.forEach((ne,he)=>{ee.set(he,[j(ne,"nameCh"),j(ne,"nameEn")])}),g(M),w([P,de,ie]),d(ee),o(!0)},size:"sm",children:e.jsx(Xs,{})})})]},JSON.stringify(y)))})})]}),e.jsx(xe,{children:e.jsx(E,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:t("close")})})]}),e.jsx(Zn,{isOpen:n,onClose:()=>o(!1),param:c,nameList:h,interchangeName:u})]})},Zn=s=>{const{isOpen:i,onClose:a,param:t,nameList:r,interchangeName:n}=s,{t:o}=H(),[c,g]=f.useState("");return f.useEffect(()=>{r[0]!=""&&r[1]!=""?g(r[0]+"/"+r[1]):r[0]!=""?g(r[0]):r[1]!=""?g(r[1]):g("")},[...r]),e.jsxs(F,{isOpen:i,onClose:a,size:"md",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:e.jsxs(b,{as:"b",fontSize:"xl",children:[o("header.download.2rmg.download")," ",c]})}),e.jsx(Q,{}),e.jsx($,{children:e.jsxs(dt,{children:[e.jsx(b,{fontSize:"sm",mb:"2",lineHeight:"100%",children:o("header.download.2rmg.downloadInfo")}),t.map(([h,w,x])=>e.jsxs(E,{onClick:()=>{Dn(h,[r[0],r[1]],r[2],n)},overflow:"hidden",size:"md",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"ruby",children:[w.replaceAll("\\","⏎"),"/",x.replaceAll("\\","⏎")]},"".concat(w).concat(x)))]})}),e.jsx(xe,{children:e.jsx(E,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:o("close")})})]})]})},Vn=s=>{const{isOpen:i,onClose:a}=s,{t}=H();return e.jsxs(F,{isOpen:i,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:t("header.download.termsAndConditions")}),e.jsx(Q,{}),e.jsx($,{children:e.jsxs(ht,{children:[e.jsxs(ze,{children:["The layout of the elements on the signage or rail map, is designed by"," ",e.jsxs(A,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",e.jsx(N,{as:R})]}),", ",e.jsxs(A,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",e.jsx(N,{as:R})]})," or ",e.jsxs(A,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",e.jsx(N,{as:R})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",e.jsx("br",{}),"标志版或路线图的元素或布局，基于你所选择的风格，为",e.jsxs(A,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["上海申通地铁集团 ",e.jsx(N,{as:R})]}),"，",e.jsxs(A,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["广州地铁集团公司 ",e.jsx(N,{as:R})]}),"或",e.jsxs(A,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["港铁公司 ",e.jsx(N,{as:R})]}),"所设计。在产生的图像用作商业用途前，你应向相关公司取得适当之许可证或授权。"]}),e.jsxs(ze,{children:["The elements including shapes and lines on the image are drawn by"," ",e.jsxs(A,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",e.jsx(N,{as:R})]})," and ",e.jsxs(A,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",e.jsx(N,{as:R})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",e.jsx("br",{}),"图像的元素，包括图形及线条，均由",e.jsxs(A,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",e.jsx(N,{as:R})]}),"及",e.jsxs(A,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",e.jsx(N,{as:R})]}),"基于上述公司设计标准或准则绘制。你可将其用于任何目的，但我们建议你于使用同时附以我们的名字以及本网站地址。"]}),e.jsxs(ze,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Painter uses"," ",e.jsxs(A,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",e.jsx(N,{as:R})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",e.jsx("br",{}),"由于著作权及其他法律限制，铁路路线图绘制器使用由",e.jsxs(A,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["ButTaiwan提供的源樣明體 ",e.jsx(N,{as:R})]}),"，以及Vegur，以代替港铁样式标志牌所使用的地铁宋及Myriad Pro。在产生之图像用作商业用途前，你应向字型生产厂商取得适当之许可证或授权。"]}),e.jsxs(ze,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes except commercial use, under the conditions above.",e.jsx("br",{}),"输出的PNG或SVG图像可基于上述条款，在非商业使用时，用于修改、发行或其他用途。"]}),e.jsxs(ze,{children:["All flag emojis shown on Windows platforms are designed by"," ",e.jsxs(A,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",e.jsx(N,{as:R})]})," ","– the open-source emoji and icon project. License:",e.jsxs(A,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",e.jsx(N,{as:R})]}),e.jsx("br",{}),"于Windows作业系统上显示的国旗Emoji为",e.jsxs(A,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",e.jsx(N,{as:R})]}),"所设计。许可证：",e.jsxs(A,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",e.jsx(N,{as:R})]})]}),e.jsxs(ze,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",e.jsx("br",{}),"我们保留修改、新增或移除上述条款之权利，而无需另行通知。中文译本仅供参考，文义如与英文有歧异，概以英文本为准。"]})]})})]})]})};function Kn(){const s=Us("white","var(--chakra-colors-gray-800)"),i=D(),{telemetry:{project:a}}=B(v=>v.app),t=B(v=>v.param),r=k.isAllowAnalytics(),{t:n}=H(),o=f.useRef(window.graph),[c,g]=f.useState("png"),h={png:n("header.download.png"),svg:n("header.download.svg")},[w,x]=f.useState(2),[l,u]=f.useState({width:1,height:1,benchmark:.001}),[d,p]=f.useState(200),m=[10,25,33,50,67,75,100,125,150,175,200,250,300,400,500,750,1e3],j=Object.fromEntries(m.map(v=>[v,"".concat(v,"%")])),[S,y]=f.useState([]),[M,W]=f.useState(!1),P=[{type:"select",label:n("header.download.format"),value:c,options:h,onChange:v=>g(v==="png"?"png":"svg")}],de=[{type:"select",label:n("header.download.svgVersion"),value:w,options:{1.1:n("header.download.svg1.1"),2:n("header.download.svg2")},onChange:v=>{x(v),v===1.1&&ys(!0)}}],ie=[{type:"select",label:n("header.download.scale"),value:d,options:j,disabledOptions:S,onChange:v=>p(v)},{type:"switch",label:n("header.download.transparent"),isChecked:M,onChange:W}],[ee,ne]=f.useState(!1),[he,We]=f.useState(!1),[L,ys]=f.useState(!1),[Cs,rt]=f.useState(!1),[zs,it]=f.useState(!1),[at,vs]=f.useState(!1);f.useEffect(()=>{(async()=>{const Ae=await An.maxArea({usePromise:!0,useWorker:!0});u(Ae)})()},[]),f.useEffect(()=>{if(ee){const{xMin:v,yMin:Ae,xMax:Ve,yMax:Le}=Ct(o.current),[Ke,ye]=[Ve-v,Le-Ae],Te=m.filter(Ce=>Ke*Ce/100>l.width&&ye*Ce/100>l.height);y(Te)}},[ee]);const lt=()=>{r&&k.event(Se.DOWNLOAD_PARAM,a?{"#nodes":o.current.order,"#edges":o.current.size}:{}),as("RMP_".concat(new Date().valueOf(),".json"),"application/json",Ot(t))},ct=async()=>{ne(!1),r&&k.event(Se.DOWNLOAD_IMAGES,a?{numberOfNodes:o.current.order,numberOfEdges:o.current.size}:{});const{elem:v,width:Ae,height:Ve}=await gn(o.current,Cs,L,w),Le=v.outerHTML.replace(/&nbsp;/g," ");if(c==="svg"){as("RMP_".concat(new Date().valueOf(),".svg"),"image/svg+xml",Le);return}document.body.appendChild(v);const Ke="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(Le)));document.body.removeChild(v),v.remove();const ye=document.createElement("canvas"),[Te,Ce]=[Ae*d/100,Ve*d/100];ye.width=Te,ye.height=Ce;const Ye=ye.getContext("2d");M||(Ye.fillStyle=s,Ye.fillRect(0,0,Te,Ce));const Fe=new Image;Fe.onload=()=>{setTimeout(()=>{Ye.drawImage(Fe,0,0,Te,Ce),ye.toBlob(ks=>{if(!ks){i(Ue({status:"error",message:n("header.download.imageTooBig")}));return}xn("RMP_".concat(new Date().valueOf(),".png"),ks)},"image/png")},mn()?2e3:0)},Fe.src=Ke};return e.jsxs(gs,{id:"download",children:[e.jsx(xs,{as:se,size:"sm",variant:"ghost",icon:e.jsx(Xs,{})}),e.jsxs(ms,{children:[e.jsx(le,{icon:e.jsx(zt,{}),onClick:lt,children:n("header.download.config")}),e.jsxs(le,{icon:e.jsx(vt,{}),onClick:()=>vs(!0),children:[n("header.download.2rmg.title"),e.jsx(we,{ml:"1",colorScheme:"green",children:"New"})]}),e.jsx(le,{icon:e.jsx(kt,{}),onClick:()=>ne(!0),children:n("header.download.image")})]}),e.jsxs(F,{size:"xl",isOpen:ee,onClose:()=>ne(!1),children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:n("header.download.image")}),e.jsx(Q,{}),e.jsxs($,{children:[e.jsx(Oe,{fields:P}),c==="svg"&&e.jsx(Oe,{fields:de}),c==="png"&&e.jsx(Oe,{fields:ie}),c==="png"&&S.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(b,{as:"i",fontSize:"sm",children:n("header.download.disabledScaleOptions")}),e.jsx("br",{}),e.jsx(b,{as:"i",fontSize:"sm",children:n("header.download.disabledScaleOptionsWorkarounds")}),e.jsxs(A,{color:"teal.500",onClick:()=>window.open("https://github.com/RazrFalcon/resvg","_blank"),children:["RazrFalcon/resvg ",e.jsx(N,{as:R})]}),e.jsx("br",{})]}),e.jsx("br",{}),e.jsx(qe,{isChecked:L,isDisabled:c==="svg"&&w===1.1,onChange:v=>ys(v.target.checked),children:e.jsx(b,{children:n("header.download.useSystemFonts")})}),e.jsx(qe,{isChecked:Cs,onChange:v=>rt(v.target.checked),children:e.jsxs(b,{children:[n("header.download.shareInfo1"),e.jsxs(A,{color:"teal.500",onClick:()=>window.open("https://railmapgen.github.io/rmp","_blank"),children:[n("header.about.rmp")," ",e.jsx(N,{as:R})]}),n("header.download.shareInfo2")]})}),e.jsx(qe,{isChecked:zs,onChange:v=>it(v.target.checked),children:e.jsxs(b,{children:[n("header.download.termsAndConditionsInfo"),e.jsxs(A,{color:"teal.500",onClick:()=>We(!0),children:[n("header.download.termsAndConditions")," ",e.jsx(N,{as:R})]}),n("header.download.period")]})})]}),e.jsx(xe,{children:e.jsx(pt,{children:e.jsx(E,{colorScheme:"teal",variant:"outline",size:"sm",isDisabled:!zs||c==="png"&&S.includes(d),onClick:ct,children:n("header.download.confirm")})})}),e.jsx(Vn,{isOpen:he,onClose:()=>We(!1)})]})]}),e.jsx(Un,{isOpen:at,onClose:()=>vs(!1)})]})}const Yn=(s,{info_panel_type:i,line_num:a,stn_list:t,style:r,theme:n},o,c,g)=>{const h=Object.fromEntries(Object.keys(t).filter(l=>!["linestart","lineend"].includes(l)).map(l=>[l,"stn_".concat(rs(10))]));Object.entries(t).filter(([l,u])=>!["linestart","lineend"].includes(l)).forEach(([l,u])=>{const d=s.filterNodes((p,m)=>Object.values(_).includes(m.type)&&m[m.type].names[0]===u.localisedName.zh);d.length!==0&&(h[l]=d[0])});const w=[["linestart",-1,0]],x={};for(;w.length;){const[l,u,d]=w.shift();t[l].children.filter(m=>m!="lineend").forEach((m,j)=>{const S=Math.max(j,d+j);x[m]={x:u*150,y:S*75},w.push([m,u+1,S])})}Object.entries(t).filter(([l,u])=>!["linestart","lineend"].includes(l)).filter(([l,u])=>s.filterNodes((d,p)=>Object.values(_).includes(p.type)&&p[p.type].names[0]===u.localisedName.zh).length===0).map(([l,u])=>{var S,y,M;let d=_.ShmetroBasic;const p=u.transfer.groups,m=p.map(W=>{var P;return(P=W.lines)!=null?P:[]}).flat();r===ue.SHMetro?m.length>0?d=_.ShmetroInt:i===ws.sh2020?d=_.ShmetroBasic2020:d=_.ShmetroBasic:r===ue.GZMTR?m.length>0?d=_.GzmtrInt:d=_.GzmtrBasic:r===ue.MTR&&(d=_.MTR);const j={...structuredClone(fn[d].defaultAttrs),names:[(S=u.localisedName.zh)!=null?S:"",(y=u.localisedName.en)!=null?y:""]};return d===_.ShmetroBasic2020?j.color=n:d===_.GzmtrBasic?(j.color=n,j.lineCode=a,j.stationCode=u.num):d===_.GzmtrInt?j.transfer=p.map((W,P)=>{var ie,ee;const de=(ee=(ie=W.lines)==null?void 0:ie.map(ne=>{var he;return[...(he=ne.theme)!=null?he:n,"1","01"]}))!=null?ee:[];return P===0?[[...n,a,u.num],...de]:de}):d===_.MTR&&((M=p[0].lines)!=null&&M.length?j.transfer=[[[...n,"",""],...p[0].lines.map(W=>{var P;return[...(P=W.theme)!=null?P:n,"",""]})]]:j.transfer=[[]]),{node:h[l],attr:{visible:!0,zIndex:0,x:o+x[l].x,y:c+x[l].y,type:d,[d]:j}}}).forEach(({node:l,attr:u})=>s.addNode(l,u)),Object.entries(t).filter(([l,u])=>!["linestart","lineend"].includes(l)).forEach(([l,u])=>{u.children.filter(d=>!["linestart","lineend"].includes(d)).forEach(d=>{const p=Xe.Diagonal,[m,j]=[h[l],h[d]],S=g?Mt(s,p,m,j,"from"):-1;s.addDirectedEdgeWithKey("line_".concat(rs(10)),m,j,{visible:!0,zIndex:0,type:p,[Xe.Diagonal]:structuredClone(At[Xe.Diagonal].defaultAttrs),style:As.SingleColor,[As.SingleColor]:{color:n},reconcileId:"",parallelIndex:S})})})},Fn="rmg-bridge--",Jn={h:500,maxH:"70%","& iframe":{h:"100%",w:"100%"}};function qn(s){const{isOpen:i,onClose:a}=s,{t}=H(),{preference:{autoParallel:r}}=B(j=>j.app),{svgViewBoxZoom:n,svgViewBoxMin:o}=B(j=>j.param),c=D(),g=k.isAllowAnalytics(),h=bs(),{height:w,width:x}=js(h),l=Pe.useRef(window.graph),[u]=Pe.useState(crypto.randomUUID()),d="/rmg/#/import?"+new URLSearchParams({parentComponent:k.getAppName(),parentId:u}),p=Pe.useCallback(()=>{c(te()),c(Y()),c(re(l.current.export()))},[c,te,Y,re,l]),m=j=>{try{g&&k.event(Se.IMPORT_RMG_PARAM,{});const S=o.x+x*n/100/3,y=o.y+w*n/100/3;Yn(l.current,j,S,y,r),p()}catch(S){c(Ue({status:"error",message:t("header.open.unknownError")})),console.error("OpenActions.handleUploadRMG():: Unknown error occurred while parsing the RMG project",S)}finally{a()}};return Pe.useEffect(()=>{const j=new BroadcastChannel(Fn+u);return j.onmessage=S=>{const{event:y,data:M}=S.data;console.log("[rmp] Received event from RMG app clip:",y),y==="CLOSE"?a():y==="IMPORT"&&m(M)},()=>j.close()},[o.x,o.y,n,w,x,r]),e.jsx(Qs,{isOpen:i,onClose:a,sx:Jn,children:e.jsx("iframe",{src:d,loading:"lazy"})})}const Xn="RMP_GALLERY_CHANNEL",Qn="OPEN_TEMPLATE",Ls=new BroadcastChannel(Xn),$n={h:"80%",w:"80%","& iframe":{h:"100%",w:"100%"},"& div":{h:"100%",w:"100%"}};function eo(s){const{isOpen:i,onClose:a}=s,t=Zs(),{t:r}=H(),n=D(),{telemetry:{project:o}}=B(l=>l.app),c=k.isAllowAnalytics(),g=f.useRef(window.graph),h=f.useCallback(()=>{n(te()),n(Y()),n(re(g.current.export()))},[n,te,Y,re,g]),w=async l=>{const{version:u,...d}=JSON.parse(await $s(JSON.stringify(l)));n(is()),g.current.clear(),g.current.import(d.graph),h();const{svgViewBoxZoom:p,svgViewBoxMin:m}=d;typeof p=="number"&&n(Me(p)),typeof m.x=="number"&&typeof m.y=="number"&&n(Ie(m))},x=async(l,u)=>{var m;const d=u?"https://".concat(u):"",p=await((m=(await Promise.allSettled([fetch("".concat(d,"/rmp-gallery/resources/real_world/").concat(l,".json")),fetch("".concat(d,"/rmp-gallery/resources/fantasy/").concat(l,".json"))])).filter(j=>j.status==="fulfilled").find(j=>j.value.status===200))==null?void 0:m.value.json());if(p){if(c){const j={id:l};o&&u&&(j.host=u),k.event(Se.IMPORT_WORK_FROM_GALLERY,j)}w(p),t({title:r("header.open.importFromRMPGallery",{id:l}),status:"success",duration:9e3,isClosable:!0})}else t({title:r("header.open.failToImportFromRMPGallery",{id:l}),status:"error",duration:9e3,isClosable:!0})};return f.useEffect(()=>{const u=new URL(window.location.href).searchParams;if(u.size>0){const d=u.keys().next().value,p=d.indexOf("."),m=d.substring(0,p===-1?void 0:p);let j;p!==-1&&(j=d.substring(p+1)),x(m,j)}},[]),f.useEffect(()=>(Ls.onmessage=l=>{const{event:u,data:d}=l.data;u===Qn&&(x(d),a())},()=>Ls.close()),[]),e.jsxs(Qs,{isOpen:i,onClose:a,size:"full",sx:$n,children:[e.jsx("iframe",{src:"/rmp-gallery/",loading:"lazy"}),e.jsx(Vs,{onClick:a,position:"fixed",top:"5px",right:"15px"})]})}function so(){const s=D(),{t:i}=H(),a=bs(),{height:t}=js(a),r=f.useRef(window.graph),n=f.useRef(null),[o,c]=f.useState(!1),[g,h]=f.useState(!1),w=f.useCallback(()=>{s(te()),s(Y()),s(re(r.current.export()))},[s,te,Y,re,r]),x=()=>{s(is()),r.current.clear(),s(Me(100)),s(Ie({x:0,y:0})),w()},l=async p=>{const{version:m,...j}=JSON.parse(await $s(p));s(is()),r.current.clear(),r.current.import(j.graph),w();const{svgViewBoxZoom:S,svgViewBoxMin:y}=j;typeof S=="number"&&s(Me(S)),typeof y.x=="number"&&typeof y.y=="number"&&s(Ie(y))},u=async p=>{var j;const m=(j=p.target.files)==null?void 0:j[0];if(console.log("OpenActions.handleUpload():: received file",m),(m==null?void 0:m.type)!=="application/json")s(Ue({status:"error",message:i("header.open.invalidType")})),console.error("OpenActions.handleUpload():: Invalid file type! Only file in JSON format is accepted.");else try{const S=await to(m);await l(S)}catch(S){s(Ue({status:"error",message:i("header.open.unknownError")})),console.error("OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file",S)}p.target.value=""},d=async()=>{await l(await Nt()),s(Ie({x:-10,y:-13}));const p=Math.max(0,Math.min(400,-.132*t+117.772));s(Me(p)),k.event(Se.LOAD_TUTORIAL,{})};return f.useEffect(()=>{const p=async m=>{const{type:j,key:S,from:y}=m.data;if(j===It.SAVE_CHANGED&&S===Es.PARAM&&y==="rmt"){_t.debug("Received save changed event on key: ".concat(S));const M=localStorage.getItem(Es.PARAM);if(!M)return;await l(M)}};return Ts.addEventListener("message",p),()=>Ts.removeEventListener("message",p)},[]),e.jsxs(gs,{children:[e.jsx(xs,{as:se,size:"sm",variant:"ghost",icon:e.jsx(Rs,{})}),e.jsxs(ms,{children:[e.jsx(le,{icon:e.jsx(Tt,{}),onClick:x,children:i("header.open.new")}),e.jsx("input",{id:"upload_project",ref:n,type:"file",accept:".json",hidden:!0,onChange:u,"data-testid":"file-upload"}),e.jsx(le,{icon:e.jsx(Rs,{}),onClick:()=>{var p;return(p=n==null?void 0:n.current)==null?void 0:p.click()},children:i("header.open.config")}),e.jsx(le,{icon:e.jsx(Rt,{}),onClick:()=>c(!0),children:i("header.open.projectRMG")}),e.jsxs(le,{icon:e.jsx(R,{}),onClick:()=>h(!0),children:[i("header.open.gallery"),e.jsx(we,{ml:"1",colorScheme:"green",children:"New"})]}),e.jsx(le,{icon:e.jsx(Et,{}),onClick:d,children:i("header.open.tutorial")})]}),e.jsx(qn,{isOpen:o,onClose:()=>c(!1)}),e.jsx(eo,{isOpen:g,onClose:()=>h(!1)})]})}const to=s=>new Promise(i=>{const a=new FileReader;a.onloadend=()=>i(a.result),a.readAsText(s)}),no=()=>{const[s,i]=f.useState(!1),{t:a}=H(),t=D(),r=f.useRef(window.graph),n=bs(),{width:o,height:c}=js(n),[g,h]=f.useState([]);f.useEffect(()=>{s&&h(r.current.nodes().filter(x=>x.startsWith("stn")).map(x=>{const l=r.current.getNodeAttributes(x),u=l.type,d=l[u].names.join("/");return{id:x,value:d}}))},[s]);const w=x=>{t(Bt(new Set([x])));const l=Math.max(0,Math.min(400,-.132*c+117.772)),{x:u,y:d}=Pt((o-300)/2,c/2,l,{x:-r.current.getNodeAttribute(x,"x"),y:-r.current.getNodeAttribute(x,"y")});t(Me(l)),t(Ie({x:-u,y:-d}))};return e.jsxs(Ks,{isOpen:s,onOpen:()=>i(!0),onClose:()=>i(!1),children:[e.jsx(Ys,{children:e.jsx(se,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:e.jsx(Ht,{}),onClick:()=>i(!s)})}),e.jsx(Fs,{children:e.jsx(Js,{children:e.jsx(Wt,{label:a("header.search"),children:e.jsx(Lt,{data:g,displayHandler:x=>e.jsx(we,{children:x.value}),filter:(x,l)=>l.value.toLowerCase().includes(x.toLowerCase())||Object.values(l.value).some(u=>u.toLowerCase().includes(x.toLowerCase())),value:"",onChange:x=>w(x.id)})})})})]})},oo=s=>{const{isOpen:i,onClose:a}=s,t=D(),{theme:r,paletteAppClip:{output:n}}=B(u=>u.runtime),{t:o}=H(),c=f.useRef(window.graph),[g,h]=f.useState(r),[w,x]=f.useState(!1);f.useEffect(()=>{w&&n&&(h(n),x(!1))},[n==null?void 0:n.toString()]);const l=()=>{c.current.filterEdges((u,d,p,m,j,S,y)=>qs.includes(d.style)&&JSON.stringify(d[d.style].color)===JSON.stringify(g)).forEach(u=>c.current.dropEdge(u)),t(Y()),t(re(c.current.export())),a()};return e.jsxs(F,{isOpen:i,onClose:a,size:"xl",scrollBehavior:"inside",trapFocus:!1,children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:o("header.settings.procedures.removeLines.title")}),e.jsx(Q,{}),e.jsxs($,{children:[o("header.settings.procedures.removeLines.content"),e.jsx(Dt,{theme:g,onClick:()=>{x(!0),t(Gt(g))}})]}),e.jsxs(xe,{children:[e.jsx(E,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:o("cancel")}),e.jsx(E,{colorScheme:"red",onClick:l,children:o("remove")})]})]})]})},ro=s=>{const{isOpen:i,onClose:a}=s,t=D(),{t:r}=H(),n=f.useRef(window.graph),[o,c]=f.useState(1),g=[{type:"input",label:r("header.settings.procedures.scale.factor"),value:o.toString(),variant:"number",onChange:w=>c(Number(w)),minW:"full"}],h=()=>{n.current.forEachNode((w,x)=>{n.current.updateNodeAttribute(w,"x",l=>(l!=null?l:0)*o),n.current.updateNodeAttribute(w,"y",l=>(l!=null?l:0)*o)}),t(te()),t(Y()),t(re(n.current.export())),a()};return e.jsxs(F,{isOpen:i,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:r("header.settings.procedures.scale.title")}),e.jsx(Q,{}),e.jsxs($,{children:[r("header.settings.procedures.scale.content"),e.jsx(Oe,{fields:g})]}),e.jsxs(xe,{children:[e.jsx(E,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:r("cancel")}),e.jsx(E,{colorScheme:"red",onClick:h,children:r("apply")})]})]})]})},io=s=>{const{isOpen:i,onClose:a}=s,t=D(),{t:r}=H(),n=f.useRef(window.graph),[o,c]=f.useState(0),[g,h]=f.useState(0),w=[{type:"input",label:r("header.settings.procedures.translate.x"),value:o.toString(),variant:"number",onChange:l=>c(Number(l)),minW:"full"},{type:"input",label:r("header.settings.procedures.translate.y"),value:g.toString(),variant:"number",onChange:l=>h(Number(l)),minW:"full"}],x=()=>{n.current.forEachNode((l,u)=>{n.current.updateNodeAttribute(l,"x",d=>(d!=null?d:0)+o),n.current.updateNodeAttribute(l,"y",d=>(d!=null?d:0)+g)}),t(te()),t(Y()),t(re(n.current.export())),a()};return e.jsxs(F,{isOpen:i,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:r("header.settings.procedures.translate.title")}),e.jsx(Q,{}),e.jsxs($,{children:[r("header.settings.procedures.translate.content"),e.jsx(Oe,{fields:w})]}),e.jsxs(xe,{children:[e.jsx(E,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:r("cancel")}),e.jsx(E,{colorScheme:"red",onClick:x,children:r("apply")})]})]})]})},ao=s=>{const{isOpen:i,onClose:a}=s,t=D(),{preference:{unlockSimplePathAttempts:r}}=B(g=>g.app),{activeSubscriptions:n}=B(g=>g.account),{t:o}=H(),c=()=>{t(Ut(-1))};return e.jsxs(F,{isOpen:i,onClose:a,size:"5xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:o("header.settings.procedures.unlockSimplePath.title")}),e.jsx(Q,{}),e.jsxs($,{children:[e.jsx(b,{mb:"2",children:o("header.settings.procedures.unlockSimplePath.content1")}),e.jsx(b,{mb:"2",children:o("header.settings.procedures.unlockSimplePath.content2")}),e.jsx(b,{mb:"2",children:o("header.settings.procedures.unlockSimplePath.content3")})]}),e.jsx(xe,{children:e.jsx(Ee,{label:o("header.settings.pro"),isOpen:!n.RMP_CLOUD&&r>=0,children:e.jsx(E,{onClick:c,isDisabled:!n.RMP_CLOUD||r<0,children:r>=0?o("header.settings.procedures.unlockSimplePath.check"):o("header.settings.procedures.unlockSimplePath.unlocked")})})})]})]})},lo=s=>{const{isOpen:i,onClose:a}=s,t=D(),r=Zs(),{t:n}=H(),o=f.useRef(window.graph),[c,g]=f.useState(!1),h=async()=>{g(!0);const w=JSON.stringify(o.current.export());try{const x=await po(w);o.current.clear(),o.current.import(x),t(te()),t(Y()),t(re(o.current.export())),r({title:n("header.settings.procedures.updateColor.success"),status:"success",duration:9e3,isClosable:!0})}catch(x){console.error("[rmp] Error in updating all colors: ".concat(x)),r({title:n("header.settings.procedures.updateColor.error",{e:x}),status:"error",duration:9e3,isClosable:!0})}g(!1),a()};return e.jsxs(F,{isOpen:i,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:n("header.settings.procedures.updateColor.title")}),e.jsx(Q,{}),e.jsx($,{children:e.jsx(b,{children:n("header.settings.procedures.updateColor.content")})}),e.jsxs(xe,{children:[e.jsx(E,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:n("cancel")}),e.jsx(E,{colorScheme:"red",onClick:h,isLoading:c,children:n("apply")})]})]})]})},Bs=s=>s.length>=4&&s.every(i=>typeof i=="string")&&!!s[2].match(/^#[0-9a-fA-F]{6}$/)&&Object.values(fs).includes(s[3]),co=s=>{const i=[],a=(t,r)=>{if(Array.isArray(t)&&Bs(t)){i.push({path:r||"",value:t});return}for(const n in t){const o=t[n],c=r?"".concat(r,".").concat(n):n;Array.isArray(o)?Bs(o)?i.push({path:c,value:o}):o.forEach((g,h)=>a(g,"".concat(c,".").concat(h))):o&&typeof o=="object"&&a(o,c)}};return a(s),i},ho=(s,i,a)=>{const t=i.split(".");let r=s;for(let n=0;n<t.length-1;n++)r=r[t[n]];r[t[t.length-1]]=a},po=async s=>{const i=JSON.parse(s),a=new Date().getTime(),t=co(i);console.log("[rmp] Found all themes pending for update",t);const r=1e4;let n,o=!1;const c=new Promise((g,h)=>{n=setTimeout(()=>{o=!0,h("Executing time exceeds ".concat(r,"ms"))},r),(async()=>{for(const{path:w,value:x}of t){if(o)throw new Error("Update aborted");const[l,u,d,p,...m]=x,j=await Zt([l,u,d,p]);ho(i,w,[...j,...m])}})().then(g).catch(h)});try{return await c,console.log("[rmp] Themes update completed, elapsed time ".concat((new Date().getTime()-a)/1e3," sec")),i}finally{clearTimeout(n)}},Ps=1,uo=()=>{const{state:s}=B(g=>g.account),{t:i}=H(),[a,t]=f.useState(!1),[r,n]=f.useState(Ps);f.useEffect(()=>{let g;return a&&r>0?g=window.setTimeout(()=>{n(r-1)},1e3):r===0&&t(!1),()=>clearTimeout(g)},[a,r]);const o=()=>{t(!0),n(Ps),Kt()},c={"logged-out":i("header.settings.subscription.logged-out"),free:i("header.settings.subscription.free"),subscriber:i("header.settings.subscription.subscriber"),expired:i("header.settings.subscription.expired")};return e.jsxs(T,{width:"100%",mb:"3",children:[e.jsx(b,{as:"b",fontSize:"xl",children:i("header.settings.subscription.title")}),e.jsx(T,{mt:"3",children:e.jsxs(T,{display:"flex",mb:"1",children:[e.jsx(b,{flex:"1",children:c[s]}),e.jsx(se,{"aria-label":"refresh",variant:"ghost",size:"sm",icon:e.jsx(Vt,{}),isDisabled:a,onClick:()=>o()})]})})]})},fe={width:"100%",justifyContent:"space-between"},ae={fontFamily:"-apple-system"},go=s=>{const{isOpen:i,onClose:a}=s,{activeSubscriptions:t}=B(L=>L.account),{telemetry:{project:r},preference:{autoParallel:n}}=B(L=>L.app),{keepLastPath:o,parallelLinesCount:c}=B(L=>L.runtime),g=D(),{t:h}=H(),w=Us("primary.500","primary.300"),[x,l]=f.useState(!1),[u,d]=f.useState(!1),[p,m]=f.useState(!1),[j,S]=f.useState(!1),[y,M]=f.useState(!1),[W,P]=f.useState(!1),[de,ie]=f.useState(!1),ee=k.isAllowAnalytics(),ne=L=>{g(sn(L))},he=t.RMP_CLOUD?Yt:Ft,We=c>=he;return e.jsxs(F,{isOpen:i,onClose:a,size:"xl",scrollBehavior:"inside",trapFocus:!1,children:[e.jsx(J,{}),e.jsxs(q,{children:[e.jsx(X,{children:h("header.settings.title")}),e.jsx(Q,{}),e.jsx($,{children:e.jsxs(ke,{divider:e.jsx(ut,{borderColor:"gray.200"}),children:[e.jsx(uo,{}),e.jsxs(T,{width:"100%",mb:"3",children:[e.jsx(b,{as:"b",fontSize:"xl",children:h("header.settings.preference.title")}),e.jsxs(T,{mt:"3",children:[e.jsxs(T,{display:"flex",mb:"1",children:[e.jsx(b,{flex:"1",children:h("header.settings.preference.keepLastPath")}),e.jsx(Be,{isChecked:o,onChange:({target:{checked:L}})=>g(Jt(L))})]}),e.jsxs(T,{display:"flex",mb:"1",children:[e.jsx(b,{children:h("header.settings.preference.autoParallel")}),e.jsx(we,{ml:"1",colorScheme:"green",children:"New"}),e.jsx(Ee,{label:h("header.settings.proWithTrial"),children:e.jsx(we,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})}),e.jsx(Be,{isDisabled:We,isChecked:n,onChange:({target:{checked:L}})=>g(qt(L))})]})]})]}),e.jsxs(T,{width:"100%",mb:"3",children:[e.jsx(b,{as:"b",fontSize:"xl",children:h("header.settings.procedures.title")}),e.jsxs(T,{mt:"3",children:[e.jsx(E,{sx:fe,rightIcon:e.jsx(me,{}),onClick:()=>l(!0),children:h("header.settings.procedures.translate.title")}),e.jsx(io,{isOpen:x,onClose:()=>l(!1)}),e.jsx(E,{sx:fe,rightIcon:e.jsx(me,{}),onClick:()=>d(!0),children:h("header.settings.procedures.scale.title")}),e.jsx(ro,{isOpen:u,onClose:()=>d(!1)}),e.jsxs(E,{sx:fe,rightIcon:e.jsx(me,{}),onClick:()=>m(!0),children:[h("header.settings.procedures.changeType.title"),e.jsx(Ee,{label:h("header.settings.pro"),children:e.jsx(we,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})})]}),e.jsx(bn,{isOpen:p,onClose:()=>m(!1),isSelect:!1}),e.jsx(E,{sx:fe,rightIcon:e.jsx(me,{}),onClick:()=>S(!0),children:h("header.settings.procedures.removeLines.title")}),e.jsx(oo,{isOpen:j,onClose:()=>S(!1)}),e.jsx(E,{sx:fe,rightIcon:e.jsx(me,{}),onClick:()=>M(!0),children:h("header.settings.procedures.updateColor.title")}),e.jsx(lo,{isOpen:y,onClose:()=>M(!1)}),e.jsxs(E,{sx:fe,rightIcon:e.jsx(me,{}),onClick:()=>P(!0),children:[h("header.settings.procedures.unlockSimplePath.title"),e.jsx(Ee,{label:h("header.settings.pro"),children:e.jsx(we,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})})]}),e.jsx(ao,{isOpen:W,onClose:()=>P(!1)}),e.jsx(E,{sx:fe,rightIcon:e.jsx(me,{}),onClick:()=>ie(!0),children:h("header.settings.procedures.masterManager.title")}),e.jsx(jn,{isOpen:de,onClose:()=>ie(!1)})]})]}),e.jsxs(T,{width:"100%",mb:"3",children:[e.jsx(b,{as:"b",fontSize:"xl",children:h("header.settings.shortcuts.title")}),e.jsx(T,{mt:"3",children:e.jsxs(gt,{children:[e.jsx(xt,{children:e.jsxs(G,{children:[e.jsx(Os,{children:h("header.settings.shortcuts.keys")}),e.jsx(Os,{children:h("header.settings.shortcuts.description")})]})}),e.jsxs(mt,{children:[e.jsxs(G,{children:[e.jsx(O,{children:e.jsx(C,{children:"f"})}),e.jsx(O,{children:h("header.settings.shortcuts.f")})]}),e.jsxs(G,{children:[e.jsx(O,{children:e.jsx(C,{children:"s"})}),e.jsx(O,{children:h("header.settings.shortcuts.s")})]}),e.jsxs(G,{children:[e.jsx(O,{children:e.jsxs(T,{display:"flex",flexDirection:"row",children:[e.jsx(Xt,{}),e.jsx(Qt,{}),e.jsx($t,{}),e.jsx(en,{})]})}),e.jsx(O,{children:h("header.settings.shortcuts.arrows")})]}),e.jsxs(G,{children:[e.jsx(O,{children:e.jsxs(T,{display:"flex",flexDirection:"row",children:[e.jsx(C,{children:"i"}),e.jsx(C,{children:"j"}),e.jsx(C,{children:"k"}),e.jsx(C,{children:"l"})]})}),e.jsx(O,{children:h("header.settings.shortcuts.ijkl")})]}),e.jsxs(G,{children:[e.jsx(O,{children:pe?e.jsx(C,{sx:ae,children:"⇧"}):e.jsx(C,{children:"shift"})}),e.jsx(O,{children:h("header.settings.shortcuts.shift")})]}),e.jsxs(G,{children:[e.jsx(O,{children:pe?e.jsx(C,{sx:ae,children:"⌥"}):e.jsx(C,{children:"alt"})}),e.jsx(O,{children:h("header.settings.shortcuts.alt")})]}),e.jsxs(G,{children:[e.jsx(O,{children:pe?e.jsx(C,{sx:ae,children:"⌫"}):e.jsx(C,{children:"delete"})}),e.jsx(O,{children:h("header.settings.shortcuts.delete")})]}),e.jsxs(G,{children:[e.jsxs(O,{children:[pe?e.jsx(C,{sx:ae,children:"⌘"}):e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"x"})]}),e.jsx(O,{children:h("header.settings.shortcuts.cut")})]}),e.jsxs(G,{children:[e.jsxs(O,{children:[pe?e.jsx(C,{sx:ae,children:"⌘"}):e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"c"})]}),e.jsx(O,{children:h("header.settings.shortcuts.copy")})]}),e.jsxs(G,{children:[e.jsxs(O,{children:[pe?e.jsx(C,{sx:ae,children:"⌘"}):e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"v"})]}),e.jsx(O,{children:h("header.settings.shortcuts.paste")})]}),e.jsxs(G,{children:[e.jsxs(O,{children:[pe?e.jsx(C,{sx:ae,children:"⌘"}):e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"z"})]}),e.jsx(O,{children:h("header.settings.shortcuts.undo")})]}),e.jsxs(G,{children:[e.jsx(O,{children:pe?e.jsxs(e.Fragment,{children:[e.jsx(C,{sx:ae,children:"⇧"})," + ",e.jsx(C,{sx:ae,children:"⌘"})," + ",e.jsx(C,{children:"z"})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"y"})]})}),e.jsx(O,{children:h("header.settings.shortcuts.redo")})]})]})]})})]}),e.jsxs(T,{width:"100%",mb:"3",children:[e.jsx(b,{as:"b",fontSize:"xl",children:h("header.settings.telemetry.title")}),e.jsxs(T,{mt:"3",children:[e.jsx(b,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:h("header.settings.telemetry.info")}),e.jsxs(T,{mt:"3",mb:"1",children:[e.jsxs(T,{display:"flex",mb:"1",children:[e.jsx(b,{flex:"1",children:h("header.settings.telemetry.essential")}),e.jsx(Ee,{label:h("header.settings.telemetry.essentialTooltip"),children:e.jsx(Be,{isChecked:ee,isDisabled:!0})})]}),e.jsx(b,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:h("header.settings.telemetry.essentialInfo")}),e.jsxs(A,{color:w,fontSize:"sm",lineHeight:"100%",href:"https://support.google.com/analytics/answer/11593727",isExternal:!0,children:[h("header.settings.telemetry.essentialLink")," ",e.jsx(N,{as:R})]})]}),e.jsxs(T,{mt:"1",mb:"1",children:[e.jsxs(T,{display:"flex",children:[e.jsx(b,{flex:"1",children:h("header.settings.telemetry.additional")}),e.jsx(Be,{isChecked:r,onChange:({target:{checked:L}})=>ne(L)})]}),e.jsx(b,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:h("header.settings.telemetry.additionalInfo")})]})]})]})]})})]})]})},xo=()=>{const[s,i]=f.useState(!1),{svgViewBoxZoom:a}=B(n=>n.param),t=D(),r=[{type:"slider",label:"",value:400-a,min:10,max:390,step:1,onChange:n=>t(Me(400-n)),leftIcon:e.jsx(tn,{}),rightIcon:e.jsx(Ns,{}),minW:160}];return e.jsxs(Ks,{isOpen:s,onOpen:()=>i(!0),onClose:()=>i(!1),children:[e.jsx(Ys,{children:e.jsx(se,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:e.jsx(Ns,{}),onClick:()=>i(!s)})}),e.jsx(Fs,{children:e.jsx(Js,{children:e.jsx(Oe,{fields:r,noLabel:!0})})})]})};function mo(){const{t:s}=H(),i=D(),{past:a,future:t}=B(p=>p.param),{isDonationModalOpen:r}=B(p=>p.runtime),n=k.isAllowAnalytics(),[o,c]=f.useState(!1),[g,h]=f.useState(!1),w=Hs(k.getEnv),x=Hs(k.getAppVersion);f.useEffect(()=>{n&&w!==Qe.DEV&&k.event(Se.APP_LOAD,{isStandaloneWindow:k.isStandaloneWindow()})},[w]);const l=p=>{k.getI18nInstance().changeLanguage(p)},u=()=>{i(hn()),i(te()),i(Y())},d=()=>{i(pn()),i(te()),i(Y())};return e.jsxs(nn,{children:[e.jsx(be,{as:"h4",size:"md",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:s("header.about.rmp")}),e.jsx(on,{environment:w,version:x,popoverHeader:w===Qe.PRD?void 0:e.jsxs(_s,{i18nKey:"header.popoverHeader",environment:w,children:["You're on ",{environment:w}," environment!"]}),popoverBody:w===Qe.PRD?void 0:e.jsx(_s,{i18nKey:"header.popoverBody",children:"This is a testing environment where we test the latest beta RMP."})}),e.jsxs(ft,{ml:"auto",children:[e.jsx(oe,{children:e.jsx(no,{})}),e.jsx(oe,{children:e.jsx(se,{size:"sm",variant:"ghost","aria-label":"Undo",icon:e.jsx(rn,{}),isDisabled:a.length===0,onClick:u})}),e.jsx(oe,{children:e.jsx(se,{size:"sm",variant:"ghost","aria-label":"Redo",icon:e.jsx(an,{}),isDisabled:t.length===0,onClick:d})}),e.jsx(oe,{children:e.jsx(xo,{})}),e.jsx(oe,{children:e.jsx(so,{})}),e.jsx(oe,{children:e.jsx(Kn,{})}),k.isStandaloneWindow()&&e.jsx(oe,{children:e.jsxs(gs,{children:[e.jsx(xs,{as:se,icon:e.jsx(ln,{}),variant:"ghost",size:"sm"}),e.jsx(ms,{children:["en","zh-Hans","zh-Hant","ja","ko"].map(p=>e.jsx(le,{onClick:()=>l(p),children:wn[p][p]},p))})]})}),e.jsx(oe,{children:e.jsx(se,{size:"sm",variant:"ghost","aria-label":"Donation",color:"red",icon:e.jsx(et,{}),onClick:()=>i(Is(!0))})}),e.jsx(oe,{children:e.jsx(se,{size:"sm",variant:"ghost","aria-label":"Settings",icon:e.jsx(cn,{}),onClick:()=>c(!0)})}),e.jsx(oe,{children:e.jsx(se,{size:"sm",variant:"ghost","aria-label":"Help",icon:e.jsx(dn,{}),onClick:()=>h(!0)})})]}),e.jsx(Mn,{isOpen:r,onClose:()=>i(Is(!1))}),e.jsx(go,{isOpen:o,onClose:()=>c(!1)}),e.jsx(Cn,{isOpen:g,onClose:()=>h(!1)})]})}function fo(){const s=D(),i=B(t=>t.runtime.globalAlerts),a=t=>{k.isStandaloneWindow()?window.open("/".concat(t),"_blank"):k.openApp({appId:t})};return e.jsx(e.Fragment,{children:Object.entries(i).map(([t,{message:r,url:n,linkedApp:o}])=>e.jsxs(jt,{status:t,variant:"solid",size:"xs",pl:3,pr:1,py:0,zIndex:"1",children:[e.jsx(bt,{}),o?e.jsx(A,{onClick:()=>a(o),children:r}):n?e.jsx(A,{href:n,target:"_blank",children:r}):r,e.jsx(Vs,{ml:"auto",onClick:()=>s(un(t))})]},t))})}function zo(){return e.jsxs(e.Fragment,{children:[e.jsx(mo,{}),e.jsx(fo,{})]})}export{zo as default};
