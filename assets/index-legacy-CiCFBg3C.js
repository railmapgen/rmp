!function(){const e=["onBlur","onChange","onFocus","onKeyDown","variant"],n=["_fixed","_focus","children","disabled","label","value","fixed","getValue","onClick","onMouseOver","sx"],i=["children","dangerouslySetInnerHTML"],o=["children","showDivider"],r=["loadingIcon"],a=["children","isInvalid","hidePlaceholder"],s=["ref"],l=["children","loadingState"],d=["label","onRemove","disabled"],c=["present","past","future"],u=["version","graph"];function h(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./chakra-legacy-Bx6z5Smb.js","./react-legacy-a_ZMAAS4.js"],(function(p,f){"use strict";var y,b,v,w,x,N,S,k,R,T,_,C,L,O,A,j,M,E,P,z,I,$,B,D,G,F,H,U,V,W,q,J,K,Q,Z,Y,X,ee,te,ne,ie,oe,re,ae,se,le,de,ce,ue,he,pe,ge,me,fe,ye,be,ve,we,xe,Ne,Se,ke,Re,Te,_e,Ce,Le,Oe,Ae,je,Me,Ee,Pe,ze,Ie,$e,Be,De,Ge,Fe,He,Ue,Ve,We,qe,Je;return{setters:[e=>{y=e.u,b=e.a,v=e.j,w=e.P,x=e.c,N=e.F,S=e.f,k=e.W,R=e.T,T=e.b,_=e.d,C=e.e,L=e.g,O=e.h,A=e.B,j=e.D,M=e.i,E=e.k,P=e.l,z=e.m,I=e.C,$=e.S,B=e.n,D=e.o,G=e.p,F=e.I,H=e.q,U=e.r,V=e.s,W=e.t,q=e.v,J=e.w,K=e.x,Q=e.y,Z=e.z,Y=e.A,X=e.E,ee=e.G,te=e.M,ne=e.H,ie=e.J,oe=e.K,re=e.L,ae=e.N,se=e.O,le=e.Q,de=e.R,ce=e.U,ue=e.V,he=e.X,pe=e.Y,ge=e.Z,me=e._,fe=e.$,ye=e.a0,be=e.a1,ve=e.a2,we=e.a3,xe=e.a4,Ne=e.a5,Se=e.a6,ke=e.a7,Re=e.a8,Te=e.a9,_e=e.aa,Ce=e.ab,Le=e.ac,Oe=e.ad,Ae=e.ae,je=e.af},e=>{Me=e.e,Ee=e.a,Pe=e.b,ze=e.f,Ie=e.u,$e=e.i,Be=e.h,De=e.o,Ge=e.j,Fe=e.k,He=e.l,Ue=e.m,Ve=e.n,We=e.p,qe=e.P,Je=e.I}],execute:function(){var Ke,Qe,Ze=document.createElement("style");Ze.textContent=":root{background-color:#fff}@media (prefers-color-scheme: dark){:root{background-color:#1a202c;color:#fff}}html{height:100%}body{margin:0;overflow:hidden;height:100%;width:100%;width:-webkit-fill-available;padding:env(safe-area-inset-top,20px) env(safe-area-inset-right,20px) env(safe-area-inset-bottom,20px) env(safe-area-inset-left,20px)}div#root{height:100%;width:100%}*{box-sizing:border-box}.tools::-webkit-scrollbar{display:none}.tools{-ms-overflow-style:none;scrollbar-width:none}.rmp-name-outline{paint-order:stroke;stroke:#fff;stroke-linejoin:round}\n/*$vite$:1*/",document.head.appendChild(Ze),p({H:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(e)},I:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z"},child:[]}]})(e)},J:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"},child:[]}]})(e)},K:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3 1 9l11 6 9-4.91V17h2V9L12 3z"},child:[]}]})(e)},T:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(e)},V:function(e){var t=e.data,n=e.displayHandler,i=e.filter,o=e.value,r=e.onChange,a=e.InputProps,s=e.InputPropsByState,l=e.ListProps,d=e.ItemProps,c=vr(e,["data","displayHandler","filter","value","onChange","InputProps","InputPropsByState","ListProps","ItemProps"]);return v.jsx(ir,br({value:o,filter:function(e,n){if(!i)return!0;var o=t.find((function(e){return e.id===n}));return!!o&&i(e,o)},onChange:function(e,t){var n;Array.isArray(t)?null==r||r(null===(n=t[0])||void 0===n?void 0:n.originalValue):null==r||r(t.originalValue)},suggestWhenEmpty:!0,openOnFocus:!0},c,{children:function(e){var i,r=e.isOpen;return v.jsxs(v.Fragment,{children:[v.jsx(wr,br({variant:"flushed",size:"sm",h:6,autoComplete:"off",value:o},null!==(i=null==s?void 0:s(r))&&void 0!==i?i:a)),v.jsx(mr,br({role:"menu",py:1},l,{children:t.map((function(e){return v.jsx(or,br({value:e,label:e.value,role:"menuitem",fontSize:"sm",p:1,mx:1},d,{children:n?n(e):e.value}),e.id)}))}))]})}}))},Z:td,a:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)},a0:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(e)},a9:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h9v2h-9zM13 15h9v2h-9zM16 11h6v2h-6zM13 12 8 7v4H2v2h6v4z"},child:[]}]})(e)},aM:function(e){var t=e.selections,n=e.defaultValue,i=e.onChange,o=e.multiSelect,r=xr(Ee.useState(n),2),a=r[0],s=r[1];Ee.useEffect((function(){n.toString()&&s(n)}),[n.toString()]);return v.jsx(V,{size:"xs",isAttached:!0,colorScheme:"primary",variant:"outline",children:t.map((function(e,n){var r="object"==typeof a&&a.includes(e.value)||a===e.value,l=n===t.length-1||r?void 0:"-px";return v.jsx(W,{role:"checkbox","aria-checked":r,variant:r?"solid":"outline",mr:l,flex:1,isDisabled:e.disabled,onClick:function(){return function(e){if(o){var t=a,n=t.includes(e)?t.filter((function(t){return t!==e})):Nr(Nr([],xr(t),!1),[e],!1);s(n),null==i||i(n)}else s(e),null==i||i(e)}(e.value)},children:e.label},e.value.toString())}))})},aN:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 13h2v-2H3v2zm4 8h2v-2H7v2zm6-18h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zm8 4h2v-2h-2v2zm8-8h2v-2h-2v2zm0-4h2V7h-2v2zm-4-4h2V3h-2v2zM7.83 5 7 4.17V3h2v2H7.83zm12 12-.83-.83V15h2v2h-1.17zm1.36 4.19L2.81 2.81 1.39 4.22 4.17 7H3v2h2V7.83l2 2V17h7.17l2 2H15v2h2v-1.17l2.78 2.78 1.41-1.42zM9 15v-3.17L12.17 15H9zm6-2.83V9h-3.17l-2-2H17v7.17l-2-2z"},child:[]}]})(e)},aO:Xr,aU:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)},aV:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)},aW:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)},aY:function(){const{i18n:e}=Ie();return t=>{var n,i;return null!==(n=null!==(i=e.languages.map((e=>t[e])).find((e=>void 0!==e)))&&void 0!==i?i:t.en)&&void 0!==n?n:"(Translation Error)"}},aa:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"},child:[]}]})(e)},ab:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(e)},ac:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},child:[]}]})(e)},ad:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"},child:[]}]})(e)},ah:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]},{tag:"path",attr:{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"},child:[]}]})(e)},ai:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"},child:[]}]})(e)},al:function(e){var t=e.environment,n=e.version,i=e.popoverHeader,o=e.popoverBody,r=jr(Ee.useState(!1),2),a=r[0],s=r[1];return v.jsxs(C,{isOpen:a,onOpen:function(){return i&&s(!0)},onClose:function(){return s(!1)},children:[v.jsx(J,{children:v.jsx(K,{ml:1,colorScheme:Mr(t),title:"".concat(t,": ").concat(n),cursor:i?"pointer":"help",children:t===Ht.PRD?n:t})}),v.jsxs(z,{children:[v.jsx(Q,{}),v.jsx(Z,{}),v.jsx(Y,{children:i}),v.jsx(X,{children:o})]})]})},am:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(e)},an:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"},child:[]}]})(e)},ao:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7 1.62-4.33L19.12 17h-3.24z"},child:[]}]})(e)},aq:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)},ar:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},child:[]}]})(e)},b:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(e)},b4:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)},b6:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(e)},b7:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)},b8:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13H5v-2h14v2z"},child:[]}]})(e)},ba:ra,g:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(e)},h:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 12.4V7l-4-4H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7.4l8.6-8.6zM15 15c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zM6 6h9v4H6V6zm13.99 10.25 1.77 1.77L16.77 23H15v-1.77l4.99-4.98zm3.26.26-.85.85-1.77-1.77.85-.85c.2-.2.51-.2.71 0l1.06 1.06c.2.2.2.52 0 .71z"},child:[]}]})(e)},i:function(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(e)},k:sa});const Ye=e=>new Promise((t=>{setTimeout(t,e,`Timeout after ${e/1e3} seconds`)})),Xe=e=>{let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t},et=e=>{const t=(16777215&e).toString(16).toUpperCase();return"#"+"00000".substring(0,6-t.length)+t},tt=e=>"string"==typeof e,nt=()=>{let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));return n.resolve=e,n.reject=t,n},it=e=>null==e?"":""+e,ot=/###/g,rt=e=>e&&e.indexOf("###")>-1?e.replace(ot,"."):e,at=e=>!e||tt(e),st=(e,t,n)=>{const i=tt(t)?t.split("."):t;let o=0;for(;o<i.length-1;){if(at(e))return{};const t=rt(i[o]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++o}return at(e)?{}:{obj:e,k:rt(i[o])}},lt=(e,t,n)=>{const{obj:i,k:o}=st(e,t,Object);if(void 0!==i||1===t.length)return void(i[o]=n);let r=t[t.length-1],a=t.slice(0,t.length-1),s=st(e,a,Object);for(;void 0===s.obj&&a.length;){var l;r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),s=st(e,a,Object),null!==(l=s)&&void 0!==l&&l.obj&&void 0!==s.obj[`${s.k}.${r}`]&&(s.obj=void 0)}s.obj[`${s.k}.${r}`]=n},dt=(e,t)=>{const{obj:n,k:i}=st(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,i))return n[i]},ct=(e,t,n)=>{for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?tt(e[i])||e[i]instanceof String||tt(t[i])||t[i]instanceof String?n&&(e[i]=t[i]):ct(e[i],t[i],n):e[i]=t[i]);return e},ut=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const pt=e=>tt(e)?e.replace(/[&<>"'\/]/g,(e=>ht[e])):e;const gt=[" ",",","?","!",";"],mt=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),ft=(e,t,n=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const i=t.split(n);let o=e;for(let r=0;r<i.length;){if(!o||"object"!=typeof o)return;let e,t="";for(let a=r;a<i.length;++a)if(a!==r&&(t+=n),t+=i[a],e=o[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&a<i.length-1)continue;r+=a-r+1;break}o=e}return o},yt=e=>null==e?void 0:e.replace("_","-"),bt={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,i;null===(n=console)||void 0===n||null===(n=n[e])||void 0===n||null===(i=n.apply)||void 0===i||i.call(n,console,t)}};class vt{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||bt,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(tt(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new vt(this.logger,g(g({},{prefix:`${this.prefix}:${e}:`}),this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new vt(this.logger,e)}}var wt=new vt;class xt{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((([e,n])=>{for(let i=0;i<n;i++)e(...t)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((([n,i])=>{for(let o=0;o<i;o++)n.apply(n,[e,...t])}))}}}class Nt extends xt{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,i={}){var o;const r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,a=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,t],n&&(Array.isArray(n)?s.push(...n):tt(n)&&r?s.push(...n.split(r)):s.push(n)));const l=dt(this.data,s);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=s[0],t=s[1],n=s.slice(2).join(".")),!l&&a&&tt(n)?ft(null===(o=this.data)||void 0===o||null===(o=o[e])||void 0===o?void 0:o[t],n,r):l}addResource(e,t,n,i,o={silent:!1}){const r=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(a=e.split("."),i=t,t=a[1]),this.addNamespaces(t),lt(this.data,a,i),o.silent||this.emit("added",e,t,n,i)}addResources(e,t,n,i={silent:!1}){for(const o in n)(tt(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,i,o,r={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),i=n,n=t,t=a[1]),this.addNamespaces(t);let s=dt(this.data,a)||{};r.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?ct(s,n,o):s=g(g({},s),n),lt(this.data,a,s),r.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var St={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,i,o){return e.forEach((e=>{var r,a;t=null!==(r=null===(a=this.processors[e])||void 0===a?void 0:a.process(t,n,i,o))&&void 0!==r?r:t})),t}};const kt={},Rt=e=>!tt(e)&&"boolean"!=typeof e&&"number"!=typeof e;class Tt extends xt{constructor(e,t={}){super(),((e,t,n)=>{e.forEach((e=>{t[e]&&(n[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=wt.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n=g({},t);if(null==e)return!1;const i=this.resolve(e,n);return void 0!==(null==i?void 0:i.res)}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const r=n&&e.indexOf(n)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const i=gt.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===i.length)return!0;const o=mt.getRegExp(`(${i.map((e=>"?"===e?"\\?":e)).join("|")})`);let r=!o.test(e);if(!r){const t=e.indexOf(n);t>0&&!o.test(e.substring(0,t))&&(r=!0)}return r})(e,n,i));if(r&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:tt(o)?[o]:o};const r=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(r[0])>-1)&&(o=r.shift()),e=r.join(i)}return{key:e,namespaces:tt(o)?[o]:o}}translate(e,t,n){let i="object"==typeof t?g({},t):t;if("object"!=typeof i&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof options&&(i=g({},i)),i||(i={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const o=void 0!==i.returnDetails?i.returnDetails:this.options.returnDetails,r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,{key:a,namespaces:s}=this.extractFromKey(e[e.length-1],i),l=s[s.length-1];let d=void 0!==i.nsSeparator?i.nsSeparator:this.options.nsSeparator;void 0===d&&(d=":");const c=i.lng||this.language,u=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==c?void 0:c.toLowerCase()))return u?o?{res:`${l}${d}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:`${l}${d}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:a;const h=this.resolve(e,i);let p=null==h?void 0:h.res;const m=(null==h?void 0:h.usedKey)||a,f=(null==h?void 0:h.exactUsedKey)||a,y=void 0!==i.joinArrays?i.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,v=void 0!==i.count&&!tt(i.count),w=Tt.hasDefaultValue(i),x=v?this.pluralResolver.getSuffix(c,i.count,i):"",N=i.ordinal&&v?this.pluralResolver.getSuffix(c,i.count,{ordinal:!1}):"",S=v&&!i.ordinal&&0===i.count,k=S&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${x}`]||i[`defaultValue${N}`]||i.defaultValue;let R=p;b&&!p&&w&&(R=k);const T=Rt(R),_=Object.prototype.toString.apply(R);if(!(b&&R&&T&&["[object Number]","[object Function]","[object RegExp]"].indexOf(_)<0)||tt(y)&&Array.isArray(R))if(b&&tt(y)&&Array.isArray(p))p=p.join(y),p&&(p=this.extendTranslation(p,e,i,n));else{let t=!1,o=!1;!this.isValidLookup(p)&&w&&(t=!0,p=k),this.isValidLookup(p)||(o=!0,p=a);const s=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&o?void 0:p,u=w&&k!==p&&this.options.updateMissing;if(o||t||u){if(this.logger.log(u?"updateKey":"missingKey",c,l,a,u?k:p),r){const e=this.resolve(a,g(g({},i),{},{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let i=0;i<t.length;i++)e.push(t[i]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(i.lng||this.language):e.push(i.lng||this.language);const n=(e,t,n)=>{var o;const r=w&&n!==p?n:s;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,r,u,i):null!==(o=this.backendConnector)&&void 0!==o&&o.saveMissing&&this.backendConnector.saveMissing(e,l,t,r,u,i),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?e.forEach((e=>{const t=this.pluralResolver.getSuffixes(e,i);S&&i[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach((t=>{n([e],a+t,i[`defaultValue${t}`]||k)}))})):n(e,a,k))}p=this.extendTranslation(p,e,i,h,n),o&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${l}${d}${a}`),(o||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${d}${a}`:a,t?p:void 0,i))}else{if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,R,g(g({},i),{},{ns:s})):`key '${a} (${this.language})' returned an object instead of string.`;return o?(h.res=e,h.usedParams=this.getUsedParamsDetails(i),h):e}if(r){const e=Array.isArray(R),t=e?[]:{},n=e?f:m;for(const o in R)if(Object.prototype.hasOwnProperty.call(R,o)){const e=`${n}${r}${o}`;t[o]=w&&!p?this.translate(e,g(g({},i),{},{defaultValue:Rt(k)?k[o]:void 0},{joinArrays:!1,ns:s})):this.translate(e,g(g({},i),{joinArrays:!1,ns:s})),t[o]===e&&(t[o]=R[o])}p=t}}return o?(h.res=p,h.usedParams=this.getUsedParamsDetails(i),h):p}extendTranslation(e,t,n,i,o){var r;if(null!==(r=this.i18nFormat)&&void 0!==r&&r.parse)e=this.i18nFormat.parse(e,g(g({},this.options.interpolation.defaultVariables),n),n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){var a;n.interpolation&&this.interpolator.init(g(g({},n),{interpolation:g(g({},this.options.interpolation),n.interpolation)}));const r=tt(e)&&(void 0!==(null==n||null===(a=n.interpolation)||void 0===a?void 0:a.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let s;if(r){const t=e.match(this.interpolator.nestingRegexp);s=t&&t.length}let l=n.replace&&!tt(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=g(g({},this.options.interpolation.defaultVariables),l)),e=this.interpolator.interpolate(e,l,n.lng||this.language||i.usedLng,n),r){const t=e.match(this.interpolator.nestingRegexp);s<(t&&t.length)&&(n.nest=!1)}!n.lng&&i&&i.res&&(n.lng=this.language||i.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,((...e)=>(null==o?void 0:o[0])!==e[0]||n.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null)),n)),n.interpolation&&this.interpolator.reset()}const s=n.postProcess||this.options.postProcess,l=tt(s)?[s]:s;return null!=e&&null!=l&&l.length&&!1!==n.applyPostProcessor&&(e=St.handle(l,e,t,this.options&&this.options.postProcessPassResolved?g({i18nResolved:g(g({},i),{},{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e,t={}){let n,i,o,r,a;return tt(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(n))return;const s=this.extractFromKey(e,t),l=s.key;i=l;let d=s.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const c=void 0!==t.count&&!tt(t.count),u=c&&!t.ordinal&&0===t.count,h=void 0!==t.context&&(tt(t.context)||"number"==typeof t.context)&&""!==t.context,p=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);d.forEach((e=>{var s,d;this.isValidLookup(n)||(a=e,kt[`${p[0]}-${e}`]||null===(s=this.utils)||void 0===s||!s.hasLoadedNamespace||null!==(d=this.utils)&&void 0!==d&&d.hasLoadedNamespace(a)||(kt[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${i}" for languages "${p.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((i=>{var a;if(this.isValidLookup(n))return;r=i;const s=[l];if(null!==(a=this.i18nFormat)&&void 0!==a&&a.addLookupKeys)this.i18nFormat.addLookupKeys(s,l,i,e,t);else{let e;c&&(e=this.pluralResolver.getSuffix(i,t.count,t));const n=`${this.options.pluralSeparator}zero`,o=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(c&&(s.push(l+e),t.ordinal&&0===e.indexOf(o)&&s.push(l+e.replace(o,this.options.pluralSeparator)),u&&s.push(l+n)),h){const i=`${l}${this.options.contextSeparator}${t.context}`;s.push(i),c&&(s.push(i+e),t.ordinal&&0===e.indexOf(o)&&s.push(i+e.replace(o,this.options.pluralSeparator)),u&&s.push(i+n))}}let d;for(;d=s.pop();)this.isValidLookup(n)||(o=d,n=this.getResource(i,e,d,t))})))}))})),{res:n,usedKey:i,exactUsedKey:o,usedLng:r,usedNS:a}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n,i={}){var o;return null!==(o=this.i18nFormat)&&void 0!==o&&o.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!tt(e.replace);let i=n?e.replace:e;if(n&&void 0!==e.count&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i=g(g({},this.options.interpolation.defaultVariables),i)),!n){i=g({},i);for(const e of t)delete i[e]}return i}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class _t{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=wt.create("languageUtils")}getScriptPartFromCode(e){if(!(e=yt(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=yt(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(tt(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch(t){}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const i=this.getLanguagePartFromCode(e);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find((e=>e===i?e:e.indexOf("-")<0&&i.indexOf("-")<0?void 0:e.indexOf("-")>0&&i.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===i||0===e.indexOf(i)&&i.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),tt(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return tt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):tt(e)&&o(this.formatLanguageCode(e)),n.forEach((e=>{i.indexOf(e)<0&&o(this.formatLanguageCode(e))})),i}}const Ct={zero:0,one:1,two:2,few:3,many:4,other:5},Lt={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Ot{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=wt.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=yt("dev"===e?"en":e),i=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let r;try{r=new Intl.PluralRules(n,{type:i})}catch(a){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Lt;if(!e.match(/-|_/))return Lt;const n=this.languageUtils.getLanguagePartFromCode(e);r=this.getRule(n,t)}return this.pluralRulesCache[o]=r,r}needsPlural(e,t={}){var n;let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),(null===(n=i)||void 0===n?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort(((e,t)=>Ct[e]-Ct[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):[]}getSuffix(e,t,n={}){const i=this.getRule(e,n);return i?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const At=(e,t,n,i=".",o=!0)=>{let r=((e,t,n)=>{const i=dt(e,n);return void 0!==i?i:dt(t,n)})(e,t,n);return!r&&o&&tt(n)&&(r=ft(e,n,i),void 0===r&&(r=ft(t,n,i))),r},jt=e=>e.replace(/\$/g,"$$$$");class Mt{constructor(e={}){var t;this.logger=wt.create("interpolator"),this.options=e,this.format=(null==e||null===(t=e.interpolation)||void 0===t?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:i,prefix:o,prefixEscaped:r,suffix:a,suffixEscaped:s,formatSeparator:l,unescapeSuffix:d,unescapePrefix:c,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:f,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:pt,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==i&&i,this.prefix=o?ut(o):r||"{{",this.suffix=a?ut(a):s||"}}",this.formatSeparator=l||",",this.unescapePrefix=d?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=u?ut(u):h||ut("$t("),this.nestingSuffix=p?ut(p):g||ut(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,i){var o;let r,a,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=e=>{if(e.indexOf(this.formatSeparator)<0){const o=At(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(o,void 0,n,g(g(g({},i),t),{},{interpolationkey:e})):o}const o=e.split(this.formatSeparator),r=o.shift().trim(),a=o.join(this.formatSeparator).trim();return this.format(At(t,l,r,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,g(g(g({},i),t),{},{interpolationkey:r}))};this.resetRegExp();const c=(null==i?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,u=void 0!==(null==i||null===(o=i.interpolation)||void 0===o?void 0:o.skipOnVariables)?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>jt(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?jt(this.escape(e)):jt(e)}].forEach((t=>{for(s=0;r=t.regex.exec(e);){const n=r[1].trim();if(a=d(n),void 0===a)if("function"==typeof c){const t=c(e,r,i);a=tt(t)?t:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))a="";else{if(u){a=r[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),a=""}else tt(a)||this.useRawValueToEscape||(a=it(a));const o=t.safeValue(a);if(e=e.replace(r[0],o),u?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=r[0].length):t.regex.lastIndex=0,s++,s>=this.maxReplaces)break}})),e}nest(e,t,n={}){let i,o,r;const a=(e,t)=>{var n;const i=this.nestingOptionsSeparator;if(e.indexOf(i)<0)return e;const o=e.split(new RegExp(`${i}[ ]*{`));let a=`{${o[1]}`;e=o[0],a=this.interpolate(a,r);const s=a.match(/'/g),l=a.match(/"/g);((null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0)%2==0&&!l||l.length%2!=0)&&(a=a.replace(/'/g,'"'));try{r=JSON.parse(a),t&&(r=g(g({},t),r))}catch(d){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,d),`${e}${i}${a}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,e};for(;i=this.nestingRegexp.exec(e);){let s=[];r=g({},n),r=r.replace&&!tt(r.replace)?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let l=!1;if(-1!==i[0].indexOf(this.formatSeparator)&&!/{.*}/.test(i[1])){const e=i[1].split(this.formatSeparator).map((e=>e.trim()));i[1]=e.shift(),s=e,l=!0}if(o=t(a.call(this,i[1].trim(),r),r),o&&i[0]===e&&!tt(o))return o;tt(o)||(o=it(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),l&&(o=s.reduce(((e,t)=>this.format(e,t,n.lng,g(g({},n),{},{interpolationkey:i[1].trim()}))),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const Et=e=>{const t={};return(n,i,o)=>{let r=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(r=g(g({},r),{},{[o.interpolationkey]:void 0}));const a=i+JSON.stringify(r);let s=t[a];return s||(s=e(yt(i),o),t[a]=s),s(n)}},Pt=e=>(t,n,i)=>e(yt(n),i)(t);class zt{constructor(e={}){this.logger=wt.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Et:Pt;this.formats={number:n(((e,t)=>{const n=new Intl.NumberFormat(e,g({},t));return e=>n.format(e)})),currency:n(((e,t)=>{const n=new Intl.NumberFormat(e,g(g({},t),{},{style:"currency"}));return e=>n.format(e)})),datetime:n(((e,t)=>{const n=new Intl.DateTimeFormat(e,g({},t));return e=>n.format(e)})),relativetime:n(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,g({},t));return e=>n.format(e,t.range||"day")})),list:n(((e,t)=>{const n=new Intl.ListFormat(e,g({},t));return e=>n.format(e)}))}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Et(t)}format(e,t,n,i={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find((e=>e.indexOf(")")>-1))){const e=o.findIndex((e=>e.indexOf(")")>-1));o[0]=[o[0],...o.splice(1,e)].join(this.formatSeparator)}return o.reduce(((e,t)=>{const{formatName:o,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const o=i[1].substring(0,i[1].length-1);"currency"===t&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):"relativetime"===t&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach((e=>{if(e){const[t,...i]=e.split(":"),o=i.join(":").trim().replace(/^'+|'+$/g,""),r=t.trim();n[r]||(n[r]=o),"false"===o&&(n[r]=!1),"true"===o&&(n[r]=!0),isNaN(o)||(n[r]=parseInt(o,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[o]){let t=e;try{var a;const s=(null==i||null===(a=i.formatParams)||void 0===a?void 0:a[i.interpolationkey])||{},l=s.locale||s.lng||i.locale||i.lng||n;t=this.formats[o](e,l,g(g(g({},r),i),s))}catch(s){this.logger.warn(s)}return t}return this.logger.warn(`there was no format function for ${o}`),e}),e)}}class It extends xt{constructor(e,t,n,i={}){var o,r;super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=wt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],null===(o=this.backend)||void 0===o||null===(r=o.init)||void 0===r||r.call(o,n,i.backend,i)}queueLoad(e,t,n,i){const o={},r={},a={},s={};return e.forEach((e=>{let i=!0;t.forEach((t=>{const a=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===r[a]&&(r[a]=!0):(this.state[a]=1,i=!1,void 0===r[a]&&(r[a]=!0),void 0===o[a]&&(o[a]=!0),void 0===s[t]&&(s[t]=!0)))})),i||(a[e]=!0)})),(Object.keys(o).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(r),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){const i=e.split("|"),o=i[0],r=i[1];t&&this.emit("failedLoading",o,r,t),!t&&n&&this.store.addResourceBundle(o,r,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const a={};this.queue.forEach((n=>{((e,t,n,i)=>{const{obj:o,k:r}=st(e,t,Object);o[r]=o[r]||[],o[r].push(n)})(n.loaded,[o],r),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{a[e]||(a[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===a[e][t]&&(a[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n,i=0,o=this.retryTimeout,r){if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:o,callback:r});this.readingCalls++;const a=(a,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&s&&i<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,i+1,2*o,r)}),o):r(a,s)},s=this.backend[n].bind(this.backend);if(2!==s.length)return s(e,t,a);try{const n=s(e,t);n&&"function"==typeof n.then?n.then((e=>a(null,e))).catch(a):a(null,n)}catch(l){a(l)}}prepareLoading(e,t,n={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();tt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),tt(t)&&(t=[t]);const o=this.queueLoad(e,t,n,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),i=n[0],o=n[1];this.read(i,o,"read",void 0,void 0,((n,r)=>{n&&this.logger.warn(`${t}loading namespace ${o} for language ${i} failed`,n),!n&&r&&this.logger.log(`${t}loaded namespace ${o} for language ${i}`,r),this.loaded(e,n,r)}))}saveMissing(e,t,n,i,o,r={},a=(()=>{})){var s,l,d;if(null===(s=this.services)||void 0===s||null===(s=s.utils)||void 0===s||!s.hasLoadedNamespace||null!==(l=this.services)&&void 0!==l&&null!==(l=l.utils)&&void 0!==l&&l.hasLoadedNamespace(t)){if(null!=n&&""!==n){if(null!==(d=this.backend)&&void 0!==d&&d.create){const s=g(g({},r),{},{isUpdate:o}),l=this.backend.create.bind(this.backend);if(l.length<6)try{let o;o=5===l.length?l(e,t,n,i,s):l(e,t,n,i),o&&"function"==typeof o.then?o.then((e=>a(null,e))).catch(a):a(null,o)}catch(c){a(c)}else l(e,t,n,i,a,s)}e&&e[0]&&this.store.addResource(e[0],t,n,i)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const $t=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),tt(e[1])&&(t.defaultValue=e[1]),tt(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Bt=e=>{var t,n;return tt(e.ns)&&(e.ns=[e.ns]),tt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),tt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null===(t=e.supportedLngs)||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},Dt=()=>{};class Gt extends xt{constructor(e={},t){var n;if(super(),this.options=Bt(e),this.services={},this.logger=wt,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(tt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=$t();this.options=g(g(g({},n),this.options),Bt(e)),this.options.interpolation=g(g({},n.interpolation),this.options.interpolation),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?wt.init(i(this.modules.logger),this.options):wt.init(null,this.options),e=this.modules.formatter?this.modules.formatter:zt;const t=new _t(this.options);this.store=new Nt(this.options.resources,this.options);const o=this.services;o.logger=wt,o.resourceStore=this.store,o.languageUtils=t,o.pluralResolver=new Ot(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!e||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(o.formatter=i(e),o.formatter.init(o,this.options),this.options.interpolation.format=o.formatter.format.bind(o.formatter)),o.interpolator=new Mt(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new It(i(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",((e,...t)=>{this.emit(e,...t)})),this.modules.languageDetector&&(o.languageDetector=i(this.modules.languageDetector),o.languageDetector.init&&o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=i(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new Tt(this.services,this.options),this.translator.on("*",((e,...t)=>{this.emit(e,...t)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,t||(t=Dt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((e=>{this[e]=(...t)=>this.store[e](...t)}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((e=>{this[e]=(...t)=>(this.store[e](...t),this)}));const o=nt(),r=()=>{const e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?r():setTimeout(r,0),o}loadResources(e,t=Dt){let n=t;const i=tt(e)?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){var o,r;if("cimode"===(null==i?void 0:i.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return n();const e=[],t=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(i)t(i);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>t(e)))}null===(o=this.options.preload)||void 0===o||null===(r=o.forEach)||void 0===r||r.call(o,(e=>t(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),n(e)}))}else n(null)}reloadResources(e,t,n){const i=nt();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=Dt),this.services.backendConnector.reload(e,t,(e=>{i.resolve(),n(e)})),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&St.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=nt();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},o=(o,r)=>{r?this.isLanguageChangingTo===e&&(i(r),this.translator.changeLanguage(r),this.isLanguageChangingTo=void 0,this.emit("languageChanged",r),this.logger.log("languageChanged",r)):this.isLanguageChangingTo=void 0,n.resolve(((...e)=>this.t(...e))),t&&t(o,((...e)=>this.t(...e)))},r=t=>{e||t||!this.services.languageDetector||(t=[]);const n=tt(t)?t:t&&t[0],r=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(tt(t)?[t]:t);var a,s;r&&(this.language||i(r),this.translator.language||this.translator.changeLanguage(r),null===(a=this.services.languageDetector)||void 0===a||null===(s=a.cacheUserLanguage)||void 0===s||s.call(a,r));this.loadResources(r,(e=>{o(e,r)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(r):this.services.languageDetector.detect(r):r(e):r(this.services.languageDetector.detect()),n}getFixedT(e,t,n){const i=(e,t,...o)=>{let r;r="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(o)):g({},t),r.lng=r.lng||i.lng,r.lngs=r.lngs||i.lngs,r.ns=r.ns||i.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||n||i.keyPrefix);const a=this.options.keySeparator||".";let s;return s=r.keyPrefix&&Array.isArray(e)?e.map((e=>`${r.keyPrefix}${a}${e}`)):r.keyPrefix?`${r.keyPrefix}${a}${e}`:e,this.t(s,r)};return tt(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(...e){var t;return null===(t=this.translator)||void 0===t?void 0:t.translate(...e)}exists(...e){var t;return null===(t=this.translator)||void 0===t?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const r=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,r);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!r(n,e)||i&&!r(o,e)))}loadNamespaces(e,t){const n=nt();return this.options.ns?(tt(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=nt();tt(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter((e=>i.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return o.length?(this.options.preload=i.concat(o),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null===(t=this.languages)||void 0===t?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";const i=(null===(n=this.services)||void 0===n?void 0:n.languageUtils)||new _t($t());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new Gt(e,t)}cloneInstance(e={},t=Dt){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i=g(g(g({},this.options),e),{isClone:!0}),o=new Gt(i);void 0===e.debug&&void 0===e.prefix||(o.logger=o.logger.clone(e));if(["store","services","language"].forEach((e=>{o[e]=this[e]})),o.services=g({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const e=Object.keys(this.store.data).reduce(((e,t)=>(e[t]=g({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce(((n,i)=>(n[i]=g({},e[t][i]),n)),e[t]),e)),{});o.store=new Nt(e,i),o.services.resourceStore=o.store}return o.translator=new Tt(o.services,i),o.translator.on("*",((e,...t)=>{o.emit(e,...t)})),o.init(i,t),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ft=Gt.createInstance();Ft.createInstance=Gt.createInstance,Ft.createInstance,Ft.dir,Ft.init,Ft.loadResources,Ft.reloadResources,Ft.use,Ft.changeLanguage,Ft.getFixedT,Ft.t,Ft.exists,Ft.setDefaultNamespace,Ft.hasLoadedNamespace,Ft.loadNamespaces,Ft.loadLanguages;var Ht=p("aj",(e=>(e.DEV="DEV",e.UAT="UAT",e.PRD="PRD",e))(Ht||{}));const Ut="rmg-runtime__language",Vt="rmg-runtime__colourMode",Wt="rmg-runtime__allowAnalytics",qt="rmg-unknown";let Jt=qt,Kt=et(Xe(qt));const Qt=()=>`[${Jt}]`,Zt=()=>Kt,Yt=(e,t,n)=>(...i)=>{"string"==typeof i[0]?e(`%c${t()}%c ${i[0]}`,`color: ${n()}`,"",...i.slice(1)):e(`%c${t()}%c`,`color: ${n()}`,"",...i)},Xt={debug:Yt(console.debug,Qt,Zt),info:Yt(console.info,Qt,Zt),warn:Yt(console.warn,Qt,Zt),error:Yt(console.error,Qt,Zt)},en=()=>Jt===qt?"[runtime]":`[runtime@${Jt}]`,tn=et(Xe("runtime")),nn=()=>tn,on={setup:e=>{Jt=e,Kt=et(Xe(e))},logger:Xt,debug:Yt(console.debug,en,nn),info:Yt(console.info,en,nn),warn:Yt(console.warn,en,nn),error:Yt(console.error,en,nn),group:Yt(console.group,en,nn),groupEnd:console.groupEnd};let rn,an,sn,ln,dn;const cn=()=>{rn=!1,an=qt,sn="unknown",ln=Ht.PRD,dn="unknown"},un=async()=>{const e=window.location.pathname.split("/")[1],t=e?`/${e}/info.json`:"/info.json",n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch config from ${t}`);{const e=await n.json();on.info("Received info.json",e),an=e.component,sn=e.version,ln=e.environment,dn=e.instance}},hn=()=>"railmapgen.github.io"===an;cn();const pn={loadWithTimeout:async()=>{try{on.group("Loading config...");const e=await Promise.race([un(),Ye(1e4)]);e?on.error(" Failed to load config.",e):(rn=!0,on.info(" Config loaded!"))}catch(e){on.error(" Failed to load config.",e)}finally{on.groupEnd()}},isInitialised:()=>rn,getComponent:()=>hn()?"rmg-home":an,getVersion:()=>sn,getEnvironment:()=>ln,getInstance:()=>dn,isRMT:hn,_resetConfig:cn};window.dataLayer=window.dataLayer||[];function gn(...e){if(pn.getEnvironment()!==Ht.DEV)return window.dataLayer.push(arguments);on.info("Not going to send event in DEV environment",e)}const mn={init:()=>{(()=>{const e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-2HP8Y4MRRQ",document.head.append(e)})(),gn("js",new Date),gn("config","G-2HP8Y4MRRQ",{appName:pn.getComponent(),version:pn.getVersion(),environment:pn.getEnvironment(),instance:pn.getInstance()})},customEvent:(e,t={})=>{gn("event",e,t)}},fn={};let yn;try{yn=new BroadcastChannel("rmg-runtime-channel"),yn.onmessage=e=>{var t;const{event:n,data:i,frameId:o}=e.data;null===(t=fn[n])||void 0===t||t.forEach((e=>e(i,o)))}}catch(jc){on.warn("Failed to initiate broadcast channel. Some features may be unavailable.",jc)}const bn={postEvent:(e,t)=>{var n,i;on.debug(`Broadcasting event ${e} with data`,t),null===(n=yn)||void 0===n||n.postMessage({event:e,data:t,frameId:null===(i=window.frameElement)||void 0===i?void 0:i.id})},onMessage:(e,t)=>{var n;e in fn?null===(n=fn[e])||void 0===n||n.push(t):fn[e]=[t]}},vn="TOGGLE_NAV_MENU",wn="OPEN_APP",xn="CLOSE_APP",Nn="UPDATE_APP_METADATA",Sn=()=>!window.frameElement,kn={isStandaloneWindow:Sn,injectUITools:()=>{if(!Sn()){const e=document.createElement("style");e.textContent="body{padding: 0;}",document.head.appendChild(e)}const e=document.createElement("style");var t;e.textContent=".rmg-window__header:not(.rmg-window__app-clip-header),.rm-window__header:not(.rm-window__app-clip-header){margin-left: 40px;}",Sn()||null!==(t=window.frameElement)&&void 0!==t&&t.closest(".show-menu")||document.head.appendChild(e),Sn()||bn.onMessage(vn,(t=>{if(t)try{document.head.removeChild(e)}catch(jc){on.warn("Unable to remove indent style from RmgWindowHeader",jc)}else document.head.appendChild(e)}))},openApp:e=>{bn.postEvent(wn,e)},onAppOpen:e=>{bn.onMessage(wn,e)},closeApp:e=>{bn.postEvent(xn,e)},onAppClose:e=>{bn.onMessage(xn,e)},updateAppMetadata:e=>{bn.postEvent(Nn,e)},onAppMetadataUpdate:e=>{bn.onMessage(Nn,e)},toggleNavMenu:e=>{bn.postEvent(vn,e)}},Rn="SET_LANGUAGE",Tn="SET_COLOUR_MODE",_n=["light","dark","system"],Cn=()=>"true"===window.localStorage.getItem(Wt),Ln={setLanguage:e=>{bn.postEvent(Rn,e),window.localStorage.setItem(Ut,e)},getLanguage:()=>window.localStorage.getItem(Ut)||"en",onLanguageChange:e=>{bn.onMessage(Rn,e)},setColourMode:e=>{_n.includes(e)&&(bn.postEvent(Tn,e),window.localStorage.setItem(Vt,e))},getColourMode:()=>{const e=window.localStorage.getItem(Vt);return t=e,Boolean(t&&_n.includes(t))?e:"system";var t},onColourModeChange:e=>{bn.onMessage(Tn,e)},isAnalyticsQADone:()=>null!==window.localStorage.getItem(Wt),isAllowAnalytics:Cn,allowAnalytics:e=>{const t=Cn();return e?(t||(window.localStorage.setItem(Wt,e.toString()),mn.init()),{refreshRequired:!1}):t?(window.localStorage.setItem(Wt,e.toString()),{refreshRequired:!0}):{refreshRequired:!1}}},On=(new Date).getTime();const An={getMsSinceStartUp:function(){const e=pn.getComponent(),t=window.localStorage.getItem(e+"__startTime");return null===t?(new Date).getTime()-On:(new Date).getTime()-Number(t)}},jn={},Mn=()=>{const e=pn.getComponent();if(e===qt)throw new Error("Unable to clear storage for unknown app");return e};window.addEventListener("storage",(e=>{const{key:t,newValue:n}=e;var i;t&&(null===(i=jn[t])||void 0===i||i.forEach((e=>e(n))))}));const En={on:(e,t)=>{const n=`${Mn()}__${e}`;var i;n in jn?null===(i=jn[n])||void 0===i||i.push(t):jn[n]=[t]},get:e=>{const t=Mn();return window.localStorage.getItem(`${t}__${e}`)},getAll:()=>{const e=Mn(),t={};let n=0;for(;n<window.localStorage.length;){const i=window.localStorage.key(n);if(null!=i&&i.startsWith(e+"__")){const e=window.localStorage.getItem(i);e&&(t[i]=e)}n++}return t},set:(e,t)=>{const n=Mn();window.localStorage.setItem(`${n}__${e}`,t)},remove:e=>{const t=Mn();window.localStorage.removeItem(`${t}__${e}`)},clear:()=>{const e=Mn();let t=0;for(;t<window.localStorage.length;){const n=window.localStorage.key(t);null!=n&&n.startsWith(e+"__")?(window.localStorage.removeItem(n),on.info(`Removed item ${n}`)):t++}}};let Pn;let zn={};const In="LOAD_REMOTE_FONT",$n=e=>e.source.startsWith("local"),Bn=(e,t)=>{var n;return`@font-face {\n    font-family: '${e}';\n    src: ${t.source};\n    ${Object.entries(null!==(n=t.descriptors)&&void 0!==n?n:{}).map((([e,t])=>`${e}: ${t};`)).join("\n")}\n}`};let Dn=(e=>{let t,n=!1;return async i=>!t||!n&&i?(t=e(),n=!0,t.then((e=>(n=!1,e))).catch((e=>{throw t=null,e}))):t})((()=>fetch("/fonts/config.json").then((e=>e.json()))));const Gn=async(e,t,n)=>{try{const i=new FontFace(e,t.source,t.descriptors);return $n(t)?await i.load():i.loaded.then(n),document.fonts.add(i),zn[e]={configs:[g(g({},t),{},{font:i})]},!0}catch(jc){return on.warn(`Failed to load font ${e} with source ${t.source}`,jc),!1}},Fn=async(e,t,n)=>{if(t.some($n))return on.error(`Unable to load multiple FontFace for the same family ${e}`),!1;const i=[];return t.forEach((t=>{const o=new FontFace(e,t.source,t.descriptors);o.loaded.then(n),document.fonts.add(o),i.push(g(g({},t),{},{font:o}))})),zn[e]={configs:i},!0},Hn={getAllFonts:Dn,getLoadedFonts:()=>zn,loadFont:async(e,t)=>{if(e in zn)return zn[e];let n;if(t)n=t;else try{n=(await Dn())[e]}catch(jc){const n=jc instanceof Error?" due to "+jc.message:"";throw new Error("Unable to load font definition of "+e+n)}const i=()=>{((e,t)=>{bn.postEvent(In,{family:e,definition:t})})(e,n)};for(const r of n.configs){if(Array.isArray(r)?await Fn(e,r,i):await Gn(e,r,i))break}const o=zn[e];return o?(o.displayName=n.displayName,o.url=n.url,zn[e]):void 0},getFontCSS:async e=>{const t=zn[e];if(!t)throw new Error(`Font family ${e} is not loaded`);const n=await Promise.all(t.configs.filter((t=>{const n="loaded"===t.font.status;return n||on.warn(`Font family ${e} is not loaded completely. Some FontFaceRules may be missing`),n})).map((async t=>{if($n(t))return Bn(e,t);const n=(e=>{var t;const n=null===(t=e.source.match(/url\(['"](\S+)['"]\)/))||void 0===t?void 0:t[1];if(!n)throw new Error("Invalid URL in source "+e.source);return new URL(n,window.location.href)})(t),i=await fetch(n),o=await(r=await i.blob(),new Promise((e=>{const t=new FileReader;t.onloadend=()=>e(t.result),t.readAsDataURL(r)})));var r;return Bn(e,g(g({},t),{},{source:`url('${o}')`}))})));return n.join("\n\n")},onRemoteFontLoaded:e=>{bn.onMessage(In,e)}},Un=()=>{if("PRD"!==pn.getEnvironment()||!pn.isRMT())if(document.querySelector('meta[name="robots"]'))on.info("Noindex meta tag already presents.");else{on.info("Injecting noindex meta tag as this app is not PRD RMT.");const e=document.createElement("meta");e.name="robots",e.content="noindex",document.head.appendChild(e)}},Vn="NEW_NOTIFICATION",Wn={sendNotification:e=>{bn.postEvent(Vn,g(g({},e),{},{id:crypto.randomUUID(),source:pn.getComponent()}))},onNewNotification:e=>{bn.onMessage(Vn,e)}};let qn=!1;const Jn=p("r",{ready:async()=>{let e=0;for(;e<=10&&!qn;)await Ye(1e3),e+=1},getAppName:pn.getComponent,getAppVersion:pn.getVersion,getEnv:pn.getEnvironment,getInstance:pn.getInstance,event:mn.customEvent,isStandaloneWindow:kn.isStandaloneWindow,injectUITools:kn.injectUITools,openApp:kn.openApp,onAppOpen:kn.onAppOpen,closeApp:kn.closeApp,onAppClose:kn.onAppClose,updateAppMetadata:kn.updateAppMetadata,onAppMetadataUpdate:kn.onAppMetadataUpdate,toggleNavMenu:kn.toggleNavMenu,postEvent:bn.postEvent,onMessage:bn.onMessage,setLanguage:Ln.setLanguage,getLanguage:Ln.getLanguage,onLanguageChange:Ln.onLanguageChange,setColourMode:Ln.setColourMode,getColourMode:Ln.getColourMode,onColourModeChange:Ln.onColourModeChange,isAnalyticsQADone:Ln.isAnalyticsQADone,isAllowAnalytics:Ln.isAllowAnalytics,allowAnalytics:Ln.allowAnalytics,storage:{on:En.on,get:En.get,getAll:En.getAll,set:En.set,remove:En.remove,clear:En.clear},getMsSinceStartUp:An.getMsSinceStartUp,I18nBuilder:class{constructor(){m(this,"_appName","RMG"),m(this,"_lng",void 0),m(this,"_defaultResources",{}),m(this,"_resources",{})}use(e){return Ft.use(e),this}withAppName(e){return this._appName=e,this}withLng(e){return this._lng=e,this}withDefaultResource(e){return Object.entries(e).forEach((([e,t])=>{this._defaultResources[e]=t})),this}withResource(e,t){return this._resources[e]=t,this}combineResource(){const e={};return Object.entries(this._defaultResources).forEach((([t,n])=>{e[t]={translation:n}})),Object.entries(this._resources).forEach((([t,n])=>{t in e?e[t].translation=g(g({},e[t].translation),n):e[t]={translation:n}})),e}build(){return Pn=Ft.createInstance({lng:this._lng,fallbackLng:{"zh-CN":["zh-Hans","zh-Hant","en"],"zh-HK":["zh-Hant","zh-Hans","en"],"zh-TW":["zh-Hant","zh-Hans","en"],default:["en"]},resources:this.combineResource()},((e,t)=>{var n;e?on.error("unexpected error occurs while initialising i18n",e):(document.title=t(this._appName),document.documentElement.lang=null!==(n=this._lng)&&void 0!==n?n:"en")})),Pn.on("languageChanged",(e=>{document.title=Pn.t(this._appName),document.documentElement.lang=e})),(e=>{Ln.onLanguageChange((t=>e.changeLanguage(t)))})(Pn),Pn}},getI18nInstance:()=>Pn,getAllFonts:Hn.getAllFonts,getLoadedFonts:Hn.getLoadedFonts,loadFont:Hn.loadFont,getFontCSS:Hn.getFontCSS,onRemoteFontLoaded:Hn.onRemoteFontLoaded,sendNotification:Wn.sendNotification,onNewNotification:Wn.onNewNotification});(async()=>{await pn.loadWithTimeout(),on.setup(pn.getComponent()),Un(),Ln.isAnalyticsQADone()?Ln.isAllowAnalytics()&&(on.info("User has previously allowed GA"),mn.init()):kn.isStandaloneWindow()&&!pn.isRMT()&&(on.warn("App is opened in standalone window but analytics Q&A is not finished. GA will be init by default."),mn.init()),qn=!0})().then(),window.rmgRuntime=Jn;const Kn=p("Q",on.logger);var Qn,Zn={exports:{}};var Yn=function(){if(Qn)return Zn.exports;Qn=1;var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}Zn.exports=o,Zn.exports.once=function(e,t){return new Promise((function(n,i){function o(n){e.removeListener(t,r),i(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}g(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}(e,o,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var r=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function s(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var o,r,l;if(a(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),l=r[t]),void 0===l)l=r[t]=n,++e._eventsCount;else if("function"==typeof l?l=r[t]=i?[n,l]:[l,n]:i?l.unshift(n):l.push(n),(o=s(e))>0&&l.length>o&&!l.warned){l.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=l.length,function(e){console&&console.warn&&console.warn(e)}(d)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(i);return o.listener=n,i.wrapFn=o,o}function u(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):p(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){i.once&&e.removeEventListener(t,o),n(r)}))}}return Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");r=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return s(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var o="error"===e,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var d=l.length,c=p(l,d);for(i=0;i<d;++i)n(c[i],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,o,r,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return u(this,e,!0)},o.prototype.rawListeners=function(e){return u(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},Zn.exports}();let Xn=function(){const e=arguments[0];for(let t=1,n=arguments.length;t<n;t++)if(arguments[t])for(const i in arguments[t])e[i]=arguments[t][i];return e};function ei(e,t,n,i){const o=e._nodes.get(t);let r=null;return o?(r="mixed"===i?o.out&&o.out[n]||o.undirected&&o.undirected[n]:"directed"===i?o.out&&o.out[n]:o.undirected&&o.undirected[n],r):r}function ti(e){return"object"==typeof e&&null!==e}function ni(e){let t;for(t in e)return!1;return!0}function ii(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function oi(e,t,n){const i={enumerable:!0,configurable:!0};"function"==typeof n?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(e,t,i)}function ri(e){return!!ti(e)&&!(e.attributes&&!Array.isArray(e.attributes))}function ai(){const e=arguments;let t=null,n=-1;return{[Symbol.iterator](){return this},next(){let i=null;for(;;){if(null===t){if(n++,n>=e.length)return{done:!0};t=e[n][Symbol.iterator]()}if(i=t.next(),!i.done)break;t=null}return i}}}function si(){return{[Symbol.iterator](){return this},next:()=>({done:!0})}}"function"==typeof Object.assign&&(Xn=Object.assign);class li extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class di extends li{constructor(e){super(e),this.name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,di.prototype.constructor)}}class ci extends li{constructor(e){super(e),this.name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ci.prototype.constructor)}}class ui extends li{constructor(e){super(e),this.name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ui.prototype.constructor)}}function hi(e,t){this.key=e,this.attributes=t,this.clear()}function pi(e,t){this.key=e,this.attributes=t,this.clear()}function gi(e,t){this.key=e,this.attributes=t,this.clear()}function mi(e,t,n,i,o){this.key=t,this.attributes=o,this.undirected=e,this.source=n,this.target=i}hi.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},pi.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},gi.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},mi.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");const n=this.source.key,i=this.target.key;this.source[e][i]=this,this.undirected&&n===i||(this.target[t][n]=this)},mi.prototype.attachMulti=function(){let e="out",t="in";const n=this.source.key,i=this.target.key;this.undirected&&(e=t="undirected");const o=this.source[e],r=o[i];if(void 0===r)return o[i]=this,void(this.undirected&&n===i||(this.target[t][n]=this));r.previous=this,this.next=r,o[i]=this,this.target[t][n]=this},mi.prototype.detach=function(){const e=this.source.key,t=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][t],delete this.target[i][e]},mi.prototype.detachMulti=function(){const e=this.source.key,t=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[n][t],delete this.target[i][e]):(this.next.previous=void 0,this.source[n][t]=this.next,this.target[i][e]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};const fi=0,yi=1,bi=3;function vi(e,t,n,i,o,r,a){let s,l,d,c;if(i=""+i,n===fi){if(s=e._nodes.get(i),!s)throw new ci(`Graph.${t}: could not find the "${i}" node in the graph.`);d=o,c=r}else if(n===bi){if(o=""+o,l=e._edges.get(o),!l)throw new ci(`Graph.${t}: could not find the "${o}" edge in the graph.`);const n=l.source.key,u=l.target.key;if(i===n)s=l.target;else{if(i!==u)throw new ci(`Graph.${t}: the "${i}" node is not attached to the "${o}" edge (${n}, ${u}).`);s=l.source}d=r,c=a}else{if(l=e._edges.get(i),!l)throw new ci(`Graph.${t}: could not find the "${i}" edge in the graph.`);s=n===yi?l.source:l.target,d=o,c=r}return[s,d,c]}const wi=[{name:e=>`get${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o){const[r,a]=vi(this,t,n,e,i,o);return r.attributes[a]}}},{name:e=>`get${e}Attributes`,attacher:function(e,t,n){e.prototype[t]=function(e,i){const[o]=vi(this,t,n,e,i);return o.attributes}}},{name:e=>`has${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o){const[r,a]=vi(this,t,n,e,i,o);return r.attributes.hasOwnProperty(a)}}},{name:e=>`set${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o,r){const[a,s,l]=vi(this,t,n,e,i,o,r);return a.attributes[s]=l,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:s}),this}}},{name:e=>`update${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o,r){const[a,s,l]=vi(this,t,n,e,i,o,r);if("function"!=typeof l)throw new di(`Graph.${t}: updater should be a function.`);const d=a.attributes,c=l(d[s]);return d[s]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:s}),this}}},{name:e=>`remove${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o){const[r,a]=vi(this,t,n,e,i,o);return delete r.attributes[a],this.emit("nodeAttributesUpdated",{key:r.key,type:"remove",attributes:r.attributes,name:a}),this}}},{name:e=>`replace${e}Attributes`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o){const[r,a]=vi(this,t,n,e,i,o);if(!ti(a))throw new di(`Graph.${t}: provided attributes are not a plain object.`);return r.attributes=a,this.emit("nodeAttributesUpdated",{key:r.key,type:"replace",attributes:r.attributes}),this}}},{name:e=>`merge${e}Attributes`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o){const[r,a]=vi(this,t,n,e,i,o);if(!ti(a))throw new di(`Graph.${t}: provided attributes are not a plain object.`);return Xn(r.attributes,a),this.emit("nodeAttributesUpdated",{key:r.key,type:"merge",attributes:r.attributes,data:a}),this}}},{name:e=>`update${e}Attributes`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o){const[r,a]=vi(this,t,n,e,i,o);if("function"!=typeof a)throw new di(`Graph.${t}: provided updater is not a function.`);return r.attributes=a(r.attributes),this.emit("nodeAttributesUpdated",{key:r.key,type:"update",attributes:r.attributes}),this}}}];const xi=[{name:e=>`get${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new ui(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ui(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+e,a=""+i;if(i=arguments[2],o=ei(this,r,a,n),!o)throw new ci(`Graph.${t}: could not find an edge for the given path ("${r}" - "${a}").`)}else{if("mixed"!==n)throw new ui(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new ci(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return o.attributes[i]}}},{name:e=>`get${e}Attributes`,attacher:function(e,t,n){e.prototype[t]=function(e){let i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new ui(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ui(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,r=""+arguments[1];if(i=ei(this,o,r,n),!i)throw new ci(`Graph.${t}: could not find an edge for the given path ("${o}" - "${r}").`)}else{if("mixed"!==n)throw new ui(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,i=this._edges.get(e),!i)throw new ci(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return i.attributes}}},{name:e=>`has${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new ui(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ui(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+e,a=""+i;if(i=arguments[2],o=ei(this,r,a,n),!o)throw new ci(`Graph.${t}: could not find an edge for the given path ("${r}" - "${a}").`)}else{if("mixed"!==n)throw new ui(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new ci(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}},{name:e=>`set${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o){let r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new ui(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ui(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+e,s=""+i;if(i=arguments[2],o=arguments[3],r=ei(this,a,s,n),!r)throw new ci(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if("mixed"!==n)throw new ui(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,r=this._edges.get(e),!r)throw new ci(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return r.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:r.key,type:"set",attributes:r.attributes,name:i}),this}}},{name:e=>`update${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i,o){let r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new ui(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ui(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+e,s=""+i;if(i=arguments[2],o=arguments[3],r=ei(this,a,s,n),!r)throw new ci(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if("mixed"!==n)throw new ui(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,r=this._edges.get(e),!r)throw new ci(`Graph.${t}: could not find the "${e}" edge in the graph.`)}if("function"!=typeof o)throw new di(`Graph.${t}: updater should be a function.`);return r.attributes[i]=o(r.attributes[i]),this.emit("edgeAttributesUpdated",{key:r.key,type:"set",attributes:r.attributes,name:i}),this}}},{name:e=>`remove${e}Attribute`,attacher:function(e,t,n){e.prototype[t]=function(e,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new ui(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ui(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+e,a=""+i;if(i=arguments[2],o=ei(this,r,a,n),!o)throw new ci(`Graph.${t}: could not find an edge for the given path ("${r}" - "${a}").`)}else{if("mixed"!==n)throw new ui(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new ci(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}},{name:e=>`replace${e}Attributes`,attacher:function(e,t,n){e.prototype[t]=function(e,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new ui(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ui(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+e,a=""+i;if(i=arguments[2],o=ei(this,r,a,n),!o)throw new ci(`Graph.${t}: could not find an edge for the given path ("${r}" - "${a}").`)}else{if("mixed"!==n)throw new ui(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new ci(`Graph.${t}: could not find the "${e}" edge in the graph.`)}if(!ti(i))throw new di(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}},{name:e=>`merge${e}Attributes`,attacher:function(e,t,n){e.prototype[t]=function(e,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new ui(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ui(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+e,a=""+i;if(i=arguments[2],o=ei(this,r,a,n),!o)throw new ci(`Graph.${t}: could not find an edge for the given path ("${r}" - "${a}").`)}else{if("mixed"!==n)throw new ui(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new ci(`Graph.${t}: could not find the "${e}" edge in the graph.`)}if(!ti(i))throw new di(`Graph.${t}: provided attributes are not a plain object.`);return Xn(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}},{name:e=>`update${e}Attributes`,attacher:function(e,t,n){e.prototype[t]=function(e,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new ui(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ui(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+e,a=""+i;if(i=arguments[2],o=ei(this,r,a,n),!o)throw new ci(`Graph.${t}: could not find an edge for the given path ("${r}" - "${a}").`)}else{if("mixed"!==n)throw new ui(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new ci(`Graph.${t}: could not find the "${e}" edge in the graph.`)}if("function"!=typeof i)throw new di(`Graph.${t}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}}];const Ni=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Si(e,t,n,i){let o=!1;for(const r in t){if(r===i)continue;const a=t[r];if(o=n(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),e&&o)return a.key}}function ki(e,t,n,i){let o,r,a,s=!1;for(const l in t)if(l!==i){o=t[l];do{if(r=o.source,a=o.target,s=n(o.key,o.attributes,r.key,a.key,r.attributes,a.attributes,o.undirected),e&&s)return o.key;o=o.next}while(void 0!==o)}}function Ri(e,t){const n=Object.keys(e),i=n.length;let o,r=0;return{[Symbol.iterator](){return this},next(){do{if(o)o=o.next;else{if(r>=i)return{done:!0};const a=n[r++];if(a===t){o=void 0;continue}o=e[a]}}while(!o);return{done:!1,value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected}}}}}function Ti(e,t,n,i){const o=t[n];if(!o)return;const r=o.source,a=o.target;return i(o.key,o.attributes,r.key,a.key,r.attributes,a.attributes,o.undirected)&&e?o.key:void 0}function _i(e,t,n,i){let o=t[n];if(!o)return;let r=!1;do{if(r=i(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),e&&r)return o.key;o=o.next}while(void 0!==o)}function Ci(e,t){let n=e[t];if(void 0!==n.next)return{[Symbol.iterator](){return this},next(){if(!n)return{done:!0};const e={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:e}}};let i=!1;return{[Symbol.iterator](){return this},next:()=>!0===i?{done:!0}:(i=!0,{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}})}}function Li(e,t,n,i){if(0===t.size)return;const o="mixed"!==n&&n!==t.type,r="undirected"===n;let a,s,l=!1;const d=t._edges.values();for(;a=d.next(),!0!==a.done;){if(s=a.value,o&&s.undirected!==r)continue;const{key:t,attributes:n,source:d,target:c}=s;if(l=i(t,n,d.key,c.key,d.attributes,c.attributes,s.undirected),e&&l)return t}}function Oi(e,t,n,i,o,r){const a=t?ki:Si;let s;if("undirected"!==n){if("out"!==i&&(s=a(e,o.in,r),e&&s))return s;if("in"!==i&&(s=a(e,o.out,r,i?void 0:o.key),e&&s))return s}if("directed"!==n&&(s=a(e,o.undirected,r),e&&s))return s}function Ai(e,t,n,i,o,r,a){const s=n?_i:Ti;let l;if("undirected"!==t){if(void 0!==o.in&&"out"!==i&&(l=s(e,o.in,r,a),e&&l))return l;if(void 0!==o.out&&"in"!==i&&(i||o.key!==r)&&(l=s(e,o.out,r,a),e&&l))return l}if("directed"!==t&&void 0!==o.undirected&&(l=s(e,o.undirected,r,a),e&&l))return l}function ji(e,t){const{name:n,type:i,direction:o}=t;e.prototype[n]=function(e,t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];if(!arguments.length)return function(e,t){if(0===e.size)return[];if("mixed"===t||t===e.type)return Array.from(e._edges.keys());const n="undirected"===t?e.undirectedSize:e.directedSize,i=new Array(n),o="undirected"===t,r=e._edges.values();let a,s,l=0;for(;a=r.next(),!0!==a.done;)s=a.value,s.undirected===o&&(i[l++]=s.key);return i}(this,i);if(1===arguments.length){e=""+e;const t=this._nodes.get(e);if(void 0===t)throw new ci(`Graph.${n}: could not find the "${e}" node in the graph.`);return function(e,t,n,i){const o=[];return Oi(!1,e,t,n,i,(function(e){o.push(e)})),o}(this.multi,"mixed"===i?this.type:i,o,t)}if(2===arguments.length){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ci(`Graph.${n}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ci(`Graph.${n}:  could not find the "${t}" target node in the graph.`);return function(e,t,n,i,o){const r=[];return Ai(!1,e,t,n,i,o,(function(e){r.push(e)})),r}(i,this.multi,o,r,t)}throw new di(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Mi(e,t){const{name:n,type:i,direction:o}=t,r=n.slice(0,-1)+"Entries";e.prototype[r]=function(e,t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return si();if(!arguments.length)return function(e,t){if(0===e.size)return si();const n="mixed"!==t&&t!==e.type,i="undirected"===t,o=e._edges.values();return{[Symbol.iterator](){return this},next(){let e,t;for(;;){if(e=o.next(),e.done)return e;if(t=e.value,!n||t.undirected===i)break}return{value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected},done:!1}}}}(this,i);if(1===arguments.length){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.${r}: could not find the "${e}" node in the graph.`);return function(e,t,n){let i=si();return"undirected"!==e&&("out"!==t&&void 0!==n.in&&(i=ai(i,Ri(n.in))),"in"!==t&&void 0!==n.out&&(i=ai(i,Ri(n.out,t?void 0:n.key)))),"directed"!==e&&void 0!==n.undirected&&(i=ai(i,Ri(n.undirected))),i}(i,o,t)}if(2===arguments.length){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new ci(`Graph.${r}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ci(`Graph.${r}:  could not find the "${t}" target node in the graph.`);return function(e,t,n,i){let o=si();return"undirected"!==e&&(void 0!==n.in&&"out"!==t&&i in n.in&&(o=ai(o,Ci(n.in,i))),void 0!==n.out&&"in"!==t&&i in n.out&&(t||n.key!==i)&&(o=ai(o,Ci(n.out,i)))),"directed"!==e&&void 0!==n.undirected&&i in n.undirected&&(o=ai(o,Ci(n.undirected,i))),o}(i,o,n,t)}throw new di(`Graph.${r}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}const Ei=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Pi(){this.A=null,this.B=null}function zi(e,t,n,i,o){for(const r in i){const a=i[r],s=a.source,l=a.target,d=s===n?l:s;if(t&&t.has(d.key))continue;const c=o(d.key,d.attributes);if(e&&c)return d.key}}function Ii(e,t,n,i,o){if("mixed"!==t){if("undirected"===t)return zi(e,null,i,i.undirected,o);if("string"==typeof n)return zi(e,null,i,i[n],o)}const r=new Pi;let a;if("undirected"!==t){if("out"!==n){if(a=zi(e,null,i,i.in,o),e&&a)return a;r.wrap(i.in)}if("in"!==n){if(a=zi(e,r,i,i.out,o),e&&a)return a;r.wrap(i.out)}}if("directed"!==t&&(a=zi(e,r,i,i.undirected,o),e&&a))return a}function $i(e,t,n){const i=Object.keys(n),o=i.length;let r=0;return{[Symbol.iterator](){return this},next(){let a=null;do{if(r>=o)return e&&e.wrap(n),{done:!0};const s=n[i[r++]],l=s.source,d=s.target;a=l===t?d:l,e&&e.has(a.key)&&(a=null)}while(null===a);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}}}}function Bi(e,t){const{name:n,type:i,direction:o}=t;e.prototype[n]=function(e){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];e=""+e;const t=this._nodes.get(e);if(void 0===t)throw new ci(`Graph.${n}: could not find the "${e}" node in the graph.`);return function(e,t,n){if("mixed"!==e){if("undirected"===e)return Object.keys(n.undirected);if("string"==typeof t)return Object.keys(n[t])}const i=[];return Ii(!1,e,t,n,(function(e){i.push(e)})),i}("mixed"===i?this.type:i,o,t)}}function Di(e,t){const{name:n,type:i,direction:o}=t,r=n.slice(0,-1)+"Entries";e.prototype[r]=function(e){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return si();e=""+e;const t=this._nodes.get(e);if(void 0===t)throw new ci(`Graph.${r}: could not find the "${e}" node in the graph.`);return function(e,t,n){if("mixed"!==e){if("undirected"===e)return $i(null,n,n.undirected);if("string"==typeof t)return $i(null,n,n[t])}let i=si();const o=new Pi;return"undirected"!==e&&("out"!==t&&(i=ai(i,$i(o,n,n.in))),"in"!==t&&(i=ai(i,$i(o,n,n.out)))),"directed"!==e&&(i=ai(i,$i(o,n,n.undirected))),i}("mixed"===i?this.type:i,o,t)}}function Gi(e,t,n,i,o){const r=i._nodes.values(),a=i.type;let s,l,d,c,u,h;for(;s=r.next(),!0!==s.done;){let e=!1;if(l=s.value,"undirected"!==a)for(d in c=l.out,c){u=c[d];do{h=u.target,e=!0,o(l.key,h.key,l.attributes,h.attributes,u.key,u.attributes,u.undirected),u=u.next}while(u)}if("directed"!==a)for(d in c=l.undirected,c)if(!(t&&l.key>d)){u=c[d];do{h=u.target,h.key!==d&&(h=u.source),e=!0,o(l.key,h.key,l.attributes,h.attributes,u.key,u.attributes,u.undirected),u=u.next}while(u)}n&&!e&&o(l.key,null,l.attributes,null,null,null,null)}}function Fi(e){if(!ti(e))throw new di('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new di("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!ti(e.attributes)||null===e.attributes))throw new di("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Hi(e){if(!ti(e))throw new di('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new di("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new di("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!ti(e.attributes)||null===e.attributes))throw new di("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&"boolean"!=typeof e.undirected)throw new di("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}Pi.prototype.wrap=function(e){null===this.A?this.A=e:null===this.B&&(this.B=e)},Pi.prototype.has=function(e){return null!==this.A&&e in this.A||null!==this.B&&e in this.B};const Ui=function(){let e=255&Math.floor(256*Math.random());return()=>e++}(),Vi=new Set(["directed","undirected","mixed"]),Wi=new Set(["domain","_events","_eventsCount","_maxListeners"]),qi={allowSelfLoops:!0,multi:!1,type:"mixed"};function Ji(e,t,n){const i=new e.NodeDataClass(t,n);return e._nodes.set(t,i),e.emit("nodeAdded",{key:t,attributes:n}),i}function Ki(e,t,n,i,o,r,a,s){if(!i&&"undirected"===e.type)throw new ui(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&"directed"===e.type)throw new ui(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!ti(s))throw new di(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`);if(r=""+r,a=""+a,s=s||{},!e.allowSelfLoops&&r===a)throw new ui(`Graph.${t}: source & target are the same ("${r}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=e._nodes.get(r),d=e._nodes.get(a);if(!l)throw new ci(`Graph.${t}: source node "${r}" not found.`);if(!d)throw new ci(`Graph.${t}: target node "${a}" not found.`);const c={key:null,undirected:i,source:r,target:a,attributes:s};if(n)o=e._edgeKeyGenerator();else if(o=""+o,e._edges.has(o))throw new ui(`Graph.${t}: the "${o}" edge already exists in the graph.`);if(!e.multi&&(i?void 0!==l.undirected[a]:void 0!==l.out[a]))throw new ui(`Graph.${t}: an edge linking "${r}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const u=new mi(i,o,l,d,s);e._edges.set(o,u);const h=r===a;return i?(l.undirectedDegree++,d.undirectedDegree++,h&&(l.undirectedLoops++,e._undirectedSelfLoopCount++)):(l.outDegree++,d.inDegree++,h&&(l.directedLoops++,e._directedSelfLoopCount++)),e.multi?u.attachMulti():u.attach(),i?e._undirectedSize++:e._directedSize++,c.key=o,e.emit("edgeAdded",c),o}function Qi(e,t,n,i,o,r,a,s,l){if(!i&&"undirected"===e.type)throw new ui(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&"directed"===e.type)throw new ui(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s)if(l){if("function"!=typeof s)throw new di(`Graph.${t}: invalid updater function. Expecting a function but got "${s}"`)}else if(!ti(s))throw new di(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`);let d;if(r=""+r,a=""+a,l&&(d=s,s=void 0),!e.allowSelfLoops&&r===a)throw new ui(`Graph.${t}: source & target are the same ("${r}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c,u,h=e._nodes.get(r),p=e._nodes.get(a);if(!n&&(c=e._edges.get(o),c)){if(!(c.source.key===r&&c.target.key===a||i&&c.source.key===a&&c.target.key===r))throw new ui(`Graph.${t}: inconsistency detected when attempting to merge the "${o}" edge with "${r}" source & "${a}" target vs. ("${c.source.key}", "${c.target.key}").`);u=c}if(u||e.multi||!h||(u=i?h.undirected[a]:h.out[a]),u){const t=[u.key,!1,!1,!1];if(l?!d:!s)return t;if(l){const t=u.attributes;u.attributes=d(t),e.emit("edgeAttributesUpdated",{type:"replace",key:u.key,attributes:u.attributes})}else Xn(u.attributes,s),e.emit("edgeAttributesUpdated",{type:"merge",key:u.key,attributes:u.attributes,data:s});return t}s=s||{},l&&d&&(s=d(s));const g={key:null,undirected:i,source:r,target:a,attributes:s};if(n)o=e._edgeKeyGenerator();else if(o=""+o,e._edges.has(o))throw new ui(`Graph.${t}: the "${o}" edge already exists in the graph.`);let m=!1,f=!1;h||(h=Ji(e,r,{}),m=!0,r===a&&(p=h,f=!0)),p||(p=Ji(e,a,{}),f=!0),c=new mi(i,o,h,p,s),e._edges.set(o,c);const y=r===a;return i?(h.undirectedDegree++,p.undirectedDegree++,y&&(h.undirectedLoops++,e._undirectedSelfLoopCount++)):(h.outDegree++,p.inDegree++,y&&(h.directedLoops++,e._directedSelfLoopCount++)),e.multi?c.attachMulti():c.attach(),i?e._undirectedSize++:e._directedSize++,g.key=o,e.emit("edgeAdded",g),[o,!0,m,f]}function Zi(e,t){e._edges.delete(t.key);const{source:n,target:i,attributes:o}=t,r=t.undirected,a=n===i;r?(n.undirectedDegree--,i.undirectedDegree--,a&&(n.undirectedLoops--,e._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,a&&(n.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),r?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:o,source:n.key,target:i.key,undirected:r})}class Yi extends Yn.EventEmitter{constructor(e){if(super(),"boolean"!=typeof(e=Xn({},qi,e)).multi)throw new di(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Vi.has(e.type))throw new di(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if("boolean"!=typeof e.allowSelfLoops)throw new di(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);ii(this,"NodeDataClass","mixed"===e.type?hi:"directed"===e.type?pi:gi);const t="geid_"+Ui()+"_";let n=0;ii(this,"_attributes",{}),ii(this,"_nodes",new Map),ii(this,"_edges",new Map),ii(this,"_directedSize",0),ii(this,"_undirectedSize",0),ii(this,"_directedSelfLoopCount",0),ii(this,"_undirectedSelfLoopCount",0),ii(this,"_edgeKeyGenerator",(()=>{let e;do{e=t+n++}while(this._edges.has(e));return e})),ii(this,"_options",e),Wi.forEach((e=>ii(this,e,this[e]))),oi(this,"order",(()=>this._nodes.size)),oi(this,"size",(()=>this._edges.size)),oi(this,"directedSize",(()=>this._directedSize)),oi(this,"undirectedSize",(()=>this._undirectedSize)),oi(this,"selfLoopCount",(()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount)),oi(this,"directedSelfLoopCount",(()=>this._directedSelfLoopCount)),oi(this,"undirectedSelfLoopCount",(()=>this._undirectedSelfLoopCount)),oi(this,"multi",this._options.multi),oi(this,"type",this._options.type),oi(this,"allowSelfLoops",this._options.allowSelfLoops),oi(this,"implementation",(()=>"graphology"))}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if("undirected"===this.type)return!1;if(1===arguments.length){const t=""+e,n=this._edges.get(t);return!!n&&!n.undirected}if(2===arguments.length){e=""+e,t=""+t;const n=this._nodes.get(e);return!!n&&n.out.hasOwnProperty(t)}throw new di(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if("directed"===this.type)return!1;if(1===arguments.length){const t=""+e,n=this._edges.get(t);return!!n&&n.undirected}if(2===arguments.length){e=""+e,t=""+t;const n=this._nodes.get(e);return!!n&&n.undirected.hasOwnProperty(t)}throw new di(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(1===arguments.length){const t=""+e;return this._edges.has(t)}if(2===arguments.length){e=""+e,t=""+t;const n=this._nodes.get(e);return!!n&&(void 0!==n.out&&n.out.hasOwnProperty(t)||void 0!==n.undirected&&n.undirected.hasOwnProperty(t))}throw new di(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if("undirected"===this.type)return;if(e=""+e,t=""+t,this.multi)throw new ui("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(e);if(!n)throw new ci(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ci(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const i=n.out&&n.out[t]||void 0;return i?i.key:void 0}undirectedEdge(e,t){if("directed"===this.type)return;if(e=""+e,t=""+t,this.multi)throw new ui("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(e);if(!n)throw new ci(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ci(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const i=n.undirected&&n.undirected[t]||void 0;return i?i.key:void 0}edge(e,t){if(this.multi)throw new ui("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new ci(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ci(`Graph.edge: could not find the "${t}" target node in the graph.`);const i=n.out&&n.out[t]||n.undirected&&n.undirected[t]||void 0;if(i)return i.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new ci(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&(t in n.in||t in n.out)}areOutNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new ci(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in n.out}areInNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new ci(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in n.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new ci(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return"directed"!==this.type&&t in n.undirected}areNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new ci(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&(t in n.in||t in n.out)||"directed"!==this.type&&t in n.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new ci(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in n.in||"directed"!==this.type&&t in n.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new ci(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in n.out||"directed"!==this.type&&t in n.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.inDegree: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.outDegree: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return"directed"===this.type?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let n=0;return"directed"!==this.type&&(n+=t.undirectedDegree),"undirected"!==this.type&&(n+=t.inDegree),n}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let n=0;return"directed"!==this.type&&(n+=t.undirectedDegree),"undirected"!==this.type&&(n+=t.outDegree),n}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.degree: could not find the "${e}" node in the graph.`);let n=0;return"directed"!==this.type&&(n+=t.undirectedDegree),"undirected"!==this.type&&(n+=t.inDegree+t.outDegree),n}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree+t.outDegree-2*t.directedLoops}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"directed"===this.type?0:t.undirectedDegree-2*t.undirectedLoops}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,i=0;return"directed"!==this.type&&(n+=t.undirectedDegree,i+=2*t.undirectedLoops),"undirected"!==this.type&&(n+=t.inDegree,i+=t.directedLoops),n-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,i=0;return"directed"!==this.type&&(n+=t.undirectedDegree,i+=2*t.undirectedLoops),"undirected"!==this.type&&(n+=t.outDegree,i+=t.directedLoops),n-i}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,i=0;return"directed"!==this.type&&(n+=t.undirectedDegree,i+=2*t.undirectedLoops),"undirected"!==this.type&&(n+=t.inDegree+t.outDegree,i+=2*t.directedLoops),n-i}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ci(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ci(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ci(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const n=this._edges.get(t);if(!n)throw new ci(`Graph.opposite: could not find the "${t}" edge in the graph.`);const i=n.source.key,o=n.target.key;if(e===i)return o;if(e===o)return i;throw new ci(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${i}, ${o}).`)}hasExtremity(e,t){e=""+e,t=""+t;const n=this._edges.get(e);if(!n)throw new ci(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return n.source.key===t||n.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ci(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ci(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ci(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){const n=function(e,t,n){if(n&&!ti(n))throw new di(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(t=""+t,n=n||{},e._nodes.has(t))throw new ui(`Graph.addNode: the "${t}" node already exist in the graph.`);const i=new e.NodeDataClass(t,n);return e._nodes.set(t,i),e.emit("nodeAdded",{key:t,attributes:n}),i}(this,e,t);return n.key}mergeNode(e,t){if(t&&!ti(t))throw new di(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let n=this._nodes.get(e);return n?(t&&(Xn(n.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:n.attributes,data:t})),[e,!1]):(n=new this.NodeDataClass(e,t),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&"function"!=typeof t)throw new di(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let n=this._nodes.get(e);if(n){if(t){const i=n.attributes;n.attributes=t(i),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:n.attributes})}return[e,!1]}const i=t?t({}):{};return n=new this.NodeDataClass(e,i),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ci(`Graph.dropNode: could not find the "${e}" node in the graph.`);let n;if("undirected"!==this.type){for(const e in t.out){n=t.out[e];do{Zi(this,n),n=n.next}while(n)}for(const e in t.in){n=t.in[e];do{Zi(this,n),n=n.next}while(n)}}if("directed"!==this.type)for(const i in t.undirected){n=t.undirected[i];do{Zi(this,n),n=n.next}while(n)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const e=""+arguments[0],n=""+arguments[1];if(t=ei(this,e,n,this.type),!t)throw new ci(`Graph.dropEdge: could not find the "${e}" -> "${n}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new ci(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Zi(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new ui("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ui("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=ei(this,e=""+e,t=""+t,"directed");if(!n)throw new ci(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Zi(this,n),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new ui("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ui("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=ei(this,e,t,"undirected");if(!n)throw new ci(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Zi(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),!0!==t.done;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if("function"!=typeof t)throw new di("Graph.updateAttribute: updater should be a function.");const n=this._attributes[e];return this._attributes[e]=t(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!ti(e))throw new di("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!ti(e))throw new di("Graph.mergeAttributes: provided attributes are not a plain object.");return Xn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if("function"!=typeof e)throw new di("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if("function"!=typeof e)throw new di("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!ri(t))throw new di("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let i,o;for(;i=n.next(),!0!==i.done;)o=i.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if("function"!=typeof e)throw new di("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!ri(t))throw new di("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let i,o,r,a;for(;i=n.next(),!0!==i.done;)o=i.value,r=o.source,a=o.target,o.attributes=e(o.key,o.attributes,r.key,a.key,r.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if("function"!=typeof e)throw new di("Graph.forEachAdjacencyEntry: expecting a callback.");Gi(0,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if("function"!=typeof e)throw new di("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Gi(0,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if("function"!=typeof e)throw new di("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Gi(0,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if("function"!=typeof e)throw new di("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Gi(0,!0,!0,this,e)}nodes(){return Array.from(this._nodes.keys())}forEachNode(e){if("function"!=typeof e)throw new di("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let n,i;for(;n=t.next(),!0!==n.done;)i=n.value,e(i.key,i.attributes)}findNode(e){if("function"!=typeof e)throw new di("Graph.findNode: expecting a callback.");const t=this._nodes.values();let n,i;for(;n=t.next(),!0!==n.done;)if(i=n.value,e(i.key,i.attributes))return i.key}mapNodes(e){if("function"!=typeof e)throw new di("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let n,i;const o=new Array(this.order);let r=0;for(;n=t.next(),!0!==n.done;)i=n.value,o[r++]=e(i.key,i.attributes);return o}someNode(e){if("function"!=typeof e)throw new di("Graph.someNode: expecting a callback.");const t=this._nodes.values();let n,i;for(;n=t.next(),!0!==n.done;)if(i=n.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if("function"!=typeof e)throw new di("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let n,i;for(;n=t.next(),!0!==n.done;)if(i=n.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if("function"!=typeof e)throw new di("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let n,i;const o=[];for(;n=t.next(),!0!==n.done;)i=n.value,e(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(e,t){if("function"!=typeof e)throw new di("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new di("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=t;const i=this._nodes.values();let o,r;for(;o=i.next(),!0!==o.done;)r=o.value,n=e(n,r.key,r.attributes);return n}nodeEntries(){const e=this._nodes.values();return{[Symbol.iterator](){return this},next(){const t=e.next();if(t.done)return t;const n=t.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}}}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach(((n,i)=>{e[t++]=function(e,t){const n={key:e};return ni(t.attributes)||(n.attributes=Xn({},t.attributes)),n}(i,n)}));const n=new Array(this._edges.size);return t=0,this._edges.forEach(((e,i)=>{n[t++]=function(e,t,n){const i={key:t,source:n.source.key,target:n.target.key};return ni(n.attributes)||(i.attributes=Xn({},n.attributes)),"mixed"===e&&n.undirected&&(i.undirected=!0),i}(this.type,i,e)})),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:n}}import(e,t=!1){if(e instanceof Yi)return e.forEachNode(((e,n)=>{t?this.mergeNode(e,n):this.addNode(e,n)})),e.forEachEdge(((e,n,i,o,r,a,s)=>{t?s?this.mergeUndirectedEdgeWithKey(e,i,o,n):this.mergeDirectedEdgeWithKey(e,i,o,n):s?this.addUndirectedEdgeWithKey(e,i,o,n):this.addDirectedEdgeWithKey(e,i,o,n)})),this;if(!ti(e))throw new di("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!ti(e.attributes))throw new di("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let n,i,o,r,a;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new di("Graph.import: invalid nodes. Expecting an array.");for(n=0,i=o.length;n<i;n++){r=o[n],Fi(r);const{key:e,attributes:i}=r;t?this.mergeNode(e,i):this.addNode(e,i)}}if(e.edges){let r=!1;if("undirected"===this.type&&(r=!0),o=e.edges,!Array.isArray(o))throw new di("Graph.import: invalid edges. Expecting an array.");for(n=0,i=o.length;n<i;n++){a=o[n],Hi(a);const{source:e,target:i,attributes:s,undirected:l=r}=a;let d;"key"in a?(d=t?l?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:l?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,d.call(this,a.key,e,i,s)):(d=t?l?this.mergeUndirectedEdge:this.mergeDirectedEdge:l?this.addUndirectedEdge:this.addDirectedEdge,d.call(this,e,i,s))}}return this}nullCopy(e){const t=new Yi(Xn({},this._options,e));return t.replaceAttributes(Xn({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach(((e,n)=>{const i=Xn({},e.attributes);e=new t.NodeDataClass(n,i),t._nodes.set(n,e)})),t}copy(e){if("string"==typeof(e=e||{}).type&&e.type!==this.type&&"mixed"!==e.type)throw new ui(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if("boolean"==typeof e.multi&&e.multi!==this.multi&&!0!==e.multi)throw new ui("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof e.allowSelfLoops&&e.allowSelfLoops!==this.allowSelfLoops&&!0!==e.allowSelfLoops)throw new ui("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),n=this._edges.values();let i,o;for(;i=n.next(),!0!==i.done;)o=i.value,Ki(t,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,Xn({},o.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach(((t,n)=>{e[n]=t.attributes}));const t={},n={};this._edges.forEach(((e,i)=>{const o=e.undirected?"--":"->";let r,a="",s=e.source.key,l=e.target.key;e.undirected&&s>l&&(r=s,s=l,l=r);const d=`(${s})${o}(${l})`;i.startsWith("geid_")?this.multi&&(void 0===n[d]?n[d]=0:n[d]++,a+=`${n[d]}. `):a+=`[${i}]: `,a+=d,t[a]=e.attributes}));const i={};for(const o in this)this.hasOwnProperty(o)&&!Wi.has(o)&&"function"!=typeof this[o]&&"symbol"!=typeof o&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=e,i.edges=t,ii(i,"constructor",this.constructor),i}}"undefined"!=typeof Symbol&&(Yi.prototype[Symbol.for("nodejs.util.inspect.custom")]=Yi.prototype.inspect),[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}].forEach((e=>{["add","merge","update"].forEach((t=>{const n=e.name(t),i="add"===t?Ki:Qi;e.generateKey?Yi.prototype[n]=function(o,r,a){return i(this,n,!0,"undirected"===(e.type||this.type),null,o,r,a,"update"===t)}:Yi.prototype[n]=function(o,r,a,s){return i(this,n,!1,"undirected"===(e.type||this.type),o,r,a,s,"update"===t)}}))})),function(e){wi.forEach((function({name:t,attacher:n}){n(e,t("Node"),fi),n(e,t("Source"),yi),n(e,t("Target"),2),n(e,t("Opposite"),bi)}))}(Yi),function(e){xi.forEach((function({name:t,attacher:n}){n(e,t("Edge"),"mixed"),n(e,t("DirectedEdge"),"directed"),n(e,t("UndirectedEdge"),"undirected")}))}(Yi),function(e){Ni.forEach((t=>{ji(e,t),function(e,t){const{name:n,type:i,direction:o}=t,r="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[r]=function(e,t,n){if("mixed"===i||"mixed"===this.type||i===this.type){if(1===arguments.length)return Li(!1,this,i,n=e);if(2===arguments.length){e=""+e,n=t;const a=this._nodes.get(e);if(void 0===a)throw new ci(`Graph.${r}: could not find the "${e}" node in the graph.`);return Oi(!1,this.multi,"mixed"===i?this.type:i,o,a,n)}if(3===arguments.length){e=""+e,t=""+t;const a=this._nodes.get(e);if(!a)throw new ci(`Graph.${r}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ci(`Graph.${r}:  could not find the "${t}" target node in the graph.`);return Ai(!1,i,this.multi,o,a,t,n)}throw new di(`Graph.${r}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const a="map"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(){const e=Array.prototype.slice.call(arguments),t=e.pop();let n;if(0===e.length){let o=0;"directed"!==i&&(o+=this.undirectedSize),"undirected"!==i&&(o+=this.directedSize),n=new Array(o);let r=0;e.push(((e,i,o,a,s,l,d)=>{n[r++]=t(e,i,o,a,s,l,d)}))}else n=[],e.push(((e,i,o,r,a,s,l)=>{n.push(t(e,i,o,r,a,s,l))}));return this[r].apply(this,e),n};const s="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(){const e=Array.prototype.slice.call(arguments),t=e.pop(),n=[];return e.push(((e,i,o,r,a,s,l)=>{t(e,i,o,r,a,s,l)&&n.push(e)})),this[r].apply(this,e),n};const l="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[l]=function(){let e,t,n=Array.prototype.slice.call(arguments);if(n.length<2||n.length>4)throw new di(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${n.length}).`);if("function"==typeof n[n.length-1]&&"function"!=typeof n[n.length-2])throw new di(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);2===n.length?(e=n[0],t=n[1],n=[]):3===n.length?(e=n[1],t=n[2],n=[n[0]]):4===n.length&&(e=n[2],t=n[3],n=[n[0],n[1]]);let i=t;return n.push(((t,n,o,r,a,s,l)=>{i=e(i,t,n,o,r,a,s,l)})),this[r].apply(this,n),i}}(e,t),function(e,t){const{name:n,type:i,direction:o}=t,r="find"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[r]=function(e,t,n){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return!1;if(1===arguments.length)return Li(!0,this,i,n=e);if(2===arguments.length){e=""+e,n=t;const a=this._nodes.get(e);if(void 0===a)throw new ci(`Graph.${r}: could not find the "${e}" node in the graph.`);return Oi(!0,this.multi,"mixed"===i?this.type:i,o,a,n)}if(3===arguments.length){e=""+e,t=""+t;const a=this._nodes.get(e);if(!a)throw new ci(`Graph.${r}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ci(`Graph.${r}:  could not find the "${t}" target node in the graph.`);return Ai(!0,i,this.multi,o,a,t,n)}throw new di(`Graph.${r}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const a="some"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[a]=function(){const e=Array.prototype.slice.call(arguments),t=e.pop();return e.push(((e,n,i,o,r,a,s)=>t(e,n,i,o,r,a,s))),!!this[r].apply(this,e)};const s="every"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[s]=function(){const e=Array.prototype.slice.call(arguments),t=e.pop();return e.push(((e,n,i,o,r,a,s)=>!t(e,n,i,o,r,a,s))),!this[r].apply(this,e)}}(e,t),Mi(e,t)}))}(Yi),function(e){Ei.forEach((t=>{Bi(e,t),function(e,t){const{name:n,type:i,direction:o}=t,r="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[r]=function(e,t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return;e=""+e;const n=this._nodes.get(e);if(void 0===n)throw new ci(`Graph.${r}: could not find the "${e}" node in the graph.`);Ii(!1,"mixed"===i?this.type:i,o,n,t)};const a="map"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(e,t){const n=[];return this[r](e,((e,i)=>{n.push(t(e,i))})),n};const s="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(e,t){const n=[];return this[r](e,((e,i)=>{t(e,i)&&n.push(e)})),n};const l="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[l]=function(e,t,n){if(arguments.length<3)throw new di(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let i=n;return this[r](e,((e,n)=>{i=t(i,e,n)})),i}}(e,t),function(e,t){const{name:n,type:i,direction:o}=t,r=n[0].toUpperCase()+n.slice(1,-1),a="find"+r;e.prototype[a]=function(e,t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return;e=""+e;const n=this._nodes.get(e);if(void 0===n)throw new ci(`Graph.${a}: could not find the "${e}" node in the graph.`);return Ii(!0,"mixed"===i?this.type:i,o,n,t)};const s="some"+r;e.prototype[s]=function(e,t){return!!this[a](e,t)};const l="every"+r;e.prototype[l]=function(e,t){return!this[a](e,((e,n)=>!t(e,n)))}}(e,t),Di(e,t)}))}(Yi);class Xi extends Yi{constructor(e){const t=Xn({type:"directed"},e);if("multi"in t&&!1!==t.multi)throw new di("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==t.type)throw new di('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class eo extends Yi{constructor(e){const t=Xn({type:"undirected"},e);if("multi"in t&&!1!==t.multi)throw new di("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==t.type)throw new di('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class to extends Yi{constructor(e){const t=Xn({multi:!0},e);if("multi"in t&&!0!==t.multi)throw new di("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class no extends Yi{constructor(e){const t=Xn({type:"directed",multi:!0},e);if("multi"in t&&!0!==t.multi)throw new di("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==t.type)throw new di('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class io extends Yi{constructor(e){const t=Xn({type:"undirected",multi:!0},e);if("multi"in t&&!0!==t.multi)throw new di("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==t.type)throw new di('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function oo(e){e.from=function(t,n){const i=Xn({},t.options,n),o=new e(i);return o.import(t),o}}oo(Yi),oo(Xi),oo(eo),oo(to),oo(no),oo(io),Yi.Graph=Yi,Yi.DirectedGraph=Xi,Yi.UndirectedGraph=eo,Yi.MultiGraph=to,Yi.MultiDirectedGraph=no,Yi.MultiUndirectedGraph=io,Yi.InvalidArgumentsGraphError=di,Yi.NotFoundGraphError=ci,Yi.UsageGraphError=ui;var ro,ao={};var so=function(){if(ro)return ao;ro=1;var e=Me();return ao.createRoot=e.createRoot,ao.hydrateRoot=e.hydrateRoot,ao}();const lo=function(e,t,n){let i=Promise.resolve();function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then((t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)}))};var co=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var o=i[n];e.call(t,o[1],o[0])}},t}()}(),uo="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,ho="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),po="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(ho):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var go=["top","right","bottom","left","width","height","size","weight"],mo="undefined"!=typeof MutationObserver,fo=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,o=0;function r(){n&&(n=!1,e()),i&&s()}function a(){po(r)}function s(){var e=Date.now();if(n){if(e-o<2)return;i=!0}else n=!0,i=!1,setTimeout(a,t);o=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){uo&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mo?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){uo&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;go.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),yo=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var o=i[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},bo=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||ho},vo=Ro(0,0,0,0);function wo(e){return parseFloat(e)||0}function xo(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+wo(e["border-"+n+"-width"])}),0)}function No(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return vo;var i=bo(e).getComputedStyle(e),o=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var o=i[n],r=e["padding-"+o];t[o]=wo(r)}return t}(i),r=o.left+o.right,a=o.top+o.bottom,s=wo(i.width),l=wo(i.height);if("border-box"===i.boxSizing&&(Math.round(s+r)!==t&&(s-=xo(i,"left","right")+r),Math.round(l+a)!==n&&(l-=xo(i,"top","bottom")+a)),!function(e){return e===bo(e).document.documentElement}(e)){var d=Math.round(s+r)-t,c=Math.round(l+a)-n;1!==Math.abs(d)&&(s-=d),1!==Math.abs(c)&&(l-=c)}return Ro(o.left,o.top,s,l)}var So="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof bo(e).SVGGraphicsElement}:function(e){return e instanceof bo(e).SVGElement&&"function"==typeof e.getBBox};function ko(e){return uo?So(e)?function(e){var t=e.getBBox();return Ro(0,0,t.width,t.height)}(e):No(e):vo}function Ro(e,t,n,i){return{x:e,y:t,width:n,height:i}}var To=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ro(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=ko(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_o=function(e,t){var n,i,o,r,a,s,l,d=(i=(n=t).x,o=n.y,r=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),yo(l,{x:i,y:o,width:r,height:a,top:o,right:i+r,bottom:a+o,left:i}),l);yo(this,{target:e,contentRect:d})},Co=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new co,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof bo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new To(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof bo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new _o(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Lo="undefined"!=typeof WeakMap?new WeakMap:new co,Oo=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=fo.getInstance(),i=new Co(t,n,this);Lo.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){Oo.prototype[e]=function(){var t;return(t=Lo.get(this))[e].apply(t,arguments)}}));var Ao=void 0!==ho.ResizeObserver?ho.ResizeObserver:Oo;window.ResizeObserver||(window.ResizeObserver=Ao);var jo=function(){return jo=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jo.apply(this,arguments)},Mo=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};p("y",(function(e){var t=e.isOpen,n=e.onClose,i=e.children,o=e.sx,r=e.size,a=e.zIndex,s=Mo(e,["isOpen","onClose","children","sx","size","zIndex"]),l=y("RmgAppClip",{size:r,zIndex:null!=a?a:1500}),d=Ee.useRef(null);return b({ref:d,handler:n}),v.jsx(w,{children:v.jsxs(x.div,jo({className:t?"show-app-clip":"",sx:l},s,{children:[v.jsx("div",{className:"rmg-app-clip__overlay"}),v.jsx(N,{isDisabled:!t,children:v.jsx("div",{className:"rmg-app-clip__container",children:v.jsx(x.section,{ref:d,role:"dialog",className:"rmg-app-clip__content",sx:o,children:i})})})]}))})}));const[Eo,Po]=function(){const e=Ee.createContext(void 0);return e.displayName="AutoCompleteContext",[e.Provider,function t(){var n;const i=Ee.useContext(e),o="useAutoCompleteContext: `context` is undefined. Seems you forgot to wrap all autoomplete components within `<AutoComplete />`";if(!i){const e=new Error(o);throw e.name="ContextError",null==(n=Error.captureStackTrace)||n.call(Error,e,t),e}return i},e]}();function zo(e){return null!=e&&e.length?e[e.length-1]:void 0}function Io(e,t,n=1,i=!0){if(0===t)return-1;let o=e+n;return-1===e&&(o=n>0?0:t-1),o=i?(o%t+t)%t:Math.max(0,Math.min(o,t-1)),o}function $o(e,t,n=!0){const i=function(e,t,n=!0){return Io(e,t,-1,n)}(e,t.length,n);return t[i]}function Bo(e){return Array.isArray(e)}function Do(e){return null!==e&&"object"==typeof e&&!Bo(e)}function Go(e){return Bo(e)?function(e){return Bo(e)&&0===e.length}(e):Do(e)?function(e){return Do(e)&&0===Object.keys(e).length}(e):null==e||""===e}function Fo(e){return typeof e>"u"}function Ho(e){return typeof e<"u"}function Uo(e,t){const n=g({},e);return t.forEach((e=>{delete n[e]})),n}function Vo(e,...t){return function(e){return"function"==typeof e}(e)?e(...t):e}var Wo=function(e,t){for(var n,i=0,o=Ee.Children.toArray(e);i<o.length;i++){var r=o[i];if(t(r))return r;if(null!==(n=r.props)&&void 0!==n&&n.children){var a=Wo(r.props.children,t);if(a)return a}}},qo=function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},Jo=function(e,t){for(var n,i=[],o=0,r=Ee.Children.toArray(e);o<r.length;o++){var a=r[o];t(a)&&(i=qo(qo([],i),[a])),null!==(n=a.props)&&void 0!==n&&n.children&&(i=qo(qo([],i),Jo(a.props.children,t)))}return i};function Ko(e,t,n=2){function i(e,t){e=" ".repeat(t-1)+e.toLowerCase()+" ".repeat(t-1);let n=new Array(e.length-t+1);for(let i=0;i<n.length;i++)n[i]=e.slice(i,i+t);return n}if(null==e||!e.length||null==t||!t.length)return 0;let o=e.length<t.length?e:t,r=e.length<t.length?t:e,a=i(o,n),s=i(r,n),l=new Set(a),d=s.length,c=0;for(let u of s)l.delete(u)&&c++;return c/d}const Qo=e=>{var t;return null==(t="string"==typeof e||"number"==typeof e?e:e[Object.keys(e)[0]])?void 0:t.toString()},Zo=(e,t)=>"string"!=typeof e||Go(t)?e:e.toString().replace(new RegExp(function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(t),"gi"),(e=>`<mark>${e}</mark>`)),Yo=(e,t,n)=>(null==t?void 0:t.toLowerCase().indexOf(null==e?void 0:e.toLowerCase()))>=0||(null==n?void 0:n.toLowerCase().indexOf(null==e?void 0:e.toLowerCase()))>=0||Ko(e,t)>=.5||Ko(e,n)>=.5;const Xo=(e,t)=>Wo(e,(e=>{var n;return"AutoCompleteItem"===(null==(n=null==e?void 0:e.type)?void 0:n.displayName)&&e.props.value===(null==t?void 0:t.value)})),er=(e,t)=>Wo(e,(e=>{var n;return"AutoCompleteItem"===(null==(n=null==e?void 0:e.type)?void 0:n.displayName)&&e.props.value===(null==t?void 0:t.value)})),tr=(e,t)=>{const n={},i={},{field:o}=e;return o&&Object.keys(o).forEach((e=>{if(!1===e.startsWith("--input"))n[e]=o[e];else{let t=o[e];const n=e.replace("--input-","").replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}));-1!==t.indexOf(".")&&(t=t.substring(t.indexOf(".")+1)),i[n]=t}})),g(g({},t&&g(g(g({},n),i),{},{_focusWithin:e.field._focus,pos:"relative",minH:9,py:1.5,spacing:3})),{},{cursor:"text",h:"fit-content"})};function nr(t){var i;let{prefocusFirstItem:o=!0,closeOnBlur:r=!0,creatable:a,emphasize:s,emptyState:l=!0,defaultEmptyStateProps:d={},freeSolo:c,isReadOnly:u,listAllValuesOnFocus:p,maxSuggestions:m,multiple:f,closeOnSelect:y=!f,defaultValue:b,defaultValues:v=(b?[b]:[]),onReady:w,defaultIsOpen:x,disableFilter:N,isLoading:S=!1,placement:k="bottom",restoreOnBlurIfEmpty:R=!c,shouldRenderSuggestions:T=(()=>!0),submitKeys:_=[],suggestWhenEmpty:C,value:L,values:O=(L?"string"==typeof L?[L]:[...L]:void 0)}=t;c=c||!!f||t.freeSolo;const{isOpen:A,onClose:j,onOpen:M}=B({defaultIsOpen:x}),E=Ee.useMemo((()=>Vo(t.children,{isOpen:A,onClose:j,onOpen:M})),[t.children,A]),P=Ee.useMemo((()=>(e=>Jo(e,(e=>{var t;return"AutoCompleteItem"===(null==(t=null==e?void 0:e.type)?void 0:t.displayName)})).map((e=>{const t=function(e,t){const n={};return["value","label","fixed","disabled"].forEach((t=>{t in e&&(n[t]=e[t])})),n}(e.props),{getValue:n=Qo}=e.props,i=n(t.value);return g(g({},Ho(t.label)?t:g(g({},t),{},{label:i})),{},{value:i,originalValue:t.value})})))(E)),[E]),z=Ee.useRef(null),I=Ee.useRef(null),$=Ee.useRef(null),F=Ee.useRef(null),[H,U]=Ee.useState(!1);let V="";f?V="":Fo(v)?Fo(O)||(V=O[0]):V=v[0];const[W,q]=Ee.useState(null!=V?V:""),J=Ee.useMemo((()=>N?P:P.filter((e=>e.fixed||Vo(t.filter||Yo,W,e.value,e.label)||H)).filter(((e,t)=>!m||(e.fixed||t<m)))),[W,P,H,m,N]),K=a?[{value:W,noFilter:!0,creatable:!0}]:[],Q=Ee.useMemo((()=>[...J,...K]),[J,K]),[Z,Y]=D({defaultValue:v.map((e=>null==e?void 0:e.toString())),value:O,onChange:e=>{const n=Q.find((t=>t.value===e[0]));if(!n)return;const i=e.map((e=>Q.find((t=>t.value===e))));Vo(t.onChange,f?e:e[0],f?i:n)}});Ee.useEffect((()=>{0===Q.length&&!l&&A&&j()}),[Q.length,l,A]);const[X,ee]=Ee.useState(o?null==(i=P[0])?void 0:i.value:null),te=t.maxSelections||Z.length+1,ne=Q.findIndex((e=>e.value===X)),ie=function(e,t,n=!0){return t[Io(e,t.length,1,n)]}(ne,Q,!!t.rollNavigation),oe=$o(ne,Q,!!t.rollNavigation),re=function(e){return null==e?void 0:e[0]}(Q),ae=zo(Q),se=!Q.some((e=>e.value===X));Ee.useEffect((()=>{var e;se&&ee(o?null==(e=P[0])?void 0:e.value:null)}),[se]),G((()=>{o&&ee(null==re?void 0:re.value)}),[W,null==re?void 0:re.value]),Ee.useEffect((()=>{var e;!A&&o&&ee(null==(e=P[0])?void 0:e.value)}),[A]),Ee.useEffect((()=>{A&&p&&U(!0)}),[A,p,U]),Ee.useEffect((()=>{const e=P.find((e=>e.value===X));Vo(t.onOptionFocus,{item:e,focusMethod:F.current,isNewInput:null==e?void 0:e.creatable})}),[X,t.onOptionFocus]);const le=e=>{var n,i;const o=Q.find((t=>t.value===e)),r=(null==o?void 0:o.label)||(null==o?void 0:o.value);q((()=>f?"":null!=r?r:"")),!Z.includes(e)&&Z.length<te&&Y((t=>f?[...t,e]:[e])),f&&(null==(n=z.current)||n.focus()),t.focusInputOnSelect&&(null==(i=z.current)||i.focus()),Vo(t.onSelectOption,{item:o,selectMethod:F.current,isNewInput:null==o?void 0:o.creatable}),null!=o&&o.creatable&&Vo(t.onCreateOption,{item:Uo(o,["noFilter"]),selectMethod:F.current}),y&&j()},de=(e,n)=>{var i;Y((n=>{let i=P.find((t=>t.value===e));return!i&&!0===a&&(i={label:e,value:e}),i?(Vo(t.onTagRemoved,e,i,n),n.filter((t=>t!==e))):n}));const o=P.find((t=>t.value===e)),r=(null==o?void 0:o.label)||(null==o?void 0:o.value);W===r&&q(""),n&&(null==(i=z.current)||i.focus())},ce=f?Z.map((e=>{var t;return{label:(null==(t=P.find((t=>t.value===(null==e?void 0:e.toString()))))?void 0:t.label)||e,onRemove:()=>de(e)}})):[];return Ee.useEffect((()=>{Vo(w,{tags:ce})}),[Z]),{autoCompleteProps:t,children:E,filteredList:Q,filteredResults:J,focusedValue:X,defaultEmptyStateProps:d,getEmptyStateProps:e=>{if(Q.every((e=>e.noFilter))&&l&&!a)return"boolean"==typeof l?e:Vo(l,{query:W})},getGroupProps:e=>{const t=((e,t)=>Ho(Wo(e,(e=>{var n,i;const o=Vo((null==(n=e.props)?void 0:n.getValue)||Qo,(null==(i=e.props)?void 0:i.value)||{});return t.some((e=>e.value===o))}))))(e.children,Q);return{divider:{hasFirstChild:Xo(e.children,re),hasLastChild:er(e.children,zo(Q.filter((e=>Fo(null==e?void 0:e.noFilter)))))},group:{display:t?"initial":"none"}}},getInputProps:(n,i)=>{const{onBlur:o,onChange:a,onFocus:s,onKeyDown:l,variant:d}=n,c=h(n,e);return{wrapper:g(g({ref:I,onClick:()=>{var e;null==(e=null==z?void 0:z.current)||e.focus()}},tr(i,f)),c),input:g({isReadOnly:u,onFocus:e=>{Vo(s,e),t.openOnFocus&&!u&&M(),t.selectOnFocus&&e.target.select(),p&&U(!0)},onBlur:e=>{var t,n;Vo(o,e);const i=e.relatedTarget===(null==$?void 0:$.current)||(null==(t=$.current)?void 0:t.contains(e.relatedTarget)),a=null==(n=I.current)?void 0:n.contains(e.relatedTarget);if(!i&&!a&&(r&&j(),!Z.includes(e.target.value)&&R)){const e=zo(Z),t=P.find((t=>t.value===e)),n=(null==t?void 0:t.label)||(null==t?void 0:t.value)||"";q(n)}},onChange:e=>{const t=e.target.value;Vo(a,e),q(t);const n=Go(t);!Vo(T,t)||n&&!C?j():M(),U(!1)},onKeyDown:e=>{var t;Vo(l,e),F.current="keyboard";const{key:n}=e,i=Q[ne];return["Enter",..._].includes(n)?(!i||null!=i&&i.disabled||!A?null==(t=z.current)||t.focus():le(null==i?void 0:i.value),void e.preventDefault()):"ArrowDown"===n?(A?ee(null==ie?void 0:ie.value):M(),void e.preventDefault()):"ArrowUp"===n?(A?ee(null==oe?void 0:oe.value):M(),void e.preventDefault()):"Tab"!==n?"Home"===n?(ee(null==re?void 0:re.value),void e.preventDefault()):"End"===n?(ee(null==ae?void 0:ae.value),void e.preventDefault()):void("Escape"===n&&(j(),e.preventDefault())):void(!A||!i||null!=i&&i.disabled?j():le(null==i?void 0:i.value))},value:W,variant:f?"unstyled":d},c)}},getItemProps:(e,t)=>{var i;const{_fixed:o,_focus:r,children:a,disabled:l,label:d,value:c,fixed:u,getValue:p=Qo,onClick:m,onMouseOver:f,sx:y}=e,b=h(e,n),v=t?c:null==(i=p(c))?void 0:i.toString(),w=v===X,x=Q.findIndex((e=>e.value===v))>=0,N=a||d||v;return{item:g(g(g(g({},"string"==typeof N&&s?{dangerouslySetInnerHTML:{__html:Zo(N,W)}}:{children:N}),{},{"aria-selected":Z.includes(v),"aria-disabled":l,_disabled:{opacity:.4,cursor:"not-allowed",userSelect:"none"},onClick:e=>{var t;Vo(m,e),l?null==(t=z.current)||t.focus():le(v)},onMouseOver:e=>{Vo(f,e),ee(v),F.current="mouse"},sx:g(g({},y),{},{mark:g({color:"inherit",bg:"transparent"},Do(s)?s:{fontWeight:s?"extrabold":"inherit"})})},w&&(r||{bg:"whiteAlpha.100",_light:{bg:"gray.200"}})),u&&o),b),root:{isValidSuggestion:x,value:v}}},inputRef:z,interactionRef:F,isLoading:S,isOpen:A,itemList:P,listRef:$,onClose:j,onOpen:M,placement:k,query:W,removeItem:de,resetItems:e=>{var t;Y([]),e&&(null==(t=z.current)||t.focus())},setQuery:q,tags:ce,value:L,values:Z}}const ir=S(((e,t)=>{const n=nr(e),{children:i,isOpen:o,onClose:r,onOpen:a,placement:s,resetItems:l,removeItem:d}=n;Ee.useImperativeHandle(t,(()=>({resetItems:l,removeItem:d})));const{matchWidth:c=!0}=n.autoCompleteProps;return v.jsx(Eo,{value:n,children:v.jsx(C,{isLazy:!0,isOpen:o,autoFocus:!1,placement:s,closeOnBlur:!0,matchWidth:c,children:v.jsx(x.div,{w:"full",ref:t,children:i})})})}));ir.displayName="AutoComplete";const or=S(((e,t)=>{const{focusedValue:n,getItemProps:o,interactionRef:r}=Po(),a=Ee.useRef(),s=L(t,a),l=o(e),{isValidSuggestion:d,value:c}=l.root,u=n===c;Ee.useEffect((()=>{var e;u&&"keyboard"===r.current&&(null==(e=null==a?void 0:a.current)||e.scrollIntoView({behavior:"smooth",block:"nearest"}))}),[u,r]),Ee.useEffect((()=>{"string"!=typeof c&&console.warn("wow"),"string"!=typeof c&&Fo(e.getValue)&&console.error("You must define the `getValue` prop, when an Item's value is not a string")}),[]);const p=l.item,{children:m,dangerouslySetInnerHTML:f}=p,y=Uo(h(p,i),["groupId"]);return d?v.jsx(O,g(g(g({ref:s},rr),y),{},{children:m||v.jsx("span",{dangerouslySetInnerHTML:f})})):null}));or.displayName="AutoCompleteItem";const rr={mx:"2",px:"2",py:"2",rounded:"md",cursor:"pointer"},ar=S(((e,t)=>{const{children:n,showDivider:i}=e,r=Uo(h(e,o),["groupSibling"]),{getGroupProps:a}=Po(),{group:s}=a(e),l=dr(e);return v.jsxs(A,g(g(g({ref:t},s),r),{},{children:[v.jsx(j,g({},l.top)),n,v.jsx(j,g({},l.bottom))]}))})),sr=S(((e,t)=>v.jsx(O,g(g(g({},lr),e),{},{ref:t}))));ar.displayName="AutoCompleteGroup",sr.displayName="AutoCompleteGroupTitle";const lr={ml:5,my:1,fontSize:"xs",letterSpacing:"wider",fontWeight:"extrabold",textTransform:"uppercase"},dr=e=>{const{getGroupProps:t}=Po(),n=e.groupSibling,{divider:{hasFirstChild:i,hasLastChild:o}}=t(e),r={my:2,borderColor:e.dividerColor};return{top:g(g({},r),{},{mb:4,display:!e.showDivider||i?"none":""}),bottom:g(g({},r),{},{display:!e.showDivider||o||n?"none":""})}},cr=S(((e,t)=>{const{isLoading:n}=Po(),{loadingIcon:i}=e,o=h(e,r);return v.jsxs(F,{children:[v.jsx(H,g(g({},o),{},{ref:t})),n&&v.jsx(U,{children:i||v.jsx($,{})})]})})),ur=S(((e,t)=>{const{autoCompleteProps:n,inputRef:i,getInputProps:o,tags:r,setQuery:l,value:d,itemList:c}=Po(),{children:u,isInvalid:p,hidePlaceholder:m}=e,f=h(e,a),{value:y}=f;Ee.useEffect((()=>{if(void 0!==d&&("string"==typeof d||d instanceof String)){const e=c.find((e=>e.value===d)),t=void 0===e?d:e.label;l(t)}}),[d]),Ee.useEffect((()=>{void 0!==y&&("string"==typeof y||y instanceof String)&&l(y)}),[y]);const b=M("Input",e);let{wrapper:w,input:x}=o(f,b);const{ref:N}=w,S=h(w,s),R=L(t,i),T=Vo(u,{tags:r});m&&(x=g(g({},x),{},{placeholder:Array.isArray(T)&&T.length?void 0:x.placeholder}));const _=v.jsx(cr,g(g({isInvalid:p},x),{},{ref:R})),C=v.jsxs(E,g(g({"aria-invalid":p},S),{},{ref:N,children:[T,v.jsx(k,g(g({as:cr},x),{},{ref:R}))]}));return v.jsx(P,{children:n.multiple?C:_})}));ur.displayName="Input",ur.id="Input";const hr=e=>{const{getEmptyStateProps:t,defaultEmptyStateProps:n}=Po(),i=t(v.jsx(O,g(g(g({},pr),n),{},{children:"No options found!"})));return v.jsx(A,g(g({},e),{},{children:i}))},pr={fontSize:"sm",align:"center",justify:"center",fontWeight:"bold",fontStyle:"italic"},gr=["AutoCompleteGroup","AutoCompleteItem","AutoCompleteCreatable"],mr=S(((e,t)=>{const{children:n,loadingState:i}=e,o=h(e,l),{listRef:r,isLoading:a}=Po(),s=L(t,r),[d,c]=(e=>{const t=Pe.Children.map(e,((t,n)=>{var i;if("AutoCompleteGroup"===(null==(i=null==t?void 0:t.type)?void 0:i.displayName)){const i=Pe.Children.toArray(e)[n+1];return Pe.cloneElement(t,{groupSibling:!!i&&"AutoCompleteGroup"===i.type.displayName})}return t})),n=Pe.Children.toArray(t).filter((e=>{var t;return!gr.includes(null==(t=null==e?void 0:e.type)?void 0:t.displayName)}));return[Pe.Children.toArray(t).filter((e=>{var t;return gr.includes(null==(t=null==e?void 0:e.type)?void 0:t.displayName)})),n]})(n);return v.jsxs(z,g(g(g({ref:s,w:"inherit"},fr),o),{},{children:[a&&v.jsx(I,{children:i||v.jsx($,{size:"md"})}),!a&&v.jsxs(v.Fragment,{children:[d,v.jsx(hr,{}),c]})]}))}));mr.displayName="AutoCompleteList";const fr={py:"4",opacity:"0",bg:"#232934",rounded:"md",maxH:"350px",border:"none",shadow:"base",zIndex:"popover",overflowY:"auto",_light:{bg:"#ffffff"},_focus:{boxShadow:"none"}};Ee.memo((e=>{const{label:t,onRemove:n,disabled:i}=e,o=h(e,d);return v.jsx(k,{children:v.jsxs(R,g(g(g({borderRadius:"md",fontWeight:"normal"},i&&yr),o),{},{children:[v.jsx(T,{children:t}),v.jsx(_,g({onClick:()=>!i&&Vo(n),cursor:"pointer"},i&&yr))]}))})}));const yr={cursor:"text",userSelect:"none",opacity:.4,_focus:{boxShadow:"none"}};var br=function(){return br=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},br.apply(this,arguments)},vr=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};var wr=function(e){var t=e.value,n=vr(e,["value"]),i=Po().setQuery;return Ee.useEffect((function(){i(null!=t?t:"")}),[t]),v.jsx(ur,br({},n))},xr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Nr=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))};var Sr=function(){return Sr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sr.apply(this,arguments)},kr=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},Rr=(p("b3",(function(e){var t=e.children,n=e.sx,i=kr(e,["children","sx"]),o=y("RmgCard");return v.jsx(O,Sr({sx:Sr(Sr({},o),n)},i,{children:t}))})),function(){return Rr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Rr.apply(this,arguments)}),Tr=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},_r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Cr=p("b9",Ee.forwardRef((function(e,t){var n=e.validator,i=e.onDebouncedChange,o=e.delay,r=e.optionList,a=e.defaultValue;e.onChange;var s=Tr(e,["validator","onDebouncedChange","delay","optionList","defaultValue","onChange"]),l=Ee.useRef(null),d=L(l,t),c=Ee.useRef("datalist-"+(new Date).valueOf()),u=_r(Ee.useState(!1),2),h=u[0],p=u[1],g=Ee.useRef();Ee.useEffect((function(){l.current&&(l.current.value=(null==a?void 0:a.toString())||"")}),[a]);return v.jsxs(v.Fragment,{children:[v.jsx(H,Rr({ref:d,list:c.current,variant:"flushed",size:"sm",h:6,onChange:function(e){var t=e.target.value;window.clearTimeout(g.current),n&&p(!n(t)),g.current=window.setTimeout((function(){null==i||i(t),g.current=void 0}),null!=o?o:500)},onBlur:function(e){var t=e.target.value;void 0!==g.current&&(window.clearTimeout(g.current),n&&p(!n(t)),null==i||i(t),g.current=void 0)},isInvalid:h},s)),r&&v.jsx("datalist",{id:c.current,children:null==r?void 0:r.map((function(e,t){return v.jsx("option",{children:e},t)}))})]})}))),Lr=function(){return Lr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lr.apply(this,arguments)},Or=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},Ar=Ee.forwardRef((function(e,t){var n=e.onDebouncedChange,i=e.defaultValue;e.onChange;var o=Or(e,["onDebouncedChange","defaultValue","onChange"]),r=Ee.useRef(null),a=L(r,t),s=Ee.useRef();Ee.useEffect((function(){r.current&&(r.current.value=(null==i?void 0:i.toString())||"")}),[i]);return v.jsx(q,Lr({ref:a,variant:"flushed",size:"sm",resize:"none",onChange:function(e){var t=e.target.value;window.clearTimeout(s.current),s.current=window.setTimeout((function(){null==n||n(t)}),500)}},o))})),jr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Mr=function(e){switch(e){case Ht.DEV:return"red";case Ht.UAT:return"orange";case Ht.PRD:return"green"}};var Er=function(e,t,n){var i=new Blob([n],{type:t});Pr(e,i)},Pr=function(e,t){var n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)},zr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function Ir(e){var t=e.cancelRef,n=e.isOpen,i=e.onClose,o=zr(Ee.useState(!1),2),r=o[0],a=o[1];return v.jsxs(ee,{leastDestructiveRef:t,isOpen:n,onClose:i,children:[v.jsx(te,{}),v.jsxs(ne,{children:[v.jsx(ie,{children:"Warning "}),v.jsx(oe,{}),v.jsxs(re,{sx:{"& p":{my:1}},children:[v.jsx(ae,{children:"Are you sure you want to reset the app? The webpage local storage for this app will be cleared. A copy of the local storage will be downloaded and it may be used for restoration (varies with app)."}),v.jsx(ae,{children:""}),v.jsx(ae,{children:""})]}),v.jsxs(se,{children:[v.jsx(W,{ref:t,onClick:i,children:"Cancel"}),v.jsx(W,{isLoading:r,colorScheme:"red",ml:3,onClick:function(){a(!0);var e=Jn.storage.getAll(),t=Jn.getAppName(),n="".concat(t,"_BACKUP_").concat((new Date).toISOString(),".json");Er(n,"application/json",JSON.stringify(e)),Jn.storage.clear(),setTimeout((function(){window.location.reload()}),2e3)},children:"Confirm and reload"})]})]})]})}var $r=function(){return $r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$r.apply(this,arguments)},Br=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},Dr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function Gr(e){var t=e.error,n=e.errorInfo,i=e.allowReset,o=e.sx,r=Br(e,["error","errorInfo","allowReset","sx"]),a=y("RmgErrorBoundary"),s=le("primary.500","primary.300"),l=Dr(Ee.useState(!1),2),d=l[0],c=l[1],u=Ee.useRef(null),h=function(e){return v.jsx(de,{color:s,role:"button",onClick:function(){return c(!0)},children:e})},p=Jn.getAppName(),g=v.jsx(de,{color:s,href:"https://github.com/railmapgen/".concat("rmg-home"===p?"railmapgen.github.io":p,"/issues"),isExternal:!0,children:"GitHub Issue"});return v.jsxs(ce,$r({status:"error",sx:$r($r({},a),o)},r,{children:[v.jsx(ue,{}),v.jsx(he,{children:"Something went wrong!"}),v.jsxs(pe,{children:[v.jsxs(ae,{children:["Please try to refresh or re-import your configuration files. If the issue still persists, please consider upgrading your browser",i?v.jsxs(v.Fragment,{children:[" or ",h("reset this app")]}):"",". Should you need any help, please contact us by submitting an issue in ",g," with the details shown below."]}),v.jsxs(ae,{children:["",i?v.jsxs(v.Fragment,{children:["",h("")]}):""," ",g,"  Issue "]}),v.jsxs(ae,{children:["",i?v.jsxs(v.Fragment,{children:["",h("")]}):""," ",g,"  Issue "]}),v.jsxs(ae,{as:"details",children:[null==t?void 0:t.toString(),v.jsx("br",{}),null==n?void 0:n.componentStack]}),i&&v.jsx(Ir,{cancelRef:u,isOpen:d,onClose:function(){return c(!1)}})]})]}))}var Fr,Hr=(Fr=function(e,t){return Fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Fr(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Fr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ur=function(){return Ur=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ur.apply(this,arguments)},Vr=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},Wr=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasError:!1,error:null,errorInfo:null},n}return Hr(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}},t.prototype.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},t.prototype.render=function(){var e=this.props,t=e.children,n=e.suspenseFallback,i=e.allowReset,o=Vr(e,["children","suspenseFallback","allowReset"]);return this.state.hasError?v.jsx(Gr,Ur({error:this.state.error,errorInfo:this.state.errorInfo,allowReset:i},o)):n?v.jsx(Ee.Suspense,{fallback:n,children:t}):t},t}(Pe.Component),qr=function(){return qr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qr.apply(this,arguments)},Jr=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},Kr=p("U",(function(e){var t=e.label,n=e.children;e.width;var i=e.noLabel,o=e.oneLine,r=e.helper,a=e.errorMessage,s=e.className,l=Jr(e,["label","children","width","noLabel","oneLine","helper","errorMessage","className"]),d=y("RmgLabel");return v.jsxs(ge,qr({className:"".concat(o?"rmg-label__one-line":""," ").concat(null!=s?s:""),"aria-label":t,sx:d,isInvalid:!!a},l,{children:[!i&&v.jsx(me,{size:"xs",children:t}),n,a?v.jsx(fe,{children:a}):r?v.jsx(ye,{children:r}):v.jsx(v.Fragment,{})]}))})),Qr=function(){return Qr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qr.apply(this,arguments)},Zr=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},Yr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function Xr(e){var t=e.defaultValue,n=e.options,i=e.disabledOptions,o=Zr(e,["defaultValue","options","disabledOptions"]),r=Ee.useRef(null);Ee.useEffect((function(){r.current&&(r.current.value=(null==t?void 0:t.toString())||"")}),[t]);var a=function(e,t){return v.jsx("option",{value:e,disabled:void 0!==(null==i?void 0:i.find((function(t){return t.toString()===e}))),children:t},e)};return v.jsx(be,Qr({ref:r,variant:"flushed",size:"sm",h:6},o,{children:Object.entries(n).map((function(e){var t=Yr(e,2),n=t[0],i=t[1];return"object"==typeof i?v.jsx("optgroup",{label:n,children:Object.entries(i).map((function(e){var t=Yr(e,2),n=t[0],i=t[1];return a(n,i)}))},n):a(n,i)}))}))}var ea=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},ta=(p("u",(function(e,t,n){var i=ea(Ee.useState(t()),2),o=i[0],r=i[1];return Ee.useEffect((function(){e.then((function(){console.debug("[rmg-components] Getter updates finished"),r(t())}))}),[]),o})),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}),na=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},ia=function(e,t){var n=ta(Ee.useState(!0),2),i=n[0],o=n[1],r=Ee.useRef([]),a=Ee.useRef(),s=Ee.useCallback((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i?(o(!1),r.current=[],e.apply(void 0,na([],ta(t),!1))):r.current=t}),[i,e]);return Ee.useEffect((function(){if(!i)return a.current=window.setTimeout((function(){o(!0),r.current.length&&e.apply(void 0,na([],ta(r.current),!1))}),t),function(){window.clearTimeout(a.current)}}),[i,t]),s},oa=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function ra(e){var t=e.defaultValue,n=e.min,i=e.max,o=e.step,r=e.onThrottledChange,a=e.leftIcon,s=e.rightIcon,l=y("RmgThrottledSlider"),d=oa(Ee.useState(null!=t?t:0),2),c=d[0],u=d[1];Ee.useEffect((function(){void 0!==t&&c!==t&&u(t)}),[t]);var h=ia(null!=r?r:function(){},500);return v.jsxs(O,{sx:l,children:[a&&v.jsx(ve,{size:"xs",variant:"ghost","aria-label":"Drag left",icon:a,onClick:function(){var e=Math.max(c-10*(null!=o?o:1),null!=n?n:0);null==r||r(e),u(e)}}),v.jsxs(we,{value:c,min:n,max:i,step:o,onChange:function(e){h(e),u(e)},children:[v.jsx(xe,{children:v.jsx(Ne,{})}),v.jsx(Se,{})]}),s&&v.jsx(ve,{size:"xs",variant:"ghost","aria-label":"Drag right",icon:s,onClick:function(){var e=Math.min(c+10*(null!=o?o:1),null!=i?i:100);null==r||r(e),u(e)}})]})}var aa=function(e){var t=e.children,n=e.noWrap,i=y("RmgOutput",{noWrap:n});return v.jsx(x.output,{sx:i,children:t})};function sa(e){var t=e.fields,n=e.noLabel,i=e.minW;return v.jsx(O,{wrap:"wrap",children:t.map((function(e,t){if(e.hidden)return v.jsx(Ee.Fragment,{},t);var o=e.minW||i,r="full"===o;return v.jsx(Kr,{className:r?"mw-full":"",label:e.label,flex:r?void 0:1,minW:r?void 0:o,noLabel:n,oneLine:e.oneLine,helper:e.helper,errorMessage:e.errorMessage,children:function(e){switch(e.type){case"input":return v.jsx(Cr,{placeholder:e.placeholder,defaultValue:e.value,type:e.variant,validator:e.validator,onDebouncedChange:e.onChange,delay:e.debouncedDelay,optionList:e.optionList,isDisabled:e.isDisabled});case"output":return v.jsx(aa,{noWrap:e.noWrap,children:e.value});case"textarea":return v.jsx(Ar,{placeholder:e.placeholder,defaultValue:e.value,onDebouncedChange:e.onChange,isDisabled:e.isDisabled});case"slider":return v.jsx(ra,{defaultValue:e.value,min:e.min,max:e.max,step:e.step,onThrottledChange:e.onChange,leftIcon:e.leftIcon,rightIcon:e.rightIcon,isDisabled:e.isDisabled});case"select":return v.jsx(Xr,{defaultValue:e.value,onChange:function(t){var n,i=t.target.value;return null===(n=e.onChange)||void 0===n?void 0:n.call(e,"number"==typeof e.value?Number(i):i.toString())},options:e.options,disabledOptions:e.disabledOptions,isInvalid:e.isInvalid,isDisabled:e.isDisabled});case"switch":return v.jsx(ke,{isChecked:e.isChecked,isDisabled:e.isDisabled,onChange:function(t){var n,i=t.target.checked;return null===(n=e.onChange)||void 0===n?void 0:n.call(e,i)}});case"custom":return e.component;default:return v.jsx("div",{})}}(e)},t)}))})}var la=function(){return la=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},la.apply(this,arguments)},da=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},ca=function(e){var t=e.sx,n=e.className,i=da(e,["sx","className"]),o=y("RmgWindow");return v.jsx(O,la({className:"rmg-window ".concat(null!=n?n:""),sx:la(la({},o),t)},i))},ua=(p("ak",(function(e){var t=e.isAppClipHeader,n=e.sx,i=e.className,o=da(e,["isAppClipHeader","sx","className"]),r=y("RmgWindowHeader");return v.jsx(O,la({className:"rmg-window__header ".concat(t?"rmg-window__app-clip-header":""," ").concat(null!=i?i:""),sx:la(la({},r),n)},o))})),function(){return ua=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ua.apply(this,arguments)}),ha=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},pa=(p("R",(function(e){var t=e.name,n=e.fg,i=e.bg,o=e.showShortName,r=e.actions,a=ha(e,["name","fg","bg","showShortName","actions"]),s=y("RmgLineBadge");return v.jsxs(K,ua({color:n,bg:i,sx:s},a,{children:[o?function(e){var t,n;return"object"==typeof e?(null===(t=e[0].match(/^[\d\w]+/))||void 0===t?void 0:t[0])||e[0]:(null===(n=e.match(/^[\d\w]+/))||void 0===n?void 0:n[0])||e}(t):"object"==typeof t?t[0]:t,r]}))})),function(){return pa=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pa.apply(this,arguments)}),ga=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},ma=(p("aP",(function(e){var t=e.isOpen,n=e.alwaysOverlay,i=e.width,o=e.sx,r=e.children,a=ga(e,["isOpen","alwaysOverlay","width","sx","children"]),s=y("RmgSidePanel",{width:null!=i?i:320,alwaysOverlay:n});return v.jsx(O,pa({as:"section",className:t?"show-side-panel":"",sx:pa(pa({},s),o),"data-testid":"side-panel-root"},a,{children:v.jsx(O,{className:"rmg-side-panel__inner",children:r})}))})),p("aQ",(function(e){var t=e.onClose,n=e.children;return v.jsxs(ce,{className:"rmg-side-panel__header",status:"info",variant:"solid",size:"xs",children:[v.jsx(ue,{}),n,v.jsx(Re,{onClick:t})]})})),p("aR",(function(e){var t=e.children;return v.jsx("div",{className:"rmg-side-panel__body",children:t})})),p("aS",(function(e){var t=e.children;return v.jsx("div",{className:"rmg-side-panel__footer",children:t})})),function(e){return"dark"===e?"primary.300":"primary.500"}),fa={variants:{flushed:function(e){var t=e.theme,n=e.colorMode;return{field:{_focusVisible:{borderColor:ma(n),boxShadow:"0px 1px 0px 0px ".concat(Te(t,ma(n)))}}}}}},ya={defaultProps:{colorScheme:"primary"}},ba=function(e){return"dark"===e?"primary.300":"primary.500"},va={baseStyle:function(e){var t=e.theme,n=e.colorMode;return{"& .rmg-multi-select__wrapper":{position:"relative",w:"100%",h:"25.75px",transform:"translateY(1.75px)",cursor:"default"},"& .rmg-multi-select__field":{position:"relative",w:"100%",minW:0,outline:0,appearance:"none",transitionProperty:"common",transitionDuration:"normal",pb:"1px",fontSize:"sm",h:"6",borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_active:{borderColor:ba(n),boxShadow:"0px 1px 0px 0px ".concat(Te(t,ba(n)))},_focus:{borderColor:ba(n),boxShadow:"0px 1px 0px 0px ".concat(Te(t,ba(n)))},_focusVisible:{borderColor:ba(n),boxShadow:"0px 1px 0px 0px ".concat(Te(t,ba(n)))},"&.active":{borderColor:ba(n),boxShadow:"0px 1px 0px 0px ".concat(Te(t,ba(n)))},"& > span:last-of-type":{position:"absolute",right:8}},"& .rmg-multi-select__icon-wrapper":{display:"inline-flex",justifyContent:"center",w:6,h:"100%",position:"absolute",right:2,top:0,fontSize:"xl","& svg":{h:"1em",w:"1em"}},"& .chakra-popover__content":{w:"unset",minW:200},"& .chakra-popover__body":{p:0,"li label":{p:2,w:"100%",_hover:{bg:"dark"===n?"whiteAlpha.200":"gray.100"},_active:{bg:"dark"===n?"whiteAlpha.300":"gray.200"}}}}}},wa=function(){return wa=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wa.apply(this,arguments)},xa={overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap"},Na={Input:fa,Checkbox:ya,Select:fa,Slider:{defaultProps:{colorScheme:"primary"}},Switch:ya,Textarea:fa,RmgAgGrid:{baseStyle:{w:"100%",h:"100%","& .ag-header-cell:not(.ag-header-cell-auto-height) .ag-header-cell-comp-wrapper":{height:"unset"},"& .ag-cell":{display:"flex",lineHeight:"unset",alignItems:"center"},"& .ag-cell, & .ag-header-cell":{padding:"8px 9px"},"& .ag-row, & .ag-header":{border:"unset"},"&.ag-theme-alpine .ag-row .ag-cell, &.ag-theme-alpine .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))"},"&.ag-theme-alpine-dark .ag-row .ag-cell, &.ag-theme-alpine-dark .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))"},"& .ag-pinned-left-cols-container, & .ag-pinned-left-header":{boxShadow:"var(--chakra-shadows-lg)",zIndex:1},"&.ag-theme-alpine":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #fff)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #fcfcfc)"}},"&.ag-theme-alpine-dark":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #181d1f)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #222628)"}}}},RmgAppClip:{baseStyle:function(e){var t=e.colorMode,n=e.zIndex;return{display:"none","&.show-app-clip":{display:"block"},"& .rmg-app-clip__overlay":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",zIndex:n,bg:"blackAlpha.600"},"& .rmg-app-clip__container":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:n},"& .rmg-app-clip__content":{display:"flex",w:"100%",maxW:"md",my:16,bg:"light"===t?"white":"gray.700",boxShadow:"lg",borderRadius:"md",overflow:"hidden"}}},sizes:{xs:{"& .rmg-app-clip__content":{maxW:"xs"}},sm:{"& .rmg-app-clip__content":{maxW:"sm"}},lg:{"& .rmg-app-clip__content":{maxW:"lg"}},xl:{"& .rmg-app-clip__content":{maxW:"xl"}},full:{"& .rmg-app-clip__content":{maxW:"100vw",minH:"var(--chakra-vh)",my:0,borderRadius:0}}}},RmgCard:{baseStyle:function(e){return{p:1,my:1,w:"100%",borderRadius:2,bg:"dark"===e.colorMode?"gray.700":"gray.50",boxShadow:"lg"}}},RmgDataTable:{baseStyle:function(e){var t=e.colorMode;return{"& thead":{position:"sticky",top:0,zIndex:10},"& td, th":{borderRight:"1px solid",borderColor:"dark"===t?"whiteAlpha.400":"blackAlpha.200",backgroundColor:"dark"===t?"gray.700":"gray.50",whiteSpace:"nowrap","&:first-of-type":{position:"sticky",left:0,zIndex:1},"&:last-of-type":{borderRight:"none",position:"sticky",right:0,zIndex:1}}}}},RmgEnrichedButton:{baseStyle:function(){return{flexGrow:1,flexDirection:"column",justifyContent:"center",alignItems:"flex-start",h:10,"& span":{maxW:"100%",textOverflow:"ellipsis",overflow:"hidden"},"& span:last-of-type":{fontWeight:"normal",fontSize:"2xs"}}}},RmgErrorBoundary:{baseStyle:{flexDirection:"column",alignItems:"center",maxH:"100%",overflowY:"auto","& .chakra-alert__icon":{w:"40px",h:"40px",mr:0},"& .chakra-alert__title":{mt:4,mb:1,fontSize:"lg"},"& .chakra-alert__desc":{w:"100%","& p":{my:1},"& details":{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"sm"}}}},RmgLabel:{baseStyle:{display:"flex",flexDirection:"column",m:1,w:"unset","& label":{overflow:"hidden",fontSize:12,mr:0,mb:-.5,whiteSpace:"nowrap",textOverflow:"ellipsis"},"&.rmg-label__one-line":{flexDirection:"row",alignItems:"center","& label:first-of-type":{mr:"auto"}}}},RmgLineBadge:{baseStyle:{display:"inline-flex",alignItems:"center","& > button:first-of-type":{ml:1}}},RmgLoader:{baseStyle:{w:"100%",h:"100%",position:"absolute",top:0,right:0,alignItems:"center",justifyContent:"center","& .rmg-loader__backdrop":{position:"absolute",w:"100%",h:"100%",zIndex:1500,bg:"blackAlpha.400"},"& .chakra-progress":{zIndex:2e3}}},RmgMultiSelect:va,RmgOutput:{baseStyle:function(e){var t=e.noWrap;return wa({minH:6,fontSize:"sm"},t?xa:{textWrap:"pretty"})}},RmgPage:{baseStyle:{position:"relative",flexDirection:"column",flex:1,overflow:"hidden",background:"inherit"}},RmgPageHeader:{baseStyle:{alignItems:"center",flexWrap:"wrap",pl:2,pr:3,py:1,zIndex:10}},RmgSection:{baseStyle:{position:"relative",background:"inherit"}},RmgSectionHeader:{baseStyle:{display:"flex",alignItems:"center",flexWrap:"wrap",position:"sticky",top:0,background:"inherit",px:2,py:1,zIndex:5}},RmgSidePanel:{baseStyle:function(e){var t=e.colorMode,n=e.width,i=e.alwaysOverlay;return{height:"100%",position:i?"absolute":{base:"absolute",lg:"relative"},right:i?0:{base:0,lg:"unset"},background:"light"===t?"white":"gray.800",boxShadow:"lg",flexShrink:0,flexDirection:"column",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",zIndex:5,"&.show-side-panel":{maxW:{base:"100%",sm:n},w:{base:"100%",sm:"unset"},visibility:"initial"},"& .rmg-side-panel__inner":{flexDirection:"column",h:"100%",w:{base:"100vw",sm:n}},"& .rmg-side-panel__header":{flexShrink:0,pl:3,pr:1,py:0,"& button":{ml:"auto"}},"& .rmg-side-panel__body":{display:"flex",flexDirection:"column",flex:1,overflowY:"auto",p:1},"& .rmg-side-panel__footer":{display:"flex",justifyContent:"flex-end",p:1}}}},RmgThrottledSlider:{baseStyle:{h:6,alignItems:"center","& .chakra-button:first-of-type":{mr:1},"& .chakra-button:last-of-type":{ml:1}}},RmgWindow:{baseStyle:{position:"relative",flexDirection:"column",height:"100%",overflow:"hidden",background:"inherit"}},RmgWindowHeader:{baseStyle:{px:2,alignItems:"center",zIndex:15,minH:10,transition:"0.3s ease-in-out"}}},Sa=function(){return Sa=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sa.apply(this,arguments)},ka="chakra-ui-color-mode",Ra={primary:Sa({},_e.colors.teal)},Ta={global:{".mw-full":{w:"100%",flexBasis:"100%"}}},_a=function(e){var t,n=e.children;return v.jsx(Le,{theme:Ce({config:(t="system"===Jn.getColourMode(),Jn.isStandaloneWindow()&&(t?window.localStorage.removeItem(ka):window.localStorage.setItem(ka,Jn.getColourMode())),{initialColorMode:"system",useSystemColorMode:t}),colors:Ra,styles:Ta,components:Na}),children:v.jsx(Ca,{children:n})})},Ca=function(e){var t=e.children,n=Oe().setColorMode,i=Ae();return Ee.useEffect((function(){console.log("[rmg-components] RMG theme is initialised with",i.config),Jn.onColourModeChange((function(e){if("system"===e){var t=window.matchMedia("(prefers-color-scheme: dark)").matches;n(t?"dark":"light")}else n(e)}))}),[n]),v.jsx(v.Fragment,{children:t})},La=p("b1",(e=>(e.RailMap="railmap",e.Platform="platform",e))(La||{})),Oa=p("b0",(e=>(e.Metro="metro",e.NationalRail="nationalrail",e.LightRail="lightrail",e.Footpath="footpath",e))(Oa||{})),Aa=p("E",(e=>(e.APP_LOAD="APP_LOAD",e.ADD_STATION="ADD_STATION",e.ADD_LINE="ADD_LINE",e.IMPORT_RMG_PARAM="IMPORT_RMG_PARAM",e.IMPORT_WORK_FROM_GALLERY="IMPORT_WORK_FROM_GALLERY",e.IMPORT_WORK_FROM_SHARE="IMPORT_WORK_FROM_SHARE",e.DOWNLOAD_PARAM="DOWNLOAD_PARAM",e.DOWNLOAD_IMAGES="DOWNLOAD_IMAGES",e.LOAD_TUTORIAL="LOAD_TUTORIAL",e))(Aa||{})),ja=p("P",(e=>(e.LOGIN_STATE="rmp__login_state",e.APP="rmp__app",e.PARAM="rmp__param",e.PARAM_BACKUP="rmp__param__backup",e.DO_NOT_SHOW_RMT_MSG="rmp__doNotShowRMTMsg",e.ACCOUNT="rmg-home__account",e))(ja||{})),Ma=p("C",(e=>(e.Other="other",e.Beijing="beijing",e.Berlin="berlin",e.Chongqing="chongqing",e.Chengdu="chengdu",e.Foshan="foshan",e.Guangzhou="guangzhou",e.Hongkong="hongkong",e.Kunming="kunming",e.London="london",e.Qingdao="qingdao",e.Shanghai="shanghai",e.Shenzhen="shenzhen",e.Singapore="singapore",e.Suzhou="suzhou",e.Taipei="taipei",e.Tokyo="tokyo",e))(Ma||{})),Ea=p("a6",(e=>(e.Shmetro="shmetro",e.Bjsubway="bjsubway",e))(Ea||{}));const Pa="https://railmapgen.org",za=`${Pa}/v1/subscription`,Ia=(p("aw",`${Pa}/v1/randomStationNames`),p("z",`${Pa}/v1/share`),p("j","__TAURI__"in window.parent),{RMP_CLOUD:!1,RMP_EXPORT:!1}),$a=ze({name:"account",initialState:{state:"logged-out",activeSubscriptions:Ia,token:void 0},reducers:{setState:(e,t)=>{e.state=t.payload},setActiveSubscriptions:(e,t)=>{e.activeSubscriptions=t.payload},setToken:(e,t)=>{e.token=t.payload}}}),{setState:Ba,setActiveSubscriptions:Da,setToken:Ga}=$a.actions,Fa=$a.reducer;var Ha=p("M",(e=>(e.black="#000",e.white="#fff",e))(Ha||{}));let Ua={};const Va=async(e,t)=>await(async(e,t)=>{if(e in Ua)return Ua[e];const n=await fetch(e,t),i=await n.json();return Ua[e]=i,i})(`/rmg-palette/resources/palettes/${e}.json`,{signal:t}),Wa=(p("$",(async(e,t,n)=>{const[i,o]=e;if("other"===i)return e;try{const t=(await Va(i)).find((e=>e.id===o));return t?[i,o,t.colour,t.fg||Ha.white]:(console.warn(`[rmg-palette] updateTheme(${i}, ${o}), line does not exist, returning old theme`),e)}catch(jc){throw console.error(`[rmg-palette] updateTheme(${i}, ${o}), unexpected error occurs`,jc),jc}})),p("aE",(e=>{const t=e.currentTarget.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}})),p("X",((e,t,n,i)=>({x:e*n/100+i.x,y:t*n/100+i.y}))),p("ay",((e,t)=>{const n=Math.round(e/t)*t,i=Math.pow(10,(e=>e>=1?0:(e.toString().split(".")[1]||"").replace(/0+$/,"").length)(t));return Math.round(n*i)/i})),p("f",(e=>{let[t,n,i,o]=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];return e.forEachNode(((e,r)=>{const a=document.getElementById(e);if(a){const e=Wa(a);t=Math.min(e.x,t),n=Math.min(e.y,n),i=Math.max(e.x+e.width,i),o=Math.max(e.y+e.height,o)}})),t-=50,n-=50,i+=100,o+=100,{xMin:t,yMin:n,xMax:i,yMax:o}})),p("t",(e=>{var t,n;return{width:(null!==(t=e.width)&&void 0!==t?t:720)-40,height:(null!==(n=e.height)&&void 0!==n?n:1280)-40}})),p("ax",((e,t,n,i)=>({xMin:e.x,yMin:e.y,xMax:n*t/100+e.x,yMax:i*t/100+e.y}))),p("aK",((e,t)=>{const{xMin:n,yMin:i,xMax:o,yMax:r}=t;if(0===e.a)return[n,o,-e.c/e.b,-e.c/e.b];if(0===e.b)return[-e.c/e.a,-e.c/e.a,i,r];{const t=-e.a/e.b,i=-e.c/e.b;return[n,o,t*n+i,t*o+i]}})),e=>{const t=e.getBBox(),n=e.ownerSVGElement,i=e.parentNode.getScreenCTM().inverse().multiply(e.getScreenCTM()),o=[n.createSVGPoint(),n.createSVGPoint(),n.createSVGPoint(),n.createSVGPoint()];o[0].x=t.x,o[0].y=t.y,o[1].x=t.x+t.width,o[1].y=t.y,o[2].x=t.x+t.width,o[2].y=t.y+t.height,o[3].x=t.x,o[3].y=t.y+t.height;let[r,a,s,l]=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];return o.forEach((e=>{e=e.matrixTransform(i),r=Math.min(r,e.x),s=Math.max(s,e.x),a=Math.min(a,e.y),l=Math.max(l,e.y)})),t.x=r,t.width=s-r,t.y=a,t.height=l-a,t}),qa=(p("ae",navigator.platform.startsWith("Mac")),async(e,t="SHA-256")=>{const n=(new TextEncoder).encode(e),i=await crypto.subtle.digest(t,n);return Array.from(new Uint8Array(i)).map((e=>e.toString(16).padStart(2,"0"))).join("")});p("bb",(()=>`#${Math.floor(16777215*Math.random()).toString(16).padStart(6,"0")}`)),p("bc",(e=>(299*parseInt(e.slice(1,3),16)+587*parseInt(e.slice(3,5),16)+114*parseInt(e.slice(5,7),16))/1e3>=128?Ha.black:Ha.white));var Ja=p("O",(e=>(e.SAVE_CHANGED="SAVE_CHANGED",e))(Ja||{}));const Ka=p("G",new BroadcastChannel("rmt-save-manager"));let Qa,Za;const Ya=p("a1",(async(e,t)=>{const n=await fetch(za,{headers:{accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(200!==n.status)return Kn.debug("Token is invalid, expiring the login state"),e(Ba("expired")),void e(Da(Ia));e(Ba("free"));const i=(await n.json()).subscriptions,o=structuredClone(Ia);for(const r of i){const t=r.type;t in o&&(e(Ba("subscriber")),o[t]=!0)}e(Da(o)),Kn.debug(`Token is valid, setting active subscriptions: ${JSON.stringify(o)}`)})),Xa=e=>{const t=t=>{if(!t)return Kn.debug("Account string is empty, logging out"),e.dispatch(Ga(void 0)),e.dispatch(Ba("logged-out")),void e.dispatch(Da(Ia));const n=JSON.parse(t),{token:i}=n;(async(e,t)=>{Kn.debug(`Updating token to: ${t}`),e.dispatch(Ga(t))})(e,i),Ya(e.dispatch,i)};let n=localStorage.getItem(ja.ACCOUNT);t(null!=n?n:void 0),window.onstorage=()=>{const e=localStorage.getItem(ja.ACCOUNT);n!==e&&(n=e,Kn.debug(`Account string changed to: ${e}`),t(null!=e?e:void 0))}};let es=p("n",((e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t}));var ts=p("L",(e=>(e.Diagonal="diagonal",e.Perpendicular="perpendicular",e.RotatePerpendicular="ro-perp",e.Simple="simple",e))(ts||{})),ns=p("o",(e=>(e.SingleColor="single-color",e.ShanghaiSuburbanRailway="sh-sub-rwy",e.ShmetroVirtualInt="shmetro-virtual-int",e.GzmtrVirtualInt="gzmtr-virtual-int",e.GZMTRLoop="gzmtr-loop",e.ChinaRailway="china-railway",e.BjsubwaySingleColor="bjsubway-single-color",e.BjsubwayTram="bjsubway-tram",e.BjsubwayDotted="bjsubway-dotted",e.DualColor="dual-color",e.River="river",e.MTRRaceDays="mtr-race-days",e.MTRLightRail="mtr-light-rail",e.MTRUnpaidArea="mtr-unpaid-area",e.MTRPaidArea="mtr-paid-area",e.MRTUnderConstruction="mrt-under-constr",e.MRTSentosaExpress="mrt-sentosa-express",e.MRTTapeOut="mrt-tape-out",e.JREastSingleColor="jr-east-single-color",e.JREastSingleColorPattern="jr-east-single-color-pattern",e.LRTSingleColor="lrt-single-color",e.LondonTubeTerminal="london-tube-terminal",e.LondonTubeInternalInt="london-tube-internal-int",e.LondonTube10MinWalk="london-tube-10-min-walk",e.LondonRail="london-rail",e.LondonSandwich="london-sandwich",e.LondonLutonAirportDART="london-DART",e.LondonIFSCloudCableCar="london-dangleway",e.GuangdongIntercityRailway="gd-intercity-rwy",e.ChongqingRTLoop="chongqingrt-loop",e.ChongqingRTLineBadge="chongqingrt-line-badge",e.ChengduRTOutsideFareGates="chengdurt-outside-fare-gates",e))(ns||{}));const is={offset:0},os={generatePath:(e,t,n,i,o=is)=>{const{offset:r=is.offset}=o,a=Math.abs((i-n)/(t-e));if(a===1/0)return`M ${e+r} ${n} L ${t+r} ${i}`;if(0===a)return`M ${e} ${n+r} L ${t} ${i+r}`;{const o=1/a,s=r/Math.sqrt(o*o+1),l=s*o*-Math.sign((t-e)*(i-n));return`M ${e+s} ${n+l} L ${t+s} ${i+l}`}},icon:v.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:v.jsx("path",{d:"M6,18L18,6",stroke:"currentColor",fill:"none"})}),defaultAttrs:is,attrsComponent:e=>{var t;const{id:n,attrs:i,handleAttrsUpdate:o}=e,{t:r}=Ie(),a=[{type:"input",label:r("panel.details.lines.simple.offset"),value:(null!==(t=i.offset)&&void 0!==t?t:is.offset).toString(),variant:"number",onChange:e=>{i.offset=Number(e),o(n,i)},minW:"full"}];return v.jsx(sa,{fields:a})},metadata:{displayName:"panel.details.lines.simple.displayName"}},rs=(p("aZ",{translateX:0,translateY:0,scale:1,rotate:0}),p("aL",3));var as=p("aI",(e=>(e.Virtual="virtual",e.Facilities="facilities",e.Text="text",e.I18nText="i18n-text",e.Master="master",e.ShmetroNumLineBadge="shmetro-num-line-badge",e.ShmetroTextLineBadge="shmetro-text-line-badge",e.GzmtrLineBadge="gzmtr-line-badge",e.BjsubwayNumLineBadge="bjsubway-num-line-badge",e.BjsubwayTextLineBadge="bjsubway-text-line-badge",e.SuzhouRTNumLineBadge="suzhourt-num-line-badge",e.BerlinSBahnLineBadge="berlin-s-bahn-line-badge",e.BerlinUBahnLineBadge="berlin-u-bahn-line-badge",e.ChongqingRTNumLineBadge="chongqingrt-num-line-badge",e.ChongqingRTTextLineBadge="chongqingrt-text-line-badge",e.ChongqingRTNumLineBadge2021="chongqingrt-num-line-badge-2021",e.ChongqingRTTextLineBadge2021="chongqingrt-text-line-badge-2021",e.ShenzhenMetroNumLineBadge="shenzhen-metro-num-line-badge",e.MRTDestinationNumbers="mrt-num-line-badge",e.MRTLineBadge="mrt-line-badge",e.JREastLineBadge="jr-east-line-badge",e.QingdaoMetroNumLineBadge="qingdao-metro-num-line-badge",e.GuangdongIntercityRailwayLineBadge="gd-intercity-rwy-line-badge",e.LondonArrow="london-arrow",e.ChengduRTLineBadge="chengdurt-line-badge",e.TaiPeiMetroLineBadege="taipei-metro-line-badge",e))(as||{}));const ss={Action:"",Apps:"",Back:"","Back to list":"","Background colour":"",Black:"",Cancel:"",City:"",Components:"","Configuration file":"",Confirm:"",Continue:"","Country/Region":"/",Copy:"",Done:"",Edit:"","Foreground colour":"","Go back":"",Language:"/Language",Justification:"","Multi-languages":"",Name:"",Next:"",No:"",OK:"",Open:"",Palette:"","Please select...":"...",Previous:"","Rail Map Announcer":"","Rail Map Generator":"","Rail Map Painter":"","Rail Map Toolkit":"",Remove:"",Reset:"","RMG Templates":"RMG ","RMP Gallery":"RMP ","RMP Designer":"RMP ","Seed Project":"",Settings:"",Submit:"",Translate:"",Upload:"",Warning:"",White:"",Yes:""},ls={Action:"",Apps:"",Back:"","Back to list":"","Background colour":"",Black:"",Cancel:"",City:"",Components:"","Configuration file":"",Confirm:"",Continue:"",Copy:"","Country/Region":"/",Done:"",Edit:"","Foreground colour":"","Go back":"",Language:"/Language",Justification:"","Multi-languages":"",Name:"",Next:"",No:"",OK:"",Open:"",Palette:"","Please select...":"...",Previous:"","Rail Map Announcer":"","Rail Map Generator":"","Rail Map Painter":"","Rail Map Toolkit":"",Remove:"",Reset:"","RMG Templates":"RMG ","RMP Gallery":"RMP ","RMP Designer":"RMP ","Seed Project":"",Settings:"",Submit:"",Translate:"",Upload:"",Warning:"",White:"",Yes:""},ds={Language:"/Language",Palette:"","Rail Map Generator":"","Rail Map Painter":"","Rail Map Toolkit":"",Remove:"","RMG Templates":"RMG ","RMP Gallery":"RMP ","RMP Designer":"RMP ","Rail Map Announcer":""},cs={Action:"",Apps:"","Back to list":" ","Background colour":"",Black:"",Cancel:"",City:"",Components:"","Configuration file":"  ",Confirm:"",Copy:"","Country/Region":"/",Edit:"","Foreground colour":"","Go back":"",Language:"/Language",Justification:"",Name:"",Next:"",Open:"",Palette:"","Please select...":"",Previous:"","Rail Map Generator":"  ","Rail Map Painter":"  ","Rail Map Toolkit":"  ",Remove:"",Reset:"","RMG Templates":"RMG ","RMP Gallery":"RMP ","RMP Designer":"RMP ","Seed Project":" ",Settings:"",Submit:"",Translate:"",Upload:"",White:"","Rail Map Announcer":"   "},us=(p("ap",{ar:{ar:"",en:"Arabic",ko:"","zh-Hans":"","zh-Hant":""},az:{az:"Azrbaycanca",en:"Azerbaijani",ko:"","zh-Hans":"","zh-Hant":""},ca:{ca:"Catal",en:"Catalan",ko:"","zh-Hans":"","zh-Hant":""},da:{da:"Dansk",en:"Danish",ko:"","zh-Hans":"","zh-Hant":""},de:{de:"Deutsch",en:"German",ko:"","zh-Hans":"","zh-Hant":""},el:{el:"",en:"Greek",ko:"","zh-Hans":"","zh-Hant":""},en:{en:"English",ja:"",ko:"","zh-Hans":"","zh-Hant":""},es:{en:"Spanish",es:"Espaol",ko:"","zh-Hans":"","zh-Hant":""},fa:{en:"Persian",fa:"",ko:"","zh-Hans":"","zh-Hant":""},fi:{en:"Finnish",fi:"Suomi","zh-Hans":"","zh-Hant":""},fr:{en:"French",fr:"Franais",ko:"","zh-Hans":"","zh-Hant":""},ga:{en:"Irish",ga:"Gaeilge",ko:"","zh-Hans":"","zh-Hant":""},gd:{en:"Scottish Gaelic",gd:"Gidhlig",ko:" ","zh-Hans":"","zh-Hant":""},he:{en:"Hebrew",he:"","zh-Hans":"","zh-Hant":""},hi:{en:"Hindi",hi:"",ko:"","zh-Hans":"","zh-Hant":""},hr:{en:"Croatian",hr:"Hrvatski","zh-Hans":"","zh-Hant":""},hu:{en:"Hungarian",hu:"Magyar",ko:"","zh-Hans":"","zh-Hant":""},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"","zh-Hans":"","zh-Hant":""},it:{en:"Italian",it:"Italiano",ko:"","zh-Hans":"","zh-Hant":""},ja:{en:"Japanese",ja:"",ko:"","zh-Hans":"","zh-Hant":""},kk:{en:"Kazakh",kk:"",ko:"","zh-Hans":"","zh-Hant":""},ko:{en:"Korean",ja:"",ko:"","zh-Hans":"","zh-Hant":""},mi:{en:"Mori",mi:"Mori","zh-Hans":"","zh-Hant":""},ms:{en:"Malay",ko:"",ms:"Bahasa Melayu","zh-Hans":"","zh-Hant":""},nl:{en:"Dutch",nl:"Nederlands","zh-Hans":"","zh-Hant":""},no:{en:"Norwegian",ko:"",no:"Norsk","zh-Hans":"","zh-Hant":""},pl:{en:"Polish",ko:"",pl:"Polski","zh-Hans":"","zh-Hant":""},pt:{en:"Portuguese",ko:"",pt:"Portugus","zh-Hans":"","zh-Hant":""},rm:{en:"Romansh",rm:"Rumantsch","zh-Hans":"","zh-Hant":""},ro:{en:"Romanian",ko:"",ro:"Romn","zh-Hans":"","zh-Hant":""},ru:{en:"Russian",ko:"",ru:"","zh-Hans":"","zh-Hant":""},sv:{en:"Swedish",ko:"",sv:"Svenska","zh-Hans":"","zh-Hant":""},ta:{en:"Tamil",ta:"","zh-Hans":"","zh-Hant":""},th:{en:"Thai",ko:"",th:"","zh-Hans":"","zh-Hant":""},tr:{en:"Turkish",ko:"",tr:"Trke","zh-Hans":"","zh-Hant":""},uk:{en:"Ukrainian",ko:"",uk:"","zh-Hans":"","zh-Hant":""},ur:{en:"Urdo",ko:"",ur:"","zh-Hans":"","zh-Hant":""},uz:{en:"Uzbek",ko:"",uz:"Ozbekcha","zh-Hans":"","zh-Hant":""},vi:{en:"Vietnamese",ko:"",vi:"Ting Vit","zh-Hans":"","zh-Hant":""},zh:{en:"Chinese",ja:"",ko:"",zh:"","zh-Hans":"","zh-Hant":""},"zh-Hans":{en:"Simplified Chinese",ja:"",ko:" ","zh-Hans":"","zh-Hant":""},"zh-Hant":{en:"Traditional Chinese",ja:"",ko:" ","zh-Hans":"","zh-Hant":""}}),{en:{},"zh-Hans":ss,"zh-Hant":ls,ja:ds,ko:cs}),hs={color:"Color",warning:"Warning",cancel:"Cancel",apply:"Apply",remove:"Remove",close:"Close",noShowAgain:"Don't show me again",rmtPromotion:"The all-in-one toolkit you definitely do not want to miss!",panel:JSON.parse('{"tools":{"showLess":"Show less","section":{"lineDrawing":"Line drawing","stations":"Stations","miscellaneousNodes":"Miscellaneous nodes"},"select":"Select","learnHowToAdd":{"station":"Learn how to add your stations!","misc-node":"Learn how to add your nodes!","line":"Learn how to add your line styles!"}},"details":{"header":"Details","info":{"title":"Basic information","id":"ID","zIndex":"Depth","stationType":"Station Type","linePathType":"Line Path Type","lineStyleType":"Line Style Type","type":"Type","parallel":"Parallel line","parallelIndex":"Parallel index"},"multipleSelection":{"title":"Multiple Selection","change":"Change selected attributes","selected":"Selected Objects:","show":"Show","station":"Stations","miscNode":"MiscNodes","edge":"Lines"},"changeStationTypeContent":"Changing station\'s type will remove all attributes from the station except its names.","changeLineTypeContent":"Changing line\'s type will remove all attributes from the line.","changeType":"Change Type","nodePosition":{"title":"Node Position","pos":{"x":"Coordinate X","y":"Coordinate Y"}},"lineExtremities":{"title":"Line Extremities","source":"Source","target":"Target","sourceName":"Source Name","targetName":"Target Name"},"specificAttrsTitle":"Specific Attributes","unknown":{"error":"Oops :( We can\'t recognize this {{category}}. Maybe it is created in a newer version.","node":"node","linePath":"line path","lineStyle":"line style"},"nodes":{"common":{"nameZh":"Line name in Chinese","nameEn":"Line name in English","nameJa":"Line name in Japanese","num":"Line number"},"virtual":{"displayName":"Virtual node"},"shmetroNumLineBadge":{"displayName":"Shanghai Metro num line badge"},"shmetroTextLineBadge":{"displayName":"Shanghai Metro text line badge"},"gzmtrLineBadge":{"displayName":"Guangzhou Metro line badge","tram":"Tram","span":"Row-spanning digits"},"bjsubwayNumLineBadge":{"displayName":"Beijing Subway num line badge"},"bjsubwayTextLineBadge":{"displayName":"Beijing Subway text line badge"},"berlinSBahnLineBadge":{"displayName":"Berlin S Bahn line badge"},"berlinUBahnLineBadge":{"displayName":"Berlin U Bahn line badge"},"suzhouRTNumLineBadge":{"displayName":"Suzhou Rail Transit num line badge","branch":"Is branch line"},"chongqingRTNumLineBadge":{"displayName":"Chongqing Rail Transit num line badge"},"chongqingRTTextLineBadge":{"displayName":"Chongqing Rail Transit text line badge"},"chongqingRTNumLineBadge2021":{"displayName":"Chongqing Rail Transit num line badge (2021)"},"chongqingRTTextLineBadge2021":{"displayName":"Chongqing Rail Transit text line badge (2021)","isRapid":"Is rapid or express train badge"},"shenzhenMetroNumLineBadge":{"displayName":"Shenzhen Metro num line badge","branch":"Is branch line"},"mrtDestinationNumbers":{"displayName":"Singapore MRT destination numbers"},"mrtLineBadge":{"displayName":"Singapore MRT line badge","isTram":"Is LRT line badge"},"jrEastLineBadge":{"displayName":"JR East line badge","crosshatchPatternFill":"Fill with crosshatch pattern"},"qingdaoMetroNumLineBadge":{"displayName":"Qingdao Metro Num line badge","numEn":"Line number in English","showText":"Show text"},"guangdongIntercityRailwayLineBadge":{"displayName":"Guangdong Intercity Railway line badge"},"londonArrow":{"displayName":"London arrow","type":"Type","continuation":"Continuation","sandwich":"Sandwich","tube":"Tube"},"chengduRTLineBadge":{"displayName":"Chengdu Rail Transit Line Badge","badgeType":{"displayName":"Type","normal":"Normal","suburban":"Suburban railway","tram":"Tram"}},"taipeiMetroLineBadge":{"displayName":"Taipei Metro line badge","tram":"Tram"},"master":{"displayName":"Master node","type":"Master node type","undefined":"Undefined"},"facilities":{"displayName":"Facilities","type":"Type","airport":"Airport","airport_2024":"Airport 2024","maglev":"Maglev","disney":"Disney","railway":"Railway","railway_2024":"Railway 2024","hsr":"High Speed Railway","airport_hk":"Airport Hongkong","disney_hk":"Disney Hongkong","ngong_ping_360":"Ngong Ping 360","tiananmen":"Tiananmen","airport_bj":"Airport Beijing","bus_terminal_suzhou":"Bus Terminal Suzhou","railway_suzhou":"Railway Suzhou","bus_interchange":"Bus Interchange","airport_sg":"Changi Airport","cruise_centre":"Cruise Centre","sentosa_express":"Sentosa Express","cable_car":"Cable Car","merlion":"Merlion","marina_bay_sands":"Marina Bay Sands","gardens_by_the_bay":"Gardens by the Bay","singapore_flyer":"Singapore Flyer","esplanade":"Esplanade","airport_qingdao":"Airport Qingdao","railway_qingdao":"Railway Qingdao","coach_station_qingdao":"Coach Station Qingdao","cruise_terminal_qingdao":"Cruise Terminal Qingdao","tram_qingdao":"Tram Qingdao","airport_guangzhou":"Airport Guangzhou","railway_guangzhou":"Railway Guangzhou","intercity_guangzhou":"Intercity Guangzhou","river_craft":"River services interchange","airport_london":"Airport London","coach_station_london":"Victoria Coach Station","airport_chongqing":"Airport Chongqing","railway_chongqing":"Railway Chongqing","coach_station_chongqing":"Coach Station Chongqing","bus_station_chongqing":"Bus Station Chongqing","shipping_station_chongqing":"Shipping Station Chongqing","airport_chengdu":"Airport Chengdu","railway_chengdu":"Railway Chengdu","railway_taiwan":"Railway Taiwan","hsr_taiwan":"High Speed Railway Taiwan"},"text":{"displayName":"Arbitrary text","content":"Content","fontSize":"Font size","lineHeight":"Line height","textAnchor":"Text anchor","start":"Start","middle":"Middle","end":"End","auto":"Auto","hanging":"Hanging","dominantBaseline":"Dominant baseline","language":"Font family in which language","zh":"Chinese","en":"English","mtr__zh":"Hongkong MTR Chinese","mtr__en":"Hongkong MTR English","berlin":"Berlin S/U Bahn","mrt":"Singapore MRT","jreast_ja":"JR East Japanese","jreast_en":"JR East English","tokyo_en":"Tokyo Metro English","tube":"London Underground","taipei":"Taipei Metro","fontSynthesisWarning":"Bold and italic styles are only available if supported by the font.","rotate":"Rotation","italic":"Italic","bold":"Bold","outline":"Outline"}},"stations":{"common":{"nameZh":"Names in Chinese","nameEn":"Names in English","nameJa":"Names in Japanese","nameOffsetX":"Names offset X","nameOffsetY":"Names offset Y","rotate":"Icon rotation","lineCode":"Line code","stationCode":"Station code","left":"Left","middle":"Middle","right":"Right","top":"Top","bottom":"Bottom"},"interchange":{"title":"Interchanges","within":"Within-station interchange","outStation":"Out-of-station interchange","outSystem":"Out-of-system interchange","addGroup":"Add interchange group","noInterchanges":"No interchanges","nameZh":"Chinese name","nameEn":"English name","add":"Add interchange","copy":"Copy interchange","remove":"Remove interchange"},"shmetroBasic":{"displayName":"Shanghai Metro basic station"},"shmetroBasic2020":{"displayName":"Shanghai Metro basic station (2020)"},"shmetroInt":{"displayName":"Shanghai Metro interchange station","height":"Icon height","width":"Icon width"},"shmetroOsysi":{"displayName":"Shanghai Metro out-of-system interchange station"},"shanghaiSuburbanRailway":{"displayName":"Shanghai Suburban Railway station"},"gzmtrBasic":{"displayName":"Guangzhou Metro basic station","open":"Is opened","secondaryNameZh":"Secondary name in Chinese","secondaryNameEn":"Secondary name in English","tram":"Tram"},"gzmtrInt":{"displayName":"Guangzhou Metro interchange station","open":"Is opened","secondaryNameZh":"Secondary name in Chinese","secondaryNameEn":"Secondary name in English","foshan":"Foshan"},"gzmtrInt2024":{"displayName":"Guangzhou Metro interchange station (2024)","columns":"Columns of stations","topHeavy":"Prefer more stations on the top row","anchorAt":"Anchor at","anchorAtNone":"Center","osiPosition":"Out-of-Station Interchange","osiPositionNone":"None","osiPositionLeft":"Left","osiPositionRight":"Right"},"bjsubwayBasic":{"displayName":"Beijing Subway basic station","open":"Is opened"},"bjsubwayInt":{"displayName":"Beijing Subway interchange station","outOfStation":"Out of station interchange"},"mtr":{"displayName":"Hongkong MTR station","rotate":"Icon rotation"},"suzhouRTBasic":{"displayName":"Suzhou Rail Transit basic station","textVertical":"Vertical names"},"suzhouRTInt":{"displayName":"Suzhou Rail Transit interchange station"},"kunmingRTBasic":{"displayName":"Kunming Rail Transit basic station"},"kunmingRTInt":{"displayName":"Kunming Rail Transit interchange station"},"MRTBasic":{"displayName":"Singapore MRT basic station","isTram":"Is LRT station"},"MRTInt":{"displayName":"Singapore MRT interchange station"},"jrEastBasic":{"displayName":"JR East basic station","nameOffset":"Names offset","textOneLine":"Names in one line","textVertical":"Vertical names","important":"Important station","lines":"Interchange lines offset"},"jrEastImportant":{"displayName":"JR East important station","textVertical":"Vertical names","mostImportant":"Most important station","minLength":"Minimal length of the station"},"foshanMetroBasic":{"displayName":"Foshan Metro basic station","open":"Is opened","secondaryNameZh":"Secondary name in Chinese","secondaryNameEn":"Secondary name in English","tram":"Tram"},"qingdaoMetro":{"displayName":"Qingdao Metro station","isInt":"Is interchange station"},"tokyoMetroBasic":{"displayName":"Tokyo Metro basic station","nameOffset":"Names offset","textVertical":"Vertical names"},"tokyoMetroInt":{"displayName":"Tokyo Metro interchange station","mereOffset":{"displayName":"Names mere offset","none":"None","left1":"Left (less)","left2":"Left (more)","right1":"Right (less)","right2":"Right (more)","up":"Up","down":"Down"},"importance":{"displayName":"Station importance","default":"Default","middle":"Middle","high":"High"},"align":{"displayName":"Icon align","horizontal":"Horizontal","vertical":"Vertical"}},"londonTubeCommon":{"stepFreeAccess":"Step free access","stepFreeAccessNone":"None","stepFreeAccessTrain":"From street to train","stepFreeAccessPlatform":"From street to platform"},"londonTubeBasic":{"displayName":"London Underground basic station","terminal":"Terminal station","terminalNameRotate":"Terminal station name rotation","shareTracks":"Track shares","shareTracksIndex":"Index of the track shares"},"londonTubeInt":{"displayName":"London Underground interchange station"},"londonRiverServicesInt":{"displayName":"London river services interchange station"},"guangdongIntercityRailway":{"displayName":"Guangdong Intercity Railway station"},"chongqingRTBasic":{"displayName":"Chongqing Rail Transit basic station","isLoop":"Loop line station"},"chongqingRTInt":{"displayName":"Chongqing Rail Transit interchange station","textDistance":{"x":"Text distance X","y":"Text distance Y","near":"near","far":"far"}},"chongqingRTBasic2021":{"displayName":"Chongqing Rail Transit basic station (2021)","open":"Is opened"},"chongqingRTInt2021":{"displayName":"Chongqing Rail Transit interchange station (2021)","isRapid":"Is rapid or express train station","isWide":"Is a wide station","wideDirection":{"displayName":"Direction","vertical":"Vertical","horizontal":"Horizontal"}},"chengduRTBasic":{"displayName":"Chengdu Rail Transit basic station","isVertical":"Is vertical station","stationType":{"displayName":"Station type","normal":"Normal","branchTerminal":"Branch terminal","joint":"Joint transfer station","tram":"Tram station"}},"chengduRTInt":{"displayName":"Chengdu Rail Transit interchange station"}},"lines":{"reconcileId":"Reconcile ID","common":{"offsetFrom":"Offset From","offsetTo":"Offset To","startFrom":"Start From","from":"From","to":"To","roundCornerFactor":"Round Corner Factor","parallelDisabled":"Some attributes are disabled as this line is parallel.","changeInBaseLine":"Change them in the base line:"},"simple":{"displayName":"Simple path","offset":"Offset"},"diagonal":{"displayName":"135 diagonal path"},"perpendicular":{"displayName":"90 perpendicular path"},"rotatePerpendicular":{"displayName":"90 rotate perpendicular path"},"singleColor":{"displayName":"Single color style"},"shmetroVirtualInt":{"displayName":"Shanghai Metro out-of-station interchange style"},"shanghaiSuburbanRailway":{"displayName":"Shanghai Suburban Railway style","isEnd":"Is the ending line"},"gzmtrVirtualInt":{"displayName":"Guangzhou Metro out-of-station interchange style"},"gzmtrLoop":{"displayName":"Guangzhou Metro loop style"},"chinaRailway":{"displayName":"China Railway style"},"bjsubwaySingleColor":{"displayName":"Beijing Subway single color style"},"bjsubwayTram":{"displayName":"Beijing Subway tram style"},"bjsubwayDotted":{"displayName":"Beijing Subway dotted style"},"dualColor":{"displayName":"Dual color style","swap":"Swap color","colorA":"Color A","colorB":"Color B"},"river":{"displayName":"River style","width":"Width"},"mtrRaceDays":{"displayName":"Hongkong MTR race days style"},"mtrLightRail":{"displayName":"Hongkong MTR light rail style"},"mtrUnpaidArea":{"displayName":"Hongkong MTR unpaid area style"},"mtrPaidArea":{"displayName":"Hongkong MTR paid area style"},"mrtUnderConstruction":{"displayName":"Singapore MRT under construction style"},"mrtSentosaExpress":{"displayName":"Singapore MRT Sentosa Express style"},"mrtTapeOut":{"displayName":"Singapore MRT Tap Out to Transfer style"},"jrEastSingleColor":{"displayName":"JR East single color style"},"jrEastSingleColorPattern":{"displayName":"JR East single color filled with crosshatch pattern style"},"lrtSingleColor":{"displayName":"Singapore LRT single color style"},"londonTubeInternalInt":{"displayName":"London Underground internal interchange style"},"londonTube10MinWalk":{"displayName":"London Underground under a 10 minute walk interchange style"},"londonTubeTerminal":{"displayName":"London Underground terminal style"},"londonRail":{"displayName":"London rail style","limitedService":"Limited service/Peak hours only","colorBackground":"Color background","colorForeground":"Color foreground"},"londonSandwich":{"displayName":"London sandwich style"},"londonLutonAirportDART":{"displayName":"London Luton Airport DART style"},"londonIFSCloudCableCar":{"displayName":"London IFS Cloud Cable Car style"},"guangdongIntercityRailway":{"displayName":"Guangdong Intercity Railway style"},"chongqingRTLineBadge":{"displayName":"Chongqing Rail Transit line badge style"},"chongqingRTLoop":{"displayName":"Chongqing Rail Transit loop line style"},"chengduRTOutsideFareGates":{"displayName":"Chengdu Rail Transit outside fare gates transfer style"}},"edge":{},"footer":{"duplicate":"Duplicate","copy":"Copy","remove":"Remove"}}}'),header:{popoverHeader:"You're on <1>{{environment}}</1> environment!",popoverBody:"We are currently testing the latest RMP. If you have any suggestions, feel free to raise at https://github.com/railmapgen/rmp/issues",search:"Search stations",open:{new:"New project",config:"Import project",projectRMG:"Import from RMG project",invalidType:"Invalid file type! Only file in JSON format is accepted.",unknownError:"Unknown error occurred while parsing the uploaded file! Please try again.",gallery:"Import from Gallery",tutorial:"Start tutorial",importOK:"Template {{id}} imported.",importOKContent:"Not satisfied with this change? Undo via Ctrl + Z or the undo button.",importFail:"Fail to import {{id}}.",importFailContent:"The file can not be found.",confirmOverwrite:{title:"Confirm overwrite",body:"This action will overwrite your current project. Any unsaved changes will be lost. Are you sure you want to continue?",overwrite:"Overwrite"}},download:{config:"Export project",image:"Export image","2rmg":{title:"Export to RMG project",type:{line:"Line",loop:"Loop",branch:"Branch"},placeholder:{chinese:"Chinese name",english:"English name",lineCode:"Line code"},info1:"This function is designed to convert the RMP project into RMG projects.",info2:"The lines in the list following are the available lines for converting. You can enter the Chinese line name in the text box on the left, the English line name in the middle, the line code (for Guangzhou Metro style) on the right, and then click the download button on the right to save your RMG projects.",noline:"No available lines found.",download:"Download",downloadInfo:"Please select one of the following stations as the starting station and click it to download."},format:"Format",png:"PNG",svg:"SVG",svgVersion:"Version","svg1.1":"1.1 (Compatible with Adobe Illustrator)",svg2:"2 (Compatible with modern browsers)",transparent:"Transparency",scale:"Scale",disabledScaleOptions:"Image too large for this browser.",disabledScaleOptionsSolution:"Subscribe and download our desktop app to render large images.",imageTooBig:"The image is too big for your browser to generate!",isSystemFontsOnly:"Use system font only (font display may vary).",shareInfo1:"I will attach ",shareInfo2:" and its link when I share this image.",termsAndConditions:"Terms and Conditions",termsAndConditionsInfo:"I agree to ",period:".",confirm:"Download"},donation:{title:"Donation",openCollective:"Open Collective",viaUSD:"Donate in USD via Paypal or Visa card.",afdian:"",viaCNY:"Donate in CNY via Alipay or Wechat Pay."},settings:{title:"Settings",pro:"This is a PRO feature and an account with a subscription is required.",proWithTrial:"This is a PRO feature with a limited free trial available.",proLimitExceed:{master:"Master nodes exceed the free tier.",parallel:"Parallel lines exceed the free tier.",solution:"Remove them to dismiss this warning, or subscribe to unlock more!"},status:{title:"Status",count:{stations:"Stations count:",miscNodes:"Miscellaneous nodes count:",lines:"Lines count:",masters:"Master nodes count:",parallel:"Parallel lines count:"},subscription:{content:"Subscription:","logged-out":"You are currently logged out.",free:"Logged In! Subscribe to unlock more features!",subscriber:"Thanks for your subscription! Enjoy all features!",expired:"Login status expired. Please log out and log in again."}},preference:{title:"Preference",keepLastPath:"Keep drawing lines until clicking on the background in the next move",autoParallel:"Automatically set new lines to be parallel to existing lines",randomStationNames:{title:"Set station names to random on creation",none:"None",shmetro:"Shanghai",bjsubway:"Beijing"},gridline:"Show grid guide lines",snapline:"Auto snapping to the guide lines and points"},shortcuts:{title:"Shortcuts",keys:"Keys",description:"Description",f:"Use the last tool.",s:"Marquee selection.",arrows:"Move the canvas a little bit.",ijkl:"Move the selected station(s) a little bit.",shift:"Multiple selection.",alt:"Hold down while dragging to temporarily disable auto-snapping.",delete:"Delete the selected station(s).",cut:"Cut.",copy:"Copy.",paste:"Paste.",undo:"Undo.",redo:"Redo."},procedures:{title:"Procedures",translate:{title:"Translate nodes' coordinates",content:"Add the following offset to all nodes' x and y:",x:"X axis",y:"Y axis"},scale:{title:"Scale nodes' coordinates",content:"Multiply the following value to all nodes' x and y:",factor:"Scale factor"},changeType:{title:"Change all objects' attributes",any:"Any"},changeZIndex:"Change depth in batch",changeStationType:{title:"Change stations type in batch",changeFrom:"Change all stations from this type:",changeTo:"To this type:",info:"Changing stations' type will remove all specific attributes from stations except their position and names. SAVE BEFORE CHANGE!"},changeLineStyleType:{title:"Change lines style in batch",changeFrom:"Change all lines from this style:",changeTo:"To this style:",info:"Changing lines' style will remove all specific attributes from lines except their connections. SAVE BEFORE CHANGE!"},changeLinePathType:{title:"Change lines path in batch",changeFrom:"Change all lines from this path:",changeTo:"To this path:"},changeColor:{title:"Change color in batch",changeFrom:"Change all objects from this color:",changeTo:"To this color:",any:"From any color"},removeLines:{title:"Remove lines with single color",content:"Remove lines that have this color: "},updateColor:{title:"Update color",content:"Update all colors with their latest value.",success:"Successfully update all colors.",error:"Error in updating all colors: {{e}}."},unlockSimplePath:{title:"Unlock simple path",content1:"The Rail Map Painter application endeavors to offer an interactive platform conducive to the creation of rail maps while adhering to established conventions. Among these conventions, one particularly renowned style finds its origins in the innovative work of Harry Beck. His pioneering contribution, officially endorsed in the year 1932, garnered instantaneous acclaim from the general populace. Presently, it stands as an exemplar of paramount significance within the realm of information design. This paradigmatic approach has found widespread implementation in transit cartography on a global scale, albeit with varying degrees of success.",content2:"The application inherently conceals the option to utilize a simple path, as its deployment has the potential to contravene established conventions. This particular feature remains discreetly tucked away by default. Additionally, submissions to the Rail Map Painter Gallery are subject to stringent scrutiny, with a categorical rejection of compositions that employ the simple path with a single color style approach.",content3:"Still, we reserve the opportunity to unlock this option and use the simple path when you subscribe. It should be noted that even after acquisition, the use of simple path is limited to single color.",check:"Unlock",unlocked:"Already Unlocked"},masterManager:{title:"Manage all master nodes",id:"Id",label:"Label",type:"Type",types:{MiscNode:"MiscNode",Station:"Station"},importTitle:"Upload master parameter",importFrom:"Use imported styles",importOther:"Import new style",importParam:"Paste configuration"}},telemetry:{title:"Telemetry",info:"To help improve Rail Map Painter and keep contributors motivated to enhance the project, anonymous usage data is collected through Google Analytics. This data is used solely for enhancing the user experience and optimizing the tool's functionality and is never shared with third parties.",essential:"Basic",essentialTooltip:"Change this global setting in Rail Map Toolkit",essentialInfo:"Rail Map Painter collects essential usage data that helps us understand how and when users interact with the tool. Rest assured, no personally identifiable information or data from your projects is ever collected.",essentialLink:"Click this link to see detailed fields that Google Analytics may collect.",additional:"Additional",additionalInfo:"Rail Map Painter also gathers data on interactions, such as project creation or station addition, when you input. These additional data is also anonymous and are only used for statistical analysis to help us make the tool better."}},about:{title:"About",rmp:"Rail Map Painter",railmapgen:"A Rail Map Toolkit project",desc:"Design your own rail map by freely dragging stations from different cities and connecting them with 90 or 135-degree rounded corners lines!",content1:"In memory of all the freedom and equality we once had.",content2:"06/01/2022 in Shanghai",contributors:"Contributors",coreContributors:"Core Contributors",styleContributors:"Style Contributors",langonginc:"Live a life you will remember.","203IhzElttil":"Special thanks for his diligent work in ensuring that the stations of Shanghai Metro match the original design.",Swiftiecott:"Special thanks for his diligent work in ensuring that the stations of Beijing Subway match the original design.",Minwtraft:"Special thanks for his diligent work in ensuring that the stations of Guangzhou Metro match the original design.",contactUs:"Contact Us",github:"Project repository",githubContent:"Face any problems? Search or raise an issue here!",slack:"Slack group",slackContent:"Chat in these Slack channels!"}}},ps={colorA:"Color A",colorB:"Color B",color:"",warning:"",cancel:"",apply:"",remove:"",close:"",noShowAgain:"",rmtPromotion:"",panel:JSON.parse('{"tools":{"showLess":"","section":{"lineDrawing":"","stations":"","miscellaneousNodes":""},"select":"","learnHowToAdd":{"station":"","misc-node":"","line":""}},"details":{"header":"","info":{"title":"","id":"ID","zIndex":"","stationType":"","linePathType":"","lineStyleType":"","type":"","parallel":"","parallelIndex":""},"multipleSelection":{"title":"","change":"","selected":":","show":"","station":"","miscNode":"","edge":""},"changeStationTypeContent":"","changeLineTypeContent":"","changeType":"","nodePosition":{"title":"","pos":{"x":"X","y":"Y"}},"lineExtremities":{"title":"","source":"","target":"","sourceName":"","targetName":""},"specificAttrsTitle":"","unknown":{"error":" :( {{category}}","node":"","linePath":"","lineStyle":""},"nodes":{"common":{"nameZh":"","nameEn":"","nameJa":"","num":""},"virtual":{"displayName":""},"shmetroNumLineBadge":{"displayName":""},"shmetroTextLineBadge":{"displayName":""},"gzmtrLineBadge":{"displayName":"","tram":"","span":""},"bjsubwayNumLineBadge":{"displayName":""},"bjsubwayTextLineBadge":{"displayName":""},"berlinSBahnLineBadge":{"displayName":"S"},"berlinUBahnLineBadge":{"displayName":""},"suzhouRTNumLineBadge":{"displayName":"","branch":""},"chongqingRTNumLineBadge":{"displayName":""},"chongqingRTTextLineBadge":{"displayName":""},"chongqingRTNumLineBadge2021":{"displayName":"3"},"chongqingRTTextLineBadge2021":{"displayName":"3","isRapid":"/"},"shenzhenMetroNumLineBadge":{"displayName":"","branch":""},"mrtDestinationNumbers":{"displayName":"MRT"},"mrtLineBadge":{"displayName":"MRT","isTram":""},"jrEastLineBadge":{"displayName":"JR","crosshatchPatternFill":""},"qingdaoMetroNumLineBadge":{"displayName":"","numEn":"","showText":""},"guangdongIntercityRailwayLineBadge":{"displayName":""},"londonArrow":{"displayName":"","type":"","continuation":"","sandwich":"","tube":""},"chengduRTLineBadge":{"displayName":"","badgeType":{"displayName":"","normal":"","suburban":"","tram":""}},"taipeiMetroLineBadge":{"displayName":"","tram":""},"master":{"displayName":"","type":"","undefined":""},"facilities":{"displayName":"","type":"","airport":"","airport_2024":" 2024","maglev":"","disney":"","railway":"","railway_2024":" 2024","hsr":"","airport_hk":"","disney_hk":"","ngong_ping_360":"360","tiananmen":"","airport_bj":"","bus_terminal_suzhou":"","railway_suzhou":"","bus_interchange":"","airport_sg":"","cruise_centre":"","sentosa_express":"","cable_car":"","merlion":"","marina_bay_sands":"","gardens_by_the_bay":"","singapore_flyer":"","esplanade":"","airport_qingdao":"","railway_qingdao":"","coach_station_qingdao":"","cruise_terminal_qingdao":"","tram_qingdao":"","airport_guangzhou":"","railway_guangzhou":"","intercity_guangzhou":"","river_craft":"","airport_london":"","coach_station_london":"","airport_chongqing":"","railway_chongqing":"","coach_station_chongqing":"","bus_station_chongqing":"","shipping_station_chongqing":"","airport_chengdu":"","railway_chengdu":"","railway_taiwan":"","hsr_taiwan":""},"text":{"displayName":"","content":"","fontSize":"","lineHeight":"","textAnchor":"","start":"","middle":"","end":"","auto":"","hanging":"","dominantBaseline":"","language":"","zh":"","en":"","mtr__zh":"MTR","mtr__en":"MTR","berlin":"S/U","mrt":"MRT","jreast_ja":"JR","jreast_en":"JR","tokyo_en":"","tube":"","taipei":"","fontSynthesisWarning":"","rotate":"","italic":"","bold":"","outline":""}},"stations":{"common":{"nameZh":"","nameEn":"","nameJa":"","nameOffsetX":"X","nameOffsetY":"Y","rotate":"","lineCode":"","stationCode":"","left":"","middle":"","right":"","top":"","bottom":""},"interchange":{"title":"","within":"","outStation":"","outSystem":"","addGroup":"","noInterchanges":"","nameZh":"","nameEn":"","add":"","copy":"","remove":""},"shmetroBasic":{"displayName":""},"shmetroBasic2020":{"displayName":"2"},"shmetroInt":{"displayName":"","height":"","width":""},"shmetroOsysi":{"displayName":""},"shanghaiSuburbanRailway":{"displayName":""},"gzmtrBasic":{"displayName":"","open":"","secondaryNameZh":"","secondaryNameEn":"","tram":""},"gzmtrInt":{"displayName":"","open":"","secondaryNameZh":"","secondaryNameEn":"","foshan":""},"gzmtrInt2024":{"displayName":"6","columns":"","topHeavy":"","anchorAt":"","anchorAtNone":"","osiPosition":"","osiPositionNone":"","osiPositionLeft":"","osiPositionRight":""},"bjsubwayBasic":{"displayName":"","open":""},"bjsubwayInt":{"displayName":"","outOfStation":""},"mtr":{"displayName":"MTR","rotate":""},"suzhouRTBasic":{"displayName":"","textVertical":""},"suzhouRTInt":{"displayName":""},"kunmingRTBasic":{"displayName":""},"kunmingRTInt":{"displayName":""},"MRTBasic":{"displayName":"MRT","isTram":""},"MRTInt":{"displayName":"MRT"},"jrEastBasic":{"displayName":"JR","nameOffset":"","textOneLine":"1","textVertical":"","important":"","lines":""},"jrEastImportant":{"displayName":"JR","textVertical":"","mostImportant":"","minLength":""},"foshanMetroBasic":{"displayName":"","open":"","secondaryNameZh":"","secondaryNameEn":"","tram":""},"qingdaoMetro":{"displayName":"","isInt":""},"tokyoMetroBasic":{"displayName":"","nameOffset":"","textVertical":""},"tokyoMetroInt":{"displayName":"","mereOffset":{"displayName":"","none":"","left1":"","left2":"","right1":"","right2":"","up":"","down":""},"importance":{"displayName":"","default":"","middle":"","high":""},"align":{"displayName":"","horizontal":"","vertical":""}},"londonTubeCommon":{"stepFreeAccess":"","stepFreeAccessNone":"","stepFreeAccessTrain":"","stepFreeAccessPlatform":""},"londonTubeBasic":{"displayName":"","terminal":"","terminalNameRotate":"","shareTracks":"","shareTracksIndex":""},"londonTubeInt":{"displayName":""},"londonRiverServicesInt":{"displayName":""},"guangdongIntercityRailway":{"displayName":""},"chongqingRTBasic":{"displayName":"","isLoop":""},"chongqingRTInt":{"displayName":"","textDistance":{"x":"","y":"","near":"","far":""}},"chongqingRTBasic2021":{"displayName":"3","open":""},"chongqingRTInt2021":{"displayName":"3","isRapid":"/","isWide":"","wideDirection":{"displayName":"","vertical":"","horizontal":""}},"chengduRTBasic":{"displayName":"","isVertical":"","stationType":{"displayName":"","normal":"","branchTerminal":"","joint":"","tram":""}},"chengduRTInt":{"displayName":""}},"lines":{"reconcileId":"ID","common":{"offsetFrom":"From","offsetTo":"To","startFrom":"","roundCornerFactor":"","from":"","to":"","parallelDisabled":"","changeInBaseLine":""},"simple":{"displayName":"","offset":""},"diagonal":{"displayName":"135"},"perpendicular":{"displayName":"90"},"rotatePerpendicular":{"displayName":"90"},"singleColor":{"displayName":""},"shmetroVirtualInt":{"displayName":""},"shanghaiSuburbanRailway":{"displayName":"","isEnd":""},"gzmtrVirtualInt":{"displayName":""},"gzmtrLoop":{"displayName":""},"chinaRailway":{"displayName":""},"bjsubwaySingleColor":{"displayName":""},"bjsubwayTram":{"displayName":""},"bjsubwayDotted":{"displayName":""},"dualColor":{"displayName":"2","swap":"","colorA":"A","colorB":"B"},"river":{"displayName":"","width":""},"mtrRaceDays":{"displayName":"MTR"},"mtrLightRail":{"displayName":"MTR"},"mtrUnpaidArea":{"displayName":"MTR"},"mtrPaidArea":{"displayName":"MTR"},"mrtUnderConstruction":{"displayName":"MRT"},"mrtSentosaExpress":{"displayName":"MRT"},"mrtTapeOut":{"displayName":"MRT"},"jrEastSingleColor":{"displayName":"JR"},"jrEastSingleColorPattern":{"displayName":"JR"},"lrtSingleColor":{"displayName":"LRT"},"londonTubeInternalInt":{"displayName":""},"londonTube10MinWalk":{"displayName":"10"},"londonTubeTerminal":{"displayName":""},"londonRail":{"displayName":"","limitedService":"/","colorBackground":"","colorForeground":""},"londonSandwich":{"displayName":""},"londonLutonAirportDART":{"displayName":"DART"},"londonIFSCloudCableCar":{"displayName":"IF"},"guangdongIntercityRailway":{"displayName":""},"chongqingRTLineBadge":{"displayName":""},"chongqingRTLoop":{"displayName":""},"chengduRTOutsideFareGates":{"displayName":""}},"edges":{},"footer":{"duplicate":"","copy":"","remove":""}}}'),header:{popoverHeader:"<1>{{environment}}</1> ",popoverBody:"RMPhttps://github.com/railmapgen/rmp/issues ",search:"",open:{new:"",config:"",projectRMG:"RMG",invalidType:"JSON",unknownError:"",gallery:"",tutorial:"",importOK:"{{id}}",importOKContent:"Ctrl + Z",importFail:"{{id}}",importFailContent:"",confirmOverwrite:{title:"",body:"",overwrite:""}},download:{config:"",image:"","2rmg":{title:"RMG",type:{line:"",loop:"",branch:""},placeholder:{chinese:"",english:"",lineCode:""},info1:"RMPRMG",info2:"RMG",noline:"",download:"",downloadInfo:""},format:"",png:"PNG",svg:"SVG",svgVersion:"","svg1.1":"1.1Adobe Illustrator",svg2:"2",transparent:"",scale:"",disabledScaleOptions:"",disabledScaleOptionsSolution:"",imageTooBig:"",isSystemFontsOnly:"",shareInfo1:" ",shareInfo2:" ",termsAndConditions:"",termsAndConditionsInfo:"",period:"",confirm:""},donation:{title:"",openCollective:"Open Collective",viaUSD:"PaypalVisa",afdian:"",viaCNY:"AlipayWechat Pay"},settings:{title:"",pro:"PRO",proWithTrial:"PRO",proLimitExceed:{master:"",parallel:"",solution:""},status:{title:"",count:{stations:"",miscNodes:"",lines:"",masters:"",parallel:""},subscription:{content:"","logged-out":"",free:"",subscriber:"",expired:""}},preference:{title:"",keepLastPath:"",autoParallel:"",randomStationNames:{title:"",none:"",shmetro:"",bjsubway:""},gridline:"",snapline:""},shortcuts:{title:"",keys:"",description:"",f:"",s:"",arrows:"",ijkl:"",shift:"",alt:"",delete:"",cut:"",copy:"",paste:"",undo:"",redo:""},procedures:{title:"",translate:{title:"",content:"XY",x:"X",y:"Y"},scale:{title:"",content:"XY",factor:""},changeType:{title:"",any:""},changeZIndex:"",changeStationType:{title:"",changeFrom:"",changeTo:"",info:""},changeLineStyleType:{title:"",changeFrom:"",changeTo:"",info:" "},changeLinePathType:{title:"",changeFrom:":",changeTo:":"},changeColor:{title:"",changeFrom:":",changeTo:":",any:""},removeLines:{title:"",content:""},updateColor:{title:"",content:"",success:"",error:": {{e}}"},unlockSimplePath:{title:"",content1:"11932",content2:"",content3:" ",check:"",unlocked:""},masterManager:{title:"",id:"ID",label:"",type:"",types:{MiscNode:"",Station:""},importTitle:"",importFrom:"",importOther:"",importParam:""}},telemetry:{title:"",info:"Google Analytics ",essential:"",essentialTooltip:"",essentialInfo:"",essentialLink:"Google Analytics ",additional:"",additionalInfo:""}},about:{title:"",rmp:"",railmapgen:"",desc:"90135",content1:"",content2:"202261",contributors:"",coreContributors:"",styleContributors:"","203IhzElttil":"",Swiftiecott:"",Minwtraft:"",contactUs:"",github:"",githubContent:"",slack:"Slack",slackContent:"Slack"}}},gs={color:"",warning:"",cancel:"",apply:"",remove:"",close:"",noShowAgain:" ",rmtPromotion:"    ! .",panel:JSON.parse('{"tools":{"showLess":" ","section":{"lineDrawing":" ","stations":"","miscellaneousNodes":" "},"select":"","learnHowToAdd":{"station":"   !","misc-node":"   !","line":"    !"}},"details":{"header":" ","info":{"title":"","id":" ","zIndex":"","stationType":" ","linePathType":"  ","lineStyleType":"  ","type":"","parallel":"","parallelIndex":" "},"multipleSelection":{"title":" ","change":"  ","selected":" :","show":"","station":"","miscNode":" ","edge":""},"changeStationTypeContent":"        .","changeLineTypeContent":"      .","changeType":" ","nodePosition":{"title":" ","pos":{"x":" ","y":" "}},"lineExtremities":{"title":" ","source":"","target":"","sourceName":" ","targetName":" "},"specificAttrsTitle":" ","unknown":{"error":" :(   {{category}}   .      .","node":"","lineType":" ","lineStyle":" "},"nodes":{"common":{"nameZh":" ","nameEn":" ","nameJa":" ","num":" "},"virtual":{"displayName":" "},"shmetroNumLineBadge":{"displayName":"    "},"shmetroTextLineBadge":{"displayName":"    "},"gzmtrLineBadge":{"displayName":"   ","tram":" ","span":"  "},"bjsubwayNumLineBadge":{"displayName":"   "},"bjsubwayTextLineBadge":{"displayName":"    "},"berlinSBahnLineBadge":{"displayName":" S  "},"berlinUBahnLineBadge":{"displayName":" U  "},"suzhouRTNumLineBadge":{"displayName":"    ","branch":""},"chongqingRTNumLineBadge":{"displayName":"     "},"chongqingRTTextLineBadge":{"displayName":"     "},"chongqingRTNumLineBadge2021":{"displayName":"      (2021)"},"chongqingRTTextLineBadge2021":{"displayName":"      (2021)","isRapid":" /   "},"shenzhenMetroNumLineBadge":{"displayName":"    ","branch":""},"mrtDestinationNumbers":{"displayName":" MRT  "},"mrtLineBadge":{"displayName":" MRT  ","isTram":"LRT  "},"jrEastLineBadge":{"displayName":"JR   ","crosshatchPatternFill":"  "},"qingdaoMetroNumLineBadge":{"displayName":"    ","numEn":"   ","showText":" "},"guangdongIntercityRailwayLineBadge":{"displayName":"    "},"londonArrow":{"displayName":" ","type":"","continuation":"","sandwich":"","tube":""},"chengduRTLineBadge":{"displayName":"   ","badgeType":{"displayName":"","normal":"","suburban":" ","tram":" "}},"taipeiMetroLineBadge":{"displayName":"   ","tram":""},"master":{"displayName":" ","type":"  ","undefined":" "},"facilities":{"displayName":"","type":"","airport":"","airport_2024":" 2024","maglev":"","disney":"","railway":"","railway_2024":" 2024","hsr":" (HSR)","airport_hk":" ","disney_hk":" ","ngong_ping_360":" 360","tiananmen":"","airport_bj":" ","bus_terminal_suzhou":"  ","railway_suzhou":" ","bus_interchange":"  ","airport_sg":" ","cruise_centre":" ","sentosa_express":" ","cable_car":"","merlion":"","marina_bay_sands":"  ","gardens_by_the_bay":"   ","singapore_flyer":" ","esplanade":"","airport_qingdao":" ","railway_qingdao":" ","coach_station_qingdao":"   ","cruise_terminal_qingdao":"  ","tram_qingdao":" ","airport_guangzhou":" ","railway_guangzhou":" ","intercity_guangzhou":"  ","river_craft":"  ","airport_london":" ","coach_station_london":"  ","airport_chongqing":" ","railway_chongqing":" ","coach_station_chongqing":"   ","bus_station_chongqing":"  ","shipping_station_chongqing":"  ","airport_chengdu":" ","railway_chengdu":" ","railway_taiwan":" ","hsr_taiwan":"  (HSR)"},"text":{"displayName":" ","content":"","fontSize":" ","lineHeight":"","textAnchor":" ","start":"","middle":"","end":"","auto":"","hanging":"","dominantBaseline":" ","language":"   ","zh":"","en":"","mtr__zh":" MTR ","mtr__en":" MTR ","berlin":" S/U Bahn","mrt":" MRT","jreast_ja":"JR ","jreast_en":"JR  ","tokyo_en":"  ","tube":" ","taipei":" ","fontSynthesisWarning":"         .","rotate":"","italic":"","bold":"","outline":""}},"stations":{"common":{"nameZh":" ","nameEn":" ","nameJa":" ","nameOffsetX":"  ","nameOffsetY":"  ","rotate":"","lineCode":" ","stationCode":" ","left":"","middle":"","right":"","top":"","bottom":""},"interchange":{"title":"","within":"  ","outStation":"  ","outSystem":"","addGroup":"  ","noInterchanges":"","nameZh":" ","nameEn":" ","add":" ","copy":" ","remove":" "},"shmetroBasic":{"displayName":"   "},"shmetroBasic2020":{"displayName":"   (2020)"},"shmetroInt":{"displayName":"  ","height":" ","width":" "},"shmetroOsysi":{"displayName":"    "},"shanghaiSuburbanRailway":{"displayName":" "},"gzmtrBasic":{"displayName":"  ","open":"","secondaryNameZh":" 2","secondaryNameEn":" 2","tram":" "},"gzmtrInt":{"displayName":"  ","open":"","secondaryNameZh":" 2","secondaryNameEn":" 2","foshan":""},"gzmtrInt2024":{"displayName":"   (2024)","columns":"  ","topHeavy":"     ","anchorAt":" ","anchorAtNone":"","osiPosition":"  ","osiPositionNone":"","osiPositionLeft":"","osiPositionRight":""},"bjsubwayBasic":{"displayName":"  ","open":""},"bjsubwayInt":{"displayName":"  ","outOfStation":"  "},"mtr":{"displayName":" MTR "},"suzhouRTBasic":{"displayName":"  ","textVertical":" "},"suzhouRTInt":{"displayName":"  "},"kunmingRTBasic":{"displayName":"  "},"kunmingRTInt":{"displayName":"  "},"MRTBasic":{"displayName":"MRT","isTram":"LRT"},"MRTInt":{"displayName":"MRT"},"jrEastBasic":{"displayName":"JR   ","nameOffset":" ","textOneLine":"   ","textVertical":" ","important":" ","lines":"  "},"jrEastImportant":{"displayName":"JR   ","textVertical":" ","mostImportant":"  ","minLength":"  "},"foshanMetroBasic":{"displayName":"  ","open":"","secondaryNameZh":" 2","secondaryNameEn":" 2","tram":" "},"qingdaoMetro":{"displayName":" ","isInt":""},"tokyoMetroBasic":{"displayName":" ","nameOffset":" ","textVertical":""},"tokyoMetroInt":{"displayName":" ","mereOffset":{"displayName":"  ","none":"","left1":"()","left2":"()","right1":"()","right2":" ()","up":"","down":""},"importance":{"displayName":" ","default":"","middle":"","high":""},"align":{"displayName":" ","horizontal":"","vertical":""}},"londonTubeCommon":{"stepFreeAccess":"  ","stepFreeAccessNone":"","stepFreeAccessTrain":" ","stepFreeAccessPlatform":" "},"londonTubeBasic":{"displayName":"  ","terminal":"","terminalNameRotate":"  ","shareTracks":" ","shareTracksIndex":"  "},"londonTubeInt":{"displayName":"  "},"londonRiverServicesInt":{"displayName":"   "},"guangdongIntercityRailway":{"displayName":"  "},"chongqingRTBasic":{"displayName":"  ","isLoop":""},"chongqingRTInt":{"displayName":"  ","textDistance":{"x":"  ","y":"  ","near":"","far":""}},"chongqingRTBasic2021":{"displayName":"   (2021)","open":""},"chongqingRTInt2021":{"displayName":"   (2021)","isRapid":"/  ","isWide":" ","wideDirection":{"displayName":"","vertical":"","horizontal":""}},"chengduRTBasic":{"displayName":"   ","isVertical":" ","stationType":{"displayName":" ","normal":" ","branchTerminal":" ","joint":" ","tram":" "}},"chengduRTInt":{"displayName":"  "}},"lines":{"reconcileId":"   ","common":{"offsetFrom":" ","offsetTo":" ","startFrom":" ","roundCornerFactor":"","from":"","to":"","parallelDisabled":"      .","changeInBaseLine":" :"},"simple":{"displayName":" ","offset":""},"diagonal":{"displayName":"135  "},"perpendicular":{"displayName":"90  "},"rotatePerpendicular":{"displayName":"90   "},"singleColor":{"displayName":" "},"shmetroVirtualInt":{"displayName":"    "},"shanghaiSuburbanRailway":{"displayName":"  ","isEnd":" "},"gzmtrVirtualInt":{"displayName":"    "},"gzmtrLoop":{"displayName":"   "},"chinaRailway":{"displayName":"  "},"bjsubwaySingleColor":{"displayName":"   "},"bjsubwayTram":{"displayName":"    "},"bjsubwayDotted":{"displayName":"   "},"dualColor":{"displayName":" ","swap":" ","colorA":" A","colorB":" B"},"river":{"displayName":" ","width":""},"mtrRaceDays":{"displayName":" MTR  "},"mtrLightRail":{"displayName":" MTR  "},"mtrUnpaidArea":{"displayName":" MTR   "},"mtrPaidArea":{"displayName":" MTR   "},"mrtUnderConstruction":{"displayName":" MRT  "},"mrtSentosaExpress":{"displayName":" MRT   "},"mrtTapeOut":{"displayName":" MRT     "},"jrEastSingleColor":{"displayName":"JR   "},"jrEastSingleColorPattern":{"displayName":"JR     "},"lrtSingleColor":{"displayName":" LRT  "},"londonTubeInternalInt":{"displayName":"    "},"londonTube10MinWalk":{"displayName":"  10    "},"londonTubeTerminal":{"displayName":"   "},"londonRail":{"displayName":"  ","limitedService":" / ","colorBackground":" ","colorForeground":" "},"londonSandwich":{"displayName":"  "},"londonLutonAirportDART":{"displayName":"   DART "},"londonIFSCloudCableCar":{"displayName":" IFS   "},"guangdongIntercityRailway":{"displayName":"   "},"chongqingRTLineBadge":{"displayName":"     "},"chongqingRTLoop":{"displayName":"   "},"chengduRTOutsideFareGates":{"displayName":"    "}},"edges":{},"footer":{"duplicate":"","copy":"","remove":""}}}'),header:{popoverHeader:" <1>{{environment}}</1> ",popoverBody:" RMP  .    https://github.com/railmapgen/rmp/issues  .",search:" ",open:{new:" ",config:" ",projectRMG:"RMG  ",invalidType:"  ! JSON   .",unknownError:"        .  .",gallery:" ",tutorial:" ",importOK:" {{id}}  .",importOKContent:"    ? Ctrl + Z       .",importFail:"{{id}}   .",importFailContent:"   .",confirmOverwrite:{title:" ",body:"    .      . ?",overwrite:""}},download:{config:" ",image:" ","2rmg":{title:"RMG  ",type:{line:"",loop:"",branch:""},placeholder:{chinese:"  ",english:"  ",lineCode:" "},info1:"  RMP  RMG    .",info2:"       .       ,     ,  (  )    ,     RMG    .",noline:"   .",download:"",downloadInfo:"   ."},format:" ",png:"PNG ",svg:"SVG ",svgVersion:"","svg1.1":"1.1 (Adobe Illustrator )",svg2:"2 (  )",transparent:" ",scale:"/",disabledScaleOptions:"    .",disabledScaleOptionsSolution:"      .",imageTooBig:"       !",isSystemFontsOnly:"   (    ).",shareInfo1:"   ",shareInfo2:"  .",termsAndConditions:"  ",termsAndConditionsInfo:"",period:".",confirm:""},donation:{title:"",openCollective:"Open Collective",viaUSD:"Paypal  Visa    .",afdian:"",viaCNY:"Alipay  Wechat Pay   ."},settings:{title:"",pro:" PRO ,   .",proWithTrial:" PRO ,    .",proLimitExceed:{master:"     .",parallel:"    .",solution:"           !"},status:{title:"",count:{stations:" :",miscNodes:"  :",lines:" :",masters:"  :",parallel:" :"},subscription:{content:" :","logged-out":"  .",free:" !     !",subscriber:" !   !",expired:"  .   ."}},preference:{title:"",keepLastPath:"       ",autoParallel:"      ",randomStationNames:{title:"     ",none:"",shmetro:"",bjsubway:""},gridline:"   ",snapline:"    "},shortcuts:{title:" ",keys:"",description:"",f:"  .",s:" .",arrows:"  .",ijkl:"   .",shift:"  .",alt:"       .",delete:"  .",cut:".",copy:".",paste:".",undo:".",redo:" ."},procedures:{title:"",translate:{title:"  ",content:"  x  y   :",x:"X",y:"Y"},scale:{title:"  ",content:"  x  y   :",factor:" "},changeType:{title:"   ",any:""},changeZIndex:"  ",changeStationType:{title:"   ",changeFrom:"   :",changeTo:"   :",info:"        .  !"},changeLineStyleType:{title:"   ",changeFrom:"    :",changeTo:" :",info:"         .   !"},changeLinePathType:{title:"   ",changeFrom:"    :",changeTo:" :"},changeColor:{title:"  ",changeFrom:"    .:",changeTo:" :",any:" "},removeLines:{title:"   ",content:"   : "},updateColor:{title:" ",content:"    .",success:"   .",error:"     : {{e}}."},unlockSimplePath:{title:"   ",content1:"Rail Map Painter            .          .     1932      .         .              .",content2:"              .  Rail Map Painter      ,         .",content3:"       Easy Path      .           .",check:"   ",unlocked:" "},masterManager:{title:"   ",id:"ID",label:"",type:"",types:{MiscNode:" ",Station:""},importTitle:"  ",importFrom:"  ",importOther:"  ",importParam:"  "}},telemetry:{title:" ",info:"           Google Analytics     .          , 3   .",essential:"",essentialTooltip:"      ",essentialInfo:"    ,        . .         .",essentialLink:"Google Analytics         .",additional:"",additionalInfo:"            .     ,      ."}},about:{title:"",rmp:"  ",railmapgen:"     ",desc:"     90  135        !",content1:"    .",content2:"2022 6 1 ",contributors:"",coreContributors:" ",styleContributors:" ",langonginc:"   .","203IhzElttil":"             .",Swiftiecott:"             .",Minwtraft:"             .",contactUs:" ",github:" ",githubContent:"  ?    !",slack:" ",slackContent:"   !"}}},ms={color:"",warning:"",cancel:"",apply:"",remove:"",close:"",noShowAgain:"",rmtPromotion:"",panel:{tools:{showLess:"",section:{lineDrawing:"",stations:"",miscellaneousNodes:""},select:"",learnHowToAdd:{station:"","misc-node":"",line:""}},details:{header:"",info:{title:"",id:"",zIndex:"",stationType:"",linePathType:"",lineStyleType:"",type:"",parallel:"",parallelIndex:""},multipleSelection:{title:"",change:"",selected:":",show:"",station:"",miscNode:"",edge:""},changeStationTypeContent:"",changeLineTypeContent:"",changeType:"",nodePosition:{title:"",pos:{x:"",y:""}},lineExtremities:{title:"",source:"",target:"",sourceName:"",targetName:""},specificAttrsTitle:"",unknown:{error:" :( {{category}}",node:"",linePath:"",lineStyle:""},nodes:{common:{nameZh:"",nameEn:"",nameJa:"",num:""},virtual:{displayName:""},shmetroNumLineBadge:{displayName:""},shmetroTextLineBadge:{displayName:""},gzmtrLineBadge:{displayName:"",tram:"",span:""},bjsubwayNumLineBadge:{displayName:""},bjsubwayTextLineBadge:{displayName:""},berlinSBahnLineBadge:{displayName:""},berlinUBahnLineBadge:{displayName:""},suzhouRTNumLineBadge:{displayName:"",branch:""},chongqingRTNumLineBadge:{displayName:""},chongqingRTTextLineBadge:{displayName:""},chongqingRTNumLineBadge2021:{displayName:"2021"},chongqingRTTextLineBadge2021:{displayName:"2021",isRapid:"/"},shenzhenMetroNumLineBadge:{displayName:"",branch:""},mrtDestinationNumbers:{displayName:"MRT"},mrtLineBadge:{displayName:"MRT",isTram:"LRT"},jrEastLineBadge:{displayName:"JR",crosshatchPatternFill:""},qingdaoMetroNumLineBadge:{displayName:"",numEn:"",showText:""},guangdongIntercityRailwayLineBadge:{displayName:""},londonArrow:{displayName:"",type:"",continuation:"",sandwich:"",tube:""},chengduRTLineBadge:{displayName:"",badgeType:{displayName:"",normal:"",suburban:"",tram:""}},taipeiMetroLineBadge:{displayName:"",tram:""},master:{displayName:"",type:"",undefined:""},facilities:{displayName:"",type:"",airport:"",airport_2024:" 2024",maglev:"",disney:"",railway:"",railway_2024:" 2024",hsr:"",airport_hk:"",disney_hk:"",ngong_ping_360:"360",tiananmen:"",airport_bj:"",bus_terminal_suzhou:"",railway_suzhou:"",bus_interchange:"",airport_sg:"",cruise_centre:"",sentosa_express:"",cable_car:"",merlion:"",marina_bay_sands:"",gardens_by_the_bay:"",singapore_flyer:"",esplanade:"",airport_qingdao:"",railway_qingdao:"",coach_station_qingdao:"",cruise_terminal_qingdao:"",tram_qingdao:"",airport_guangzhou:"",railway_guangzhou:"",intercity_guangzhou:"",river_craft:"",airport_london:"",coach_station_london:"",airport_chongqing:"",railway_chongqing:"",coach_station_chongqing:"",bus_station_chongqing:"",shipping_station_chongqing:"",airport_chengdu:"",railway_chengdu:"",railway_taiwan:"",hsr_taiwan:""},text:{displayName:"",content:"",fontSize:"",lineHeight:"",textAnchor:"",start:"",middle:"",end:"",auto:"",hanging:"",dominantBaseline:"",language:"",zh:"",en:"",mtr__zh:"",mtr__en:"",berlin:" S/U Bahn",mrt:"",jreast_ja:"JR",jreast_en:"JR",tokyo_en:"",tube:"",taipei:"",fontSynthesisWarning:"",rotate:"",italic:"",bold:"",outline:""}},stations:{common:{nameZh:"",nameEn:"",nameJa:"",nameOffsetX:"",nameOffsetY:"",rotate:"",lineCode:"",stationCode:"",left:"",middle:"",right:"",top:"",bottom:""},interchange:{title:"",within:"",outStation:"",outSystem:"",addGroup:"",noInterchanges:"",nameZh:"",nameEn:"",add:"",copy:"",remove:""},shmetroBasic:{displayName:""},shmetroBasic2020:{displayName:"2020"},shmetroInt:{displayName:"",height:"",width:""},shmetroOsysi:{displayName:""},shanghaiSuburbanRailway:{displayName:""},gzmtrBasic:{displayName:"",open:"",secondaryNameZh:"",secondaryNameEn:"",tram:""},gzmtrInt:{displayName:"",open:"",secondaryNameZh:"",secondaryNameEn:"",foshan:""},gzmtrInt2024:{displayName:"2024",columns:"",topHeavy:"",anchorAt:"",anchorAtNone:"",osiPosition:"",osiPositionNone:"",osiPositionLeft:"",osiPositionRight:""},bjsubwayBasic:{displayName:"",open:""},bjsubwayInt:{displayName:"",outOfStation:""},mtr:{displayName:"MTR"},suzhouRTBasic:{displayName:"",textVertical:""},suzhouRTInt:{displayName:""},kunmingRTBasic:{displayName:""},kunmingRTInt:{displayName:""},MRTBasic:{displayName:"MRT",isTram:"LRT"},MRTInt:{displayName:"MRT"},jrEastBasic:{displayName:"JR",nameOffset:"",textOneLine:"",textVertical:"",important:"",lines:""},jrEastImportant:{displayName:"JR",textVertical:"",mostImportant:"",minLength:""},foshanMetroBasic:{displayName:"",open:"",secondaryNameZh:"",secondaryNameEn:"",tram:""},qingdaoMetro:{displayName:"",isInt:""},tokyoMetroBasic:{displayName:"",nameOffset:"",textVertical:""},tokyoMetroInt:{displayName:"",mereOffset:{displayName:"",none:"",left1:" ()",left2:" ()",right1:" ()",right2:" ()",up:"",down:""},importance:{displayName:"",default:"",middle:"",high:""},align:{displayName:"",horizontal:"",vertical:""}},londonTubeCommon:{stepFreeAccess:"",stepFreeAccessNone:"",stepFreeAccessTrain:"",stepFreeAccessPlatform:""},londonTubeBasic:{displayName:"",terminal:"",terminalNameRotate:"",shareTracks:"",shareTracksIndex:""},londonTubeInt:{displayName:""},londonRiverServicesInt:{displayName:""},guangdongIntercityRailway:{displayName:""},chongqingRTBasic:{displayName:"",isLoop:""},chongqingRTInt:{displayName:"",textDistance:{x:"",y:"",near:"",far:""}},chongqingRTBasic2021:{displayName:"2021",open:""},chongqingRTInt2021:{displayName:"2021",isRapid:"/",isWide:"",wideDirection:{displayName:"",vertical:"",horizontal:""}},chengduRTBasic:{displayName:"",isVertical:"",stationType:{displayName:"",normal:"",branchTerminal:"",joint:"",tram:""}},chengduRTInt:{displayName:""}},lines:{reconcileId:"",common:{offsetFrom:"",offsetTo:"",startFrom:"",roundCornerFactor:"",from:"",to:"",parallelDisabled:"",changeInBaseLine:""},simple:{displayName:"",offset:""},diagonal:{displayName:"135"},perpendicular:{displayName:"90"},rotatePerpendicular:{displayName:"90"},singleColor:{displayName:""},shmetroVirtualInt:{displayName:""},shanghaiSuburbanRailway:{displayName:"",isEnd:""},gzmtrVirtualInt:{displayName:""},gzmtrLoop:{displayName:""},chinaRailway:{displayName:""},bjsubwaySingleColor:{displayName:""},bjsubwayTram:{displayName:""},bjsubwayDotted:{displayName:""},dualColor:{displayName:"",swap:"",colorA:"A",colorB:"B"},river:{displayName:"",width:""},mtrRaceDays:{displayName:"MTR"},mtrLightRail:{displayName:"MTR"},mtrUnpaidArea:{displayName:"MTR"},mtrPaidArea:{displayName:"MTR"},mrtUnderConstruction:{displayName:"MRT"},mrtSentosaExpress:{displayName:"MRT"},mrtTapeOut:{displayName:"MRT"},jrEastSingleColor:{displayName:"JR"},jrEastSingleColorPattern:{displayName:"JR"},lrtSingleColor:{displayName:"LRT"},londonTubeInternalInt:{displayName:""},londonTube10MinWalk:{displayName:"10"},londonTubeTerminal:{displayName:""},londonRail:{displayName:"",limitedService:"/",colorBackground:"",colorForeground:""},londonSandwich:{displayName:""},londonLutonAirportDART:{displayName:"DART"},londonIFSCloudCableCar:{displayName:"IFS"},guangdongIntercityRailway:{displayName:""},chongqingRTLineBadge:{displayName:""},chongqingRTLoop:{displayName:""},chengduRTOutsideFareGates:{displayName:""}},edges:{},footer:{duplicate:"",copy:"",remove:""}}},header:{popoverHeader:"<1>{{environment}}</1>",popoverBody:"RMP https://github.com/railmapgen/rmp/issues ",search:"",open:{new:"",config:"",projectRMG:"RMG",invalidType:"JSON",unknownError:"",gallery:"",tutorial:"",importOK:" {{id}} ",importOKContent:" Ctrl + Z ",importFail:"{{id}}",importFailContent:"",confirmOverwrite:{title:"",body:"",overwrite:""}},download:{config:"",image:"","2rmg":{title:"RMG",type:{line:"",loop:"",branch:""},placeholder:{chinese:"",english:"",lineCode:""},info1:"RMPRMG",info2:"RMG",noline:"",download:"",downloadInfo:""},format:"",png:"PNG",svg:"SVG",svgVersion:"","svg1.1":"1.1Adobe Illustrator",svg2:"2",transparent:"",scale:"",disabledScaleOptions:"",disabledScaleOptionsSolution:"",imageTooBig:"",isSystemFontsOnly:" ",shareInfo1:"",shareInfo2:"",termsAndConditions:"",termsAndConditionsInfo:"",period:"",confirm:""},donation:{title:"",openCollective:"Open Collective",viaUSD:"PaypalVisa",afdian:"",viaCNY:""},settings:{title:"",pro:"",proWithTrial:"PRO",proLimitExceed:{master:"",parallel:"",solution:""},status:{title:"",count:{stations:"",miscNodes:"",lines:"",masters:"",parallel:""},subscription:{content:"","logged-out":"",free:"",subscriber:"",expired:""}},preference:{title:"",keepLastPath:"",autoParallel:"",randomStationNames:{title:"",none:"",shmetro:"",bjsubway:""},gridline:"",snapline:""},shortcuts:{title:"",keys:"",description:"",f:"",s:"",arrows:"",ijkl:"",shift:"",alt:"",delete:"",cut:"",copy:"",paste:"",undo:"",redo:""},procedures:{title:"",translate:{title:"",content:"xy",x:"",y:""},scale:{title:"",content:"xy",factor:""},changeType:{title:"",any:""},changeZIndex:"",changeStationType:{title:"",changeFrom:"",changeTo:"",info:""},changeLineStyleType:{title:"",changeFrom:"",changeTo:"",info:""},changeLinePathType:{title:"",changeFrom:"",changeTo:""},changeColor:{title:"",changeFrom:"",changeTo:"",any:""},removeLines:{title:"",content:" "},updateColor:{title:"",content:"",success:"",error:"{{e}}"},unlockSimplePath:{title:"",content1:"1932",content2:"",content3:"",check:"",unlocked:""},masterManager:{title:"",id:"",label:"",type:"",types:{MiscNode:"",Station:""},importTitle:"",importFrom:"",importOther:"",importParam:""}},telemetry:{title:"",info:" Google Analytics ",essential:"",essentialTooltip:"",essentialInfo:"",essentialLink:" Google Analytics ",additional:"",additionalInfo:""}},about:{title:"",rmp:"",railmapgen:"",desc:" 90  135 ",content1:"",content2:"06/01/2022",contributors:"",coreContributors:"",styleContributors:"",langonginc:"","203IhzElttil":"",Swiftiecott:"",Minwtraft:"",contactUs:"",github:"",githubContent:"",slack:"Slack",slackContent:"Slack!"}}},fs={color:"",warning:"",cancel:"",apply:"",remove:"",close:"",noShowAgain:"",rmtPromotion:"",panel:{tools:{showLess:"",section:{lineDrawing:"",stations:"",miscellaneousNodes:""},select:"",learnHowToAdd:{station:"","misc-node":"",line:""}},details:{header:"",info:{title:"",id:"",zIndex:"",stationType:"",linePathType:"",lineStyleType:"",type:"",parallel:"",parallelIndex:""},multipleSelection:{title:"",change:"",selected:":",show:"",station:"",miscNode:"",edge:""},changeStationTypeContent:"",changeLineTypeContent:"",changeType:"",nodePosition:{title:"",pos:{x:"",y:""}},lineExtremities:{title:"",source:"",target:"",sourceName:"",targetName:""},specificAttrsTitle:"",unknown:{error:" :( {{category}}",node:"",linePath:"",lineStyle:""},nodes:{common:{nameZh:"",nameEn:"",nameJa:"",num:""},virtual:{displayName:""},shmetroNumLineBadge:{displayName:""},shmetroTextLineBadge:{displayName:""},gzmtrLineBadge:{displayName:"",tram:"",span:""},bjsubwayNumLineBadge:{displayName:""},bjsubwayTextLineBadge:{displayName:""},berlinSBahnLineBadge:{displayName:""},berlinUBahnLineBadge:{displayName:""},suzhouRTNumLineBadge:{displayName:"",branch:""},chongqingRTNumLineBadge:{displayName:""},chongqingRTTextLineBadge:{displayName:""},chongqingRTNumLineBadge2021:{displayName:"2021"},chongqingRTTextLineBadge2021:{displayName:"2021",isRapid:"/"},shenzhenMetroNumLineBadge:{displayName:"",branch:""},mrtDestinationNumbers:{displayName:"MRT"},mrtLineBadge:{displayName:"MRT",isTram:"LRT"},jrEastLineBadge:{displayName:"JR",crosshatchPatternFill:""},qingdaoMetroNumLineBadge:{displayName:"",numEn:"",showText:""},guangdongIntercityRailwayLineBadge:{displayName:""},londonArrow:{displayName:"",type:"",continuation:"",sandwich:"",tube:""},chengduRTLineBadge:{displayName:"",badgeType:{displayName:"",normal:"",suburban:"",tram:""}},taipeiMetroLineBadge:{displayName:"",tram:""},master:{displayName:"",type:"",undefined:""},facilities:{displayName:"",type:"",airport:"",airport_2024:" 2024",maglev:"",disney:"",railway:"",railway_2024:" 2024",hsr:"",airport_hk:"",disney_hk:"",ngong_ping_360:"360",tiananmen:"",airport_bj:"",bus_terminal_suzhou:"",railway_suzhou:"",bus_interchange:"",airport_sg:"",cruise_centre:"",sentosa_express:"",cable_car:"",merlion:"",marina_bay_sands:"",gardens_by_the_bay:"",singapore_flyer:"",esplanade:"",airport_qingdao:"",railway_qingdao:"",coach_station_qingdao:"",cruise_terminal_qingdao:"",tram_qingdao:"",airport_guangzhou:"",railway_guangzhou:"",intercity_guangzhou:"",river_craft:"",airport_london:"",coach_station_london:"",airport_chongqing:"",railway_chongqing:"",coach_station_chongqing:"",bus_station_chongqing:"",shipping_station_chongqing:"",airport_chengdu:"",railway_chengdu:"",railway_taiwan:"",hsr_taiwan:""},text:{displayName:"",content:"",fontSize:"",lineHeight:"",textAnchor:"",start:"",middle:"",end:"",auto:"",hanging:"",dominantBaseline:"",language:"",zh:"",en:"",mtr__zh:"",mtr__en:"",berlin:" S/U ",mrt:"",jreast_ja:"JR ",jreast_en:"JR ",tokyo_en:"",tube:"",taipei:"",fontSynthesisWarning:"",rotate:"",italic:"",bold:"",outline:""}},stations:{common:{nameZh:"",nameEn:"",nameJa:"",nameOffsetX:"",nameOffsetY:"",rotate:"",lineCode:"",stationCode:"",left:"",middle:"",right:"",top:"",bottom:""},interchange:{title:"",within:"",outStation:"",outSystem:"",addGroup:"",noInterchanges:"",nameZh:"",nameEn:"",add:"",copy:"",remove:""},shmetroBasic:{displayName:""},shmetroBasic2020:{displayName:"2020"},shmetroInt:{displayName:"",height:"",width:""},shmetroOsysi:{displayName:""},shanghaiSuburbanRailway:{displayName:""},gzmtrBasic:{displayName:"",open:"",secondaryNameZh:"",secondaryNameEn:"",tram:""},gzmtrInt:{displayName:"",open:"",secondaryNameZh:"",secondaryNameEn:"",foshan:""},gzmtrInt2024:{displayName:"2024",columns:"",topHeavy:"",anchorAt:"",anchorAtNone:"",osiPosition:"",osiPositionNone:"",osiPositionLeft:"",osiPositionRight:""},bjsubwayBasic:{displayName:"",open:""},bjsubwayInt:{displayName:"",outOfStation:""},mtr:{displayName:"MTR"},suzhouRTBasic:{displayName:"",textVertical:""},suzhouRTInt:{displayName:""},kunmingRTBasic:{displayName:""},kunmingRTInt:{displayName:""},MRTBasic:{displayName:"MRT",isTram:"LRT"},MRTInt:{displayName:"MRT"},jrEastBasic:{displayName:"JR",nameOffset:"",textOneLine:"",textVertical:"",important:"",lines:""},jrEastImportant:{displayName:"JR",textVertical:"",mostImportant:"",minLength:""},foshanMetroBasic:{displayName:"",open:"",secondaryNameZh:"",secondaryNameEn:"",tram:""},qingdaoMetro:{displayName:"",isInt:""},tokyoMetroBasic:{displayName:"",nameOffset:"",textVertical:""},tokyoMetroInt:{displayName:"",mereOffset:{displayName:"",none:"",left1:" ()",left2:" ()",right1:" ()",right2:" ()",up:"",down:""},importance:{displayName:"",default:"",middle:"",high:""},align:{displayName:"",horizontal:"",vertical:""}},londonTubeCommon:{stepFreeAccess:"",stepFreeAccessNone:"",stepFreeAccessTrain:"",stepFreeAccessPlatform:""},londonTubeBasic:{displayName:"",terminal:"",terminalNameRotate:"",shareTracks:"",shareTracksIndex:""},londonTubeInt:{displayName:""},londonRiverServicesInt:{displayName:""},guangdongIntercityRailway:{displayName:""},chongqingRTBasic:{displayName:"",isLoop:""},chongqingRTInt:{displayName:"",textDistance:{x:"",y:"",near:"",far:""}},chongqingRTBasic2021:{displayName:"2021",open:""},chongqingRTInt2021:{displayName:"2021",isRapid:"/",isWide:"",wideDirection:{displayName:"",vertical:"",horizontal:""}},chengduRTBasic:{displayName:"",isVertical:"",stationType:{displayName:"",normal:"",branchTerminal:"",joint:"",tram:""}},chengduRTInt:{displayName:""}},lines:{reconcileId:"",common:{offsetFrom:"",offsetTo:"",startFrom:"",roundCornerFactor:"",from:"",to:"",parallelDisabled:"",changeInBaseLine:""},simple:{displayName:"",offset:""},diagonal:{displayName:"135"},perpendicular:{displayName:"90"},rotatePerpendicular:{displayName:"90"},singleColor:{displayName:""},shmetroVirtualInt:{displayName:""},shanghaiSuburbanRailway:{displayName:"",isEnd:""},gzmtrVirtualInt:{displayName:""},gzmtrLoop:{displayName:""},chinaRailway:{displayName:""},bjsubwaySingleColor:{displayName:""},bjsubwayTram:{displayName:""},bjsubwayDotted:{displayName:""},dualColor:{displayName:"",swap:"",colorA:"A",colorB:"B"},river:{displayName:"",width:""},mtrRaceDays:{displayName:"MTR"},mtrLightRail:{displayName:"MTR"},mtrUnpaidArea:{displayName:"MTR"},mtrPaidArea:{displayName:"MTR"},mrtUnderConstruction:{displayName:"MRT"},mrtSentosaExpress:{displayName:"MRT"},mrtTapeOut:{displayName:"MRT"},jrEastSingleColor:{displayName:"JR"},jrEastSingleColorPattern:{displayName:"JR"},lrtSingleColor:{displayName:"LRT"},londonTubeInternalInt:{displayName:""},londonTube10MinWalk:{displayName:"10"},londonTubeTerminal:{displayName:""},londonRail:{displayName:"",limitedService:"/",colorBackground:"",colorForeground:""},londonSandwich:{displayName:""},londonLutonAirportDART:{displayName:"DART"},londonIFSCloudCableCar:{displayName:"IFS"},guangdongIntercityRailway:{displayName:""},chongqingRTLineBadge:{displayName:""},chongqingRTLoop:{displayName:""},chengduRTOutsideFareGates:{displayName:""}},edges:{},footer:{duplicate:"",copy:"",remove:""}}},header:{popoverHeader:"<1>{{environment}}</1>",popoverBody:"RMP https://github.com/railmapgen/rmp/issues ",search:"",open:{new:"",config:"",projectRMG:"RMG",invalidType:"JSON",unknownError:"",gallery:"",tutorial:"",importOK:" {{id}} ",importOKContent:" Ctrl + Z ",importFail:"{{id}}",importFailContent:"",confirmOverwrite:{title:"",body:"",overwrite:""}},download:{config:"",image:"","2rmg":{title:"RMG",type:{line:"",loop:"",branch:""},placeholder:{chinese:"",english:"",lineCode:""},info1:"RMPRMG",info2:"RMG",noline:"",download:"",downloadInfo:""},format:"",png:"PNG",svg:"SVG",svgVersion:"","svg1.1":"1.1Adobe Illustrator",svg2:"2",transparent:"",scale:"",disabledScaleOptions:"",disabledScaleOptionsSolution:"",imageTooBig:"",isSystemFontsOnly:"",shareInfo1:"",shareInfo2:"",termsAndConditions:"",termsAndConditionsInfo:"",period:"",confirm:""},donation:{title:"",openCollective:"Open Collective",viaUSD:"PaypalVisa",afdian:"",viaCNY:""},settings:{title:"",pro:"",proWithTrial:"PRO",proLimitExceed:{master:"",parallel:"",solution:""},status:{title:"",count:{stations:"",miscNodes:"",lines:"",masters:"",parallel:""},subscription:{content:"","logged-out":"",free:"",subscriber:"",expired:""}},preference:{title:"",keepLastPath:"",autoParallel:"",randomStationNames:{title:"",none:"",shmetro:"",bjsubway:""},gridline:"",snapline:""},shortcuts:{title:"",keys:"",description:"",f:"",s:"",arrows:"",ijkl:"",shift:"",alt:"",delete:"",cut:"",copy:"",paste:"",undo:"",redo:""},procedures:{title:"",translate:{title:"",content:"xy",x:"",y:""},scale:{title:"",content:"xy",factor:""},changeType:{title:"",any:""},changeZIndex:"",changeStationType:{title:"",changeFrom:"",changeTo:"",info:""},changeLineStyleType:{title:"",changeFrom:"",changeTo:"",info:""},changeLinePathType:{title:"",changeFrom:"",changeTo:""},changeColor:{title:"",changeFrom:"",changeTo:"",any:""},removeLines:{title:"",content:" "},updateColor:{title:"",content:"",success:"",error:"{{e}}"},unlockSimplePath:{title:"",content1:"1932",content2:"",content3:" ",check:"",unlocked:""},masterManager:{title:"",id:"",label:"",type:"",types:{MiscNode:"",Station:""},importTitle:"",importFrom:"",importOther:"",importParam:""}},telemetry:{title:"",info:" Google Analytics ",essential:"",essentialTooltip:"",essentialInfo:"",essentialLink:" Google Analytics ",additional:"",additionalInfo:""}},about:{title:"",rmp:"",railmapgen:"",desc:" 90  135 ",content1:"",content2:"06/01/2022",contributors:"",coreContributors:"",styleContributors:"",langonginc:"","203IhzElttil":"",Swiftiecott:"",Minwtraft:"",contactUs:"",github:"",githubContent:"",slack:"Slack",slackContent:"Slack!"}}},ys=p("a$",(new Jn.I18nBuilder).use($e).withAppName("Rail Map Painter").withLng(Jn.getLanguage()).withDefaultResource(us).withResource("en",hs).withResource("zh-Hans",ms).withResource("zh-Hant",fs).withResource("ja",ps).withResource("ko",gs).build()),{abs:bs,cos:vs,sin:ws,acos:xs,atan2:Ns,sqrt:Ss,pow:ks}=Math;function Rs(e){return e<0?-ks(-e,1/3):ks(e,1/3)}const Ts=Math.PI,_s=2*Ts,Cs=Ts/2,Ls=Number.MAX_SAFE_INTEGER||9007199254740991,Os=Number.MIN_SAFE_INTEGER||-9007199254740991,As={x:0,y:0,z:0},js={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){const n=t(e);let i=n.x*n.x+n.y*n.y;return void 0!==n.z&&(i+=n.z*n.z),Ss(i)},compute:function(e,t,n){if(0===e)return t[0].t=0,t[0];const i=t.length-1;if(1===e)return t[i].t=1,t[i];const o=1-e;let r=t;if(0===i)return t[0].t=e,t[0];if(1===i){const t={x:o*r[0].x+e*r[1].x,y:o*r[0].y+e*r[1].y,t:e};return n&&(t.z=o*r[0].z+e*r[1].z),t}if(i<4){let t,a,s,l=o*o,d=e*e,c=0;2===i?(r=[r[0],r[1],r[2],As],t=l,a=o*e*2,s=d):3===i&&(t=l*o,a=l*e*3,s=o*d*3,c=e*d);const u={x:t*r[0].x+a*r[1].x+s*r[2].x+c*r[3].x,y:t*r[0].y+a*r[1].y+s*r[2].y+c*r[3].y,t:e};return n&&(u.z=t*r[0].z+a*r[1].z+s*r[2].z+c*r[3].z),u}const a=JSON.parse(JSON.stringify(t));for(;a.length>1;){for(let t=0;t<a.length-1;t++)a[t]={x:a[t].x+(a[t+1].x-a[t].x)*e,y:a[t].y+(a[t+1].y-a[t].y)*e},void 0!==a[t].z&&(a[t].z=a[t].z+(a[t+1].z-a[t].z)*e);a.splice(a.length-1,1)}return a[0].t=e,a[0]},computeWithRatios:function(e,t,n,i){const o=1-e,r=n,a=t;let s,l=r[0],d=r[1],c=r[2],u=r[3];return l*=o,d*=e,2===a.length?(s=l+d,{x:(l*a[0].x+d*a[1].x)/s,y:(l*a[0].y+d*a[1].y)/s,z:!!i&&(l*a[0].z+d*a[1].z)/s,t:e}):(l*=o,d*=2*o,c*=e*e,3===a.length?(s=l+d+c,{x:(l*a[0].x+d*a[1].x+c*a[2].x)/s,y:(l*a[0].y+d*a[1].y+c*a[2].y)/s,z:!!i&&(l*a[0].z+d*a[1].z+c*a[2].z)/s,t:e}):(l*=o,d*=1.5*o,c*=3*o,u*=e*e*e,4===a.length?(s=l+d+c+u,{x:(l*a[0].x+d*a[1].x+c*a[2].x+u*a[3].x)/s,y:(l*a[0].y+d*a[1].y+c*a[2].y+u*a[3].y)/s,z:!!i&&(l*a[0].z+d*a[1].z+c*a[2].z+u*a[3].z)/s,t:e}):void 0))},derive:function(e,t){const n=[];for(let i=e,o=i.length,r=o-1;o>1;o--,r--){const e=[];for(let n,o=0;o<r;o++)n={x:r*(i[o+1].x-i[o].x),y:r*(i[o+1].y-i[o].y)},t&&(n.z=r*(i[o+1].z-i[o].z)),e.push(n);n.push(e),i=e}return n},between:function(e,t,n){return t<=e&&e<=n||js.approximately(e,t)||js.approximately(e,n)},approximately:function(e,t,n){return bs(e-t)<=(n||1e-6)},length:function(e){const t=js.Tvalues.length;let n=0;for(let i,o=0;o<t;o++)i=.5*js.Tvalues[o]+.5,n+=js.Cvalues[o]*js.arcfn(i,e);return.5*n},map:function(e,t,n,i,o){return i+(o-i)*((e-t)/(n-t))},lerp:function(e,t,n){const i={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return void 0!==t.z&&void 0!==n.z&&(i.z=t.z+e*(n.z-t.z)),i},pointToString:function(e){let t=e.x+"/"+e.y;return void 0!==e.z&&(t+="/"+e.z),t},pointsToString:function(e){return"["+e.map(js.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){const i=t.x-e.x,o=t.y-e.y,r=n.x-e.x,a=n.y-e.y;return Ns(i*a-o*r,i*r+o*a)},round:function(e,t){const n=""+e,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+t))},dist:function(e,t){const n=e.x-t.x,i=e.y-t.y;return Ss(n*n+i*i)},closest:function(e,t){let n,i,o=ks(2,63);return e.forEach((function(e,r){i=js.dist(t,e),i<o&&(o=i,n=r)})),{mdist:o,mpos:n}},abcratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;const n=ks(e,t)+ks(1-e,t);return bs((n-1)/n)},projectionratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;const n=ks(1-e,t);return n/(ks(e,t)+n)},lli8:function(e,t,n,i,o,r,a,s){const l=(e-n)*(r-s)-(t-i)*(o-a);return 0!=l&&{x:((e*i-t*n)*(o-a)-(e-n)*(o*s-r*a))/l,y:((e*i-t*n)*(r-s)-(t-i)*(o*s-r*a))/l}},lli4:function(e,t,n,i){const o=e.x,r=e.y,a=t.x,s=t.y,l=n.x,d=n.y,c=i.x,u=i.y;return js.lli8(o,r,a,s,l,d,c,u)},lli:function(e,t){return js.lli4(e,e.c,t,t.c)},makeline:function(e,t){return new Fs(e.x,e.y,(e.x+t.x)/2,(e.y+t.y)/2,t.x,t.y)},findbbox:function(e){let t=Ls,n=Ls,i=Os,o=Os;return e.forEach((function(e){const r=e.bbox();t>r.x.min&&(t=r.x.min),n>r.y.min&&(n=r.y.min),i<r.x.max&&(i=r.x.max),o<r.y.max&&(o=r.y.max)})),{x:{min:t,mid:(t+i)/2,max:i,size:i-t},y:{min:n,mid:(n+o)/2,max:o,size:o-n}}},shapeintersections:function(e,t,n,i,o){if(!js.bboxoverlap(t,i))return[];const r=[],a=[e.startcap,e.forward,e.back,e.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return a.forEach((function(t){t.virtual||s.forEach((function(i){if(i.virtual)return;const a=t.intersects(i,o);a.length>0&&(a.c1=t,a.c2=i,a.s1=e,a.s2=n,r.push(a))}))})),r},makeshape:function(e,t,n){const i=t.points.length,o=e.points.length,r=js.makeline(t.points[i-1],e.points[0]),a=js.makeline(e.points[o-1],t.points[0]),s={startcap:r,forward:e,back:t,endcap:a,bbox:js.findbbox([r,e,t,a]),intersections:function(e){return js.shapeintersections(s,s.bbox,e,e.bbox,n)}};return s},getminmax:function(e,t,n){if(!n)return{min:0,max:0};let i,o,r=Ls,a=Os;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(let s=0,l=n.length;s<l;s++)i=n[s],o=e.get(i),o[t]<r&&(r=o[t]),o[t]>a&&(a=o[t]);return{min:r,mid:(r+a)/2,max:a,size:a-r}},align:function(e,t){const n=t.p1.x,i=t.p1.y,o=-Ns(t.p2.y-i,t.p2.x-n);return e.map((function(e){return{x:(e.x-n)*vs(o)-(e.y-i)*ws(o),y:(e.x-n)*ws(o)+(e.y-i)*vs(o)}}))},roots:function(e,t){t=t||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,i=js.align(e,t),o=function(e){return 0<=e&&e<=1};if(2===n){const e=i[0].y,t=i[1].y,n=i[2].y,r=e-2*t+n;if(0!==r){const i=-Ss(t*t-e*n),a=-e+t;return[-(i+a)/r,-(-i+a)/r].filter(o)}return t!==n&&0===r?[(2*t-n)/(2*t-2*n)].filter(o):[]}const r=i[0].y,a=i[1].y,s=i[2].y;let l=3*a-r-3*s+i[3].y,d=3*r-6*a+3*s,c=-3*r+3*a,u=r;if(js.approximately(l,0)){if(js.approximately(d,0))return js.approximately(c,0)?[]:[-u/c].filter(o);const e=Ss(c*c-4*d*u),t=2*d;return[(e-c)/t,(-c-e)/t].filter(o)}d/=l,c/=l,u/=l;const h=(3*c-d*d)/3,p=h/3,g=(2*d*d*d-9*d*c+27*u)/27,m=g/2,f=m*m+p*p*p;let y,b,v,w,x;if(f<0){const e=-h/3,t=Ss(e*e*e),n=-g/(2*t),i=xs(n<-1?-1:n>1?1:n),r=2*Rs(t);return v=r*vs(i/3)-d/3,w=r*vs((i+_s)/3)-d/3,x=r*vs((i+2*_s)/3)-d/3,[v,w,x].filter(o)}if(0===f)return y=m<0?Rs(-m):-Rs(m),v=2*y-d/3,w=-y-d/3,[v,w].filter(o);{const e=Ss(f);return y=Rs(-m+e),b=Rs(m+e),[y-b-d/3].filter(o)}},droots:function(e){if(3===e.length){const t=e[0],n=e[1],i=e[2],o=t-2*n+i;if(0!==o){const e=-Ss(n*n-t*i),r=-t+n;return[-(e+r)/o,-(-e+r)/o]}return n!==i&&0===o?[(2*n-i)/(2*(n-i))]:[]}if(2===e.length){const t=e[0],n=e[1];return t!==n?[t/(t-n)]:[]}return[]},curvature:function(e,t,n,i,o){let r,a,s,l,d=0,c=0;const u=js.compute(e,t),h=js.compute(e,n),p=u.x*u.x+u.y*u.y;if(i?(r=Ss(ks(u.y*h.z-h.y*u.z,2)+ks(u.z*h.x-h.z*u.x,2)+ks(u.x*h.y-h.x*u.y,2)),a=ks(p+u.z*u.z,1.5)):(r=u.x*h.y-u.y*h.x,a=ks(p,1.5)),0===r||0===a)return{k:0,r:0};if(d=r/a,c=a/r,!o){const o=js.curvature(e-.001,t,n,i,!0).k,r=js.curvature(e+.001,t,n,i,!0).k;l=(r-d+(d-o))/2,s=(bs(r-d)+bs(d-o))/2}return{k:d,r:c,dk:l,adk:s}},inflections:function(e){if(e.length<4)return[];const t=js.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=t[2].x*t[1].y,i=t[3].x*t[1].y,o=t[1].x*t[2].y,r=18*(-3*n+2*i+3*o-t[3].x*t[2].y),a=18*(3*n-i-3*o),s=18*(o-n);if(js.approximately(r,0)){if(!js.approximately(a,0)){let e=-s/a;if(0<=e&&e<=1)return[e]}return[]}const l=2*r;if(js.approximately(l,0))return[];const d=a*a-4*r*s;if(d<0)return[];const c=Math.sqrt(d);return[(c-a)/l,-(a+c)/l].filter((function(e){return 0<=e&&e<=1}))},bboxoverlap:function(e,t){const n=["x","y"],i=n.length;for(let o,r,a,s,l=0;l<i;l++)if(o=n[l],r=e[o].mid,a=t[o].mid,s=(e[o].size+t[o].size)/2,bs(r-a)>=s)return!1;return!0},expandbox:function(e,t){t.x.min<e.x.min&&(e.x.min=t.x.min),t.y.min<e.y.min&&(e.y.min=t.y.min),t.z&&t.z.min<e.z.min&&(e.z.min=t.z.min),t.x.max>e.x.max&&(e.x.max=t.x.max),t.y.max>e.y.max&&(e.y.max=t.y.max),t.z&&t.z.max>e.z.max&&(e.z.max=t.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,t,n){const i=e.bbox(),o=t.bbox(),r=1e5,a=n||.5;if(i.x.size+i.y.size<a&&o.x.size+o.y.size<a)return[(r*(e._t1+e._t2)/2|0)/r+"/"+(r*(t._t1+t._t2)/2|0)/r];let s=e.split(.5),l=t.split(.5),d=[{left:s.left,right:l.left},{left:s.left,right:l.right},{left:s.right,right:l.right},{left:s.right,right:l.left}];d=d.filter((function(e){return js.bboxoverlap(e.left.bbox(),e.right.bbox())}));let c=[];return 0===d.length||(d.forEach((function(e){c=c.concat(js.pairiteration(e.left,e.right,a))})),c=c.filter((function(e,t){return c.indexOf(e)===t}))),c},getccenter:function(e,t,n){const i=t.x-e.x,o=t.y-e.y,r=n.x-t.x,a=n.y-t.y,s=i*vs(Cs)-o*ws(Cs),l=i*ws(Cs)+o*vs(Cs),d=r*vs(Cs)-a*ws(Cs),c=r*ws(Cs)+a*vs(Cs),u=(e.x+t.x)/2,h=(e.y+t.y)/2,p=(t.x+n.x)/2,g=(t.y+n.y)/2,m=u+s,f=h+l,y=p+d,b=g+c,v=js.lli8(u,h,m,f,p,g,y,b),w=js.dist(v,e);let x,N=Ns(e.y-v.y,e.x-v.x),S=Ns(t.y-v.y,t.x-v.x),k=Ns(n.y-v.y,n.x-v.x);return N<k?((N>S||S>k)&&(N+=_s),N>k&&(x=k,k=N,N=x)):k<S&&S<N?(x=k,k=N,N=x):k+=_s,v.s=N,v.e=k,v.r=w,v},numberSort:function(e,t){return e-t}};class Ms{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(e){return js.pointsToString(e.points)})).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map((function(e){return e.length()})).reduce((function(e,t){return e+t}))}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var t=e[0].bbox(),n=1;n<e.length;n++)js.expandbox(t,e[n].bbox());return t}offset(e){const t=[];return this.curves.forEach((function(n){t.push(...n.offset(e))})),new Ms(t)}}const{abs:Es,min:Ps,max:zs,cos:Is,sin:$s,acos:Bs,sqrt:Ds}=Math,Gs=Math.PI;class Fs{constructor(e){let t=e&&e.forEach?e:Array.from(arguments).slice(),n=!1;if("object"==typeof t[0]){n=t.length;const e=[];t.forEach((function(t){["x","y","z"].forEach((function(n){void 0!==t[n]&&e.push(t[n])}))})),t=e}let i=!1;const o=t.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const r=this._3d=!i&&(9===o||12===o)||e&&e[0]&&void 0!==e[0].z,a=this.points=[];for(let h=0,p=r?3:2;h<o;h+=p){var s={x:t[h],y:t[h+1]};r&&(s.z=t[h+2]),a.push(s)}const l=this.order=a.length-1,d=this.dims=["x","y"];r&&d.push("z"),this.dimlen=d.length;const c=js.align(a,{p1:a[0],p2:a[l]}),u=js.dist(a[0],a[l]);this._linear=c.reduce(((e,t)=>e+Es(t.y)),0)<u/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,t,n,i){if(void 0===i&&(i=.5),0===i)return new Fs(t,t,n);if(1===i)return new Fs(e,t,t);const o=Fs.getABC(2,e,t,n,i);return new Fs(e,o.A,n)}static cubicFromPoints(e,t,n,i,o){void 0===i&&(i=.5);const r=Fs.getABC(3,e,t,n,i);void 0===o&&(o=js.dist(t,r.C));const a=o*(1-i)/i,s=js.dist(e,n),l=(n.x-e.x)/s,d=(n.y-e.y)/s,c=o*l,u=o*d,h=a*l,p=a*d,g=t.x-c,m=t.y-u,f=t.x+h,y=t.y+p,b=r.A,v=b.x+(g-b.x)/(1-i),w=b.y+(m-b.y)/(1-i),x=b.x+(f-b.x)/i,N=b.y+(y-b.y)/i,S={x:e.x+(v-e.x)/i,y:e.y+(w-e.y)/i},k={x:n.x+(x-n.x)/(1-i),y:n.y+(N-n.y)/(1-i)};return new Fs(e,S,k,n)}static getUtils(){return js}getUtils(){return Fs.getUtils()}static get PolyBezier(){return Ms}valueOf(){return this.toString()}toString(){return js.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,t=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let n=1,i=e.length;n<i;n++)t.push(e[n].x),t.push(e[n].y);return t.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map((function(e,t){return""+t+e.x+e.y+(e.z?e.z:0)})).join("")}update(){this._lut=[],this.dpoints=js.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,t=js.angle(e[0],e[this.order],e[1]);this.clockwise=t>0}length(){return js.length(this.derivative.bind(this))}static getABC(e=2,t,n,i,o=.5){const r=js.projectionratio(o,e),a=1-r,s={x:r*t.x+a*i.x,y:r*t.y+a*i.y},l=js.abcratio(o,e);return{A:{x:n.x+(n.x-s.x)/l,y:n.y+(n.y-s.y)/l},B:n,C:s,S:t,E:i}}getABC(e,t){t=t||this.get(e);let n=this.points[0],i=this.points[this.order];return Fs.getABC(this.order,n,t,i,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let t,n,i=0;i<e;i++)n=i/(e-1),t=this.compute(n),t.t=n,this._lut.push(t);return this._lut}on(e,n){n=n||5;const i=this.getLUT(),o=[];for(let t,r=0,a=0;r<i.length;r++)t=i[r],js.dist(t,e)<n&&(o.push(t),a+=r/i.length);return!!o.length&&(t/=o.length)}project(e){const t=this.getLUT(),n=t.length-1,i=js.closest(t,e),o=i.mpos,r=(o-1)/n,a=(o+1)/n,s=.1/n;let l,d=i.mdist,c=r,u=c;d+=1;for(let h;c<a+s;c+=s)l=this.compute(c),h=js.dist(e,l),h<d&&(d=h,u=c);return u=u<0?0:u>1?1:u,l=this.compute(u),l.t=u,l.d=d,l}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?js.computeWithRatios(e,this.points,this.ratios,this._3d):js.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,t=[e[0]],n=e.length;for(let i,o,r=1;r<n;r++)i=e[r],o=e[r-1],t[r]={x:(n-r)/n*i.x+r/n*o.x,y:(n-r)/n*i.y+r/n*o.y};return t[n]=e[n-1],new Fs(t)}derivative(e){return js.compute(e,this.dpoints[0],this._3d)}dderivative(e){return js.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new Fs(js.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return js.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return js.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const t=this.derivative(e),n=Ds(t.x*t.x+t.y*t.y);return{t:e,x:-t.y/n,y:t.x/n}}__normal3(e){const t=this.derivative(e),n=this.derivative(e+.01),i=Ds(t.x*t.x+t.y*t.y+t.z*t.z),o=Ds(n.x*n.x+n.y*n.y+n.z*n.z);t.x/=i,t.y/=i,t.z/=i,n.x/=o,n.y/=o,n.z/=o;const r={x:n.y*t.z-n.z*t.y,y:n.z*t.x-n.x*t.z,z:n.x*t.y-n.y*t.x},a=Ds(r.x*r.x+r.y*r.y+r.z*r.z);r.x/=a,r.y/=a,r.z/=a;const s=[r.x*r.x,r.x*r.y-r.z,r.x*r.z+r.y,r.x*r.y+r.z,r.y*r.y,r.y*r.z-r.x,r.x*r.z-r.y,r.y*r.z+r.x,r.z*r.z];return{t:e,x:s[0]*t.x+s[1]*t.y+s[2]*t.z,y:s[3]*t.x+s[4]*t.y+s[5]*t.z,z:s[6]*t.x+s[7]*t.y+s[8]*t.z}}hull(e){let t=this.points,n=[],i=[],o=0;for(i[o++]=t[0],i[o++]=t[1],i[o++]=t[2],3===this.order&&(i[o++]=t[3]);t.length>1;){n=[];for(let r,a=0,s=t.length-1;a<s;a++)r=js.lerp(e,t[a],t[a+1]),i[o++]=r,n.push(r);t=n}return i}split(e,t){if(0===e&&t)return this.split(t).left;if(1===t)return this.split(e).right;const n=this.hull(e),i={left:2===this.order?new Fs([n[0],n[3],n[5]]):new Fs([n[0],n[4],n[7],n[9]]),right:2===this.order?new Fs([n[5],n[4],n[2]]):new Fs([n[9],n[8],n[6],n[3]]),span:n};return i.left._t1=js.map(0,0,1,this._t1,this._t2),i.left._t2=js.map(e,0,1,this._t1,this._t2),i.right._t1=js.map(e,0,1,this._t1,this._t2),i.right._t2=js.map(1,0,1,this._t1,this._t2),t?(t=js.map(t,e,1,0,1),i.right.split(t).left):i}extrema(){const e={};let t=[];return this.dims.forEach(function(n){let i=function(e){return e[n]},o=this.dpoints[0].map(i);e[n]=js.droots(o),3===this.order&&(o=this.dpoints[1].map(i),e[n]=e[n].concat(js.droots(o))),e[n]=e[n].filter((function(e){return e>=0&&e<=1})),t=t.concat(e[n].sort(js.numberSort))}.bind(this)),e.values=t.sort(js.numberSort).filter((function(e,n){return t.indexOf(e)===n})),e}bbox(){const e=this.extrema(),t={};return this.dims.forEach(function(n){t[n]=js.getminmax(this,n,e[n])}.bind(this)),t}overlaps(e){const t=this.bbox(),n=e.bbox();return js.bboxoverlap(t,n)}offset(e,t){if(void 0!==t){const n=this.get(e),i=this.normal(e),o={c:n,n:i,x:n.x+i.x*t,y:n.y+i.y*t};return this._3d&&(o.z=n.z+i.z*t),o}if(this._linear){const t=this.normal(0),n=this.points.map((function(n){const i={x:n.x+e*t.x,y:n.y+e*t.y};return n.z&&t.z&&(i.z=n.z+e*t.z),i}));return[new Fs(n)]}return this.reduce().map((function(t){return t._linear?t.offset(e)[0]:t.scale(e)}))}simple(){if(3===this.order){const e=js.angle(this.points[0],this.points[3],this.points[1]),t=js.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&t<0||e<0&&t>0)return!1}const e=this.normal(0),t=this.normal(1);let n=e.x*t.x+e.y*t.y;return this._3d&&(n+=e.z*t.z),Es(Bs(n))<Gs/3}reduce(){let e,t,n=0,i=0,o=.01,r=[],a=[],s=this.extrema().values;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),n=s[0],e=1;e<s.length;e++)i=s[e],t=this.split(n,i),t._t1=n,t._t2=i,r.push(t),n=i;return r.forEach((function(e){for(n=0,i=0;i<=1;)for(i=n+o;i<=1.01;i+=o)if(t=e.split(n,i),!t.simple()){if(i-=o,Es(n-i)<o)return[];t=e.split(n,i),t._t1=js.map(n,0,1,e._t1,e._t2),t._t2=js.map(i,0,1,e._t1,e._t2),a.push(t),n=i;break}n<1&&(t=e.split(n,1),t._t1=js.map(n,0,1,e._t1,e._t2),t._t2=e._t2,a.push(t))})),a}translate(e,t,n){n="number"==typeof n?n:t;const i=this.order;let o=this.points.map(((e,o)=>(1-o/i)*t+o/i*n));return new Fs(this.points.map(((t,n)=>({x:t.x+e.x*o[n],y:t.y+e.y*o[n]}))))}scale(e){const t=this.order;let n=!1;if("function"==typeof e&&(n=e),n&&2===t)return this.raise().scale(n);const i=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),n?n(0):e,n?n(1):e);const r=n?n(0):e,a=n?n(1):e,s=[this.offset(0,10),this.offset(1,10)],l=[],d=js.lli4(s[0],s[0].c,s[1],s[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(e){const n=l[e*t]=js.copy(o[e*t]);n.x+=(e?a:r)*s[e].n.x,n.y+=(e?a:r)*s[e].n.y})),n?([0,1].forEach((function(r){if(2!==t||!r){var a=o[r+1],s={x:a.x-d.x,y:a.y-d.y},c=n?n((r+1)/t):e;n&&!i&&(c=-c);var u=Ds(s.x*s.x+s.y*s.y);s.x/=u,s.y/=u,l[r+1]={x:a.x+c*s.x,y:a.y+c*s.y}}})),new Fs(l)):([0,1].forEach((e=>{if(2===t&&e)return;const n=l[e*t],i=this.derivative(e),r={x:n.x+i.x,y:n.y+i.y};l[e+1]=js.lli4(n,r,d,o[e+1])})),new Fs(l))}outline(e,t,n,i){if(t=void 0===t?e:t,this._linear){const o=this.normal(0),r=this.points[0],a=this.points[this.points.length-1];let s,l,d;void 0===n&&(n=e,i=t),s={x:r.x+o.x*e,y:r.y+o.y*e},d={x:a.x+o.x*n,y:a.y+o.y*n},l={x:(s.x+d.x)/2,y:(s.y+d.y)/2};const c=[s,l,d];s={x:r.x-o.x*t,y:r.y-o.y*t},d={x:a.x-o.x*i,y:a.y-o.y*i},l={x:(s.x+d.x)/2,y:(s.y+d.y)/2};const u=[d,l,s],h=js.makeline(u[2],c[0]),p=js.makeline(c[2],u[0]),g=[h,new Fs(c),p,new Fs(u)];return new Ms(g)}const o=this.reduce(),r=o.length,a=[];let s,l=[],d=0,c=this.length();const u=void 0!==n&&void 0!==i;function h(e,t,n,i,o){return function(r){const a=i/n,s=(i+o)/n,l=t-e;return js.map(r,0,1,e+a*l,e+s*l)}}o.forEach((function(o){const r=o.length();u?(a.push(o.scale(h(e,n,c,d,r))),l.push(o.scale(h(-t,-i,c,d,r)))):(a.push(o.scale(e)),l.push(o.scale(-t))),d+=r})),l=l.map((function(e){return s=e.points,s[3]?e.points=[s[3],s[2],s[1],s[0]]:e.points=[s[2],s[1],s[0]],e})).reverse();const p=a[0].points[0],g=a[r-1].points[a[r-1].points.length-1],m=l[r-1].points[l[r-1].points.length-1],f=l[0].points[0],y=js.makeline(m,p),b=js.makeline(g,f),v=[y].concat(a).concat([b]).concat(l);return new Ms(v)}outlineshapes(e,t,n){t=t||e;const i=this.outline(e,t).curves,o=[];for(let r=1,a=i.length;r<a/2;r++){const e=js.makeshape(i[r],i[a-r],n);e.startcap.virtual=r>1,e.endcap.virtual=r<a/2-1,o.push(e)}return o}intersects(e,t){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof Fs&&(e=e.reduce()),this.curveintersects(this.reduce(),e,t)):this.selfintersects(t)}lineIntersects(e){const t=Ps(e.p1.x,e.p2.x),n=Ps(e.p1.y,e.p2.y),i=zs(e.p1.x,e.p2.x),o=zs(e.p1.y,e.p2.y);return js.roots(this.points,e).filter((e=>{var r=this.get(e);return js.between(r.x,t,i)&&js.between(r.y,n,o)}))}selfintersects(e){const t=this.reduce(),n=t.length-2,i=[];for(let o,r,a,s=0;s<n;s++)r=t.slice(s,s+1),a=t.slice(s+2),o=this.curveintersects(r,a,e),i.push(...o);return i}curveintersects(e,t,n){const i=[];e.forEach((function(e){t.forEach((function(t){e.overlaps(t)&&i.push({left:e,right:t})}))}));let o=[];return i.forEach((function(e){const t=js.pairiteration(e.left,e.right,n);t.length>0&&(o=o.concat(t))})),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,t,n,i){const o=(i-n)/4,r=this.get(n+o),a=this.get(i-o),s=js.dist(e,t),l=js.dist(e,r),d=js.dist(e,a);return Es(l-s)+Es(d-s)}_iterate(e,t){let n,i=0,o=1;do{n=0,o=1;let r,a,s,l,d,c=this.get(i),u=!1,h=!1,p=o,g=1;do{if(h=u,l=s,p=(i+o)/2,r=this.get(p),a=this.get(o),s=js.getccenter(c,r,a),s.interval={start:i,end:o},u=this._error(s,c,i,o)<=e,d=h&&!u,d||(g=o),u){if(o>=1){if(s.interval.end=g=1,l=s,o>1){let e={x:s.x+s.r*Is(s.e),y:s.y+s.r*$s(s.e)};s.e+=js.angle({x:s.x,y:s.y},e,this.get(1))}break}o+=(o-i)/2}else o=p}while(!d&&n++<100);if(n>=100)break;l=l||s,t.push(l),i=g}while(o<1);return t}}const Hs=(e,t,n,i)=>{i=null!=i?i:-n;const[o,r]=Us(e);if(!o||!r)return;if(o[0]===r[0]||o[1]===r[1]||t===ts.Diagonal&&Math.abs(o[1]-r[1])===Math.abs(o[0]-r[0])){const e=Math.abs(n);return Vs(o,r,e)}const[a,s]=qs(e);if(!a||!s)return;const l=new Fs([...a,...s]),[d,c]=[l.scale(n),l.scale(i)],u=Ks(o,a,r,l,d,c);if(!u)return;const{mA:[h,p],mB:[g,m],endA:[f,y],endB:[b,v]}=u;return[`M ${h} ${p} ${d.toSVG().replace("M","L")} L ${f} ${y}`,`M ${g} ${m} ${c.toSVG().replace("M","L")} L ${b} ${v}`]},Us=e=>{var t,n;return[null===(t=e.match(/M\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+/))||void 0===t||null===(t=t.at(0))||void 0===t?void 0:t.replace(/M\s*/,"").split(" ").map((e=>Number(e))),null===(n=e.match(/L\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*$/))||void 0===n||null===(n=n.at(0))||void 0===n?void 0:n.replace(/L\s*/,"").split(" ").map((e=>Number(e)))]},Vs=(e,t,n)=>{const[i,o,r,a]=[e[0],e[1],t[0],t[1]],s=Math.abs((a-o)/(r-i));if(s===1/0)return[`M ${i+n} ${o} L ${r+n} ${a}`,`M ${i-n} ${o} L ${r-n} ${a}`];if(0===s)return[`M ${i} ${o+n} L ${r} ${a+n}`,`M ${i} ${o-n} L ${r} ${a-n}`];{const e=1/s,t=n/Math.sqrt(e*e+1),l=t*e*-Math.sign((r-i)*(a-o));return[`M ${i+t} ${o+l} L ${r+t} ${a+l}`,`M ${i-t} ${o-l} L ${r-t} ${a-l}`]}},Ws=(e,t,n)=>{const[i,o,r,a]=[e[0],e[1],t[0],t[1]],s=Math.abs((a-o)/(r-i));if(s===1/0)return`M ${i+n} ${o} L ${r+n} ${a} L ${r-n} ${a} L ${i-n} ${o} Z`;if(0===s)return`M ${i} ${o+n} L ${r} ${a+n} L ${r} ${a-n} L ${i} ${o-n} Z`;{const e=1/s,t=n/Math.sqrt(e*e+1),l=t*e*-Math.sign((r-i)*(a-o));return`M ${i+t} ${o+l} L ${r+t} ${a+l} L ${r-t} ${a-l} L ${i-t} ${o-l} Z`}},qs=e=>{var t,n;return[null===(t=e.match(/L\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+/))||void 0===t||null===(t=t.at(0))||void 0===t?void 0:t.replace(/L\s*/,"").split(" ").map((e=>Number(e))),null===(n=e.match(/C\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+\s*[+-]?([0-9]*[.])?[0-9]+/g))||void 0===n||null===(n=n.at(0))||void 0===n?void 0:n.replace(/C\s*/,"").split(" ").map((e=>Number(e)))]},Js=(e,t)=>[[t[4],t[5]],[t[2],t[3],t[0],t[1],e[0],e[1]]],Ks=(e,t,n,i,o,r)=>{const a=[o.points.at(0).x,o.points.at(0).y],s=[r.points.at(0).x,r.points.at(0).y];if(!e)return;const[l,d]=Qs(e[0],t[0],a[0],e[1],t[1],a[1]),[c,u]=Qs(e[0],t[0],s[0],e[1],t[1],s[1]),h=[o.points.at(-1).x,o.points.at(-1).y],p=[r.points.at(-1).x,r.points.at(-1).y],g=[i.points.at(-1).x,i.points.at(-1).y];if(!n)return;const[m,f]=Qs(h[0],g[0],n[0],h[1],g[1],n[1]),[y,b]=Qs(p[0],g[0],n[0],p[1],g[1],n[1]);return{mA:[l,d],mB:[c,u],endA:[m,f],endB:[y,b]}},Qs=(e,t,n,i,o,r)=>{const[a,s]=[e+n,i+r],[l,d]=[a-t,s-o];return[l,d]},Zs=(p("aA",((e,t)=>{const{type:n,parallelIndex:i}=t.attributes;if(n===ts.Simple||i<0)return{normal:[t],parallel:[]};const{source:o,target:r}=t,a=[],s=[];for(const l of e.edgeEntries(o,r)){const{type:e,parallelIndex:t}=l.attributes;if(e===ts.Simple||t<0){a.push(l);continue}const{startFrom:n}=l.attributes[e];Zs(e,o,n,l)&&s.push(l)}return{normal:a,parallel:s}})),p("aB",(e=>{let t=e.at(0);if(!t)return{};for(const p of e)p.attributes.parallelIndex<t.attributes.parallelIndex&&(t=p);const n=t.attributes.type,i=t.attributes[n],o=Math.max(1,i.roundCornerFactor),[r,a,s,l]=[t.sourceAttributes.x,t.sourceAttributes.y,t.targetAttributes.x,t.targetAttributes.y],d=pc[n].generatePath(r,s,a,l,g(g({},i),{},{roundCornerFactor:o})),c=((e,t,n,i,o)=>{let r=!1;if(e===ts.Diagonal)(Math.abs(i-t)<Math.abs(o-n)&&(i<t&&o<n||i>t&&o>n)||Math.abs(i-t)>Math.abs(o-n)&&(i>t&&o<n||i<t&&o>n))&&(r=!0);else if(e===ts.Perpendicular)(i>t&&o<n||i<t&&o>n)&&(r=!0);else if(e===ts.RotatePerpendicular){const[e,a,s,l]=[t*Math.SQRT1_2+n*Math.SQRT1_2,-t*Math.SQRT1_2+n*Math.SQRT1_2,i*Math.SQRT1_2+o*Math.SQRT1_2,-i*Math.SQRT1_2+o*Math.SQRT1_2];(s>e&&l<a||s<e&&l>a)&&(r=!0)}return r})(n,r,a,s,l),u={};for(const p of e){var h;const e=p.attributes.parallelIndex>0?p.attributes.parallelIndex:0;if(0===e){u[p.edge]=d;continue}const t=5*e,i=[`M ${r} ${a+t} L ${s} ${l+t}`,`M ${r} ${a-t} L ${s} ${l-t}`],[o,g]=null!==(h=Hs(d,n,t))&&void 0!==h?h:i;u[p.edge]=c?o:g}return u})),(e,t,n,i)=>{const o=i.attributes.type;return e===i.attributes.type&&t===i.source&&n===i.attributes[o].startFrom||e===i.attributes.type&&t===i.target&&n!==i.attributes[o].startFrom}),Ys=(p("m",((e,t,n,i,o)=>{if(t===ts.Simple)return-1;const r=[];for(const s of e.edgeEntries(n,i))Zs(t,n,o,s)&&r.push(s.attributes.parallelIndex);r.sort();let a=0;for(const s of r){if(s>a)break;a=s+1}return a})),p("az",((e,t,n)=>{if(t===ts.Simple)return n;const i=e.getEdgeAttribute(n,"parallelIndex");if(i<0)return n;const{startFrom:o}=e.getEdgeAttribute(n,t),[r,a]=e.extremities(n);let s=i,l=n;for(const d of e.edgeEntries(r,a)){const e=d.attributes;(t===e.type&&r===d.source&&e[t].startFrom===o&&e.parallelIndex>=0&&e.parallelIndex<s||t===e.type&&r===d.target&&e[t].startFrom!==o&&e.parallelIndex>=0&&e.parallelIndex<s)&&(s=e.parallelIndex,l=d.edge)}return l}))),Xs=p("a3",5),el=p("a2",1/0),tl=ze({name:"app",initialState:{telemetry:{app:!0,project:!0},preference:{unlockSimplePathAttempts:3,toolsPanel:{expand:!0},autoParallel:!0,randomStationsNames:"none",gridLines:!1,snapLines:!0}},reducers:{setTelemetryApp:(e,t)=>{e.telemetry.app=t.payload},setTelemetryProject:(e,t)=>{e.telemetry.project=t.payload},setUnlockSimplePath:(e,t)=>{e.preference.unlockSimplePathAttempts=t.payload},setToolsPanelExpansion:(e,t)=>{e.preference.toolsPanel.expand=t.payload},setAutoParallel:(e,t)=>{e.preference.autoParallel=t.payload},setRandomStationsNames:(e,t)=>{e.preference.randomStationsNames=t.payload},setGridLines:(e,t)=>{e.preference.gridLines=t.payload},setSnapLines:(e,t)=>{e.preference.snapLines=t.payload}}}),{setTelemetryApp:nl,setTelemetryProject:il,setUnlockSimplePath:ol,setToolsPanelExpansion:rl,setAutoParallel:al,setRandomStationsNames:sl,setGridLines:ll,setSnapLines:dl}=tl.actions;p({ag:il,_:ol,aX:rl,a5:al,af:sl,a7:ll,a8:dl});const cl=tl.reducer,ul={present:(new no).export(),past:[],future:[],svgViewBoxZoom:100,svgViewBoxMin:{x:0,y:0}},hl=p("as",Be("undo")),pl=p("at",Be("redo")),gl=ze({name:"param",initialState:ul,reducers:{setFullState:(e,t)=>structuredClone(t.payload),saveGraph:(e,t)=>{e.future=[],e.past.push(e.present),e.past.length>49&&e.past.shift(),e.present=structuredClone(t.payload)},setSvgViewBoxZoom:(e,t)=>{e.svgViewBoxZoom=t.payload},setSvgViewBoxMin:(e,t)=>{e.svgViewBoxMin=t.payload}},extraReducers:e=>{e.addCase(hl,(e=>{if(0===e.past.length)return;const t=e.past.pop();e.future.unshift(e.present),e.present=t,window.graph.clear(),window.graph.import(structuredClone(De(t)))})).addCase(pl,(e=>{if(0===e.future.length)return;const t=e.future.shift();e.past.push(e.present),e.present=t,window.graph.clear(),window.graph.import(structuredClone(De(t)))}))}}),{setFullState:ml,saveGraph:fl,setSvgViewBoxZoom:yl,setSvgViewBoxMin:bl}=gl.actions;p({x:fl,D:yl,F:bl});const vl=gl.reducer,wl={selected:new Set,active:void 0,refresh:{nodes:Date.now(),edges:Date.now()},mode:"free",lastTool:void 0,keepLastPath:!1,theme:[Ma.Shanghai,"sh1","#E3002B",Ha.white],paletteAppClip:{input:void 0,output:void 0},count:{stations:0,miscNodes:0,lines:0,masters:0,parallel:0},stationNames:{},globalAlerts:{}},xl=p("v",Ge("runtime/refreshNodes",(async(e,{getState:t,dispatch:n})=>{const i=t();n(Al());let[o,r,a]=[0,0,0];window.graph.forEachNode(((e,t)=>{e.startsWith("stn")?o+=1:e.startsWith("misc_node")&&(r+=1),t.type===as.Master&&(a+=1)})),n(kl({stations:o,miscNodes:r,masters:a}));const s=i.account.activeSubscriptions.RMP_CLOUD?Infinity:rs;a>s&&n(Dl({status:"warning",message:`${ys.t("header.settings.proLimitExceed.master")} ${ys.t("header.settings.proLimitExceed.solution")}`}))}))),Nl=p("w",Ge("runtime/refreshEdges",(async(e,{getState:t,dispatch:n})=>{const i=t();n(jl());const o=window.graph.size,r=(e=>{let t=0;for(const n of e.edgeEntries())n.attributes.parallelIndex>=0&&(t+=1);return t})(window.graph);n(Rl({lines:o,parallel:r}));const a=i.account.activeSubscriptions.RMP_CLOUD?el:Xs;r>=a&&n(al(!1)),r>a&&n(Dl({status:"warning",message:`${ys.t("header.settings.proLimitExceed.parallel")} ${ys.t("header.settings.proLimitExceed.solution")}`}))}))),Sl=ze({name:"runtime",initialState:wl,reducers:{setSelected:(e,t)=>{e.selected=t.payload},addSelected:(e,t)=>{e.selected.add(t.payload)},removeSelected:(e,t)=>{e.selected.delete(t.payload)},clearSelected:e=>{e.selected=new Set},setActive:(e,t)=>{e.active=t.payload},setRefreshNodes:e=>{e.refresh.nodes=Date.now()},setRefreshEdges:e=>{e.refresh.edges=Date.now()},setMode:(e,t)=>{"free"!==e.mode&&(e.lastTool=e.mode),e.mode=t.payload},setKeepLastPath:(e,t)=>{e.keepLastPath=t.payload},setTheme:(e,t)=>{e.theme=t.payload},openPaletteAppClip:(e,t)=>{e.paletteAppClip.input=t.payload,e.paletteAppClip.output=void 0},closePaletteAppClip:e=>{e.paletteAppClip.input=void 0},onPaletteAppClipEmit:(e,t)=>{e.paletteAppClip.input=void 0,e.paletteAppClip.output=t.payload},setNodesCount:(e,t)=>{const{stations:n,miscNodes:i,masters:o}=t.payload;e.count.stations=n,e.count.miscNodes=i,e.count.masters=o},setEdgesCount:(e,t)=>{const{lines:n,parallel:i}=t.payload;e.count.lines=n,e.count.parallel=i},setStationNames:(e,t)=>{e.stationNames[t.payload.cityName]=t.payload.names},setGlobalAlert:(e,t)=>{const{status:n,message:i,url:o,linkedApp:r}=t.payload;e.globalAlerts[n]={message:i,url:o,linkedApp:r}},closeGlobalAlert:(e,t)=>{delete e.globalAlerts[t.payload]}},extraReducers:e=>{e.addCase(hl,(e=>{e.refresh.nodes=Date.now(),e.refresh.edges=Date.now()})).addCase(pl,(e=>{e.refresh.nodes=Date.now(),e.refresh.edges=Date.now()}))}}),{setNodesCount:kl,setEdgesCount:Rl}=Sl.actions,{setSelected:Tl,addSelected:_l,removeSelected:Cl,clearSelected:Ll,setActive:Ol,setRefreshNodes:Al,setRefreshEdges:jl,setMode:Ml,setKeepLastPath:El,setTheme:Pl,openPaletteAppClip:zl,closePaletteAppClip:Il,onPaletteAppClipEmit:$l,setStationNames:Bl,setGlobalAlert:Dl,closeGlobalAlert:Gl}=Sl.actions;p({W:Tl,aH:_l,aG:Cl,B:Ll,aF:Ol,aD:Ml,a4:El,aT:Pl,b5:zl,av:Bl,l:Dl,au:Gl});const Fl=Sl.reducer,Hl=(e,t,n)=>0===t?e:function(e,t,n){function i(e,t,n){var i=t.x-e.x,r=t.y-e.y,a=Math.sqrt(i*i+r*r);return o(e,t,Math.min(1,n/a))}function o(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}}function r(e,t){e.length>2&&(e[e.length-2]=t.x,e[e.length-1]=t.y)}function a(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}var s=e.split(/[,\s]/).reduce((function(e,t){var n=t.match("([a-zA-Z])(.+)");return n?(e.push(n[1]),e.push(n[2])):e.push(t),e}),[]),l=s.reduce((function(e,t){return parseFloat(t)==t&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]),d=[];if(l.length>1){var c=a(l[0]),u=null;"Z"==l[l.length-1][0]&&l[0].length>2&&(u=["L",c.x,c.y],l[l.length-1]=u),d.push(l[0]);for(var h=1;h<l.length;h++){var p=d[d.length-1],g=l[h],m=g==u?l[1]:l[h+1];if(m&&p&&p.length>2&&"L"==g[0]&&m.length>2&&"L"==m[0]){var f,y,b=a(p),v=a(g),w=a(m);f=i(v,b,t),y=i(v,w,t),r(g,f),g.origPoint=v,d.push(g);var x=o(f,v,.5),N=o(v,y,.5),S=["C",x.x,x.y,N.x,N.y,y.x,y.y];S.origPoint=v,d.push(S)}else d.push(g)}if(u){var k=a(d[d.length-1]);d.push(["Z"]),r(d[0],k)}}else d=l;return d.reduce((function(e,t){return e+t.join(" ")+" "}),"")}(e,t);const Ul={startFrom:"from",offsetFrom:0,offsetTo:0,roundCornerFactor:10},Vl={generatePath:(e,t,n,i,o=Ul)=>{const{startFrom:r=Ul.startFrom,offsetFrom:a=Ul.offsetFrom,offsetTo:s=Ul.offsetTo,roundCornerFactor:l=Ul.roundCornerFactor}=o,[d,c,u,h]="from"===r?[e,n,t,i]:[t,i,e,n],p=Math.abs(u-d)<Math.abs(h-c)?"vertical":"horizontal",[g,m]="from"===r?[a,s]:[s,a],f="horizontal"===p?0:g,y="horizontal"===p?g:0,b=m*Math.SQRT1_2,v=m*Math.SQRT1_2*((u-d)*(h-c)<0?1:-1),[w,x,N,S]=[d+f,c+y,u+b,h+v],k="horizontal"===p?N+Math.abs(S-x)*(N-w>0?-1:1):w,R="horizontal"===p?x:S+Math.abs(N-w)*(S-x>0?-1:1),[T,_,C,L]="from"===r?[w,x,N,S]:[N,S,w,x];return Hl(`M ${T} ${_} L ${k} ${R} L ${C} ${L}`,l)},icon:v.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:v.jsx("path",{d:"M9,18V12L15,6",stroke:"currentColor",fill:"none"})}),defaultAttrs:Ul,attrsComponent:e=>{var t,n,i;const{id:o,attrs:r,handleAttrsUpdate:a,recalculateParallelIndex:s,parallelIndex:l}=e,{t:d}=Ie(),c=xc(),u=Ys(window.graph,ts.Diagonal,o),h=l>=0&&u!==o,p=[{type:"select",label:d("panel.details.lines.common.startFrom"),value:r.startFrom,options:{from:d("panel.details.lines.common.from"),to:d("panel.details.lines.common.to")},onChange:e=>{s(o,e),r.startFrom=e,a(o,r)},minW:"full"},{type:"input",label:d("panel.details.lines.common.offsetFrom"),value:(null!==(t=r.offsetFrom)&&void 0!==t?t:Ul.offsetFrom).toString(),variant:"number",onChange:e=>{Number.isNaN(e)&&(e="0"),r.offsetFrom=Number(e),a(o,r)},isDisabled:h,minW:"full"},{type:"input",label:d("panel.details.lines.common.offsetTo"),value:(null!==(n=r.offsetTo)&&void 0!==n?n:Ul.offsetTo).toString(),variant:"number",onChange:e=>{Number.isNaN(e)&&(e="0"),r.offsetTo=Number(e),a(o,r)},isDisabled:h,minW:"full"},{type:"input",label:d("panel.details.lines.common.roundCornerFactor"),value:(null!==(i=null==r?void 0:r.roundCornerFactor)&&void 0!==i?i:Ul.roundCornerFactor).toString(),variant:"number",onChange:e=>{(Number.isNaN(e)||Number(e)<0)&&(e="0"),r.roundCornerFactor=Number(e),a(o,r)},isDisabled:h,minW:"full"}];return h&&p.unshift({type:"custom",label:d("panel.details.lines.common.parallelDisabled"),component:v.jsxs(W,{size:"sm",variant:"link",onClick:()=>c(Tl(new Set([u]))),children:[d("panel.details.lines.common.changeInBaseLine")," ",u]})}),v.jsx(sa,{fields:p})},metadata:{displayName:"panel.details.lines.diagonal.displayName"}},Wl={startFrom:"from",offsetFrom:0,offsetTo:0,roundCornerFactor:18.33},ql={generatePath:(e,t,n,i,o=Wl)=>{const{startFrom:r=Wl.startFrom,offsetFrom:a=Wl.offsetFrom,offsetTo:s=Wl.offsetTo,roundCornerFactor:l=Wl.roundCornerFactor}=o,[d,c]="from"===r?[a,s]:[s,a],[u,h,p,g]="from"===r?[0,d,c,0]:[d,0,0,c];return Hl(`M ${e+u} ${n+h} L ${"from"===r?t+p:e+u} ${"from"===r?n+h:i+g} L ${t+p} ${i+g}`,l)},icon:v.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:v.jsx("path",{d:"M6,6H18V18",stroke:"currentColor",fill:"none"})}),defaultAttrs:Wl,attrsComponent:e=>{var t,n,i;const{id:o,attrs:r,handleAttrsUpdate:a,recalculateParallelIndex:s,parallelIndex:l}=e,{t:d}=Ie(),c=xc(),u=Ys(window.graph,ts.Perpendicular,o),h=l>=0&&u!==o,p=[{type:"select",label:d("panel.details.lines.common.startFrom"),value:r.startFrom,options:{from:d("panel.details.lines.common.from"),to:d("panel.details.lines.common.to")},onChange:e=>{s(o,e),r.startFrom=e,a(o,r)},minW:"full"},{type:"input",label:d("panel.details.lines.common.offsetFrom"),value:(null!==(t=r.offsetFrom)&&void 0!==t?t:Wl.offsetFrom).toString(),variant:"number",onChange:e=>{Number.isNaN(e)&&(e="0"),r.offsetFrom=Number(e),a(o,r)},isDisabled:h,minW:"full"},{type:"input",label:d("panel.details.lines.common.offsetTo"),value:(null!==(n=r.offsetTo)&&void 0!==n?n:Wl.offsetTo).toString(),variant:"number",onChange:e=>{Number.isNaN(e)&&(e="0"),r.offsetTo=Number(e),a(o,r)},isDisabled:h,minW:"full"},{type:"input",label:d("panel.details.lines.common.roundCornerFactor"),value:(null!==(i=null==r?void 0:r.roundCornerFactor)&&void 0!==i?i:Wl.roundCornerFactor).toString(),variant:"number",onChange:e=>{(Number.isNaN(e)||Number(e)<0)&&(e="0"),r.roundCornerFactor=Number(e),a(o,r)},isDisabled:h,minW:"full"}];return h&&p.unshift({type:"custom",label:d("panel.details.lines.common.parallelDisabled"),component:v.jsxs(W,{size:"sm",variant:"link",onClick:()=>c(Tl(new Set([u]))),children:[d("panel.details.lines.common.changeInBaseLine")," ",u]})}),v.jsx(sa,{fields:p})},metadata:{displayName:"panel.details.lines.perpendicular.displayName"}},Jl={startFrom:"from",offsetFrom:0,offsetTo:0,roundCornerFactor:18.33},Kl={generatePath:(e,t,n,i,o=Jl)=>{const{startFrom:r=Jl.startFrom,offsetFrom:a=Jl.offsetFrom,offsetTo:s=Jl.offsetTo,roundCornerFactor:l=Jl.roundCornerFactor}=o,[d,c]="from"===r?[a,s]:[s,a],[u,h,p,g]="from"===r?[0,d,c,0]:[d,0,0,c],[m,f,y,b]=[e*Math.SQRT1_2+n*Math.SQRT1_2,-e*Math.SQRT1_2+n*Math.SQRT1_2,t*Math.SQRT1_2+i*Math.SQRT1_2,-t*Math.SQRT1_2+i*Math.SQRT1_2],[v,w,x,N]=[m+u,f+h,y+p,b+g],[S,k,R,T]=[v*Math.SQRT1_2-w*Math.SQRT1_2,v*Math.SQRT1_2+w*Math.SQRT1_2,x*Math.SQRT1_2-N*Math.SQRT1_2,x*Math.SQRT1_2+N*Math.SQRT1_2],_="from"===r?y+p:m+u,C="from"===r?f+h:b+g,[L,O]=[_*Math.SQRT1_2-C*Math.SQRT1_2,_*Math.SQRT1_2+C*Math.SQRT1_2];return Hl(`M ${S} ${k} L ${L} ${O} L ${R} ${T}`,l)},icon:v.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:v.jsx("path",{d:"M9,6L15,12L9,18",stroke:"currentColor",fill:"none"})}),defaultAttrs:Jl,attrsComponent:e=>{var t,n,i;const{id:o,attrs:r,handleAttrsUpdate:a,recalculateParallelIndex:s,parallelIndex:l}=e,{t:d}=Ie(),c=xc(),u=Ys(window.graph,ts.RotatePerpendicular,o),h=l>=0&&u!==o,p=[{type:"select",label:d("panel.details.lines.common.startFrom"),value:r.startFrom,options:{from:d("panel.details.lines.common.from"),to:d("panel.details.lines.common.to")},onChange:e=>{s(o,e),r.startFrom=e,a(o,r)},minW:"full"},{type:"input",label:d("panel.details.lines.common.offsetFrom"),value:(null!==(t=r.offsetFrom)&&void 0!==t?t:Jl.offsetFrom).toString(),variant:"number",onChange:e=>{Number.isNaN(e)&&(e="0"),r.offsetFrom=Number(e),a(o,r)},isDisabled:h,minW:"full"},{type:"input",label:d("panel.details.lines.common.offsetTo"),value:(null!==(n=r.offsetTo)&&void 0!==n?n:Jl.offsetTo).toString(),variant:"number",onChange:e=>{Number.isNaN(e)&&(e="0"),r.offsetTo=Number(e),a(o,r)},isDisabled:h,minW:"full"},{type:"input",label:d("panel.details.lines.common.roundCornerFactor"),value:(null!==(i=null==r?void 0:r.roundCornerFactor)&&void 0!==i?i:Jl.roundCornerFactor).toString(),variant:"number",onChange:e=>{(Number.isNaN(e)||Number(e)<0)&&(e="0"),r.roundCornerFactor=Number(e),a(o,r)},isDisabled:h,minW:"full"}];return h&&p.unshift({type:"custom",label:d("panel.details.lines.common.parallelDisabled"),component:v.jsxs(W,{size:"sm",variant:"link",onClick:()=>c(Tl(new Set([u]))),children:[d("panel.details.lines.common.changeInBaseLine")," ",u]})}),v.jsx(sa,{fields:p})},metadata:{displayName:"panel.details.lines.rotatePerpendicular.displayName"}};var Ql=p("S",(e=>(e.ShmetroBasic="shmetro-basic",e.ShmetroBasic2020="shmetro-basic-2020",e.ShmetroInt="shmetro-int",e.ShmetroOutOfSystemInt="shmetro-osysi",e.ShanghaiSuburbanRailway="shanghai-sub-rwy",e.GzmtrBasic="gzmtr-basic",e.GzmtrInt="gzmtr-int",e.GzmtrInt2024="gzmtr-int-2024",e.BjsubwayBasic="bjsubway-basic",e.BjsubwayInt="bjsubway-int",e.MTR="mtr",e.SuzhouRTBasic="suzhourt-basic",e.SuzhouRTInt="suzhourt-int",e.KunmingRTBasic="kunmingrt-basic",e.KunmingRTInt="kunmingrt-int",e.MRTBasic="mrt-basic",e.MRTInt="mrt-int",e.JREastBasic="jr-east-basic",e.JREastImportant="jr-east-imp",e.FoshanMetroBasic="foshan-metro-basic",e.QingdaoMetroStation="qingdao-metro-basic",e.TokyoMetroBasic="tokyo-metro-basic",e.TokyoMetroInt="tokyo-metro-int",e.LondonTubeBasic="london-tube-basic",e.LondonTubeInt="london-tube-int",e.LondonRiverServicesInt="london-river-int",e.GuangdongIntercityRailway="guangdong-intercity-rwy",e.ChongqingRTBasic="chongqingrt-basic",e.ChongqingRTInt="chongqingrt-int",e.ChongqingRTBasic2021="chongqingrt-basic-2021",e.ChongqingRTInt2021="chongqingrt-int-2021",e.ChengduRTBasic="chengdurt-basic",e.ChengduRTInt="chengdurt-int",e))(Ql||{}));p("b2",{names:["","Stn"]}),p("q",(()=>{const[e,t]=Ee.useState({width:void 0,height:void 0});return Ee.useEffect((()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),e}));const Zl=p("Y",(e=>{const{theme:t,onThemeApplied:n}=null!=e?e:{},{theme:i,paletteAppClip:{input:o,output:r}}=Nc((e=>e.runtime)),a=Fe(),[s,l]=Ee.useState(null!=t?t:i);Ee.useEffect((()=>{l(null!=t?t:i)}),[t,i]);const[d,c]=Ee.useState(!1);Ee.useEffect((()=>{d&&(r?(l(r),c(!1),n&&n(r)):o||c(!1))}),[o,r,d]);const u=Ee.useCallback((()=>{c(!0),a(zl(s))}),[a,s]);return{theme:s,requestThemeChange:u}}));function Yl(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(e)}function Xl(e){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z"},child:[]}]})(e)}class ed{static hexToRgb(e){return[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)]}static fade(e,t){return`rgba(${[...this.hexToRgb(e),t].join(",")})`}static euclideanDistance(e,t){return this.hexToRgb(e).reduce(((e,n,i)=>e+Math.pow(n-this.hexToRgb(t)[i],2)),0)}}function td(e){const{theme:t,onClick:n}=e,{t:i}=Ie();return v.jsx(ve,{"aria-label":i("Color"),color:t[3],bg:t[2],size:"md",_hover:{bg:ed.fade(t[2],.7)},icon:v.jsx(Yl,{}),onClick:n})}const nd=[Ql.ShmetroBasic2020,Ql.GzmtrBasic,Ql.SuzhouRTBasic,Ql.KunmingRTBasic,Ql.MRTBasic,Ql.FoshanMetroBasic,Ql.QingdaoMetroStation,Ql.TokyoMetroBasic,Ql.ChongqingRTBasic,Ql.ChongqingRTBasic2021,Ql.ChongqingRTInt2021,Ql.ChengduRTBasic],id=[as.ShmetroNumLineBadge,as.ShmetroTextLineBadge,as.GzmtrLineBadge,as.BjsubwayNumLineBadge,as.BjsubwayTextLineBadge,as.SuzhouRTNumLineBadge,as.BerlinSBahnLineBadge,as.BerlinUBahnLineBadge,as.ChongqingRTNumLineBadge,as.ChongqingRTTextLineBadge,as.ChongqingRTNumLineBadge2021,as.ChongqingRTTextLineBadge2021,as.ShenzhenMetroNumLineBadge,as.MRTDestinationNumbers,as.MRTLineBadge,as.JREastLineBadge,as.QingdaoMetroNumLineBadge,as.LondonArrow,as.ChengduRTLineBadge,as.TaiPeiMetroLineBadege],od=[ns.SingleColor,ns.BjsubwaySingleColor,ns.BjsubwayTram,ns.BjsubwayDotted,ns.ChinaRailway,ns.MTRRaceDays,ns.MTRLightRail,ns.MRTUnderConstruction,ns.JREastSingleColor,ns.JREastSingleColorPattern,ns.LRTSingleColor,ns.LondonSandwich,ns.LondonLutonAirportDART,ns.LondonIFSCloudCableCar,ns.GZMTRLoop,ns.ChongqingRTLoop,ns.ChongqingRTLineBadge],rd=(p("d",new Set([...nd,...id,...od])),p("a_",(e=>{var t;const{type:n,colorKey:i="color",defaultTheme:o}=e,r=xc(),{selected:a,paletteAppClip:{input:s,output:l}}=Nc((e=>e.runtime)),[d]=a,c=Pe.useCallback((()=>{r(xl()),r(Nl()),r(fl(u.current.export()))}),[r,xl,Nl,fl]),u=Pe.useRef(window.graph),[h,p,g]=[].concat(Object.values(Ql)).concat(Object.values(as)).find((e=>n===e))?[u.current.hasNode,u.current.getNodeAttribute,u.current.mergeNodeAttributes]:[u.current.hasEdge,u.current.getEdgeAttribute,u.current.mergeEdgeAttributes],m=d&&h.bind(u.current)(d)&&(d.startsWith("stn")||d.startsWith("misc_node")?u.current.getNodeAttribute(d,"type")===n:u.current.getEdgeAttribute(d,"style")===n)?(null!==(t=p.bind(u.current)(d,n))&&void 0!==t?t:{[i]:o})[i]:o,{theme:f,requestThemeChange:y}=Zl({theme:m,onThemeApplied:e=>{if(d&&h.bind(u.current)(d)){const t=p.bind(u.current)(d,n);t[i]=e,g.bind(u.current)(d,{[n]:t}),c()}}});return v.jsx(v.Fragment,{children:v.jsx(td,{theme:f,onClick:y})})}))),ad={color:[Ma.Shanghai,"sh1","#E4002B",Ha.white]},sd=p("aJ",{component:e=>{const{id:t,path:n,styleAttrs:i,newLine:o,handlePointerDown:r}=e,{color:a=ad.color}=null!=i?i:ad,s=Pe.useCallback((e=>r(t,e)),[t,r]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:a[2],strokeWidth:"5",strokeLinecap:"round",cursor:"pointer",onPointerDown:o?void 0:s,pointerEvents:o?"none":void 0})},defaultAttrs:ad,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("color"),component:v.jsx(rd,{type:ns.SingleColor,defaultTheme:ad.color})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.singleColor.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}}),ld={component:e=>{const{id:t,path:n,handlePointerDown:i}=e,o=Pe.useCallback((e=>i(t,e)),[t,i]);return v.jsxs("g",{id:t,onPointerDown:o,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:"black",strokeWidth:"7",strokeLinecap:"round"}),v.jsx("path",{d:n,fill:"none",stroke:"white",strokeWidth:"4.33",strokeLinecap:"round"})]})},defaultAttrs:{},attrsComponent:()=>{},metadata:{displayName:"panel.details.lines.shmetroVirtualInt.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular,ts.Simple]}},dd={isEnd:!1},cd={component:e=>{const{id:t,path:n,handlePointerDown:i}=e,o=Pe.useCallback((e=>i(t,e)),[t,i]);return v.jsx("g",{id:t,onPointerDown:o,cursor:"pointer",children:v.jsx("path",{d:n,fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})})},preComponent:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{isEnd:r=dd.isEnd}=i,a=Pe.useCallback((e=>o(t,e)),[t,o]),s=r?"round":void 0;return v.jsx("g",{id:`${t}.pre`,onPointerDown:a,cursor:"pointer",children:v.jsx("path",{d:n,fill:"none",stroke:"#898989",strokeWidth:"5",strokeLinecap:s})})},defaultAttrs:dd,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"switch",label:o("panel.details.lines.shanghaiSuburbanRailway.isEnd"),isChecked:n.isEnd,onChange:e=>{n.isEnd=e,i(t,n)},oneLine:!0,minW:"full"}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.shanghaiSuburbanRailway.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},ud={component:e=>{const{id:t,path:n,handlePointerDown:i}=e,o=Pe.useCallback((e=>i(t,e)),[t,i]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:"#565656",strokeWidth:"3",strokeDasharray:"3",cursor:"pointer",onPointerDown:o})},defaultAttrs:{},attrsComponent:()=>null,metadata:{displayName:"panel.details.lines.gzmtrVirtualInt.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular,ts.Simple]}},hd={color:[Ma.Guangzhou,"gz11","#ffb00a",Ha.black]},pd={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=hd.color}=null!=i?i:hd,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsxs("g",{id:t,onPointerDown:a,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:"black",strokeWidth:11.467170000000001}),v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:9.96138,strokeLinecap:"round"})]})},defaultAttrs:hd,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("color"),component:v.jsx(rd,{type:ns.GZMTRLoop,defaultTheme:hd.color})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.gzmtrLoop.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},gd={color:[Ma.Shanghai,"jsr","#000000",Ha.white]},md={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=gd.color}=null!=i?i:gd,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsxs("g",{id:t,onPointerDown:a,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5",strokeLinecap:"round"}),v.jsx("path",{d:n,fill:"none",stroke:r[3],strokeWidth:"4.67",strokeDasharray:"17.5"})]})},defaultAttrs:gd,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("color"),component:v.jsx(rd,{type:ns.ChinaRailway,defaultTheme:gd.color})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.chinaRailway.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},fd={color:[Ma.Beijing,"bj1","#c23a30",Ha.white]},yd={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=fd.color}=null!=i?i:fd,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsxs("g",{id:t,onPointerDown:a,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:"white",strokeWidth:"6",strokeLinecap:"round"}),v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5",strokeLinecap:"round"})]})},defaultAttrs:fd,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"custom",label:o("color"),component:v.jsx(rd,{type:ns.BjsubwaySingleColor,defaultTheme:fd.color})}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.bjsubwaySingleColor.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},bd={color:[Ma.Beijing,"bj1","#c23a30",Ha.white]},vd={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=bd.color}=null!=i?i:bd,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsxs("g",{id:t,onPointerDown:a,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5"}),v.jsx("path",{d:n,fill:"none",stroke:"white",strokeWidth:"1.67"})]})},defaultAttrs:bd,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"custom",label:o("color"),component:v.jsx(rd,{type:ns.BjsubwayTram,defaultTheme:bd.color})}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.bjsubwayTram.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},wd={colorA:[Ma.Shanghai,"maglevA","#008B9A",Ha.white],colorB:[Ma.Shanghai,"maglevB","#F5A74E",Ha.white]},xd=()=>{const{t:e}=Ie(),t=xc(),{selected:n}=Nc((e=>e.runtime)),[i]=n,o=Pe.useRef(window.graph);return v.jsx(ve,{"aria-label":e("panel.details.lines.dualColor.swap"),icon:v.jsx(Xl,{}),size:"sm",onClick:()=>{var e;const n=null!==(e=o.current.getEdgeAttribute(i,ns.DualColor))&&void 0!==e?e:wd,r=n.colorA;n.colorA=n.colorB,n.colorB=r,o.current.mergeEdgeAttributes(i,{[ns.DualColor]:n}),t(Nl()),t(fl(o.current.export()))}})},Nd={component:e=>{const{id:t,type:n,path:i,styleAttrs:o,handlePointerDown:r}=e,{colorA:a=wd.colorA,colorB:s=wd.colorB}=null!=o?o:wd,l=Pe.useCallback((e=>r(t,e)),[t,r]),[d,c]=Pe.useState(i),[u,h]=Pe.useState(i);return Pe.useEffect((()=>{const e=Hs(i,n,-1.25,1.25);e&&(c(e[0]),h(e[1]))}),[i]),v.jsxs("g",{id:t,onPointerDown:l,cursor:"pointer",children:[v.jsx("path",{d:d,fill:"none",stroke:a[2],strokeWidth:"2.5",strokeLinecap:"round"}),v.jsx("path",{d:u,fill:"none",stroke:s[2],strokeWidth:"2.5",strokeLinecap:"round"})]})},defaultAttrs:wd,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("panel.details.lines.dualColor.swap"),component:v.jsx(xd,{}),minW:"full"},{type:"custom",label:t("panel.details.lines.dualColor.colorA"),component:v.jsx(rd,{type:ns.DualColor,colorKey:"colorA",defaultTheme:wd.colorA})},{type:"custom",label:t("panel.details.lines.dualColor.colorB"),component:v.jsx(rd,{type:ns.DualColor,colorKey:"colorB",defaultTheme:wd.colorB})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.dualColor.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Sd={color:[Ma.Shanghai,"river","#B9E3F9",Ha.white],width:20},kd={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=Sd.color,width:a=Sd.width}=null!=i?i:Sd,s=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:r[2],strokeWidth:a,strokeLinecap:"round",cursor:"pointer",onPointerDown:s})},defaultAttrs:Sd,attrsComponent:e=>{var t;const{id:n,attrs:i,handleAttrsUpdate:o}=e,{t:r}=Ie(),a=[{type:"input",label:r("panel.details.lines.river.width"),variant:"number",value:(null!==(t=i.width)&&void 0!==t?t:Sd.width).toString(),validator:e=>!Number.isNaN(e),onChange:e=>{i.width=Number(e),o(n,i)}}];return v.jsx(sa,{fields:a})},metadata:{displayName:"panel.details.lines.river.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular,ts.Simple]}},Rd={color:[Ma.Hongkong,"twl","#E2231A",Ha.white]},Td={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=Rd.color}=null!=i?i:Rd,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:r[2],strokeWidth:"5",strokeLinecap:"butt",strokeDasharray:"5 2.5",cursor:"pointer",onPointerDown:a})},defaultAttrs:Rd,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"custom",label:o("color"),component:v.jsx(rd,{type:ns.MTRRaceDays,defaultTheme:Rd.color})}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.mtrRaceDays.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},_d={color:[Ma.Hongkong,"lrl","#CD9700",Ha.white]},Cd={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=_d.color}=null!=i?i:_d,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:r[2],strokeWidth:"2.5",strokeLinecap:"round",cursor:"pointer",onPointerDown:a})},defaultAttrs:_d,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"custom",label:o("color"),component:v.jsx(rd,{type:ns.MTRLightRail,defaultTheme:_d.color})}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.mtrLightRail.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Ld={component:e=>{const{id:t,path:n,handlePointerDown:i}=e,o=Pe.useCallback((e=>i(t,e)),[t,i]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:"black",strokeWidth:"1.33",strokeDasharray:"2.66 1.33",cursor:"pointer",onPointerDown:o})},defaultAttrs:{},attrsComponent:()=>{},metadata:{displayName:"panel.details.lines.mtrUnpaidArea.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular,ts.Simple]}},Od={component:e=>{const{id:t,path:n,handlePointerDown:i}=e,o=Pe.useCallback((e=>i(t,e)),[t,i]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:"black",strokeWidth:"1.5",strokeLinecap:"round",cursor:"pointer",onPointerDown:o})},defaultAttrs:{},attrsComponent:()=>{},metadata:{displayName:"panel.details.lines.mtrPaidArea.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular,ts.Simple]}},Ad={color:[Ma.Beijing,"bj1","#c23a30",Ha.white]},jd={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=Ad.color}=null!=i?i:Ad,a=Pe.useCallback((e=>o(t,e)),[t,o]),s=le("white","var(--chakra-colors-gray-800)");return v.jsxs("g",{id:t,onPointerDown:a,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5",strokeDasharray:"2 2"}),v.jsx("path",{d:n,fill:"none",stroke:s,strokeWidth:"3.4"})]})},defaultAttrs:Ad,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"custom",label:o("color"),component:v.jsx(rd,{type:ns.BjsubwayDotted,defaultTheme:Ad.color})}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.bjsubwayDotted.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Md={color:[Ma.Singapore,"ewl","#009739",Ha.white]},Ed={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=Md.color}=null!=i?i:Md,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:r[2],strokeWidth:"5",strokeDasharray:"0 10",strokeLinecap:"round",cursor:"pointer",onPointerDown:a})},defaultAttrs:Md,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"custom",label:"color",component:v.jsx(rd,{type:ns.MRTUnderConstruction,defaultTheme:Md.color})}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.mrtUnderConstruction.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Pd={component:e=>{const{id:t,path:n,handlePointerDown:i}=e,o=Pe.useCallback((e=>i(t,e)),[t,i]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:"black",strokeWidth:"5",strokeDasharray:"0 10 10 10",strokeLinecap:"round",cursor:"pointer",onPointerDown:o})},defaultAttrs:{},attrsComponent:e=>null,metadata:{displayName:"panel.details.lines.mrtSentosaExpress.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},zd={colorA:[Ma.Shanghai,"maglevA","#008B9A",Ha.white],colorB:[Ma.Shanghai,"maglevB","#F5A74E",Ha.white]},Id=()=>{const{t:e}=Ie(),t=xc(),{selected:n}=Nc((e=>e.runtime)),[i]=n,o=Pe.useRef(window.graph);return v.jsx(ve,{"aria-label":e("panel.details.lines.mrtTapeOut.swap"),icon:v.jsx(Xl,{}),size:"sm",onClick:()=>{var e;const n=null!==(e=o.current.getEdgeAttribute(i,ns.MRTTapeOut))&&void 0!==e?e:zd,r=n.colorA;n.colorA=n.colorB,n.colorB=r,o.current.mergeEdgeAttributes(i,{[ns.MRTTapeOut]:n}),t(Nl()),t(fl(o.current.export()))}})},$d={component:()=>v.jsx(v.Fragment,{}),postComponent:e=>{const{id:t,type:n,path:i,styleAttrs:o,handlePointerDown:r}=e,{colorA:a=zd.colorA,colorB:s=zd.colorB}=null!=o?o:zd,l=Pe.useCallback((e=>r(t,e)),[t,r]),[d,c]=i.substring(2).split("L").map((e=>e.trim().split(" ").map(Number))),u=[(d[0]+c[0])/2,(d[1]+c[1])/2],h=`M ${d[0]} ${d[1]} L ${u[0]} ${u[1]}`,p=`M ${u[0]} ${u[1]} L ${c[0]} ${c[1]}`;return v.jsxs("g",{id:t,onPointerDown:l,cursor:"pointer",children:[v.jsxs("defs",{children:[v.jsx("marker",{id:`slantSeparator45${s[2]}A`,markerWidth:"5",markerHeight:"5",refX:"2.5",refY:"2.5",orient:"auto-start-reverse",markerUnits:"userSpaceOnUse",children:v.jsx("polygon",{points:"0,5 2.5,5 2.5,2.5",fill:s[2]})}),v.jsx("marker",{id:`slantSeparator45${a[2]}B`,markerWidth:"5",markerHeight:"5",refX:"2.5",refY:"2.5",orient:"auto-start-reverse",markerUnits:"userSpaceOnUse",children:v.jsx("polygon",{points:"0,5 2.5,5 2.5,2.5",fill:a[2]})})]}),v.jsx("path",{d:h,fill:"none",stroke:a[2],strokeWidth:"5","marker-end":`url(#slantSeparator45${s[2]}A)`}),v.jsx("path",{d:p,fill:"none",stroke:s[2],strokeWidth:"5","marker-start":`url(#slantSeparator45${a[2]}B)`})]})},defaultAttrs:zd,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("panel.details.lines.dualColor.swap"),component:v.jsx(Id,{}),minW:"full"},{type:"custom",label:t("panel.details.lines.dualColor.colorA"),component:v.jsx(rd,{type:ns.MRTTapeOut,colorKey:"colorA",defaultTheme:zd.colorA})},{type:"custom",label:t("panel.details.lines.dualColor.colorB"),component:v.jsx(rd,{type:ns.MRTTapeOut,colorKey:"colorB",defaultTheme:zd.colorB})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.mrtTapeOut.displayName",supportLinePathType:[ts.Simple]}},Bd={color:[Ma.Tokyo,"jy","#9ACD32",Ha.black]},Dd={component:e=>{const{id:t,path:n,styleAttrs:i,newLine:o,handlePointerDown:r}=e,{color:a=Bd.color}=null!=i?i:Bd,s=Pe.useCallback((e=>r(t,e)),[t,r]);return v.jsxs("g",{id:t,onPointerDown:s,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:"black",strokeWidth:"5.1"}),v.jsx("path",{d:n,fill:"none",stroke:a[2],strokeWidth:"4.9"})]})},defaultAttrs:Bd,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"custom",label:o("color"),component:v.jsx(rd,{type:ns.JREastSingleColor,defaultTheme:Bd.color})}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.jrEastSingleColor.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Gd=5*Math.SQRT1_2,Fd=.25,Hd=(Gd*Math.SQRT2-Fd)/2*Math.SQRT2,Ud={color:[Ma.Tokyo,"jy","#9ACD32",Ha.black]},Vd={component:e=>{const{id:t,type:n,path:i,styleAttrs:o,newLine:r,handlePointerDown:a}=e,{color:s=Ud.color}=null!=o?o:Ud,l=Pe.useCallback((e=>a(t,e)),[t,a]),[d,c]=Pe.useState({outline:i,pA:i,pB:i});return Pe.useEffect((()=>{const e=((e,t,n,i)=>{i=null!=i?i:2.5;const[o,r]=Us(e);if(!o||!r)return;if(o[0]===r[0]||o[1]===r[1]||Math.abs(Math.abs(o[1]-r[1])-Math.abs(o[0]-r[0]))<.001){const e=Math.abs(n),[t,i]=Vs(o,r,e);return{outline:Ws(o,r,e),pA:t,pB:i}}const[a,s]=qs(e);if(!a||!s)return;const l=new Fs([...a,...s]),[d,c]=[l.scale(n),l.scale(i)],u=Ks(o,a,r,l,d,c);if(!u)return;const{mA:[h,p],mB:[g,m],endA:[f,y],endB:[b,v]}=u,[w,x]=qs(c.toSVG().replace("M","L")),[N,S]=Js(w,x);return{outline:`M ${h} ${p} ${d.toSVG().replace("M","L")} L ${f} ${y} L ${b} ${v} L ${N.join(" ")} C ${S.join(" ")} L ${g} ${m} Z`,pA:`M ${h} ${p} ${d.toSVG().replace("M","L")} L ${f} ${y}`,pB:`M ${g} ${m} ${c.toSVG().replace("M","L")} L ${b} ${v}`}})(i,0,-2.5,2.5);e&&c(e)}),[i]),v.jsxs("g",{id:t,onPointerDown:l,cursor:"pointer",children:[v.jsxs("defs",{children:[v.jsxs("clipPath",{id:"jr_east_fill_pattern_clip_path",patternUnits:"userSpaceOnUse",children:[v.jsx("polygon",{points:`0,0 0,${Hd} ${Hd},0`}),v.jsx("polygon",{points:`${Gd},${Gd} ${Gd-Hd},${Gd} ${Gd},${Gd-Hd}`})]}),v.jsxs("pattern",{id:`jr_east_${t}_fill_pattern_${s[2]}`,width:Gd,height:Gd,patternUnits:"userSpaceOnUse",children:[v.jsx("rect",{width:Gd,height:Gd,fill:s[2]}),v.jsx("line",{x1:"0",y1:"0",x2:Gd,y2:Gd,stroke:"white",strokeWidth:Fd,strokeOpacity:"50%",clipPath:"url(#jr_east_fill_pattern_clip_path)"}),v.jsx("line",{x1:Gd,y1:"0",x2:"0",y2:Gd,stroke:"white",strokeWidth:Fd,strokeOpacity:"50%"})]})]}),v.jsx("path",{d:d.outline,fill:`url(#jr_east_${t}_fill_pattern_${s[2]})`}),v.jsx("path",{d:d.pA,fill:"none",stroke:"black",strokeWidth:"0.1"}),v.jsx("path",{d:d.pB,fill:"none",stroke:"black",strokeWidth:"0.1"})]})},defaultAttrs:Ud,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"custom",label:o("color"),component:v.jsx(rd,{type:ns.JREastSingleColorPattern,defaultTheme:Ud.color})}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.jrEastSingleColorPattern.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Wd={color:[Ma.Singapore,"lrt","#708573",Ha.white]},qd={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=Wd.color}=null!=i?i:Wd,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:r[2],strokeWidth:"2.157",strokeLinecap:"round",cursor:"pointer",onPointerDown:a})},defaultAttrs:Wd,attrsComponent:e=>{const t=[{type:"custom",label:"color",component:v.jsx(rd,{type:ns.LRTSingleColor,defaultTheme:Wd.color})}];return v.jsx(sa,{fields:t})},metadata:{displayName:"panel.details.lines.lrtSingleColor.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Jd={component:e=>{const{id:t,path:n,handlePointerDown:i}=e,o=Pe.useCallback((e=>i(t,e)),[t,i]);return v.jsx("g",{id:t,onPointerDown:o,cursor:"pointer",children:v.jsx("path",{d:n,fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"})})},preComponent:e=>{const{id:t,path:n,handlePointerDown:i}=e,o=Pe.useCallback((e=>i(t,e)),[t,i]);return v.jsx("g",{id:`${t}.pre`,onPointerDown:o,cursor:"pointer",children:v.jsx("path",{d:n,fill:"none",stroke:"black",strokeWidth:"7.5",strokeLinecap:"round"})})},defaultAttrs:{},attrsComponent:()=>{},metadata:{displayName:"panel.details.lines.londonTubeInternalInt.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Kd={component:e=>{const{id:t,path:n,handlePointerDown:i}=e,o=Pe.useCallback((e=>i(t,e)),[t,i]);return v.jsx("path",{d:n,fill:"none",stroke:"black",strokeWidth:"5",strokeDasharray:"5 2.5",cursor:"pointer",onPointerDown:o})},defaultAttrs:{},attrsComponent:()=>{},metadata:{displayName:"panel.details.lines.londonTube10MinWalk.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Qd={color:[Ma.London,"central","#DC241F",Ha.white]},Zd={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=Qd.color}=null!=i?i:Qd,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:r[2],strokeWidth:"5",cursor:"pointer",onPointerDown:a})},defaultAttrs:Qd,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("color"),component:v.jsx(rd,{type:ns.LondonTubeTerminal,defaultTheme:Qd.color})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.londonTubeTerminal.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},Yd={colorBackground:[Ma.London,"thameslink","#d28db0",Ha.white],colorForeground:[Ma.London,"white","#ffffff",Ha.black],limitedService:!1},Xd={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{colorBackground:r=Yd.colorBackground,colorForeground:a=Yd.colorForeground,limitedService:s=Yd.limitedService}=null!=i?i:Yd,l=Pe.useCallback((e=>o(t,e)),[t,o]);return s?v.jsxs("g",{id:t,onPointerDown:l,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5",strokeLinecap:"round"}),v.jsx("path",{d:n,fill:"none",stroke:a[2],strokeWidth:"4.25",strokeLinecap:"round"}),v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"2",strokeDasharray:"7 3"})]}):v.jsxs("g",{id:t,onPointerDown:l,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5",strokeLinecap:"round"}),v.jsx("path",{d:n,fill:"none",stroke:a[2],strokeWidth:"2",strokeDasharray:"7 3"})]})},defaultAttrs:Yd,attrsComponent:e=>{const{id:t,attrs:n,handleAttrsUpdate:i}=e,{t:o}=Ie(),r=[{type:"switch",label:o("panel.details.lines.londonRail.limitedService"),oneLine:!0,isChecked:n.limitedService,onChange:e=>{n.limitedService=e,i(t,n)},minW:"full"},{type:"custom",label:o("panel.details.lines.londonRail.colorBackground"),component:v.jsx(rd,{type:ns.LondonRail,colorKey:"colorBackground",defaultTheme:Yd.colorBackground})},{type:"custom",label:o("panel.details.lines.londonRail.colorForeground"),component:v.jsx(rd,{type:ns.LondonRail,colorKey:"colorForeground",defaultTheme:Yd.colorForeground})}];return v.jsx(sa,{fields:r})},metadata:{displayName:"panel.details.lines.londonRail.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},ec={color:[Ma.London,"elizabeth","#9364cc",Ha.white]},tc={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=ec.color}=null!=i?i:ec,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsx("g",{id:t,onPointerDown:a,cursor:"pointer",children:v.jsx("path",{d:n,fill:"none",stroke:r[3],strokeWidth:"1.67",strokeLinecap:"round"})})},preComponent:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=ec.color}=null!=i?i:ec,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsx("g",{id:`${t}.pre`,onPointerDown:a,cursor:"pointer",children:v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5"})})},defaultAttrs:ec,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("color"),component:v.jsx(rd,{type:ns.LondonSandwich,defaultTheme:ec.color})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.londonSandwich.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},nc={color:[Ma.London,"rail","#d6ae00",Ha.white]},ic={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=nc.color}=null!=i?i:nc,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsxs("g",{id:t,onPointerDown:a,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5",strokeLinecap:"round"}),v.jsx("path",{d:n,fill:"none",stroke:r[3],strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"0.001 6"})]})},defaultAttrs:nc,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("color"),component:v.jsx(rd,{type:ns.LondonLutonAirportDART,defaultTheme:nc.color})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.londonLutonAirportDART.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},oc={color:[Ma.London,"dangleway","#dc241f",Ha.white]},rc={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=oc.color}=null!=i?i:oc,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsxs("g",{id:t,onPointerDown:a,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5"}),v.jsx("path",{d:n,fill:"none",stroke:"white",strokeWidth:"3"}),v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"1"})]})},defaultAttrs:oc,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("color"),component:v.jsx(rd,{type:ns.LondonIFSCloudCableCar,defaultTheme:oc.color})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.londonIFSCloudCableCar.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},ac={color:[Ma.Guangzhou,"ir","#2559a8",Ha.white]},sc={component:e=>{const{id:t,path:n,styleAttrs:i,handlePointerDown:o}=e,{color:r=ac.color}=null!=i?i:ac,a=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsxs("g",{id:t,onPointerDown:a,cursor:"pointer",children:[v.jsx("path",{d:n,fill:"none",stroke:r[2],strokeWidth:"5",strokeLinecap:"round"}),v.jsx("path",{d:n,fill:"none",stroke:r[3],strokeWidth:"2.5",strokeDasharray:"7.5"})]})},defaultAttrs:ac,attrsComponent:()=>{},metadata:{displayName:"panel.details.lines.guangdongIntercityRailway.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},lc={color:[Ma.Chongqing,"cq1","#E4002B",Ha.white]},dc={component:e=>{const{id:t,path:n,styleAttrs:i,newLine:o,handlePointerDown:r}=e,{color:a=lc.color}=null!=i?i:lc,s=Pe.useCallback((e=>r(t,e)),[t,r]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:a[2],strokeWidth:"8",strokeLinecap:"round",cursor:"pointer",onPointerDown:o?void 0:s,pointerEvents:o?"none":void 0})},defaultAttrs:lc,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("color"),component:v.jsx(rd,{type:ns.ChongqingRTLoop,defaultTheme:lc.color})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.chongqingRTLoop.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},cc={color:[Ma.Chongqing,"cq1","#E4002B",Ha.white]},uc={component:e=>{const{id:t,path:n,styleAttrs:i,newLine:o,handlePointerDown:r}=e,{color:a=cc.color}=null!=i?i:cc,s=Pe.useCallback((e=>r(t,e)),[t,r]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:a[2],strokeWidth:"3",strokeLinecap:"round",cursor:"pointer",onPointerDown:o?void 0:s,pointerEvents:o?"none":void 0})},defaultAttrs:cc,attrsComponent:e=>{const{t:t}=Ie(),n=[{type:"custom",label:t("color"),component:v.jsx(rd,{type:ns.ChongqingRTLineBadge,defaultTheme:cc.color})}];return v.jsx(sa,{fields:n})},metadata:{displayName:"panel.details.lines.chongqingRTLineBadge.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},hc={component:e=>{const{id:t,path:n,newLine:i,handlePointerDown:o}=e,r=Pe.useCallback((e=>o(t,e)),[t,o]);return v.jsx("path",{id:t,d:n,fill:"none",stroke:"#b4b4b5",strokeWidth:"5",strokeDasharray:"6 5",cursor:"pointer",onPointerDown:i?void 0:r,pointerEvents:i?"none":void 0})},attrsComponent:()=>{},defaultAttrs:{},metadata:{displayName:"panel.details.lines.chengduRTOutsideFareGates.displayName",supportLinePathType:[ts.Diagonal,ts.Perpendicular,ts.RotatePerpendicular]}},pc=p("p",{[ts.Diagonal]:Vl,[ts.Perpendicular]:ql,[ts.RotatePerpendicular]:Kl,[ts.Simple]:os}),gc=p("aC",{[ns.SingleColor]:sd,[ns.ShmetroVirtualInt]:ld,[ns.ShanghaiSuburbanRailway]:cd,[ns.GzmtrVirtualInt]:ud,[ns.GZMTRLoop]:pd,[ns.ChinaRailway]:md,[ns.BjsubwaySingleColor]:yd,[ns.BjsubwayTram]:vd,[ns.BjsubwayDotted]:jd,[ns.DualColor]:Nd,[ns.River]:kd,[ns.MTRRaceDays]:Td,[ns.MTRLightRail]:Cd,[ns.MTRUnpaidArea]:Ld,[ns.MTRPaidArea]:Od,[ns.MRTUnderConstruction]:Ed,[ns.MRTSentosaExpress]:Pd,[ns.MRTTapeOut]:$d,[ns.JREastSingleColor]:Dd,[ns.JREastSingleColorPattern]:Vd,[ns.LRTSingleColor]:qd,[ns.LondonTubeTerminal]:Zd,[ns.LondonTubeInternalInt]:Jd,[ns.LondonTube10MinWalk]:Kd,[ns.LondonRail]:Xd,[ns.LondonSandwich]:tc,[ns.LondonLutonAirportDART]:ic,[ns.LondonIFSCloudCableCar]:rc,[ns.GuangdongIntercityRailway]:sc,[ns.ChongqingRTLoop]:dc,[ns.ChongqingRTLineBadge]:uc,[ns.ChengduRTOutsideFareGates]:hc}),mc=p("N",(async()=>JSON.stringify((await lo((async()=>{const{default:e}=await f.import("./tutorial-legacy-C2nbOkkn.js");return{default:e}}))).default))),fc=p("A",(async e=>{let t=!1;e||(e=await mc(),t=!0);let n=JSON.parse(e);"version"in n&&Number.isInteger(n.version)||(n=JSON.parse(await mc()),t=!0);let i=Number(n.version),o=JSON.stringify(n);for(;i in bc;)o=bc[i](o),i=Number(JSON.parse(o).version),t=!0;return t&&(console.warn(`Upgrade save from version: ${n.version} to version: ${i}`),localStorage.setItem(ja.PARAM_BACKUP,e)),o})),yc=p("s",(e=>{const{present:t,past:n,future:i}=e,o=g(g({},h(e,c)),{},{graph:t,version:53});return JSON.stringify(o)})),bc={0:e=>{var t;return JSON.stringify({version:1,graph:null===(t=JSON.parse(e))||void 0===t?void 0:t.graph,svgViewBoxZoom:100,svgViewBoxMin:{x:0,y:0}})},1:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&t.type!==Ql.GzmtrInt)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i&&"transfer"in i&&delete i.transfer,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:2,graph:n.export()}))},2:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn"))).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);"middle"===(null==i?void 0:i.nameOffsetX)&&"middle"===(null==i?void 0:i.nameOffsetY)&&(i.nameOffsetX="right",i.nameOffsetY="top"),"up"===(null==i?void 0:i.nameOffsetY)&&(i.nameOffsetY="top"),n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:3,graph:n.export()}))},3:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterEdges(((e,t,n,i,o,r,a)=>e.startsWith("line"))).forEach((e=>{const t=n.getEdgeAttribute(e,"color");n.removeEdgeAttribute(e,"color"),n.mergeEdgeAttributes(e,{style:ns.SingleColor,[ns.SingleColor]:{color:t}})})),n.filterEdges(((e,t,n,i,o,r,a)=>e.startsWith("misc_edge"))).forEach((e=>{const t=`line_${es(10)}`,[i,o]=n.extremities(e),r=n.getEdgeAttribute(e,"type"),a=r;n.addDirectedEdgeWithKey(t,i,o,{visible:!0,zIndex:0,type:ts.Simple,[r]:structuredClone(pc[ts.Simple].defaultAttrs),style:a,[a]:structuredClone(gc[a].defaultAttrs),reconcileId:""}),n.dropEdge(e)})),JSON.stringify(g(g({},t),{},{version:4,graph:n.export()}))},4:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&(t.type===Ql.GzmtrBasic||t.type===Ql.GzmtrInt))).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.open=!0,i.secondaryNames=["",""],n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:5,graph:n.export()}))},5:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterEdges(((e,t,n,i,o,r,a)=>e.startsWith("line")&&t.type===ts.Simple)).forEach((e=>{var t;const i=null!==(t=n.getEdgeAttribute(e,ts.Simple))&&void 0!==t?t:{offset:0};i.offset=0,n.mergeEdgeAttributes(e,{[ts.Simple]:i})})),JSON.stringify(g(g({},t),{},{version:6,graph:n.export()}))},6:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&t.type===Ql.GzmtrBasic)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.tram=!1,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:7,graph:n.export()}))},7:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:8})),8:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:9})),9:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:10})),10:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("misc_node")&&t.type===as.Text)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.color=[Ma.Shanghai,"jsr","#000000",Ha.white],n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:11,graph:n.export()}))},11:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:12})),12:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("misc_node")&&t.type===as.Text)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.rotate=0,i.italic=!1,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:13,graph:n.export()}))},13:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:14})),14:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:15})),15:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("misc_node")&&t.type===as.Text)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.italic=i.italic?"italic":"normal",i.bold="normal",n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:16,graph:n.export()}))},16:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("misc_node")&&t.type===as.Facilities)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);let o=0;switch(i.type){case"airport":case"maglev":case"disney":case"railway":o+=12.5;break;case"hsr":case"airport_hk":case"disney_hk":o+=9.5}n.updateNodeAttribute(e,"y",(e=>(null!=e?e:0)+o))})),JSON.stringify(g(g({},t),{},{version:17,graph:n.export()}))},17:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:18})),18:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:19})),19:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:20})),20:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:21})),21:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:22})),22:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:23})),23:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:24})),24:e=>{const t=JSON.parse(e),n=new no;return n.import(t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&t.type===Ql.GzmtrInt||e.startsWith("misc_node")&&t.type===as.GzmtrLineBadge)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.tram=!1,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:25,graph:n.export()}))},25:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:26})),26:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("misc_node")&&t.type===as.GzmtrLineBadge)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.span=!0,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:27,graph:n.export()}))},27:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&t.type===Ql.GzmtrInt)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);for(let n=0;n<i.transfer.length;n+=1)for(let e=0;e<i.transfer[n].length;e+=1)i.transfer[n][e].push("gz");n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:28,graph:n.export()}))},28:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:29})),29:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:30})),30:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:31})),31:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterEdges(((e,t)=>t.style===ns.ChinaRailway)).forEach((e=>{const t=n.getEdgeAttributes(e)[ns.ChinaRailway];n.mergeEdgeAttributes(e,{[ns.ChinaRailway]:g(g({},t),{},{color:[Ma.Shanghai,"jsr","#000000",Ha.white]})})})),JSON.stringify(g(g({},t),{},{version:32,graph:n.export()}))},32:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:33})),33:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.forEachDirectedEdge((e=>{n.setEdgeAttribute(e,"parallelIndex",-1),n.updateEdgeAttribute(e,"zIndex",(e=>Math.max(-10,(null!=e?e:0)-5)))})),n.forEachNode((e=>{n.updateNodeAttribute(e,"zIndex",(e=>Math.min(10,(null!=e?e:0)+5)))})),JSON.stringify(g(g({},t),{},{version:34,graph:n.export()}))},34:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:35})),35:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:36})),36:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:37})),37:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:38})),38:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:39})),39:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("misc_node")&&t.type===as.Facilities)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);"qingdao_airport"===i.type?i.type="airport_qingdao":"qingdao_coach_station"===i.type?i.type="coach_station_qingdao":"qingdao_cruise_terminal"===i.type?i.type="cruise_terminal_qingdao":"qingdao_railway"===i.type?i.type="railway_qingdao":"qingdao_tram"===i.type&&(i.type="tram_qingdao"),n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:40,graph:n.export()}))},40:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:41})),41:e=>{const t=JSON.parse(e),n=new no;n.import(null==t?void 0:t.graph);const i=e=>e.map((e=>e.replaceAll("\\","\n")));return n.forEachNode(((e,t)=>{const o=n.getNodeAttribute(e,"type");let r;(o===Ql.BjsubwayBasic||o===Ql.BjsubwayInt||o===Ql.FoshanMetroBasic||o===Ql.GuangdongIntercityRailway||o===Ql.GzmtrBasic||o===Ql.GzmtrInt||o===Ql.JREastBasic||o===Ql.JREastImportant||o===Ql.KunmingRTBasic||o===Ql.KunmingRTInt||o===Ql.MRTBasic||o===Ql.MRTInt||o===Ql.MTR||o===Ql.ShanghaiSuburbanRailway||o===Ql.ShmetroBasic2020||o===Ql.ShmetroBasic||o===Ql.ShmetroInt||o===Ql.ShmetroOutOfSystemInt||o===Ql.SuzhouRTBasic||o===Ql.SuzhouRTInt||o===Ql.TokyoMetroBasic||o===Ql.TokyoMetroInt)&&(r=i(t[o].names)),r&&(t[o].names=r,n.mergeNodeAttributes(e,t))})),JSON.stringify(g(g({},t),{},{version:42,graph:n.export()}))},42:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&t.type===Ql.GzmtrInt2024)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.columns=2,i.topHeavy=!1,i.osiPosition="none",i.preferVertical&&2===i.transfer.flat().length&&(i.columns=1),delete i.preferVertical,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:43,graph:n.export()}))},43:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:44})),44:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&t.type===Ql.ChongqingRTBasic)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.isLoop=!1,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:45,graph:n.export()}))},45:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&t.type===Ql.LondonTubeBasic)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.terminalNameRotate=i.rotate,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:46,graph:n.export()}))},46:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&t.type===Ql.ChongqingRTInt)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.textDistance=["near","near"],n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:47,graph:n.export()}))},47:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:48})),48:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("misc_node")&&t.type===as.Text)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.outline=0,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:49,graph:n.export()}))},49:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&t.type===Ql.ChongqingRTInt2021)).forEach((e=>{const t=n.getNodeAttribute(e,"type"),i=n.getNodeAttribute(e,t);i.color=i.rapidColor,i.rapidColor=void 0,n.mergeNodeAttributes(e,{[t]:i})})),JSON.stringify(g(g({},t),{},{version:50,graph:n.export()}))},50:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:51})),51:e=>JSON.stringify(g(g({},JSON.parse(e)),{},{version:52})),52:e=>{const t=JSON.parse(e),n=new no;return n.import(null==t?void 0:t.graph),n.filterNodes(((e,t)=>e.startsWith("stn")&&"sh-sub-rwy"===t.type)).forEach((e=>{n.setNodeAttribute(e,"type",Ql.ShanghaiSuburbanRailway);const t=n.getNodeAttribute(e,"sh-sub-rwy");n.setNodeAttribute(e,Ql.ShanghaiSuburbanRailway,t),n.removeNodeAttribute(e,"sh-sub-rwy")})),n.filterNodes(((e,t)=>e.startsWith("stn")&&"gd-intercity-rwy"===t.type)).forEach((e=>{n.setNodeAttribute(e,"type",Ql.GuangdongIntercityRailway);const t=n.getNodeAttribute(e,"gd-intercity-rwy");n.setNodeAttribute(e,Ql.GuangdongIntercityRailway,t),n.removeNodeAttribute(e,"gd-intercity-rwy")})),JSON.stringify(g(g({},t),{},{version:53,graph:n.export()}))}};He();const vc=Ue({account:Fa,app:cl,param:vl,runtime:Fl}),wc=((e={})=>Ve({reducer:vc,middleware:e=>e({serializableCheck:!1}),preloadedState:e}))();wc.subscribe((async()=>{await(async e=>{if(!Za){const e=(new no).export();Za=await qa(JSON.stringify(e)),Kn.debug(`Default graph hash: ${Za}`)}const t=await qa(JSON.stringify(e));Qa&&Qa!==Za&&Qa!==t&&(Kn.debug(`Notify RMP save change, hash: ${t}`),Ka.postMessage({type:"SAVE_CHANGED",key:ja.PARAM,from:"rmp"})),Qa=t})(wc.getState().param.present),localStorage.setItem(ja.PARAM,yc(wc.getState().param)),localStorage.setItem(ja.APP,JSON.stringify(wc.getState().app)),localStorage.setItem(ja.LOGIN_STATE,JSON.stringify(wc.getState().account))}));const xc=p("c",(()=>Fe())),Nc=p("e",We),Sc=Pe.lazy((()=>lo((()=>f.import("./page-header-legacy-LMekwUP9.js"))))),kc=Pe.lazy((()=>lo((()=>f.import("./tools-legacy-B_6RTUNe.js").then((e=>e.t)))))),Rc=Pe.lazy((()=>lo((()=>f.import("./svg-wrapper-legacy-CVeuf5mQ.js"))))),Tc=Pe.lazy((()=>lo((()=>f.import("./details-legacy-BM69kYv-.js"))))),_c=Pe.lazy((()=>lo((()=>f.import("./rmg-palette-app-clip-legacy-vBYe8_hJ.js")))));function Cc(){const e=xc(),{paletteAppClip:{input:t}}=Nc((e=>e.runtime)),{t:n}=Ie(),[i,o]=Pe.useState(!1);return Pe.useEffect((()=>{Jn.isStandaloneWindow()&&!window.localStorage.getItem(ja.DO_NOT_SHOW_RMT_MSG)&&o(!0)}),[]),v.jsx(_a,{children:v.jsx(ca,{children:v.jsxs(Pe.Suspense,{fallback:v.jsx("p",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:"Rail Map Painter protocol... checked"}),children:[v.jsx(Sc,{}),i&&v.jsxs(ce,{status:"info",variant:"solid",size:"xs",pl:3,pr:1,py:1,zIndex:"1",children:[v.jsx(ue,{}),v.jsxs(ae,{children:[v.jsx(de,{href:"/?app=rmp",isExternal:!0,fontWeight:"bold",children:n("rmtPromotion")})," ",v.jsx(de,{as:"button",ml:"auto",textDecoration:"underline",onClick:()=>o(!1),children:n("close")})," | ",v.jsx(de,{as:"button",textDecoration:"underline",onClick:()=>{o(!1),window.localStorage.setItem(ja.DO_NOT_SHOW_RMT_MSG,"true")},children:n("noShowAgain")})]})]}),v.jsx(Wr,{allowReset:!0,children:v.jsxs(O,{direction:"row",height:"100%",overflow:"hidden",sx:{position:"relative"},children:[v.jsx(kc,{}),v.jsx(Rc,{}),v.jsx(Tc,{})]})}),v.jsx(_c,{isOpen:!!t,onClose:()=>e(Il()),defaultTheme:t,onSelect:t=>e($l(t))})]})})})}const Lc=JSON.parse(null!==(Ke=localStorage.getItem(ja.LOGIN_STATE))&&void 0!==Ke?Ke:"{}"),Oc=JSON.parse(null!==(Qe=localStorage.getItem(ja.APP))&&void 0!==Qe?Qe:"{}"),Ac=localStorage.getItem(ja.PARAM);"telemetry"in Oc&&("app"in Oc.telemetry&&wc.dispatch(nl(Oc.telemetry.app)),"project"in Oc.telemetry&&wc.dispatch(il(Oc.telemetry.project))),"preference"in Oc&&("unlockSimplePathAttempts"in Oc.preference&&wc.dispatch(ol(Oc.preference.unlockSimplePathAttempts)),"toolsPanel"in Oc.preference&&"expand"in Oc.preference.toolsPanel&&wc.dispatch(rl(Oc.preference.toolsPanel.expand)),"autoParallel"in Oc.preference&&wc.dispatch(al(Oc.preference.autoParallel)),"randomStationsNames"in Oc.preference&&wc.dispatch(sl(Oc.preference.randomStationsNames)),"gridLines"in Oc.preference&&wc.dispatch(ll(Oc.preference.gridLines)),"snapLines"in Oc.preference&&wc.dispatch(dl(Oc.preference.snapLines))),"state"in Lc&&wc.dispatch(Ba(Lc.state)),"activeSubscriptions"in Lc&&wc.dispatch(Da(Lc.activeSubscriptions)),Jn.ready().then((async()=>{const e=await fc(Ac),t=JSON.parse(e),{version:n,graph:i}=t,o=h(t,u);window.graph=no.from(i);const r=g(g({},o),{},{present:i,past:[],future:[]});wc.dispatch(ml(r)),wc.dispatch(xl()),wc.dispatch(Nl()),so.createRoot(document.getElementById("root")).render(v.jsx(Pe.StrictMode,{children:v.jsx(qe,{store:wc,children:v.jsx(Je,{i18n:ys,children:v.jsx(Cc,{})})})})),Jn.injectUITools(),Xa(wc)}))}}}))}();
