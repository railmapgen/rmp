!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function t(t){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{};s%2?e(Object(r),!0).forEach(function(e){n(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./chakra-legacy-nXMG1WKf.js","./index-legacy-_2EZqIqj.js","./react-legacy-n6CMfwan.js","./change-types-legacy-BYP6E4mf.js","./misc-nodes-legacy-BUqENJvW.js"],function(e,n){"use strict";var s,r,i,a,l,o,c,d,u,h,p,g,y,f,m,b,j,S,O,C,x,v,T,w,P,L,k,E,W,D,N,M,z,_,F,I,R,B,K,q,A,U,Z,H,J;return{setters:[e=>{s=e.j,r=e.ah,i=e.M,a=e.ai,l=e.K,o=e.O,c=e.L,d=e.N,u=e.aI,h=e.aJ,p=e.aK,g=e.B,y=e.aL,f=e.aM,m=e.Q,b=e.v,j=e.az},e=>{S=e.c,O=e.e,C=e.w,x=e.x,v=e.y,T=e.q,w=e.aK,P=e.C,L=e.M,k=e.S,E=e.t,W=e.L,D=e.a2,N=e.$,M=e.R,z=e.a3,_=e.k},e=>{F=e.u,I=e.b},e=>{R=e.d,B=e.e,K=e.i,q=e.j,A=e.k,U=e.c,Z=e.l},e=>{H=e.s,J=e.h}],execute:function(){e("C",e=>{const{isOpen:n,onClose:Q,isSelect:$,filter:G}=e,{t:V}=F(),X=S(),{selected:Y}=O(e=>e.runtime),{preference:{autoParallel:ee,autoChangeStationType:te}}=O(e=>e.app),{activeSubscriptions:ne}=O(e=>e.account),se=I.useCallback(()=>{X(C(re.current.export())),X(x()),X(v())},[X,x,v,C]),re=I.useRef(window.graph),ie=t({any:V("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(T).map(([e,t])=>[e,V(t.metadata.displayName).toString()]))),ae=t({any:V("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(w).map(([e,t])=>[e,V(t.metadata.displayName).toString()]))),le=t({any:V("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(H).map(([e,t])=>[e,V(t.metadata.displayName).toString()]))),oe={id:"any",theme:[P.Other,"other","#ffffff",L.black],value:V("header.settings.procedures.changeType.any")},[ce,de]=I.useState(!1),[ue,he]=I.useState(0),[pe,ge]=I.useState(!1),[ye,fe]=I.useState("any"),[me,be]=I.useState(k.ShmetroBasic),[je,Se]=I.useState(!1),[Oe,Ce]=I.useState("any"),[xe,ve]=I.useState(E.SingleColor),[Te,we]=I.useState(!1),[Pe,Le]=I.useState("any"),[ke,Ee]=I.useState(W.Diagonal),[We,De]=I.useState(!1),[Ne,Me]=I.useState(oe),{theme:ze,requestThemeChange:_e}=D(),[Fe,Ie]=I.useState([]),Re=[{id:"changeZIndex",title:V("header.settings.procedures.changeZIndex"),onClose:()=>de(!ce),field:[{type:"select",label:V("panel.details.info.zIndex"),value:ue,options:Object.fromEntries(Array.from({length:21},(e,t)=>[t-10,(t-10).toString()])),onChange:e=>he(Number(e))}]},{id:"changeStationType",title:V("header.settings.procedures.changeStationType.title"),onClose:()=>ge(!pe),field:[{type:"select",label:V("header.settings.procedures.changeStationType.changeFrom"),options:le,value:ye,disabledOptions:[me],onChange:e=>fe(e)},{type:"select",label:V("header.settings.procedures.changeStationType.changeTo"),options:le,value:me,disabledOptions:["any",ye],onChange:e=>be(e)}]},{id:"changeLineStyleType",title:V("header.settings.procedures.changeLineStyleType.title"),onClose:()=>Se(!je),field:[{type:"select",label:V("header.settings.procedures.changeLineStyleType.changeFrom"),options:ae,value:Oe,disabledOptions:[xe],onChange:e=>Ce(e)},{type:"select",label:V("header.settings.procedures.changeLineStyleType.changeTo"),options:ae,value:xe,disabledOptions:["any",Oe],onChange:e=>ve(e)}]},{id:"changeLinePathType",title:V("header.settings.procedures.changeLinePathType.title"),onClose:()=>we(!Te),field:[{type:"select",label:V("header.settings.procedures.changeLinePathType.changeFrom"),options:ie,value:Pe,disabledOptions:[ke],onChange:e=>Le(e)},{type:"select",label:V("header.settings.procedures.changeLinePathType.changeTo"),options:ie,value:ke,disabledOptions:["any","simple",Pe],onChange:e=>Ee(e)}]},{id:"changeColor",title:V("header.settings.procedures.changeColor.title"),onClose:()=>De(!We),field:[{type:"custom",label:V("header.settings.procedures.changeColor.changeFrom"),component:s.jsx(N,{data:Fe,displayHandler:e=>s.jsx(M,{name:e.value,fg:e.theme[3],bg:e.theme[2],title:e.theme[1],sx:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"}}),filter:(e,t)=>t.id.toLowerCase().includes(e.toLowerCase())||Object.values(t.id).some(t=>t.toLowerCase().includes(e.toLowerCase())),value:Ne.value,onChange:e=>Me(e)})},{type:"custom",label:V("header.settings.procedures.changeColor.changeTo"),component:s.jsx(z,{theme:ze,onClick:_e})}]}];I.useEffect(()=>{n&&(de(!1),ge(!1),Se(!1),we(!1),De(!1),he(0),Ie([oe,...J(re.current,$?[...Y].filter(e=>e.startsWith("stn")||e.startsWith("misc_node")):re.current.nodes(),$?[...Y].filter(e=>e.startsWith("line")):re.current.edges()).map(e=>({id:e.toString(),theme:e,value:"other"===e[1]?e[2]:e[1]}))]),Me(oe))},[n]);return s.jsxs(r,{isOpen:n,onClose:Q,size:"md",scrollBehavior:"inside",children:[s.jsx(i,{}),s.jsxs(a,{children:[s.jsxs(l,{children:[s.jsx(o,{as:"b",fontSize:"xl",children:V($?"panel.details.multipleSelection.change":"header.settings.procedures.changeType.title")}),s.jsx(c,{})]}),s.jsx(d,{children:s.jsx(u,{allowMultiple:!0,children:Re.map(e=>s.jsxs(h,{children:[s.jsxs(p,{onClick:e.onClose,children:[s.jsx(g,{as:"span",flex:"1",textAlign:"left",children:s.jsx(o,{as:"b",fontSize:"md",children:e.title})}),s.jsx(y,{})]}),s.jsx(f,{pb:4,children:s.jsx(_,{fields:e.field,minW:270})})]},e.id))})}),s.jsxs(m,{children:[s.jsx(b,{colorScheme:"blue",variant:"outline",mr:"1",onClick:Q,children:V("cancel")}),s.jsx(j,{label:V("header.settings.pro"),isOpen:!ne.RMP_CLOUD,children:s.jsx(b,{colorScheme:"red",mr:"1",onClick:()=>{const e=null!=G&&G.includes("station")?[...Y].filter(e=>e.startsWith("stn")):$?[]:re.current.filterNodes(e=>e.startsWith("stn")),t=null!=G&&G.includes("misc-node")?[...Y].filter(e=>e.startsWith("misc_node")):$?[]:re.current.filterNodes(e=>e.startsWith("misc_node")),n=$?[...Y].filter(e=>e.startsWith("line")):re.current.edges();G&&!G.includes("station")||!pe||(R(re.current,ye,me,e),te&&e.forEach(e=>B(re.current,e))),G&&!G.includes("line")||!je||K(re.current,Oe,xe,ze,n),G&&!G.includes("line")||!Te||q(re.current,Pe,ke,n,ee),We&&(G&&!G.includes("line")||A(re.current,"any"===Ne.id?"any":Ne.theme,ze,n),(!G||G.includes("misc-node")||G.includes("station"))&&U(re.current,"any"===Ne.id?"any":Ne.theme,ze,e,t)),ce&&Z(re.current,!G||G.includes("station")?e:[],!G||G.includes("misc-node")?t:[],!G||G.includes("line")?n:[],ue),se(),Q()},isDisabled:!(ne.RMP_CLOUD&&(ce||pe||je||Te||We)),children:V("apply")})})]})]})]})})}}})}();
