!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function t(t){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{};s%2?e(Object(r),!0).forEach(function(e){n(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./chakra-legacy-BxCYkbHV.js","./index-legacy-BEk72lo6.js","./react-legacy-DcrIyQlh.js","./change-types-legacy-C6Jfgcny.js","./master-manager-legacy-B95JlrdV.js"],function(e,n){"use strict";var s,r,a,i,l,o,c,d,u,h,p,g,y,f,m,b,j,S,O,C,x,v,T,w,P,L,k,E,W,D,N,z,I,M,_,F,R,B,q,A,H,K,U,Z,J;return{setters:[e=>{s=e.j,r=e.ah,a=e.M,i=e.ai,l=e.K,o=e.O,c=e.L,d=e.N,u=e.aH,h=e.aI,p=e.aJ,g=e.B,y=e.aK,f=e.aL,m=e.Q,b=e.v,j=e.ay},e=>{S=e.c,O=e.e,C=e.x,x=e.y,v=e.z,T=e.t,w=e.aI,P=e.C,L=e.M,k=e.S,E=e.q,W=e.L,D=e.$,N=e.Y,z=e.R,I=e.a0,M=e.k},e=>{_=e.u,F=e.b},e=>{R=e.f,B=e.c,q=e.g,A=e.h,H=e.i,K=e.j,U=e.k},e=>{Z=e.s,J=e.g}],execute:function(){e("C",e=>{const{isOpen:n,onClose:Q,isSelect:Y,filter:$}=e,{t:G}=_(),V=S(),{selected:X}=O(e=>e.runtime),{preference:{autoParallel:ee,autoChangeStationType:te}}=O(e=>e.app),{activeSubscriptions:ne}=O(e=>e.account),se=F.useCallback(()=>{V(C(re.current.export())),V(x()),V(v())},[V,x,v,C]),re=F.useRef(window.graph),ae=t({any:G("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(T).map(([e,t])=>[e,G(t.metadata.displayName).toString()]))),ie=t({any:G("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(w).map(([e,t])=>[e,G(t.metadata.displayName).toString()]))),le=t({any:G("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(Z).map(([e,t])=>[e,G(t.metadata.displayName).toString()]))),oe={id:"any",theme:[P.Other,"other","#ffffff",L.black],value:G("header.settings.procedures.changeType.any")},[ce,de]=F.useState(!1),[ue,he]=F.useState(0),[pe,ge]=F.useState(!1),[ye,fe]=F.useState("any"),[me,be]=F.useState(k.ShmetroBasic),[je,Se]=F.useState(!1),[Oe,Ce]=F.useState("any"),[xe,ve]=F.useState(E.SingleColor),[Te,we]=F.useState(!1),[Pe,Le]=F.useState("any"),[ke,Ee]=F.useState(W.Diagonal),[We,De]=F.useState(!1),[Ne,ze]=F.useState(oe),{theme:Ie,requestThemeChange:Me}=D(),[_e,Fe]=F.useState([]),Re=[{id:"changeZIndex",title:G("header.settings.procedures.changeZIndex"),onClose:()=>de(!ce),field:[{type:"select",label:G("panel.details.info.zIndex"),value:ue,options:Object.fromEntries(Array.from({length:21},(e,t)=>[t-10,(t-10).toString()])),onChange:e=>he(Number(e))}]},{id:"changeStationType",title:G("header.settings.procedures.changeStationType.title"),onClose:()=>ge(!pe),field:[{type:"select",label:G("header.settings.procedures.changeStationType.changeFrom"),options:le,value:ye,disabledOptions:[me],onChange:e=>fe(e)},{type:"select",label:G("header.settings.procedures.changeStationType.changeTo"),options:le,value:me,disabledOptions:["any",ye],onChange:e=>be(e)}]},{id:"changeLineStyleType",title:G("header.settings.procedures.changeLineStyleType.title"),onClose:()=>Se(!je),field:[{type:"select",label:G("header.settings.procedures.changeLineStyleType.changeFrom"),options:ie,value:Oe,disabledOptions:[xe],onChange:e=>Ce(e)},{type:"select",label:G("header.settings.procedures.changeLineStyleType.changeTo"),options:ie,value:xe,disabledOptions:["any",Oe],onChange:e=>ve(e)}]},{id:"changeLinePathType",title:G("header.settings.procedures.changeLinePathType.title"),onClose:()=>we(!Te),field:[{type:"select",label:G("header.settings.procedures.changeLinePathType.changeFrom"),options:ae,value:Pe,disabledOptions:[ke],onChange:e=>Le(e)},{type:"select",label:G("header.settings.procedures.changeLinePathType.changeTo"),options:ae,value:ke,disabledOptions:["any","simple",Pe],onChange:e=>Ee(e)}]},{id:"changeColor",title:G("header.settings.procedures.changeColor.title"),onClose:()=>De(!We),field:[{type:"custom",label:G("header.settings.procedures.changeColor.changeFrom"),component:s.jsx(N,{data:_e,displayHandler:e=>s.jsx(z,{name:e.value,fg:e.theme[3],bg:e.theme[2],title:e.theme[1],sx:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"}}),filter:(e,t)=>t.id.toLowerCase().includes(e.toLowerCase())||Object.values(t.id).some(t=>t.toLowerCase().includes(e.toLowerCase())),value:Ne.value,onChange:e=>ze(e)})},{type:"custom",label:G("header.settings.procedures.changeColor.changeTo"),component:s.jsx(I,{theme:Ie,onClick:Me})}]}];F.useEffect(()=>{n&&(de(!1),ge(!1),Se(!1),we(!1),De(!1),he(0),Fe([oe,...J(re.current,Y?[...X].filter(e=>e.startsWith("stn")||e.startsWith("misc_node")):re.current.nodes(),Y?[...X].filter(e=>e.startsWith("line")):re.current.edges()).map(e=>({id:e.toString(),theme:e,value:"other"===e[1]?e[2]:e[1]}))]),ze(oe))},[n]);return s.jsxs(r,{isOpen:n,onClose:Q,size:"md",scrollBehavior:"inside",children:[s.jsx(a,{}),s.jsxs(i,{children:[s.jsxs(l,{children:[s.jsx(o,{as:"b",fontSize:"xl",children:G(Y?"panel.details.multipleSelection.change":"header.settings.procedures.changeType.title")}),s.jsx(c,{})]}),s.jsx(d,{children:s.jsx(u,{allowMultiple:!0,children:Re.map(e=>s.jsxs(h,{children:[s.jsxs(p,{onClick:e.onClose,children:[s.jsx(g,{as:"span",flex:"1",textAlign:"left",children:s.jsx(o,{as:"b",fontSize:"md",children:e.title})}),s.jsx(y,{})]}),s.jsx(f,{pb:4,children:s.jsx(M,{fields:e.field,minW:270})})]},e.id))})}),s.jsxs(m,{children:[s.jsx(b,{colorScheme:"blue",variant:"outline",mr:"1",onClick:Q,children:G("cancel")}),s.jsx(j,{label:G("header.settings.pro"),isOpen:!ne.RMP_CLOUD,children:s.jsx(b,{colorScheme:"red",mr:"1",onClick:()=>{const e=null!=$&&$.includes("station")?[...X].filter(e=>e.startsWith("stn")):Y?[]:re.current.filterNodes(e=>e.startsWith("stn")),t=null!=$&&$.includes("misc-node")?[...X].filter(e=>e.startsWith("misc_node")):Y?[]:re.current.filterNodes(e=>e.startsWith("misc_node")),n=Y?[...X].filter(e=>e.startsWith("line")):re.current.edges();$&&!$.includes("station")||!pe||(R(re.current,ye,me,e),te&&e.forEach(e=>B(re.current,e))),$&&!$.includes("line")||!je||q(re.current,Oe,xe,Ie,n),$&&!$.includes("line")||!Te||A(re.current,Pe,ke,n,ee),We&&($&&!$.includes("line")||H(re.current,"any"===Ne.id?"any":Ne.theme,Ie,n),(!$||$.includes("misc-node")||$.includes("station"))&&K(re.current,"any"===Ne.id?"any":Ne.theme,Ie,e,t)),ce&&U(re.current,!$||$.includes("station")?e:[],!$||$.includes("misc-node")?t:[],!$||$.includes("line")?n:[],ue),se(),Q()},isDisabled:!(ne.RMP_CLOUD&&(ce||pe||je||Te||We)),children:G("apply")})})]})]})]})})}}})}();
