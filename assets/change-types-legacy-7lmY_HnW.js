!function(){function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function e(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach(function(t){r(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function r(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}System.register(["./index-legacy-yr5HtV1n.js","./master-manager-legacy-C38qimJJ.js"],function(t,r){"use strict";var n,o,i,s,u,a,c,l,g;return{setters:[t=>{n=t.S,o=t.d,i=t.aT,s=t.t,u=t.L,a=t.p,c=t.q,l=t.C},t=>{g=t.s}],execute:function(){const r=[n.ShmetroBasic2020,n.LondonTubeBasic,n.ShanghaiSuburbanRailway,n.OsakaMetro],d=t("d",(t,n,i)=>{const s=t.getNodeAttribute(n,"type"),u=structuredClone(t.getNodeAttribute(n,s).names);for(let e=0;e<Math.abs(g[i].defaultAttrs.names.length-u.length);e++)g[i].defaultAttrs.names.length>u.length?u.push("Stn"):u.pop();const a=e(e({},g[i].defaultAttrs),{},{names:u});Object.values(r).includes(s)&&Object.values(r).includes(i)||(a.nameOffsetX=t.getNodeAttribute(n,s).nameOffsetX,a.nameOffsetY=t.getNodeAttribute(n,s).nameOffsetY),o.has(i)&&o.has(s)&&(a.color=structuredClone(t.getNodeAttribute(n,s).color)),t.removeNodeAttribute(n,s),t.mergeNodeAttributes(n,{type:i,[i]:a})}),b=(t("f",(t,e,r,n)=>n.filter(r=>"any"===e||t.getNodeAttribute(r,"type")===e).forEach(e=>{d(t,e,r)})),t("a",(t,e,r,n)=>{const o=t.getEdgeAttribute(e,"type"),c=t.getEdgeAttribute(e,"style");if(i[c].metadata.supportLinePathType.includes(r)){const i=structuredClone(s[r].defaultAttrs);let c=-1;if(n&&r!==u.Simple){const[n,o]=t.extremities(e),s=i.startFrom;c=a(t,r,n,o,s)}t.setEdgeAttribute(e,"parallelIndex",c),t.removeEdgeAttribute(e,o),t.mergeEdgeAttributes(e,{type:r,[r]:i})}})),f=(t("h",(t,e,r,n,o)=>n.filter(r=>"any"===e||t.getEdgeAttribute(r,"type")===e).forEach(e=>{b(t,e,r,o)})),t("b",(t,e,r,n)=>{const s=t.getEdgeAttribute(e,"type"),u=t.getEdgeAttribute(e,"style");if(i[r].metadata.supportLinePathType.includes(s)){const s=t.getEdgeAttribute(e,"zIndex"),a=t.getEdgeAttribute(e,u);t.removeEdgeAttribute(e,u);const l=structuredClone(i[r].defaultAttrs);o.has(u)&&o.has(r)?l.color=a.color:o.has(r)&&n&&(l.color=n),t.mergeEdgeAttributes(e,{style:r,[r]:l}),r===c.River?t.setEdgeAttribute(e,"zIndex",-5):t.setEdgeAttribute(e,"zIndex",null!=s?s:0)}})),y=(t("g",(t,e,r,n,o)=>o.filter(r=>"any"===e||t.getEdgeAttribute(r,"style")===e).forEach(e=>{f(t,e,r,n)})),t("i",(t,e,r,n)=>n.filter(e=>o.has(t.getEdgeAttribute(e,"style"))).forEach(n=>{const o=t.getEdgeAttributes(n),i=o[o.style].color;("any"===e||i[0]==e[0]&&i[1]==e[1]&&i[2]==e[2]&&i[3]==e[3])&&t.mergeEdgeAttributes(n,{[o.style]:{color:r}})})),t("j",(t,e,r,n,o)=>{[...n,...o].forEach(n=>{const o=t.getNodeAttributes(n).type,i=t.getNodeAttribute(n,o);if(void 0!==i.color){const t=i.color;("any"===e||t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]&&t[3]==e[3])&&(i.color=r)}t.mergeNodeAttributes(n,{[o]:i})})})),p=(t("k",(t,e,r,n,o)=>{[...e,...r].forEach(e=>{t.setNodeAttribute(e,"zIndex",o)}),n.forEach(e=>{t.setEdgeAttribute(e,"zIndex",o)})}),(t,e,r)=>{const o=t.getNodeAttribute(e,"type"),i=(s=o).endsWith("-int")&&"basic"===r?s.replace(/-int$/,"-basic"):s.endsWith("-basic")&&"int"===r?s.replace(/-basic$/,"-int"):void 0;var s;if(i&&Object.values(n).includes(i))return i}),A=(t,e)=>{const r=t.directedEdges(e),n=new Set,i=[],s=t=>t[0]!==l.Other?t[0].toString()+"/"+t[1].toString():t[2].toString()+"/"+t[3].toString();for(const u of r){const e=t.getEdgeAttributes(u).style;if(!o.has(e))continue;const r=t.getEdgeAttributes(u)[e].color;n.has(s(r))||(n.add(s(r)),i.push(r))}return{lineColorStr:n,lineColor:i}},h=t("e",(t,e)=>{var r,n;if(!((t,e)=>{const r=t.getNodeAttribute(e,"type"),n=t.getNodeAttribute(e,r);return!(!n||!("transfer"in n))})(t,e))return!1;const{lineColorStr:o,lineColor:i}=A(t,e),s=t.getNodeAttribute(e,"type"),u=t=>t[0]!==l.Other?t[0].toString()+"/"+t[1].toString():t[2].toString()+"/"+t[3].toString(),a=null!==(r=null===(n=t.getNodeAttribute(e,s).transfer)||void 0===n?void 0:n.at(0))&&void 0!==r?r:[];const c=[...a.filter(t=>o.has(u(t))),...i.filter(t=>!a.find(e=>u(t)===u(e))).map(t=>[t[0],t[1],t[2],t[3],"",""])];return JSON.stringify(a)!==JSON.stringify(c)&&(((t,e,r,n)=>{const o=t.getNodeAttribute(e,r);o&&(o.transfer=[n],t.mergeNodeAttributes(e,{[r]:o}))})(t,e,s,c),!0)});t("c",(t,e)=>{((t,e)=>{const{lineColorStr:r,lineColor:n}=A(t,e);if(r.size>1){const r=p(t,e,"int");if(r)return d(t,e,r),!0}else if(1===r.size){const r=p(t,e,"basic");if(r)return d(t,e,r),y(t,"any",n[0],[e],[]),!0}})(t,e),h(t,e)})}}})}();
