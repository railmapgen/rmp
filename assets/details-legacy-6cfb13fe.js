!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,u,o=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);s=!0);}catch(c){l=!0,i=c}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./chakra-legacy-dae91ce7.js","./index-legacy-15f4f093.js","./react-legacy-57266490.js","./graph-legacy-6a88e122.js","./stations-legacy-55ef5d36.js","./change-types-legacy-6b45c82f.js","./clipboard-legacy-46b7f3e7.js","./misc-nodes-legacy-d66005f8.js"],(function(e,t){"use strict";var a,u,o,s,l,c,d,f,p,h,g,m,b,y,j,x,v,w,A,S,N,O,E,C,k,W,z,P,T,R,D,I,_,M,U,F,L,q,V,$,B,G;return{setters:[function(e){a=e.j,u=e.$,o=e.a0,s=e.a1,l=e.s,c=e.A,d=e.M,f=e.m,p=e.n,h=e.p,g=e.r,m=e.q,b=e.ae},function(e){y=e.c,j=e.j,x=e.d,v=e.D,w=e.ah,A=e.z,S=e.A,N=e.t,O=e.N,E=e.q,C=e.v,k=e.aj,W=e.ak,z=e.y,P=e.n,T=e.al,R=e.am,D=e.an,I=e.ao,_=e.p},function(e){M=e.b},function(e){U=e.b},function(e){F=e.s},function(e){L=e.d,q=e.e,V=e.f},function(e){$=e.u,B=e.e},function(e){G=e.m}],execute:function(){function t(){var e=y().t,t=j(),n=x((function(e){return e.runtime})).selected,r=M.useRef(window.graph);return a.jsxs(u,{children:[a.jsxs(o,{as:"h5",size:"sm",children:[e("panel.details.selected")," ",n.length]}),a.jsx(s,{m:"var(--chakra-space-1)",children:n.map((function(e){var n=r.current.getNodeAttributes(e),i=n.type,u=e.startsWith("stn")?n[i].names.join("/"):i;return a.jsx(l,{width:"100%",size:"sm",variant:"solid",onClick:function(){return function(e){t(v()),t(w(e))}(e)},overflow:"hidden",maxW:"270",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"ruby",children:u},e)}))})]})}function H(){var e=y().t,t=j(),n=M.useCallback((function(){t(A()),t(S(m.current.export()))}),[t,A,S]),r=x((function(e){return e.runtime})),u=r.selected,o=r.theme,s=u.at(0),m=M.useRef(window.graph),b=i(M.useState(!1),2),v=b[0],w=b[1],z=M.useRef(null),P=Object.fromEntries(Object.entries(N).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),T=i(M.useState(m.current.getEdgeAttribute(s,"type")),2),R=T[0],D=T[1],I=i(M.useState(void 0),2),_=I[0],U=I[1],F=Object.fromEntries(Object.entries(O).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),V=i(M.useState(m.current.getEdgeAttribute(s,"style")),2),$=V[0],B=V[1],G=i(M.useState(void 0),2),H=G[0],J=G[1],K=Object.values(E).filter((function(e){return!O[$].metadata.supportLinePathType.includes(e)})),Q=Object.values(C).filter((function(e){return!O[e].metadata.supportLinePathType.includes(R)})),X=function(e){e&&(_?(_&&(L(m.current,s,_),D(m.current.getEdgeAttribute(s,"type")),n()),U(void 0)):H&&(H&&(q(m.current,s,H,o),B(m.current.getEdgeAttribute(s,"style")),n()),J(void 0))),w(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(k,{label:e("panel.details.info.linePathType"),minW:"276",children:a.jsx(W,{options:P,disabledOptions:K,defaultValue:R,value:R,onChange:function(e){var t=e.target.value;U(t),w(!0)}})}),a.jsx(k,{label:e("panel.details.info.lineStyleType"),minW:"276",children:a.jsx(W,{options:F,disabledOptions:Q,defaultValue:$,value:$,onChange:function(e){var t=e.target.value;J(t),w(!0)}})}),a.jsx(c,{isOpen:v,leastDestructiveRef:z,onClose:function(){return X(!1)},children:a.jsx(d,{children:a.jsxs(f,{children:[a.jsx(p,{children:e("warning")}),a.jsx(h,{children:e("panel.details.changeLineTypeContent")}),a.jsxs(g,{children:[a.jsx(l,{ref:z,onClick:function(){return X(!1)},children:e("cancel")}),a.jsx(l,{ml:"2",colorScheme:"red",onClick:function(){return X(!0)},children:e("panel.details.changeType")})]})]})})})]})}function J(){var e=y().t,t=j(),n=M.useCallback((function(){t(z()),t(S(u.current.export()))}),[t,z,S]),r=x((function(e){return e.runtime})).selected.at(0),u=M.useRef(window.graph),o=i(M.useState(!1),2),s=o[0],m=o[1],b=M.useRef(null),v=i(M.useState(void 0),2),w=v[0],A=v[1],N=u.current.getNodeAttribute(r,"type"),O=Object.fromEntries(Object.entries(F).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),E=function(e){e&&w&&(V(u.current,r,w),n()),A(void 0),m(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(k,{label:e("panel.details.info.stationType"),minW:"276",children:a.jsx(W,{options:O,disabledOptions:[N],value:N,onChange:function(e){var t=e.target.value;A(t),m(!0)}})}),a.jsx(c,{isOpen:s,leastDestructiveRef:b,onClose:function(){return E(!1)},children:a.jsx(d,{children:a.jsxs(f,{children:[a.jsx(p,{children:e("warning")}),a.jsx(h,{children:e("panel.details.changeStationTypeContent")}),a.jsxs(g,{children:[a.jsx(l,{ref:b,onClick:function(){return E(!1)},children:e("cancel")}),a.jsx(l,{ml:"2",colorScheme:"red",onClick:function(){return E(!0)},children:e("panel.details.changeType")})]})]})})})]})}function K(){var e=y().t,n=j(),r=M.useCallback((function(){n(z()),n(A()),n(S(l.current.export()))}),[n,A,S]),i=x((function(e){return e.runtime})).selected,s=i.at(0),l=M.useRef(window.graph),c=[];return 0===i.length||(1===i.length?(c.push({type:"input",label:e("panel.details.info.id"),value:s,minW:276}),c.push({type:"select",label:e("panel.details.info.zIndex"),value:s?l.current.hasNode(s)?l.current.getNodeAttribute(s,"zIndex"):l.current.hasEdge(s)?l.current.getEdgeAttribute(s,"zIndex"):0:0,options:Object.fromEntries(Array.from({length:11},(function(e,t){return[t-5,(t-5).toString()]}))),onChange:function(e){return function(e){var t=Math.min(Math.max(e,-5),5);l.current.hasNode(s)&&l.current.setNodeAttribute(s,"zIndex",t),l.current.hasEdge(s)&&l.current.setEdgeAttribute(s,"zIndex",t),r()}(Number(e))}})):i.length>1&&c.push({type:"input",label:e("panel.details.info.type"),value:"multiple selection",minW:276})),a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.info.title")}),a.jsx(P,{fields:c,minW:130}),1===i.length&&s.startsWith("stn")&&l.current.hasNode(s)&&l.current.getNodeAttribute(s,"type")in F&&a.jsx(J,{}),1===i.length&&s.startsWith("line")&&l.current.hasEdge(s)&&l.current.getEdgeAttribute(s,"type")in N&&l.current.getEdgeAttribute(s,"style")in O&&a.jsx(H,{}),i.length>1&&a.jsx(t,{})]})}function Q(){var e=y().t,t=j(),n=x((function(e){return e.runtime})).selected,r=n.at(0),s=M.useRef(window.graph),c=i(M.useState("undefined"),2),d=c[0],f=c[1],p=i(M.useState("undefined"),2),h=p[0],g=p[1],m=i(M.useState("undefined"),2),b=m[0],A=m[1],S=i(M.useState("undefined"),2),N=S[0],O=S[1];M.useEffect((function(){if(null!=r&&r.startsWith("line")){var e=i(s.current.extremities(r),2),t=e[0],n=e[1];if(f(t),g(n),t.startsWith("stn")){var a,u,o=s.current.getNodeAttribute(t,"type");A(null!==(a=null===(u=s.current.getNodeAttribute(t,o))||void 0===u?void 0:u.names.at(0))&&void 0!==a?a:"undefined")}if(n.startsWith("stn")){var l,c,d=s.current.getNodeAttribute(n,"type");O(null!==(l=null===(c=s.current.getNodeAttribute(n,d))||void 0===c?void 0:c.names.at(0))&&void 0!==l?l:"undefined")}}}),[n]);var E=$((function(){t(v()),t(w(d))})),C=$((function(){t(v()),t(w(h))})),k=[{type:"custom",label:e("panel.details.lineExtremities.source"),component:a.jsx(l,{flex:1,size:"sm",variant:"link",onClick:E,children:d}),minW:"full"},{type:"input",label:e("panel.details.lineExtremities.sourceName"),value:b,minW:"full"},{type:"custom",label:e("panel.details.lineExtremities.target"),component:a.jsx(l,{flex:1,size:"sm",variant:"link",onClick:C,children:h}),minW:"full"},{type:"input",label:e("panel.details.lineExtremities.targetName"),value:N,minW:"full"}];return a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.lineExtremities.title")}),a.jsx(P,{fields:k,minW:130})]})}function X(){var e=y().t,t=j(),n=M.useCallback((function(){t(z()),t(A()),t(S(d.current.export()))}),[t,z,A,S]),r=x((function(e){return e.runtime})),s=r.selected,l=r.refresh.nodes,c=s.at(0),d=M.useRef(window.graph),f=i(M.useState({x:0,y:0}),2),p=f[0],h=f[1];M.useEffect((function(){if(null!=c&&c.startsWith("stn")||null!=c&&c.startsWith("misc_node_")){var e=d.current.getNodeAttribute(c,"x"),t=d.current.getNodeAttribute(c,"y");h({x:e,y:t})}}),[l,s]);var g=[{type:"input",label:e("panel.details.nodePosition.pos.x"),value:p.x.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){d.current.mergeNodeAttributes(c,{x:Number(e)}),n()}},{type:"input",label:e("panel.details.nodePosition.pos.y"),value:p.y.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){d.current.mergeNodeAttributes(c,{y:Number(e)}),n()}}];return a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.nodePosition.title")}),a.jsx(P,{fields:g,minW:130})]})}var Y=n(n({},F),G),Z=function(){var e,t=j(),n=x((function(e){return e.runtime})).selected,i=y().t,u=n.at(0),o=window.graph.getNodeAttribute(u,"type"),s=o in Y&&Y[o].attrsComponent,l=null!==(e=window.graph.getNodeAttribute(u,o))&&void 0!==e?e:{};return s?a.jsx(s,{id:u,attrs:l,handleAttrsUpdate:function(e,n){var i=window.graph.getNodeAttribute(e,"type");window.graph.mergeNodeAttributes(e,r({},i,n)),t(z()),t(S(window.graph.export()))}}):a.jsx(m,{fontSize:"xs",m:"var(--chakra-space-1)",children:i("panel.details.unknown.error",{category:i("panel.details.unknown.node")})})},ee=function(){var e,t,n=j(),i=x((function(e){return e.runtime})).selected,u=y().t,o=i.at(0),s=window.graph.getEdgeAttribute(o,"type"),l=null!==(e=window.graph.getEdgeAttribute(o,s))&&void 0!==e?e:{},c=s in N&&N[s].attrsComponent,d=window.graph.getEdgeAttribute(o,"style"),f=null!==(t=window.graph.getEdgeAttribute(o,d))&&void 0!==t?t:{},p=d in O&&O[d].attrsComponent;return a.jsxs(a.Fragment,{children:[c?a.jsx(c,{id:o,attrs:l,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},s,t)),n(A()),n(S(window.graph.export()))}}):a.jsx(m,{fontSize:"xs",m:"var(--chakra-space-1)",children:u("panel.details.unknown.error",{category:u("panel.details.unknown.linePath")})}),p?a.jsx(p,{id:o,attrs:f,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},d,t)),n(A()),n(S(window.graph.export()))}}):a.jsx(m,{fontSize:"xs",m:"var(--chakra-space-1)",children:u("panel.details.unknown.error",{category:u("panel.details.unknown.lineStyle")})})]})};e("default",(function(){var e=y().t,t=j(),n=M.useRef(window.graph),r=M.useCallback((function(){t(z()),t(A()),t(S(n.current.export()))}),[t,z,A,S]),i=x((function(e){return e.runtime})),s=i.selected,c=i.mode,d=s.at(0);return a.jsxs(T,{isOpen:s.length>0&&!c.startsWith("line"),width:300,header:"Dummy header",alwaysOverlay:!0,children:[a.jsx(R,{onClose:function(){return t(v())},children:e("panel.details.header")}),a.jsxs(D,{children:[a.jsx(K,{}),1===s.length&&n.current.hasNode(d)&&a.jsx(X,{}),1===s.length&&n.current.hasEdge(d)&&a.jsx(Q,{}),1===s.length&&a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.specificAttrsTitle")}),window.graph.hasNode(d)&&a.jsx(Z,{}),window.graph.hasEdge(d)&&a.jsx(ee,{})]})]}),a.jsx(I,{children:a.jsxs(b,{children:[1===s.length&&n.current.hasNode(s.at(0))&&a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return function(e){var r=structuredClone(n.current.getNodeAttributes(e));r.x+=50,r.y+=50;var i=e.startsWith("stn")?"stn_".concat(_(10)):"misc_node_".concat(_(10));n.current.addNode(i,r),t(z()),t(S(n.current.export()))}(s.at(0))},children:e("panel.details.footer.duplicate")}),a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return function(e){var t=new Set(e),r=U(n.current,t),i=B(n.current,t,new Set(r));navigator.clipboard.writeText(i)}(s)},children:e("panel.details.footer.copy")}),a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return e=s,t(v()),e.forEach((function(e){n.current.hasNode(e)?n.current.dropNode(e):n.current.hasEdge(e)&&n.current.dropEdge(e)})),void r();var e},children:e("panel.details.footer.remove")})]})})]})}))}}}))}();
